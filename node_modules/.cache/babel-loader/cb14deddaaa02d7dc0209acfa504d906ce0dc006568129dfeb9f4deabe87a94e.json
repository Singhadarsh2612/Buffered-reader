{"ast":null,"code":"/******/(function (modules) {\n  // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId]) {\n      /******/return installedModules[moduleId].exports;\n      /******/\n    }\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/i: moduleId,\n      /******/l: false,\n      /******/exports: {}\n      /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.l = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // identity function for calling harmony imports with the correct context\n  /******/\n  __webpack_require__.i = function (value) {\n    return value;\n  };\n  /******/\n  /******/ // define getter function for harmony exports\n  /******/\n  __webpack_require__.d = function (exports, name, getter) {\n    /******/if (!__webpack_require__.o(exports, name)) {\n      /******/Object.defineProperty(exports, name, {\n        /******/configurable: false,\n        /******/enumerable: true,\n        /******/get: getter\n        /******/\n      });\n      /******/\n    }\n    /******/\n  };\n  /******/\n  /******/ // getDefaultExport function for compatibility with non-harmony modules\n  /******/\n  __webpack_require__.n = function (module) {\n    /******/var getter = module && module.__esModule ? /******/function getDefault() {\n      return module['default'];\n    } : /******/function getModuleExports() {\n      return module;\n    };\n    /******/\n    __webpack_require__.d(getter, 'a', getter);\n    /******/\n    return getter;\n    /******/\n  };\n  /******/\n  /******/ // Object.prototype.hasOwnProperty.call\n  /******/\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(__webpack_require__.s = 3);\n  /******/\n}\n/************************************************************************/\n/******/)([(/* 0 */\n/***/function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  var _libs = __webpack_require__(2);\n  __webpack_require__(1);\n  exports.default = _libs.$;\n\n  /***/\n}), (/* 1 */\n/***/function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  var _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  /******/\n  (function (modules) {\n    // webpackBootstrap\n    /******/ // The module cache\n    /******/\n    var installedModules = {};\n    /******/\n    /******/ // The require function\n    /******/\n    function __webpack_require__(moduleId) {\n      /******/\n      /******/ // Check if module is in cache\n      /******/if (installedModules[moduleId]) /******/return installedModules[moduleId].exports;\n      /******/\n      /******/ // Create a new module (and put it into the cache)\n      /******/\n      var module = installedModules[moduleId] = {\n        /******/i: moduleId,\n        /******/l: false,\n        /******/exports: {}\n        /******/\n      };\n      /******/\n      /******/ // Execute the module function\n      /******/\n      modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n      /******/\n      /******/ // Flag the module as loaded\n      /******/\n      module.l = true;\n      /******/\n      /******/ // Return the exports of the module\n      /******/\n      return module.exports;\n      /******/\n    }\n    /******/\n    /******/\n    /******/ // expose the modules object (__webpack_modules__)\n    /******/\n    __webpack_require__.m = modules;\n    /******/\n    /******/ // expose the module cache\n    /******/\n    __webpack_require__.c = installedModules;\n    /******/\n    /******/ // identity function for calling harmony imports with the correct context\n    /******/\n    __webpack_require__.i = function (value) {\n      return value;\n    };\n    /******/\n    /******/ // define getter function for harmony exports\n    /******/\n    __webpack_require__.d = function (exports, name, getter) {\n      /******/if (!__webpack_require__.o(exports, name)) {\n        /******/Object.defineProperty(exports, name, {\n          /******/configurable: false,\n          /******/enumerable: true,\n          /******/get: getter\n          /******/\n        });\n        /******/\n      }\n      /******/\n    };\n    /******/\n    /******/ // getDefaultExport function for compatibility with non-harmony modules\n    /******/\n    __webpack_require__.n = function (module) {\n      /******/var getter = module && module.__esModule ? /******/function getDefault() {\n        return module['default'];\n      } : /******/function getModuleExports() {\n        return module;\n      };\n      /******/\n      __webpack_require__.d(getter, 'a', getter);\n      /******/\n      return getter;\n      /******/\n    };\n    /******/\n    /******/ // Object.prototype.hasOwnProperty.call\n    /******/\n    __webpack_require__.o = function (object, property) {\n      return Object.prototype.hasOwnProperty.call(object, property);\n    };\n    /******/\n    /******/ // __webpack_public_path__\n    /******/\n    __webpack_require__.p = \"\";\n    /******/\n    /******/ // Load entry module and return exports\n    /******/\n    return __webpack_require__(__webpack_require__.s = 72);\n    /******/\n  })(/************************************************************************/\n  /******/[/* 0 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _$ = true ? window.jQuery : require('jquery'),\n      _html2canvas = true ? window.html2canvas : require('html2canvas'),\n      _THREE = true ? window.THREE : require('three'),\n      _React = true ? window.React : require('react'),\n      _ReactDOM = true ? window.ReactDOM : require('react-dom'),\n      _PDFJS = true ? window.PDFJS : require('pdfjs'),\n      _tr = function _tr(s) {\n        return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;\n      };\n    exports.$ = _$;\n    exports.html2canvas = _html2canvas;\n    exports.THREE = _THREE;\n    exports.React = _React;\n    exports.ReactDOM = _ReactDOM;\n    exports.PDFJS = _PDFJS;\n    exports.tr = _tr;\n\n    /***/\n  }, /* 1 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _$ = true ? window.jQuery : require('jquery'),\n      _html2canvas = true ? window.html2canvas : require('html2canvas'),\n      _THREE = true ? window.THREE : require('three'),\n      _PDFJS = true ? window.PDFJS : require('pdfjs'),\n      _tr = function _tr(s) {\n        return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;\n      };\n    if (window.FB3D_LOCALE) {\n      window.iberezansky = _extends({}, window.iberezansky, {\n        tr: function tr(s) {\n          return (FB3D_LOCALE.dictionary || {})[s] || s;\n        }\n      });\n    }\n    exports.$ = _$;\n    exports.html2canvas = _html2canvas;\n    exports.THREE = _THREE;\n    exports.PDFJS = _PDFJS;\n    exports.tr = _tr;\n\n    /***/\n  }, /* 2 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var BaseMathUtils = function () {\n      function BaseMathUtils() {\n        _classCallCheck(this, BaseMathUtils);\n      }\n      BaseMathUtils.sum1 = function sum1(ka, a, kb, b) {\n        return [ka * a[0] + kb * b[0]];\n      };\n      BaseMathUtils.sum2 = function sum2(ka, a, kb, b) {\n        return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1]];\n      };\n      BaseMathUtils.sum3 = function sum3(ka, a, kb, b) {\n        return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2]];\n      };\n      BaseMathUtils.sum4 = function sum4(ka, a, kb, b) {\n        return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2], ka * a[3] + kb * b[3]];\n      };\n      BaseMathUtils.rk4 = function rk4(dy, t, dt, y) {\n        var sum = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : BaseMathUtils.sum[y.length - 1];\n        var k1 = dy(t, y),\n          k2 = dy(t + dt / 2, sum(1, y, dt / 2, k1)),\n          k3 = dy(t + dt / 2, sum(1, y, dt / 2, k2)),\n          k4 = dy(t + dt, sum(1, y, dt, k3));\n        return sum(1, y, dt / 6, sum(1, sum(1, k1, 2, k2), 1, sum(2, k3, 1, k4)));\n      };\n      BaseMathUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {\n        return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);\n      };\n      BaseMathUtils.interpolateLinear = function interpolateLinear(x, y, xi) {\n        var yi = void 0;\n        if (x[0] > x[1]) {\n          x = x.reverse();\n          y = y.reverse();\n        }\n        if (xi < x[0]) {\n          yi = y[0];\n        } else if (xi > x[1]) {\n          yi = y[1];\n        } else {\n          yi = BaseMathUtils.extrapolateLinear(x, y, xi);\n        }\n        return yi;\n      };\n      BaseMathUtils.calcScale = function calcScale(srcW, srcH, dstW, dstH) {\n        return Math.min(dstW / srcW, dstH / srcH);\n      };\n      BaseMathUtils.mulM = function mulM(a, b) {\n        var r = [];\n        for (var i = 0; i < a.length; ++i) {\n          r.push([]);\n          for (var j = 0; j < b[0].length; ++j) {\n            r[i][j] = 0;\n            for (var k = 0; k < b.length; ++k) {\n              r[i][j] += a[i][k] * b[k][j];\n            }\n          }\n        }\n        return r;\n      };\n      BaseMathUtils.transM = function transM(m) {\n        var r = [];\n        for (var i = 0; i < m.length; ++i) {\n          for (var j = 0; j < m[0].length; ++j) {\n            if (!r[j]) {\n              r[j] = [];\n            }\n            r[j][i] = m[i][j];\n          }\n        }\n        return r;\n      };\n      BaseMathUtils.mat = function mat(data) {\n        var s = 0;\n        for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var x = _ref;\n          s += x;\n        }\n        return s / data.length;\n      };\n      BaseMathUtils.disp = function disp(data) {\n        var M = BaseMathUtils.mat(data);\n        var s = 0;\n        for (var _iterator2 = data, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n          var x = _ref2;\n          s += (x - M) * (x - M);\n        }\n        return s / data.length;\n      };\n      BaseMathUtils.predict = function predict(data, num) {\n        var r = [],\n          l = data.length,\n          D = BaseMathUtils.disp(data);\n        if (D < l && l > 1) {\n          var am = [],\n            bm = [];\n          for (var i = 0; i < l; ++i) {\n            am.push([i, 1]);\n            bm.push([data[i]]);\n          }\n          var ta = BaseMathUtils.transM(am),\n            a = BaseMathUtils.mulM(ta, am),\n            b = BaseMathUtils.mulM(ta, bm),\n            d = a[0][0] * a[1][1] - a[1][0] * a[0][1],\n            p = [-(a[0][1] * b[1][0] - b[0][0] * a[1][1]) / d, (a[0][0] * b[1][0] - a[1][0] * b[0][0]) / d];\n          for (var _i3 = 0; _i3 < num; ++_i3) {\n            var v = Math.round(p[0] * (_i3 + l) + p[1]);\n            if (r.indexOf(v) === -1) {\n              r.push(v);\n            }\n          }\n        }\n        return r;\n      };\n      BaseMathUtils.getUnique = function getUnique() {\n        return Math.ceil(1e9 * Math.random());\n      };\n      BaseMathUtils.setSplinePoints = function setSplinePoints(spline, ps) {\n        if (spline.points.length !== ps.x.length) {\n          console.warn('setSplinePoints: bad points');\n        }\n        for (var i = 0; i < spline.points.length; ++i) {\n          spline.points[i].set(ps.x[i], ps.y[i], ps.z ? ps.z[i] : 0);\n        }\n      };\n      BaseMathUtils.mapl2L = function mapl2L(ls, len, n, f) {\n        var dL = len / (n - 1);\n        var L = 0;\n        for (var i = 0, d = ls[0]; i < ls.length - 1 && L < len + 0.1 * dL; ++i, d += ls[i]) {\n          if (Math.abs(L - d) < Math.abs(L - d - ls[i + 1])) {\n            f(i, L);\n            L += dL;\n          }\n        }\n        if (L < len + 0.1 * dL) {\n          console.warn('mapl2L: ls is not enought');\n        }\n      };\n      BaseMathUtils.det2 = function det2(a, b, c, d) {\n        return a * d - b * c;\n      };\n      BaseMathUtils.solve2Lin = function solve2Lin(a1, b1, a2, b2) {\n        var res = void 0;\n        var d = BaseMathUtils.det2(a1[0], a1[1], a2[0], a2[1]);\n        if (Math.abs(d) > BaseMathUtils.eps) {\n          var dx = BaseMathUtils.det2(b1, a1[1], b2, a2[1]),\n            dy = BaseMathUtils.det2(a1[0], b1, a2[0], b2);\n          res = {\n            x: dx / d,\n            y: dy / d\n          };\n        }\n        return res;\n      };\n      BaseMathUtils.isInsidePoly = function isInsidePoly(ps, p) {\n        var done = false,\n          ct = void 0;\n        for (var i = 0; i < ps.length; ++i) {\n          if (BaseMathUtils.v2dist(p, ps[i]) < BaseMathUtils.eps) {\n            ct = 1;\n            done = true;\n            break;\n          }\n        }\n        while (!done) {\n          done = true;\n          ct = 0;\n          var np = {\n              x: p.x + Math.random() - 0.5,\n              y: p.y + Math.random() - 0.5\n            },\n            rn = {\n              x: np.x - p.x,\n              y: np.y - p.y\n            },\n            a1 = [rn.y, -rn.x],\n            b1 = p.x * rn.y - p.y * rn.x;\n          for (var _i4 = 0; _i4 < ps.length; ++_i4) {\n            var p0 = ps[_i4],\n              p1 = ps[(_i4 + 1) % ps.length],\n              n = {\n                x: p1.x - p0.x,\n                y: p1.y - p0.y\n              },\n              a2 = [n.y, -n.x],\n              b2 = p0.x * n.y - p0.y * n.x,\n              ip = BaseMathUtils.solve2Lin(a1, b1, a2, b2);\n            if (ip) {\n              if (BaseMathUtils.v2dist(ip, p0) < BaseMathUtils.eps || BaseMathUtils.v2dist(ip, p1) < BaseMathUtils.eps) {\n                done = false;\n                break;\n              } else if (ip.x > Math.min(p0.x, p1.x) - BaseMathUtils.eps && ip.x < Math.max(p0.x, p1.x) + BaseMathUtils.eps && ip.y > Math.min(p0.y, p1.y) - BaseMathUtils.eps && ip.y < Math.max(p0.y, p1.y) + BaseMathUtils.eps) {\n                if (BaseMathUtils.v2dist(ip, p) < BaseMathUtils.eps) {\n                  ct = 1;\n                  break;\n                } else {\n                  var tn = {\n                    x: ip.x - p.x,\n                    y: ip.y - p.y\n                  };\n                  ct += tn.x * rn.x + tn.y * rn.y > 0;\n                }\n              }\n            }\n          }\n        }\n        return ct % 2;\n      };\n      BaseMathUtils.isInsideConvPoly = function isInsideConvPoly(ps, p) {\n        var sg = [0, 0];\n        for (var i = 0; i < ps.length; ++i) {\n          var p0 = ps[i],\n            p1 = ps[(i + 1) % ps.length],\n            a = {\n              x: p0.x - p.x,\n              y: p0.y - p.y\n            },\n            b = {\n              x: p1.x - p.x,\n              y: p1.y - p.y\n            };\n          ++sg[(a.x * b.y - a.y * b.x < 0) + 0];\n        }\n        return ~sg.indexOf(ps.length);\n      };\n      BaseMathUtils.v2len = function v2len(v2) {\n        return Math.sqrt(v2.x * v2.x + v2.y * v2.y);\n      };\n      BaseMathUtils.v2dist = function v2dist(v21, v22) {\n        return BaseMathUtils.v2len({\n          x: v22.x - v21.x,\n          y: v22.y - v21.y\n        });\n      };\n      BaseMathUtils.computeSquare = function computeSquare(ps) {\n        var a = [];\n        var p = 0;\n        for (var i = 0; i < ps.length; ++i) {\n          a.push(BaseMathUtils.v2dist(ps[i], ps[(i + 1) % ps.length]));\n          p += 0.5 * a[i];\n        }\n        return Math.sqrt(p * (p - a[0]) * (p - a[1]) * (p - a[2]));\n      };\n      BaseMathUtils.computeInterpCoefs = function computeInterpCoefs(tri, p) {\n        var s = BaseMathUtils.computeSquare(tri),\n          coefs = [],\n          l = tri.length;\n        for (var i = 0; i < l; ++i) {\n          coefs[i] = BaseMathUtils.computeSquare([p, tri[(i + 1) % l], tri[(i + 2) % l]]) / s;\n        }\n        return coefs;\n      };\n      return BaseMathUtils;\n    }();\n    BaseMathUtils.sum = [BaseMathUtils.sum1, BaseMathUtils.sum2, BaseMathUtils.sum3, BaseMathUtils.sum4];\n    BaseMathUtils.eps = 1e-4;\n    exports.default = BaseMathUtils;\n\n    /***/\n  }, /* 3 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _BaseMathUtils2 = __webpack_require__(2);\n    var _BaseMathUtils3 = _interopRequireDefault(_BaseMathUtils2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var MathUtils = function (_BaseMathUtils) {\n      _inherits(MathUtils, _BaseMathUtils);\n      function MathUtils() {\n        _classCallCheck(this, MathUtils);\n        return _possibleConstructorReturn(this, _BaseMathUtils.apply(this, arguments));\n      }\n      MathUtils.splitSpline = function splitSpline(spline, N) {\n        var o = {\n            len: 0,\n            ls: [0]\n          },\n          dl = 1 / N;\n        for (var i = 0; i <= N; ++i) {\n          var p = spline.getPoint(i * dl);\n          if (i) {\n            var d = MathUtils.v1.distanceTo(p);\n            o.len += d;\n            o.ls.push(d);\n          }\n          MathUtils.v1.copy(p);\n        }\n        return o;\n      };\n      MathUtils.getLinearIndeces = function getLinearIndeces(spline, n) {\n        var del = 5000,\n          dDel = 1 / del;\n        var ls = [0];\n        var l = 0;\n        for (var i = 0; i <= del; ++i) {\n          var p = spline.getPoint(i * dDel);\n          if (i) {\n            var d = MathUtils.v1.distanceTo(p);\n            l += d;\n            ls.push(d);\n          }\n          MathUtils.v1.copy(p);\n        }\n        ls.push(1e7);\n        var res = [],\n          dl = l / (n - 1);\n        for (var _i = 0, L = 0, _d = ls[0]; _i < ls.length - 1; ++_i, _d += ls[_i]) {\n          if (Math.abs(L - _d) < Math.abs(L - _d - ls[_i + 1])) {\n            res.push(_i * dDel);\n            L += dl;\n          }\n        }\n        return res;\n      };\n      MathUtils.refinePoly = function refinePoly(poly, maxDl) {\n        var res = [];\n        for (var i = 0; i < poly.length; ++i) {\n          var p0 = poly[i],\n            p1 = poly[(i + 1) % poly.length],\n            l = _BaseMathUtils3.default.v2dist(p0, p1),\n            n = Math.ceil(l / maxDl),\n            dl = l / n;\n          res.push(p0);\n          for (var j = 1; j < n; ++j) {\n            res.push(new _libs.THREE.Vector2(p0.x + j * dl * (p1.x - p0.x) / l, p0.y + j * dl * (p1.y - p0.y) / l));\n          }\n        }\n        return res;\n      };\n      return MathUtils;\n    }(_BaseMathUtils3.default);\n    MathUtils.v1 = new _libs.THREE.Vector3();\n    exports.default = MathUtils;\n\n    /***/\n  }, /* 4 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Utils = function () {\n      function Utils() {\n        _classCallCheck(this, Utils);\n      }\n      Utils.normalizeUrl = function normalizeUrl(url) {\n        function split(s) {\n          return s.replace(/\\\\/g, '/').split('/');\n        }\n        var base = split(window.location.href);\n        url = split(url);\n        if (base[2] === url[2]) {\n          url[0] = base[0];\n        }\n        return url.join('/');\n      };\n      Utils.extends = function _extends(der, base) {\n        for (var name in base) {\n          if (!der.hasOwnProperty(name)) {\n            der[name] = base[name];\n          }\n        }\n      };\n      Utils.defaultCmp = function defaultCmp(a, b) {\n        return a - b;\n      };\n      Utils.lowerBound = function lowerBound(a, x, cmp) {\n        cmp = cmp || Utils.defaultCmp;\n        var l = 0,\n          h = a.length - 1;\n        while (h - l > 1) {\n          var mid = Math.floor((l + h) / 2);\n          if (cmp(x, a[mid]) < 0) {\n            h = mid;\n          } else {\n            l = mid;\n          }\n        }\n        return cmp(x, a[h]) >= 0 ? h : l;\n      };\n      return Utils;\n    }();\n    exports.default = Utils;\n\n    /***/\n  }, /* 5 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _GraphUtils = __webpack_require__(7);\n    var _GraphUtils2 = _interopRequireDefault(_GraphUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var ImageBase = function () {\n      function ImageBase(context, width, height, color) {\n        _classCallCheck(this, ImageBase);\n        this.context = context;\n        this.wnd = context.wnd;\n        this.doc = context.doc;\n        this.element = context.element || context.doc.body;\n        this.c = context.renderCanvas || ImageBase.renderCanvas;\n        this.ctx = context.renderCanvasCtx || ImageBase.renderCanvasCtx;\n        this.resW = this.width = width;\n        this.resH = this.height = height;\n        this.color = color;\n      }\n      ImageBase.prototype.setResolution = function setResolution(res) {\n        this.resW = res.width;\n        this.resH = res.height;\n      };\n      ImageBase.prototype.dispose = function dispose() {};\n      ImageBase.prototype.renderBlankPage = function renderBlankPage() {\n        this.ctx.beginPath();\n        this.ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.color, 1);\n        this.ctx.rect(0, 0, this.c.width, this.c.height);\n        this.ctx.fill();\n      };\n      ImageBase.prototype.renderImage = function renderImage(image) {\n        this.pushCtx();\n        this.ctx.drawImage(image, 0, 0);\n        this.popCtx();\n      };\n      ImageBase.prototype.normToConv = function normToConv(p) {\n        return {\n          x: p.x * this.c.width,\n          y: (1 - p.y) * this.c.height\n        };\n      };\n      ImageBase.prototype.renderHit = function renderHit(poly) {\n        var ctx = this.ctx;\n        ctx.fillStyle = 'rgba(255,255,0,0.4)';\n        ctx.beginPath();\n        var p = this.normToConv(poly[0]);\n        ctx.moveTo(p.x, p.y);\n        for (var i = 1; i < poly.length; ++i) {\n          p = this.normToConv(poly[i]);\n          ctx.lineTo(p.x, p.y);\n        }\n        ctx.closePath();\n        ctx.fill();\n      };\n      ImageBase.prototype.pushCtx = function pushCtx() {\n        if (this.resW != this.c.width) {\n          this.c.width = this.resW;\n        }\n        if (this.resH != this.c.height) {\n          this.c.height = this.resH;\n        }\n        this.ctx.save();\n        this.ctx.scale(this.c.width / this.width, this.c.height / this.height);\n        return this.ctx;\n      };\n      ImageBase.prototype.popCtx = function popCtx() {\n        this.ctx.restore();\n      };\n      ImageBase.prototype.renderNotFoundPage = function renderNotFoundPage() {\n        this.renderBlankPage();\n      };\n      ImageBase.prototype.finishRender = function finishRender() {\n        if (this.onChange) {\n          this.onChange(this.c);\n        }\n      };\n      ImageBase.prototype.finishLoad = function finishLoad() {\n        if (this.onLoad) {\n          this.onLoad();\n        } else {\n          this.startRender();\n        }\n      };\n      ImageBase.prototype.getSimulatedDoc = function getSimulatedDoc() {\n        return undefined;\n      };\n      return ImageBase;\n    }();\n    ImageBase.renderCanvas = (0, _libs.$)('<canvas>')[0];\n    ImageBase.renderCanvasCtx = ImageBase.renderCanvas.getContext('2d');\n    exports.default = ImageBase;\n\n    /***/\n  }, /* 6 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var EventConverter = function () {\n      // virtuals\n      // getObject(e, data);\n      // getCallback(object);\n      // test(object1, object1);\n\n      function EventConverter(wnd, doc) {\n        _classCallCheck(this, EventConverter);\n        this.wnd = wnd;\n        this.doc = doc;\n        this.enabled = true;\n      }\n      EventConverter.prototype.setEnable = function setEnable(vl) {\n        if (!vl) {\n          if (this.mCapObject) {\n            this.notify(this.mCapObject, _libs.$.Event('mouseup'), 'mouseup');\n            this.mCapObject = undefined;\n          }\n          if (this.mHovObject) {\n            this.notify(this.mHovObject, _libs.$.Event('mouseout'), 'mouseout');\n            this.mHovObject = undefined;\n          }\n        }\n        this.enabled = vl;\n      };\n      EventConverter.prototype.getCallback = function getCallback(object) {\n        return undefined;\n      };\n      EventConverter.prototype.notify = function notify(object, e, type) {\n        var callback = this.getCallback(object);\n        if (callback) {\n          var props = _extends({}, e, {\n            type: type,\n            view: this.wnd\n          });\n          var jE = _libs.$.Event(type, props);\n          callback(jE, object);\n        }\n      };\n      EventConverter.prototype.convert = function convert(e, data) {\n        if (!this.enabled) return;\n        if (this.filter) {\n          e = this.filter(this.element, e);\n        }\n        var object = this.getObject(e, data),\n          notify = ~e.type.indexOf('touch') ? this.convertTouch(e, data, object) : this.convertMouse(e, data, object);\n        if (notify && object) {\n          this.notify(object, e, e.type);\n        }\n      };\n      EventConverter.prototype.convertTouch = function convertTouch(e, data, object) {\n        var notify = true;\n        switch (e.type) {\n          case 'touchstart':\n            {\n              if (this.tCapObject) {\n                this.notify(this.tCapObject, e, 'touchend');\n              }\n              this.tCapObject = object;\n              break;\n            }\n          case 'touchend':\n            {\n              if (this.tCapObject && !this.test(this.tCapObject, object)) {\n                this.notify(this.tCapObject, e, 'touchend');\n                notify = false;\n              } else if (object && this.test(this.tCapObject, object)) {\n                this.notify(object, e, 'touchtap');\n              }\n              this.tCapObject = undefined;\n              break;\n            }\n          case 'touchtap':\n            {\n              notify = false;\n              break;\n            }\n        }\n        return notify;\n      };\n      EventConverter.prototype.convertMouse = function convertMouse(e, data, object) {\n        var notify = true;\n        switch (e.type) {\n          case 'mousedown':\n            {\n              if (this.mCapObject) {\n                this.notify(this.mCapObject, e, 'mouseup');\n              }\n              this.mCapObject = object;\n              break;\n            }\n          case 'mouseup':\n            {\n              if (this.mCapObject && !this.test(this.mCapObject, object)) {\n                this.notify(this.mCapObject, e, 'mouseup');\n                notify = false;\n              }\n              break;\n            }\n          case 'click':\n            {\n              notify = this.test(this.mCapObject, object);\n              this.mCapObject = undefined;\n              break;\n            }\n          case 'mouseenter':\n          case 'mouseover':\n          case 'mousemove':\n            {\n              if (!this.test(this.mHovObject, object) && this.mHovObject) {\n                this.notify(this.mHovObject, e, 'mouseout');\n                this.mHovObject = undefined;\n              }\n              if (!this.mHovObject && object) {\n                this.notify(object, e, 'mouseover');\n                this.mHovObject = object;\n              }\n              notify = e.type === 'mousemove';\n              break;\n            }\n          case 'mouseleave':\n          case 'mouseout':\n            {\n              if (this.mHovObject) {\n                this.notify(this.mHovObject, e, 'mouseout');\n                this.mHovObject = undefined;\n              }\n              notify = false;\n              break;\n            }\n        }\n        return notify;\n      };\n      return EventConverter;\n    }();\n    exports.default = EventConverter;\n\n    /***/\n  }, /* 7 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var GraphUtils = function () {\n      function GraphUtils() {\n        _classCallCheck(this, GraphUtils);\n      }\n      GraphUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {\n        return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);\n      };\n      GraphUtils.interpolate01 = function interpolate01(y1, y2, t) {\n        return GraphUtils.extrapolateLinear([0, 1], [y1, y2], t);\n      };\n      GraphUtils.getColorBytes = function getColorBytes(color) {\n        return [color >> 16 & 0xFF, color >> 8 & 0xFF, color & 0xFF];\n      };\n      GraphUtils.inverseColor = function inverseColor(color) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        var bs = GraphUtils.getColorBytes(color),\n          ibs = [0xFF - bs[0], 0xFF - bs[1], 0xFF - bs[2]],\n          nbs = [Math.round(GraphUtils.interpolate01(bs[0], ibs[0], t)), Math.round(GraphUtils.interpolate01(bs[1], ibs[1], t)), Math.round(GraphUtils.interpolate01(bs[2], ibs[2], t))];\n        return GraphUtils.bytes2Color(nbs);\n      };\n      GraphUtils.color2Rgba = function color2Rgba(color, a) {\n        return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color), a);\n      };\n      GraphUtils.bytes2Rgba = function bytes2Rgba(bs, a) {\n        return 'rgba(' + bs.join(',') + ',' + a + ')';\n      };\n      GraphUtils.bytes2Color = function bytes2Color(bs) {\n        return bs[2] | bs[1] << 8 | bs[0] << 16;\n      };\n      return GraphUtils;\n    }();\n    exports.default = GraphUtils;\n\n    /***/\n  }, /* 8 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _Cache = __webpack_require__(14);\n    var _Cache2 = _interopRequireDefault(_Cache);\n    var _BlankImage = __webpack_require__(43);\n    var _BlankImage2 = _interopRequireDefault(_BlankImage);\n    var _StaticImage = __webpack_require__(59);\n    var _StaticImage2 = _interopRequireDefault(_StaticImage);\n    var _PdfImage = __webpack_require__(57);\n    var _PdfImage2 = _interopRequireDefault(_PdfImage);\n    var _InteractiveImage = __webpack_require__(51);\n    var _InteractiveImage2 = _interopRequireDefault(_InteractiveImage);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var ImageFactory = function () {\n      function ImageFactory(context, cache) {\n        _classCallCheck(this, ImageFactory);\n        this.context = context;\n        this.cache = cache || new _Cache2.default();\n      }\n      ImageFactory.prototype.build = function build(info) {\n        var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var widthTexels = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 210;\n        var heightTexels = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 297;\n        var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0xFFFFFF;\n        var injector = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n        var image = void 0;\n        switch (info.type) {\n          case 'html':\n            {\n              image = new _InteractiveImage2.default(this.context, widthTexels, heightTexels, color, info.src, this.cache, injector);\n              break;\n            }\n          case 'image':\n            {\n              image = new _StaticImage2.default(this.context, widthTexels, heightTexels, color, info.src);\n              break;\n            }\n          case 'pdf':\n            {\n              image = new _PdfImage2.default(this.context, widthTexels, heightTexels, color, info.src, n);\n              break;\n            }\n          case 'blank':\n          default:\n            {\n              image = new _BlankImage2.default(this.context, widthTexels, heightTexels, color);\n              break;\n            }\n        }\n        return image;\n      };\n      return ImageFactory;\n    }();\n    exports.default = ImageFactory;\n\n    /***/\n  }, /* 9 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _book = __webpack_require__(11);\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var BookPropsBuilder = function () {\n      function BookPropsBuilder(onReady) {\n        _classCallCheck(this, BookPropsBuilder);\n        this.onReady = onReady;\n        this.defaults = (0, _book.props)();\n      }\n      BookPropsBuilder.prototype.dispose = function dispose() {};\n      BookPropsBuilder.prototype.calcSize = function calcSize(width, height) {\n        var scale = _BaseMathUtils2.default.calcScale(width, height, this.defaults.width, this.defaults.height);\n        return {\n          width: scale * width,\n          height: scale * height\n        };\n      };\n      BookPropsBuilder.prototype.calcTexels = function calcTexels(width, height) {\n        var sheet = this.defaults.sheet,\n          scale = _BaseMathUtils2.default.calcScale(width, height, sheet.widthTexels, sheet.heightTexels);\n        return {\n          widthTexels: scale * width,\n          heightTexels: scale * height\n        };\n      };\n      BookPropsBuilder.prototype.calcProps = function calcProps(width, height) {\n        this.props = _extends({}, this.defaults, this.calcSize(width, height), {\n          sheet: _extends({}, this.defaults.sheet, this.calcTexels(width, height)),\n          cover: _extends({}, this.defaults.cover),\n          page: _extends({}, this.defaults.page)\n        });\n      };\n      BookPropsBuilder.prototype.calcSheets = function calcSheets(pages) {\n        return this.sheets = Math.ceil(Math.max(0, pages - 4) / 2);\n      };\n      BookPropsBuilder.prototype.getSheets = function getSheets() {\n        return this.sheets;\n      };\n      BookPropsBuilder.prototype.getProps = function getProps() {\n        return this.props;\n      };\n      BookPropsBuilder.prototype.getPageCallback = function getPageCallback() {\n        return this.binds.pageCallback;\n      };\n      BookPropsBuilder.prototype.ready = function ready() {\n        if (this.onReady) {\n          this.onReady(this.getProps(), this.getSheets(), this.getPageCallback());\n        }\n      };\n      return BookPropsBuilder;\n    }();\n    exports.default = BookPropsBuilder;\n\n    /***/\n  }, /* 10 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n      return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n    };\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _sheetBlock = __webpack_require__(41);\n    var _sheetBlock2 = _interopRequireDefault(_sheetBlock);\n    var _MathUtils = __webpack_require__(3);\n    var _MathUtils2 = _interopRequireDefault(_MathUtils);\n    var _ThreeUtils = __webpack_require__(20);\n    var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    // import ThreeMarkup from './ThreeMarkup';\n\n    var SheetBlock = function () {\n      function SheetBlock(visual, p, first, last) {\n        var angle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n        var _this = this;\n        var state = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'closed';\n        var height = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n        _classCallCheck(this, SheetBlock);\n        this.visual = visual;\n        this.p = _extends({}, p, {\n          first: first,\n          last: last\n        });\n        var props = this.getProps();\n        var loadedPoints = this.loadPoints();\n        Object.keys(loadedPoints).map(function (k) {\n          _this[k] = loadedPoints[k][props.shape] || loadedPoints[k][0];\n        });\n        this.pSpline = new _libs.THREE.Spline([]);\n        for (var i = 0; i < this.interpolationPoints.x[0].length; ++i) {\n          this.pSpline.points.push(new _libs.THREE.Vector3());\n        }\n        this.iSpline = new _libs.THREE.Spline([]);\n        for (var _i = 0; _i < _sheetBlock2.default.resX; ++_i) {\n          this.iSpline.points.push(new _libs.THREE.Vector3());\n        }\n        this.aSplines = [];\n\n        //this.three = new THREE.Object3D();\n\n        this.geometry = _sheetBlock2.default.geometry.clone();\n        this.p.sideFaces = [{\n          first: 0,\n          last: _sheetBlock2.default.faces[0]\n        }, {\n          first: _sheetBlock2.default.faces[0],\n          last: _sheetBlock2.default.faces[1]\n        }];\n        this.sideTexture = new _libs.THREE.Texture();\n        this.sideTexture.wrapT = _libs.THREE.RepeatWrapping;\n        this.sideTexture.repeat.set(0, last - first);\n        this.sideTexture.image = props.sideTexture;\n        this.sideTexture.needsUpdate = true;\n        this.materials = [new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial({\n          map: this.sideTexture\n        }), new _libs.THREE.MeshPhongMaterial({\n          map: this.sideTexture\n        }), new _libs.THREE.MeshPhongMaterial({\n          map: this.sideTexture\n        }), new _libs.THREE.MeshPhongMaterial({\n          map: this.sideTexture\n        })];\n        this.p.setTexture(this.materials[0], 2 * first);\n        this.p.setTexture(this.materials[1], 2 * last - 1);\n        this.mesh = new _libs.THREE.Mesh(this.geometry, new _libs.THREE.MeshFaceMaterial(this.materials));\n        this.mesh.castShadow = false;\n        this.mesh.receiveShadow = false;\n        // this.mesh.frustumCulled = true;\n\n        //this.three.add(this.mesh);\n        this.three = this.mesh;\n        this.three.userData.self = this;\n        this.markers = [];\n        if (this.p.marker.use) {\n          var l = this.geometry.vertices.length;\n          var is = void 0;\n          // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];\n          is = Array.apply(0, Array(l)).map(function (_, i) {\n            return i;\n          });\n          for (var _iterator = is, _isArray = Array.isArray(_iterator), _i2 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n            if (_isArray) {\n              if (_i2 >= _iterator.length) break;\n              _ref = _iterator[_i2++];\n            } else {\n              _i2 = _iterator.next();\n              if (_i2.done) break;\n              _ref = _i2.value;\n            }\n            var _i3 = _ref;\n            var marker = _ThreeUtils2.default.createMarker(this.geometry.vertices[_i3], _i3 < l / 2 ? 0xFF0000 : 0x00FF00, this.p.marker.size);\n            this.markers.push({\n              marker: marker,\n              vertex: _i3\n            });\n            this.three.add(marker);\n          }\n        }\n        this.corner = {\n          use: true,\n          height: 0,\n          maxDistance: 0,\n          points: [],\n          OZ: new _libs.THREE.Vector3(0, 0, 1),\n          axis: new _libs.THREE.Vector3()\n        };\n        this.set(0, 'closed', height, first, last); // calculate corner points\n\n        this.set(angle, state, height, first, last); // init position\n\n        // if(!SheetBlock.markup) {\n        //   SheetBlock.markup=true;\n        //   this.markup = new ThreeMarkup(this, 0, [{\n        //     x: 0,\n        //     y: 0,\n        //   }, {\n        //     x: 0.5,\n        //     y: 1\n        //   }, {\n        //     x: 1,\n        //     y: 0\n        //   }].map((p)=>new THREE.Vector2(p.x, p.y)), {});\n        // }\n      }\n      SheetBlock.prototype.dispose = function dispose() {\n        for (var _iterator2 = this.materials, _isArray2 = Array.isArray(_iterator2), _i4 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          if (_isArray2) {\n            if (_i4 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i4++];\n          } else {\n            _i4 = _iterator2.next();\n            if (_i4.done) break;\n            _ref2 = _i4.value;\n          }\n          var m = _ref2;\n          if (m.map) {\n            m.map = null;\n            m.needsUpdate = true;\n          }\n          m.dispose();\n        }\n        delete this.materials;\n        this.geometry.dispose();\n      };\n      SheetBlock.prototype.getSize = function getSize() {\n        return this.p.last - this.p.first;\n      };\n      SheetBlock.prototype.getProps = function getProps() {\n        return _extends({}, this.p.page, {\n          sheets: this.p.sheets\n        });\n      };\n      SheetBlock.prototype.getTopCerners = function getTopCerners() {\n        var off = this.angle > Math.PI / 2 ? this.geometry.vertices.length / 2 : 0;\n        return [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];\n      };\n      SheetBlock.prototype.getTopSize = function getTopSize() {\n        // const l=this.geometry.vertices.length, off = this.angle>Math.PI/2? l/2: 0,\n        //   v0 = this.geometry.vertices[off], v1 = this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off];\n        // // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];\n        // return {\n        //   width: Math.abs(v1.x-v0.x),\n        //   height: Math.abs(v1.z-v0.z)\n        // };\n        var vs = this.getTopCerners();\n        return {\n          width: vs[0].distanceTo(vs[1]),\n          height: vs[0].distanceTo(vs[2])\n        };\n      };\n      SheetBlock.prototype.getTopWorldRotation = function getTopWorldRotation(q) {\n        q.x = -Math.PI / 2;\n        return q;\n      };\n      SheetBlock.prototype.getTopWorldPosition = function getTopWorldPosition(v) {\n        var l = this.geometry.vertices.length,\n          off = this.angle > Math.PI / 2 ? l / 2 : 0,\n          vs = [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];\n        v.set(0, 0, 0);\n        for (var _iterator3 = vs, _isArray3 = Array.isArray(_iterator3), _i5 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n          if (_isArray3) {\n            if (_i5 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i5++];\n          } else {\n            _i5 = _iterator3.next();\n            if (_i5.done) break;\n            _ref3 = _i5.value;\n          }\n          var vi = _ref3;\n          v.x += 0.25 * vi.x;\n          v.y += 0.25 * vi.y;\n          v.z += 0.25 * vi.z;\n        }\n        this.three.localToWorld(v);\n        return v;\n      };\n      SheetBlock.prototype.getInterpolationPoints = function getInterpolationPoints(inds, mod) {\n        var ps = {\n            x: [],\n            y: []\n          },\n          K = this.getProps().wave;\n        for (var _iterator4 = inds, _isArray4 = Array.isArray(_iterator4), _i6 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n          var _ref4;\n          if (_isArray4) {\n            if (_i6 >= _iterator4.length) break;\n            _ref4 = _iterator4[_i6++];\n          } else {\n            _i6 = _iterator4.next();\n            if (_i6.done) break;\n            _ref4 = _i6.value;\n          }\n          var i = _ref4;\n          ps.x.push([].concat(this.interpolationPoints.x[i]));\n          ps.y.push(~mod.indexOf(i) ? this.interpolationPoints.y[i].map(function (n) {\n            return K * n;\n          }) : [].concat(this.interpolationPoints.y[i]));\n        }\n        return ps;\n      };\n      SheetBlock.prototype.set = function set(angle) {\n        var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;\n        var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.corner.height;\n        var first = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.p.first;\n        var last = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.p.last;\n        var PI = Math.PI;\n        this.state = state;\n        var closedAngle = void 0,\n          binderTurn = void 0;\n        if ((typeof angle === 'undefined' ? 'undefined' : _typeof(angle)) === 'object') {\n          this.angle = angle.openedAngle;\n          closedAngle = angle.closedAngle;\n          binderTurn = angle.binderTurn > PI / 2 ? PI - angle.binderTurn : angle.binderTurn;\n        } else {\n          this.angle = angle;\n        }\n        this.corner.height = height;\n        if (this.p.first !== first || this.p.last !== last) {\n          this.sideTexture.repeat.set(0, last - first);\n          this.sideTexture.needsUpdate = true;\n          if (this.p.first !== first) {\n            this.p.setTexture(this.materials[0], 2 * first);\n          }\n          if (this.p.last !== last) {\n            this.p.setTexture(this.materials[1], 2 * last - 1);\n          }\n        }\n        this.p.first = first;\n        this.p.last = last;\n        var points = void 0;\n        var props = this.getProps();\n        if (this.state === 'closed') {\n          points = this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces);\n        } else if (this.state === 'opened') {\n          if (closedAngle !== undefined && Math.abs(closedAngle - PI / 2) > 1e-2) {\n            points = this.getInterpolationPoints(this.flatInterpolationIndeces, []);\n            var ps = this.getPointsAtAngle(this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces), closedAngle > PI / 2 ? PI - closedAngle : closedAngle);\n            points.x = [ps.x].concat(points.x);\n            points.y = [ps.y].concat(points.y);\n            // console.log(ps);\n          } else {\n            points = this.getInterpolationPoints(this.openedInterpolationIndeces, this.closedInterpolationIndeces);\n          }\n        }\n        var hl = void 0,\n          hr = void 0,\n          offset = 0.5 * props.sheets * props.depth;\n        if (this.state === 'closed') {\n          offset -= 7e-6 * this.p.scale;\n        }\n        if (this.angle <= PI / 2) {\n          hl = (props.sheets - first) * props.depth;\n          hr = (props.sheets - last) * props.depth;\n        } else {\n          hl = first * props.depth;\n          hr = last * props.depth;\n        }\n        var inAngle = this.angle > PI / 2 ? PI - this.angle : this.angle,\n          hAngle = this.state === 'closed' ? inAngle : binderTurn === undefined ? PI / 2 : binderTurn;\n        var _getPointsAtAngleAndH = this.getPointsAtAngleAndHs(points, inAngle, hAngle, [hl / props.width, hr / props.width]),\n          left = _getPointsAtAngleAndH[0],\n          right = _getPointsAtAngleAndH[1];\n        if (this.angle > PI / 2) {\n          this.inverse(left);\n          this.inverse(right);\n          offset = -offset;\n        }\n        this.setPoints(left, right, offset);\n      };\n      SheetBlock.prototype.setPoints = function setPoints(left, right, offset) {\n        var _this2 = this;\n        var p = this.getProps();\n        var i = 0;\n        var ys = [right, left];\n        for (var y = 0; y < _sheetBlock2.default.resY; ++y) {\n          for (var z = 0; z < _sheetBlock2.default.resZ; ++z) {\n            for (var x = 0; x < _sheetBlock2.default.resX; ++x) {\n              this.geometry.vertices[i++].set(ys[y].x[x] * p.width + offset, ys[y].y[x] * p.width, z * p.height / (_sheetBlock2.default.resZ - 1) - 0.5 * p.height);\n            }\n          }\n        }\n        if (i !== this.geometry.vertices.length) {\n          console.warn('setPoints: bad mapping!');\n        }\n        if (this.corner.use && !this.corner.points.length) {\n          var plane = new _libs.THREE.Plane(),\n            normal = plane.normal,\n            planeOffset = (1 - this.getProps().flexibleCorner) * Math.min(p.width, p.height),\n            proj = new _libs.THREE.Vector3();\n          plane.setFromNormalAndCoplanarPoint(new _libs.THREE.Vector3(-1, 0, -1).normalize(), new _libs.THREE.Vector3(planeOffset + offset, 0, 0.5 * p.height));\n          for (var _i7 = 0, l = this.geometry.vertices.length; _i7 < l; ++_i7) {\n            plane.projectPoint(this.geometry.vertices[_i7], proj);\n            proj.sub(this.geometry.vertices[_i7]);\n            if (proj.x * normal.x + proj.y * normal.y + proj.z * normal.z > 0) {\n              var d = proj.length() / planeOffset;\n              this.corner.maxDistance = Math.max(this.corner.maxDistance, d);\n              this.corner.points.push({\n                vertex: _i7,\n                distance: d\n              });\n            }\n          }\n        }\n        if (this.corner.use && Math.abs(this.corner.height) > 1e-3) {\n          var d2Angle = function d2Angle(d) {\n            return p.cornerDeviation * _this2.corner.height / (1 + Math.exp(-p.bending * (d - 0.5 * _this2.corner.maxDistance)));\n          };\n          this.corner.axis.set(-1, 0, 1).normalize();\n          this.corner.axis.applyAxisAngle(this.corner.OZ, this.angle);\n          for (var _iterator5 = this.corner.points, _isArray5 = Array.isArray(_iterator5), _i8 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n            var _ref5;\n            if (_isArray5) {\n              if (_i8 >= _iterator5.length) break;\n              _ref5 = _iterator5[_i8++];\n            } else {\n              _i8 = _iterator5.next();\n              if (_i8.done) break;\n              _ref5 = _i8.value;\n            }\n            var point = _ref5;\n            this.geometry.vertices[point.vertex].applyAxisAngle(this.corner.axis, d2Angle(point.distance));\n          }\n        }\n        for (var _iterator6 = this.markers, _isArray6 = Array.isArray(_iterator6), _i9 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n          var _ref6;\n          if (_isArray6) {\n            if (_i9 >= _iterator6.length) break;\n            _ref6 = _iterator6[_i9++];\n          } else {\n            _i9 = _iterator6.next();\n            if (_i9.done) break;\n            _ref6 = _i9.value;\n          }\n          var m = _ref6;\n          m.marker.position.copy(this.geometry.vertices[m.vertex]);\n        }\n        this.geometry.computeVertexNormals();\n        //this.geometry.computeFaceNormals();\n        this.geometry.computeBoundingSphere();\n        //this.geometry.computeBoundingBox();\n        this.geometry.verticesNeedUpdate = true;\n        if (this.markup) {\n          this.markup.computeVertices();\n        }\n      };\n      SheetBlock.prototype.inverse = function inverse(ps) {\n        for (var i = 0; i < ps.x.length; ++i) {\n          ps.x[i] = -ps.x[i];\n        }\n        return ps;\n      };\n      SheetBlock.prototype.getPointsAtHs = function getPointsAtHs(ps, angle, hs) {\n        var _this3 = this;\n        var N = 1000;\n        _MathUtils2.default.setSplinePoints(this.pSpline, ps);\n        var bl = _MathUtils2.default.splitSpline(this.pSpline, N),\n          r = [];\n        {\n          var p1 = _extends({}, this.pSpline.getPoint((N - 1) / N)),\n            p2 = _extends({}, this.pSpline.getPoint(1)),\n            dp = {\n              x: p2.x - p1.x,\n              y: p2.y - p1.y\n            },\n            ln = Math.sqrt(dp.x * dp.x + dp.y * dp.y),\n            sp = this.pSpline.points[this.pSpline.points.length - 1];\n          sp.set(sp.x + 0.1 * dp.x / ln, sp.y + 0.1 * dp.y / ln, 0);\n          bl = _MathUtils2.default.splitSpline(this.pSpline, N);\n        }\n        bl.ls.push(1e7);\n        _MathUtils2.default.mapl2L(bl.ls, bl.len, _sheetBlock2.default.resX, function (i) {\n          for (var j = 0; j < hs.length; ++j) {\n            if (!i) {\n              r[j] = {\n                x: [-hs[j] * Math.sin(angle)],\n                y: [hs[j] * Math.cos(angle)]\n              };\n            } else {\n              var p0 = _extends({}, _this3.pSpline.getPoint((i - 1) / N)),\n                _p = _this3.pSpline.getPoint(i / N),\n                x = -(_p.y - p0.y),\n                y = _p.x - p0.x,\n                l = Math.sqrt(x * x + y * y);\n              r[j].x.push(_p.x + x / l * hs[j]);\n              r[j].y.push(_p.y + y / l * hs[j]);\n            }\n          }\n        });\n        var nps = [];\n        var _loop = function _loop(j) {\n          nps[j] = {\n            x: [],\n            y: []\n          };\n          _MathUtils2.default.setSplinePoints(_this3.iSpline, r[j]);\n          var l = _MathUtils2.default.splitSpline(_this3.iSpline, N);\n          l.ls.push(1e7);\n          _MathUtils2.default.mapl2L(l.ls, 1, _sheetBlock2.default.resX, function (i) {\n            var p = _this3.iSpline.getPoint(i / N);\n            nps[j].x.push(p.x);\n            nps[j].y.push(p.y);\n          });\n        };\n        for (var j = 0; j < hs.length; ++j) {\n          _loop(j);\n        }\n        return nps;\n      };\n      SheetBlock.prototype.getPointsAtAngleAndHs = function getPointsAtAngleAndHs(points, angle, hAngle, hs) {\n        var ps = this.getPointsAtAngle(points, angle);\n        return this.getPointsAtHs(ps, hAngle, hs);\n      };\n      SheetBlock.prototype.getPointsAtAngle = function getPointsAtAngle(points, angle) {\n        var ps = {\n            x: [],\n            y: []\n          },\n          angles = [];\n        angle /= Math.PI / 2;\n        for (var j = 0; j < points.x.length; ++j) {\n          angles.push(j / (points.x.length - 1));\n        }\n        for (var i = 0; i < points.x[0].length; ++i) {\n          var xps = [],\n            yps = [];\n          for (var _j = 0; _j < points.x.length; ++_j) {\n            xps.push(points.x[_j][i]);\n            yps.push(points.y[_j][i]);\n          }\n          ps.x.push(this.interpolate(angles, xps, angle));\n          ps.y.push(this.interpolate(angles, yps, angle));\n        }\n        return ps;\n      };\n      SheetBlock.prototype.interpolate = function interpolate(x, y, xi) {\n        if (!this.aSplines[x.length]) {\n          this.aSplines[x.length] = new _libs.THREE.Spline([]);\n          var ps = this.aSplines[x.length].points;\n          for (var i = 0; i < x.length; ++i) {\n            ps.push(new _libs.THREE.Vector3());\n          }\n        }\n        var spline = this.aSplines[x.length];\n        for (var _i10 = 0; _i10 < x.length; ++_i10) {\n          spline.points[_i10].set(x[_i10], y[_i10], 0);\n        }\n        return spline.getPoint(Math.min(1, Math.max(xi, 0))).y;\n      };\n      SheetBlock.prototype.loadPoints = function loadPoints() {\n        var x = [],\n          y = [];\n        var _arr = [0, 0.2877, 0.6347, 0.8174, 1.0000];\n        for (var _i11 = 0; _i11 < _arr.length; _i11++) {\n          var r = _arr[_i11];\n          x.push(r * Math.cos(0.9 * Math.PI / 4));\n          y.push(r * Math.sin(0.9 * Math.PI / 4));\n        }\n        var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],\n          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],\n          flatInterpolationIndeces = [[5, 4], [7, 6]],\n          interpolationPoints = [{\n            x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.126, 0.411, 0.593, 0.774], [0, 0, 0, 0, 0], x],\n            y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.259, 0.440, 0.446, 0.429], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]\n          }, {\n            x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0], x],\n            y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]\n          }];\n        return {\n          interpolationPoints: interpolationPoints,\n          openedInterpolationIndeces: openedInterpolationIndeces,\n          closedInterpolationIndeces: closedInterpolationIndeces,\n          flatInterpolationIndeces: flatInterpolationIndeces\n        };\n      };\n      return SheetBlock;\n    }();\n    exports.default = SheetBlock;\n\n    /***/\n  }, /* 11 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    exports.props = props;\n    function props() {\n      // const props = {\n      //   height,\n      //   width,\n      //   gravity,\n      //   injector,\n      //   cachedPages,\n      //   renderInactivePages,\n      //   renderWhileFlipping,\n      //   pagesForPredicting,\n      //   preloadPages,\n      //   sheet: {\n      //     startVelocity,\n      //     cornerDeviation,\n      //     flexibility,\n      //     flexibleCorner,\n      //     bending,\n      //     wave,\n      //     shape,\n      //     widthTexels,\n      //     heightTexels,\n      //     color,\n      //     sideTexture\n      //   },\n      //   cover: {\n      //     ...sheet,\n      //     padding,\n      //     binderTexture,\n      //     depth,\n      //     mass\n      //   },\n      //   page: {\n      //     ...sheet,\n      //     depth,\n      //     mass\n      //   }\n      // };\n\n      return {\n        height: 0.297,\n        width: 0.21,\n        gravity: 1,\n        cachedPages: 50,\n        renderInactivePages: true,\n        renderInactivePagesOnMobile: false,\n        renderWhileFlipping: false,\n        pagesForPredicting: 5,\n        preloadPages: 5,\n        rtl: false,\n        sheet: {\n          startVelocity: 0.9,\n          cornerDeviation: 0.25,\n          flexibility: 10,\n          flexibleCorner: 0.5,\n          bending: 11,\n          wave: 0.5,\n          shape: 0,\n          widthTexels: 5 * 210,\n          heightTexels: 5 * 297,\n          color: 0xFFFFFF\n        },\n        cover: {\n          binderTexture: '',\n          depth: 0.0003,\n          padding: 0,\n          mass: 0.003\n        },\n        page: {\n          depth: 0.0001,\n          mass: 0.001\n        },\n        cssLayerProps: {\n          width: 1024\n        }\n      };\n    }\n    ;\n\n    /***/\n  }, /* 12 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    exports.CSS3DSprite = exports.CSS3DObject = undefined;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    _libs.THREE.CSS3DObject = function (_THREE$Object3D) {\n      _inherits(CSS3DObject, _THREE$Object3D);\n      function CSS3DObject() {\n        var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n        _classCallCheck(this, CSS3DObject);\n        var _this = _possibleConstructorReturn(this, _THREE$Object3D.call(this));\n        if (element) {\n          _this.set(element);\n        }\n        return _this;\n      }\n      CSS3DObject.prototype.set = function set(element) {\n        this.element = element;\n        this.element.style.position = 'absolute';\n        this.addEventListener('removed', function () {\n          if (this.element.parentNode !== null) {\n            this.element.parentNode.removeChild(this.element);\n          }\n        });\n      };\n      return CSS3DObject;\n    }(_libs.THREE.Object3D);\n    _libs.THREE.CSS3DSprite = function (_THREE$CSS3DObject) {\n      _inherits(CSS3DSprite, _THREE$CSS3DObject);\n      function CSS3DSprite(element) {\n        _classCallCheck(this, CSS3DSprite);\n        return _possibleConstructorReturn(this, _THREE$CSS3DObject.call(this, element));\n      }\n      return CSS3DSprite;\n    }(_libs.THREE.CSS3DObject);\n    _libs.THREE.CSS3DRenderer = function CSS3DRenderer() {\n      _classCallCheck(this, CSS3DRenderer);\n      var _width, _height;\n      var _widthHalf, _heightHalf;\n      var matrix = new _libs.THREE.Matrix4();\n      var cache = {\n        camera: {\n          fov: 0,\n          style: ''\n        },\n        objects: {}\n      };\n      var domElement = document.createElement('div');\n      domElement.style.overflow = 'hidden';\n      this.domElement = domElement;\n      var cameraElement = document.createElement('div');\n      cameraElement.style.WebkitTransformStyle = 'preserve-3d';\n      cameraElement.style.MozTransformStyle = 'preserve-3d';\n      cameraElement.style.transformStyle = 'preserve-3d';\n      domElement.appendChild(cameraElement);\n      var isIE = /Trident/i.test(navigator.userAgent);\n      this.setClearColor = function () {};\n      this.getSize = function () {\n        return {\n          width: _width,\n          height: _height\n        };\n      };\n      this.setSize = function (width, height) {\n        _width = width;\n        _height = height;\n        _widthHalf = _width / 2;\n        _heightHalf = _height / 2;\n        domElement.style.width = width + 'px';\n        domElement.style.height = height + 'px';\n        cameraElement.style.width = width + 'px';\n        cameraElement.style.height = height + 'px';\n      };\n      function epsilon(value) {\n        return Math.abs(value) < 1e-10 ? 0 : value;\n      }\n      function getCameraCSSMatrix(matrix) {\n        var elements = matrix.elements;\n        return 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(-elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(elements[6]) + ',' + epsilon(elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(-elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(-elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';\n      }\n      function getObjectCSSMatrix(matrix, cameraCSSMatrix) {\n        var elements = matrix.elements;\n        var matrix3d = 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(-elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(-elements[6]) + ',' + epsilon(-elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';\n        if (isIE) {\n          return 'translate(-50%,-50%)' + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' + cameraCSSMatrix + matrix3d;\n        }\n        return 'translate(-50%,-50%)' + matrix3d;\n      }\n      function renderObject(object, camera, cameraCSSMatrix) {\n        if (object instanceof _libs.THREE.CSS3DObject) {\n          var style;\n          if (object instanceof _libs.THREE.CSS3DSprite) {\n            matrix.copy(camera.matrixWorldInverse);\n            matrix.transpose();\n            matrix.copyPosition(object.matrixWorld);\n            matrix.scale(object.scale);\n            matrix.elements[3] = 0;\n            matrix.elements[7] = 0;\n            matrix.elements[11] = 0;\n            matrix.elements[15] = 1;\n            style = getObjectCSSMatrix(matrix, cameraCSSMatrix);\n          } else {\n            style = getObjectCSSMatrix(object.matrixWorld, cameraCSSMatrix);\n          }\n          var element = object.element;\n          var cachedStyle = cache.objects[object.id] && cache.objects[object.id].style;\n          if (cachedStyle === undefined || cachedStyle !== style) {\n            element.style.WebkitTransform = style;\n            element.style.MozTransform = style;\n            element.style.transform = style;\n            cache.objects[object.id] = {\n              style: style\n            };\n            if (isIE) {\n              cache.objects[object.id].distanceToCameraSquared = getDistanceToSquared(camera, object);\n            }\n          }\n          if (element.parentNode !== cameraElement) {\n            cameraElement.appendChild(element);\n          }\n        }\n        for (var i = 0, l = object.children.length; i < l; i++) {\n          renderObject(object.children[i], camera, cameraCSSMatrix);\n        }\n      }\n      var getDistanceToSquared = function () {\n        var a = new _libs.THREE.Vector3();\n        var b = new _libs.THREE.Vector3();\n        return function (object1, object2) {\n          a.setFromMatrixPosition(object1.matrixWorld);\n          b.setFromMatrixPosition(object2.matrixWorld);\n          return a.distanceToSquared(b);\n        };\n      }();\n      function zOrder(scene) {\n        var order = Object.keys(cache.objects).sort(function (a, b) {\n          return cache.objects[a].distanceToCameraSquared - cache.objects[b].distanceToCameraSquared;\n        });\n        var zMax = order.length;\n        scene.traverse(function (object) {\n          var index = order.indexOf(object.id + '');\n          if (index !== -1) {\n            object.element.style.zIndex = zMax - index;\n          }\n        });\n      }\n      this.render = function (scene, camera) {\n        var fov = camera.projectionMatrix.elements[5] * _heightHalf;\n        if (cache.camera.fov !== fov) {\n          domElement.style.WebkitPerspective = fov + 'px';\n          domElement.style.MozPerspective = fov + 'px';\n          domElement.style.perspective = fov + 'px';\n          cache.camera.fov = fov;\n        }\n        scene.updateMatrixWorld();\n        if (camera.parent === null) camera.updateMatrixWorld();\n        var cameraCSSMatrix = 'translateZ(' + fov + 'px)' + getCameraCSSMatrix(camera.matrixWorldInverse);\n        var style = cameraCSSMatrix + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n        if (cache.camera.style !== style && !isIE) {\n          cameraElement.style.WebkitTransform = style;\n          cameraElement.style.MozTransform = style;\n          cameraElement.style.transform = style;\n          cache.camera.style = style;\n        }\n        renderObject(scene, camera, cameraCSSMatrix);\n        if (isIE) {\n          // IE10 and 11 does not support 'preserve-3d'.\n          // Thus, z-order in 3D will not work.\n          // We have to calc z-order manually and set CSS z-index for IE.\n          // FYI: z-index can't handle object intersection\n          zOrder(scene);\n        }\n      };\n    };\n    exports.default = _libs.THREE.CSS3DRenderer;\n    var _CSS3DObject = _libs.THREE.CSS3DObject,\n      _CSS3DSprite = _libs.THREE.CSS3DSprite;\n    exports.CSS3DObject = _CSS3DObject;\n    exports.CSS3DSprite = _CSS3DSprite;\n\n    /***/\n  }, /* 13 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _CSS3DRenderer = __webpack_require__(12);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var CSSLayer = function (_CSS3DObject) {\n      _inherits(CSSLayer, _CSS3DObject);\n      CSSLayer.init = function init(doc) {\n        var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 150;\n        CSSLayer.delay = delay;\n        CSSLayer.style = (0, _libs.$)('<style type=text/css>\\n      .css-layer {\\n    \\t\\topacity: 1;\\n    \\t\\ttransition: opacity ' + delay + 'ms ease-out;\\n        visibility: visible;\\n        overflow: hidden;\\n    \\t}\\n    \\t.css-layer.hidden {\\n    \\t\\ttransition: opacity ' + delay + 'ms ease-in, visibility ' + delay + 'ms step-end;\\n    \\t\\topacity: 0;\\n        visibility: hidden;\\n      }\\n    </style>').appendTo(doc.head);\n      };\n      CSSLayer.dispose = function dispose() {\n        CSSLayer.style.remove();\n      };\n      function CSSLayer(width, height, props) {\n        _classCallCheck(this, CSSLayer);\n        var _this = _possibleConstructorReturn(this, _CSS3DObject.call(this));\n        _this.props = props;\n        _this.jContainer = (0, _libs.$)('<div class=\"hidden css-layer\"></div>');\n        var widthPxs = props.width,\n          heightPxs = height / width * widthPxs;\n        _this.jContainer.width(widthPxs).height(heightPxs);\n        _this.scale.x /= widthPxs / width;\n        _this.scale.y /= widthPxs / width;\n        _this.setData();\n        _this.set(_this.jContainer[0]);\n        return _this;\n      }\n      CSSLayer.prototype.callInternal = function callInternal(name) {\n        if (this.object && this.object[name]) {\n          try {\n            this.object[name]();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      };\n      CSSLayer.prototype.dispose = function dispose() {\n        this.clearInternals();\n      };\n      CSSLayer.prototype.clearInternals = function clearInternals() {\n        this.callInternal('dispose');\n        !this.css || this.css.remove();\n        !this.html || this.html.remove();\n      };\n      CSSLayer.prototype.setData = function setData() {\n        var css = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var html = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        var js = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n        this.clearInternals();\n        this.css = (0, _libs.$)('<style type=\"text/css\">' + css + '</style>').appendTo(this.jContainer);\n        this.html = (0, _libs.$)(html).appendTo(this.jContainer);\n        var init = eval(js);\n        if (init) {\n          this.object = init(this.jContainer, this.props) || {};\n        }\n      };\n      CSSLayer.prototype.pendedCall = function pendedCall(clb) {\n        var _this2 = this;\n        var timestamp = this.timestamp = Date.now();\n        setTimeout(function () {\n          if (timestamp === _this2.timestamp) {\n            clb();\n          }\n        }, CSSLayer.delay);\n      };\n      CSSLayer.prototype.isHidden = function isHidden() {\n        return this.jContainer.hasClass('hidden');\n      };\n      CSSLayer.prototype.hide = function hide() {\n        var _this3 = this;\n        var res = void 0;\n        if (!this.isHidden()) {\n          this.jContainer.addClass('hidden');\n          this.callInternal('hide');\n          res = new Promise(function (resolve) {\n            _this3.pendedCall(function () {\n              _this3.callInternal('hidden');\n              resolve();\n            });\n          });\n        } else {\n          res = Promise.resolve();\n        }\n        return res;\n      };\n      CSSLayer.prototype.show = function show() {\n        var _this4 = this;\n        var res = void 0;\n        if (this.isHidden()) {\n          this.jContainer.removeClass('hidden');\n          this.callInternal('show');\n          res = new Promise(function (resolve) {\n            _this4.pendedCall(function () {\n              _this4.callInternal('shown');\n              resolve();\n            });\n          });\n        } else {\n          res = Promise.resolve();\n        }\n        return res;\n      };\n      return CSSLayer;\n    }(_CSS3DRenderer.CSS3DObject);\n    exports.default = CSSLayer;\n\n    /***/\n  }, /* 14 */\n  /***/function (module, exports) {\n    \"use strict\";\n    \"use strict\";\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Cache = function () {\n      function Cache() {\n        var maxSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Infinity;\n        var sizeof = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Cache.countSizeof;\n        _classCallCheck(this, Cache);\n        this.os = new Map();\n        this.sizeof = sizeof;\n        this.maxSize = maxSize;\n        this.size = 0;\n      }\n      Cache.prototype.forEach = function forEach(clb) {\n        this.os.forEach(function (v, k) {\n          return clb([k, v]);\n        });\n      };\n      Cache.countSizeof = function countSizeof(value) {\n        return 1;\n      };\n      Cache.prototype.remove = function remove(k) {\n        var res = false;\n        var v = this.os.get(k);\n        if (!v.locked || !v.locked(k)) {\n          this.size -= this.sizeof(v);\n          if (v.dispose) {\n            v.dispose();\n          }\n          this.os.delete(k);\n          res = true;\n        }\n        return res;\n      };\n      Cache.prototype.freeSpace = function freeSpace() {\n        var arr = [];\n        for (var _iterator = this.os, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var p = _ref;\n          arr.push({\n            timestamp: p[1].timestamp,\n            key: p[0]\n          });\n        }\n        arr.sort(function (a, b) {\n          return a.timestamp - b.timestamp;\n        });\n        for (var i = 0; i < arr.length && this.size > 3 * this.maxSize / 4; ++i) {\n          this.remove(arr[i].key);\n        }\n      };\n      Cache.prototype.dispose = function dispose() {\n        var arr = [];\n        for (var _iterator2 = this.os, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n          var p = _ref2;\n          arr.push({\n            v: p[1],\n            k: p[0]\n          });\n        }\n        for (var _iterator3 = arr, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n          var o = _ref3;\n          if (o.v.dispose) {\n            o.v.dispose();\n          }\n          this.os.delete(o.k);\n        }\n      };\n      Cache.recursionSizeof = function recursionSizeof(value) {\n        var size = 0;\n        if (value) {\n          ++size;\n          var len = value.length;\n          if (len === undefined) {\n            for (var p in value) {\n              if (value.hasOwnProperty(p)) {\n                size += Cache.recursionSizeof(value[p]);\n              }\n            }\n          } else {\n            size += len;\n          }\n        }\n        return size;\n      };\n      Cache.prototype.getTimestamp = function getTimestamp() {\n        return Date.now();\n      };\n      Cache.prototype.get = function get(key) {\n        var value = this.os.get(key);\n        if (value) {\n          value.timestamp = this.getTimestamp();\n        }\n        return value;\n      };\n      Cache.prototype.put = function put(key, value) {\n        value.timestamp = this.getTimestamp();\n        this.os.set(key, value);\n        this.size += this.sizeof(value);\n        if (this.size > this.maxSize) {\n          this.freeSpace();\n        }\n        return value;\n      };\n      return Cache;\n    }();\n    exports.default = Cache;\n\n    /***/\n  }, /* 15 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var Controller = function (_THREE$EventDispatche) {\n      _inherits(Controller, _THREE$EventDispatche);\n      function Controller() {\n        _classCallCheck(this, Controller);\n        return _possibleConstructorReturn(this, _THREE$EventDispatche.apply(this, arguments));\n      }\n      Controller.prototype.handleDefault = function handleDefault(id, e, data) {\n        //console.log(id+'-'+e.type+'-'+data);\n      };\n      Controller.prototype.dispatchAsync = function dispatchAsync(e) {\n        var _this2 = this;\n        Promise.resolve().then(function () {\n          return _this2.dispatchEvent(e);\n        });\n      };\n      Controller.prototype.dispose = function dispose() {};\n      return Controller;\n    }(_libs.THREE.EventDispatcher);\n    exports.default = Controller;\n\n    /***/\n  }, /* 16 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _EventConverter2 = __webpack_require__(6);\n    var _EventConverter3 = _interopRequireDefault(_EventConverter2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var CustomEventConverter = function (_EventConverter) {\n      _inherits(CustomEventConverter, _EventConverter);\n\n      // custom\n      // testIntersection(e, data);\n      // custom.object\n      // test(object);\n\n      function CustomEventConverter(wnd, doc) {\n        var customTest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n          return false;\n        };\n        var eDoc = arguments[3];\n        _classCallCheck(this, CustomEventConverter);\n        var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));\n        _this.eDoc = eDoc;\n        _this.customTest = customTest;\n        _this.customs = [];\n        return _this;\n      }\n      CustomEventConverter.prototype.test = function test(object1, object2) {\n        return object1 && object2 ? this.customTest(object1, object2) : false;\n      };\n      CustomEventConverter.prototype.getCallback = function getCallback(object) {\n        return object.target.callback;\n      };\n      CustomEventConverter.prototype.addCustom = function addCustom(custom) {\n        this.customs.push(custom);\n      };\n      CustomEventConverter.prototype.getObject = function getObject(e, data) {\n        var object = void 0;\n        if (data.doc === this.eDoc) {\n          for (var _iterator = this.customs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n            var custom = _ref;\n            object = custom.testIntersection(e, data);\n            if (object) {\n              break;\n            }\n          }\n        }\n        return object;\n      };\n      return CustomEventConverter;\n    }(_EventConverter3.default);\n    exports.default = CustomEventConverter;\n\n    /***/\n  }, /* 17 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _Utils = __webpack_require__(4);\n    var _Utils2 = _interopRequireDefault(_Utils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Finder = function () {\n      Finder.isDelimetr = function isDelimetr(s) {\n        return s === Finder.DELIMITER;\n      };\n      Finder.prototype.merge = function merge() {\n        var as = [],\n          map = [],\n          strs = this.strs;\n        var p = 0;\n        for (var i = 0; i < strs.length; ++i) {\n          if (strs[i].length) {\n            map.push({\n              base: i,\n              offset: p\n            });\n            as.push(strs[i]);\n            p += strs[i].length;\n            if (i < strs.length - 1 && !Finder.isDelimetr(strs[i].charAt(strs[i].length - 1)) && !Finder.isDelimetr(strs[i + 1].charAt(0))) {\n              as.push(Finder.DELIMITER);\n              ++p;\n            }\n          }\n        }\n        this.map = map;\n        this.str = as.join('');\n      };\n      Finder.prototype.addHits = function addHits(p) {\n        var info = this.map[_Utils2.default.lowerBound(this.map, {\n          offset: p\n        }, function (a, b) {\n          return a.offset - b.offset;\n        })];\n        var chars = this.pattern.length,\n          i = info.base;\n        p -= info.offset;\n        while (chars) {\n          if (this.strs[i].length) {\n            var delimeter = i < this.strs.length - 1 && !Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length - 1)) && !Finder.isDelimetr(this.strs[i + 1].charAt(0)),\n              length = Math.min(this.strs[i].length + (delimeter ? 1 : 0) - p, chars);\n            if (p < this.strs[i].length) {\n              this.hits.push({\n                index: i,\n                offset: p,\n                length: Math.min(length, this.strs[i].length - p)\n              });\n            }\n            chars -= length;\n            ++i;\n            p = 0;\n          }\n        }\n      };\n      Finder.prototype.addContext = function addContext(p) {\n        var f = p,\n          l = p + this.pattern.length - 1,\n          dels = this.props.contextLength,\n          prevDels = dels + 1;\n        while (dels && prevDels - dels) {\n          prevDels = dels;\n          if (dels % 2) {\n            for (var i = f - 2; i >= 0; --i) {\n              if (Finder.isDelimetr(this.str[i]) || i === 0) {\n                f = i === 0 ? 0 : i + 1;\n                --dels;\n                break;\n              }\n            }\n          } else {\n            for (var _i = l + 2; _i < this.str.length; ++_i) {\n              if (Finder.isDelimetr(this.str[_i]) || _i === this.str.length - 1) {\n                l = _i === this.str.length - 1 ? _i === this.str.length - 1 : _i - 1;\n                --dels;\n                break;\n              }\n            }\n          }\n        }\n        this.contexts.push(this.str.substr(f, l - f + 1));\n      };\n      Finder.prototype.getHits = function getHits() {\n        return this.hits;\n      };\n      Finder.prototype.getContexts = function getContexts() {\n        return this.contexts;\n      };\n      function Finder(strs, pattern, props) {\n        _classCallCheck(this, Finder);\n        this.props = _extends({}, Finder.defaults, props);\n        this.strs = strs;\n        var data = this.merge(strs);\n        this.hits = [];\n        this.contexts = [];\n        this.pattern = pattern.toLowerCase();\n        this.lstr = this.str.toLowerCase();\n        var p = 0;\n        while (true) {\n          p = this.lstr.indexOf(this.pattern, p);\n          if (p === -1) {\n            break;\n          } else {\n            this.addHits(p);\n            this.addContext(p);\n            p += this.pattern.length;\n          }\n        }\n      }\n      return Finder;\n    }();\n    Finder.DELIMITER = ' ';\n    Finder.defaults = {\n      contextLength: 7,\n      hits: true,\n      contexts: true\n    };\n    exports.default = Finder;\n\n    /***/\n  }, /* 18 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _Utils = __webpack_require__(4);\n    var _Utils2 = _interopRequireDefault(_Utils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    _libs.PDFJS.workerSrc = (window.PDFJS_LOCALE ? PDFJS_LOCALE : {\n      \"pdfJsWorker\": \"js/pdf.worker.js\",\n      \"pdfJsCMapUrl\": \"cmaps/\"\n    }).pdfJsWorker;\n    _libs.PDFJS.cMapUrl = (window.PDFJS_LOCALE ? PDFJS_LOCALE : {\n      \"pdfJsWorker\": \"js/pdf.worker.js\",\n      \"pdfJsCMapUrl\": \"cmaps/\"\n    }).pdfJsCMapUrl;\n    _libs.PDFJS.cMapPacked = true;\n    var Pdf = function () {\n      function Pdf(src, loadingProgress) {\n        var _this = this;\n        _classCallCheck(this, Pdf);\n        this.src = _Utils2.default.normalizeUrl(src);\n        this.handlerQueue = [];\n        this.progresData = {\n          loaded: -1,\n          total: 1\n        };\n        this.loadingProgress = loadingProgress;\n        _libs.PDFJS.getDocument({\n          url: this.src,\n          rangeChunkSize: 512 * 1024\n        }, null, null, function (data) {\n          if (_this.loadingProgress) {\n            var cur = Math.floor(100 * data.loaded / data.total),\n              old = Math.floor(100 * _this.progresData.loaded / _this.progresData.total);\n            if (cur !== old) {\n              cur = isNaN(cur) ? 0 : cur;\n              cur = cur > 100 ? 100 : cur;\n              _this.loadingProgress(cur);\n            }\n          }\n          _this.progresData = data;\n        }).then(function (handler) {\n          if (handler.numPages > 1) {\n            Promise.all([handler.getPage(1), handler.getPage(2)]).then(function (pages) {\n              _this.init(handler, pages);\n            });\n          } else {\n            _this.init(handler);\n          }\n        });\n      }\n      Pdf.prototype.init = function init(handler, pages) {\n        this.handler = handler;\n        this.doubledPages = pages ? Math.abs(2 * Pdf.getPageSize(pages[0]).width - Pdf.getPageSize(pages[1]).width) / Pdf.getPageSize(pages[0]).width < 1e-4 : false;\n        var done = Promise.resolve(handler);\n        var _loop = function _loop() {\n          if (_isArray) {\n            if (_i >= _iterator.length) return 'break';\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) return 'break';\n            _ref = _i.value;\n          }\n          var clb = _ref;\n          done = done.then(function (handler) {\n            clb(handler);\n            return handler;\n          });\n        };\n        for (var _iterator = this.handlerQueue.reverse(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          var _ret = _loop();\n          if (_ret === 'break') break;\n        }\n      };\n      Pdf.prototype.getPageType = function getPageType(n) {\n        return !this.doubledPages || n === 0 || n === this.getPagesNum() - 1 ? 'full' : n & 1 ? 'left' : 'right';\n      };\n      Pdf.prototype.getPage = function getPage(n) {\n        return this.handler.getPage(this.doubledPages ? Math.ceil(n / 2) + 1 : n + 1);\n      };\n      Pdf.prototype.dispose = function dispose() {\n        this.handlerQueue.splice(0, this.handlerQueue.length);\n        delete this.handler;\n      };\n      Pdf.prototype.setLoadingProgressClb = function setLoadingProgressClb(clb) {\n        this.loadingProgress = clb;\n      };\n      Pdf.prototype.getPagesNum = function getPagesNum() {\n        return this.handler ? this.doubledPages ? 2 * (this.handler.numPages - 1) : this.handler.numPages : undefined;\n      };\n      Pdf.getPageSize = function getPageSize(page) {\n        return {\n          width: page.view[2] - page.view[0],\n          height: page.view[3] - page.view[1]\n        };\n      };\n\n      //   if(pages>1) {\n      //   handler.getPage(2).\n      //   then((page)=> {\n      //     const size1 = Pdf.getPageSize(page);\n      //     this.props.doubledPages = 2*size0.width===size1.width;\n      //     this.ready();\n      //   }).\n      //   catch(()=> this.ready());\n      // }\n      // else {\n\n      Pdf.prototype.getHandler = function getHandler(clb) {\n        if (this.handler) {\n          clb(this.handler);\n        } else {\n          this.handlerQueue.push(clb);\n        }\n      };\n      return Pdf;\n    }();\n    exports.default = Pdf;\n\n    /***/\n  }, /* 19 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var ThreeEventConverterFs = function () {\n      ThreeEventConverterFs.objectsTest = function objectsTest(object1, object2) {\n        return object1 && object2 ? object1.object === object2.object : false;\n      };\n      ThreeEventConverterFs.objectsAndFacesTest = function objectsAndFacesTest(object1, object2) {\n        return object1 && object2 ? object1.object === object2.object && object1.face.materialIndex === object2.face.materialIndex : false;\n      };\n      function ThreeEventConverterFs(visualWorld) {\n        var test = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ThreeEventConverterFs.objectsAndFacesTest;\n        _classCallCheck(this, ThreeEventConverterFs);\n        this.visual = visualWorld;\n        this.coords = new _libs.THREE.Vector2();\n        this.raycaster = this.visual.raycaster;\n        this.camera = this.visual.camera;\n        this.threes = [];\n        this.test = test;\n      }\n      ThreeEventConverterFs.prototype.addThree = function addThree(three) {\n        this.threes.push(three);\n      };\n      ThreeEventConverterFs.prototype.removeThree = function removeThree(three) {\n        var i = this.threes.indexOf(three);\n        if (~i) {\n          this.threes.splice(i, 1);\n        }\n      };\n      ThreeEventConverterFs.prototype.getObject = function getObject(e) {\n        this.setCoordsFromEvent(e);\n        this.raycaster.setFromCamera(this.coords, this.camera);\n        var intersects = this.raycaster.intersectObjects(this.threes);\n        return intersects[0];\n      };\n      return ThreeEventConverterFs;\n    }();\n    exports.default = ThreeEventConverterFs;\n\n    /***/\n  }, /* 20 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var ThreeUtils = function () {\n      function ThreeUtils() {\n        _classCallCheck(this, ThreeUtils);\n      }\n      ThreeUtils.vertices2UVs = function vertices2UVs(vertices, indeces, first, last, converClb) {\n        var r = [];\n        for (var i = first; i < last; ++i) {\n          var vis = [indeces[i].a, indeces[i].b, indeces[i].c];\n          for (var j = 0; j < vis.length; ++j) {\n            if (!r[vis[j]]) {\n              r[vis[j]] = converClb(vertices[vis[j]]);\n            }\n          }\n        }\n        return r;\n      };\n      ThreeUtils.computeFaceVertexUvs = function computeFaceVertexUvs(geometry, faces) {\n        var uvs = [ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, 0, faces[0], function (p) {\n          return new THREE.Vector2(p.x, 1 - p.z);\n        }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[0], faces[1], function (p) {\n          return new THREE.Vector2(1 - p.x, 1 - p.z);\n        }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[1], faces[2], function (p) {\n          return new THREE.Vector2(p.x, p.y);\n        }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[2], faces[3], function (p) {\n          return new THREE.Vector2(1 - p.x, p.y);\n        }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[3], faces[4], function (p) {\n          return new THREE.Vector2(p.z, p.y);\n        }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[4], geometry.faces.length, function (p) {\n          return new THREE.Vector2(1 - p.z, p.y);\n        })];\n        var uvsi = 0;\n        for (var i = 0; i < geometry.faces.length; ++i) {\n          uvsi += faces[uvsi] === i;\n          var f = geometry.faces[i];\n          f.materialIndex = uvsi;\n          geometry.faceVertexUvs[0][i] = [uvs[uvsi][f.a], uvs[uvsi][f.b], uvs[uvsi][f.c]];\n        }\n      };\n      ThreeUtils.createMarker = function createMarker(p, c, size) {\n        var marker = new THREE.Mesh(new THREE.SphereGeometry(size), new THREE.MeshPhongMaterial({\n          color: c\n        }));\n        marker.position.set(p.x, p.y, p.z);\n        return marker;\n      };\n      ThreeUtils.findUvTris = function findUvTris(geometry, ps, first, last) {\n        var res = [];\n        for (var _iterator = ps, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var p = _ref;\n          var found = false;\n          for (var i = first; i < last && !found; ++i) {\n            var tri = geometry.faceVertexUvs[0][i];\n            if (_BaseMathUtils2.default.isInsideConvPoly(tri, p)) {\n              res.push({\n                coefs: _BaseMathUtils2.default.computeInterpCoefs(tri, p),\n                i: i\n              });\n              found = true;\n            }\n          }\n          if (!found) {\n            console.error('Bad point');\n            res.push(undefined);\n          }\n        }\n        return res;\n      };\n      ThreeUtils.findInternalVertices = function findInternalVertices(geometry, ps, first, last) {\n        var res = {};\n        for (var i = first; i < last; ++i) {\n          var tri = geometry.faceVertexUvs[0][i],\n            f = geometry.faces[i],\n            vs = [f.a, f.b, f.c];\n          for (var j = 0; j < tri.length; ++j) {\n            if (res[vs[j]] === undefined && _BaseMathUtils2.default.isInsidePoly(ps, tri[j])) {\n              res[vs[j]] = {\n                p: tri[j],\n                i: vs[j],\n                n: f.vertexNormals[j]\n              };\n            }\n          }\n        }\n        return Object.values(res);\n      };\n      return ThreeUtils;\n    }();\n    exports.default = ThreeUtils;\n\n    /***/\n  }, /* 21 */\n  /***/function (module, exports) {\n    \"use strict\";\n    \"use strict\";\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Target = function () {\n      function Target() {\n        _classCallCheck(this, Target);\n      }\n      Target.test = function test(object1, object2) {\n        return object1.target === object2.target;\n      };\n      return Target;\n    }();\n    exports.default = Target;\n\n    /***/\n  }, /* 22 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _Detector = __webpack_require__(45);\n    var _Detector2 = _interopRequireDefault(_Detector);\n    var _VisualWorld = __webpack_require__(66);\n    var _VisualWorld2 = _interopRequireDefault(_VisualWorld);\n    var _PdfLinksHandler = __webpack_require__(35);\n    var _PdfLinksHandler2 = _interopRequireDefault(_PdfLinksHandler);\n    var _Book = __webpack_require__(26);\n    var _Book2 = _interopRequireDefault(_Book);\n    var _BookView = __webpack_require__(29);\n    var _BookView2 = _interopRequireDefault(_BookView);\n    var _BookController = __webpack_require__(27);\n    var _BookController2 = _interopRequireDefault(_BookController);\n    var _PdfBookPropsBuilder = __webpack_require__(34);\n    var _PdfBookPropsBuilder2 = _interopRequireDefault(_PdfBookPropsBuilder);\n    var _ClbBookPropsBuilder = __webpack_require__(30);\n    var _ClbBookPropsBuilder2 = _interopRequireDefault(_ClbBookPropsBuilder);\n    var _LoadingController = __webpack_require__(53);\n    var _LoadingController2 = _interopRequireDefault(_LoadingController);\n    var _Search = __webpack_require__(58);\n    var _Search2 = _interopRequireDefault(_Search);\n    var _Bookmarks = __webpack_require__(44);\n    var _Bookmarks2 = _interopRequireDefault(_Bookmarks);\n    var _Thumbnails = __webpack_require__(63);\n    var _Thumbnails2 = _interopRequireDefault(_Thumbnails);\n    var _TocController = __webpack_require__(40);\n    var _TocController2 = _interopRequireDefault(_TocController);\n    var _BookPrinter = __webpack_require__(28);\n    var _BookPrinter2 = _interopRequireDefault(_BookPrinter);\n    var _AutoNavigator = __webpack_require__(24);\n    var _AutoNavigator2 = _interopRequireDefault(_AutoNavigator);\n    var _SoundsEnviroment = __webpack_require__(39);\n    var _SoundsEnviroment2 = _interopRequireDefault(_SoundsEnviroment);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    _libs.$.fn.FlipBook = function (options) {\n      var scene = {\n        dispose: function dispose() {\n          if (this.ready) {\n            !scene.pdfLinksHandler || scene.pdfLinksHandler.dispose();\n            delete scene.pdfLinksHandler;\n            scene.sounds.dispose();\n            delete scene.sounds;\n            scene.tocCtrl.dispose();\n            delete scene.tocCtrl;\n            scene.thumbnails.dispose();\n            delete scene.thumbnails;\n            !scene.bookmarks || scene.bookmarks.dispose();\n            delete scene.bookmarks;\n            scene.ctrl.dispose();\n            delete scene.ctrl;\n            scene.bookPrinter.dispose();\n            delete scene.bookPrinter;\n            scene.book.dispose();\n            delete scene.book;\n            scene.propsBuilder.dispose();\n            delete scene.propsBuilder;\n            delete scene.bookBuilder;\n            scene.visual.dispose();\n            delete scene.visual;\n            scene.view.dispose();\n            delete scene.view;\n            delete scene.dispose;\n          } else {\n            this.pendingDispose = true;\n          }\n        }\n      };\n      options = _extends({}, options);\n      scene.view = new _BookView2.default(this.length ? this[0] : (0, _libs.$)('<div>').appendTo('body'), function () {\n        if (!_Detector2.default.webgl) {\n          _Detector2.default.addGetWebGLMessage({\n            parent: scene.view.getView()\n          });\n        } else {\n          scene.loadingCtrl = new _LoadingController2.default(scene.view, true, function (progress) {\n            return progress === 0 ? (0, _libs.tr)('Please wait... the Application is Loading') : (0, _libs.tr)('PDF is Loading:') + ' ' + progress + '%';\n          });\n          scene.visual = new _VisualWorld2.default(scene.view.getContainer().ownerDocument.defaultView, scene.view.getContainer().ownerDocument, scene.view.getView());\n          scene.bookBuilder = function (props, sheets, pageCallback) {\n            props.cssLayerProps = _extends({}, props.cssLayerProps, {\n              scene: scene\n            });\n            if (options.propertiesCallback) {\n              props = options.propertiesCallback(props);\n            }\n            scene.book = new _Book2.default(scene.visual, sheets, pageCallback, props);\n            scene.bookPrinter = new _BookPrinter2.default(scene.visual, scene.book, (options.template || {}).printStyle);\n            scene.loadingCtrl.dispose();\n            delete scene.loadingCtrl;\n            scene.ctrl = new _BookController2.default(scene.book, scene.view, options.controlsProps);\n            scene.book.setInjector(function (w) {\n              w.jQuery = w.$ = _libs.$;\n              w.book = scene.book;\n              w.bookCtrl = scene.ctrl;\n              if (props.injector) {\n                props.injector(w);\n              }\n            });\n            scene.view.addHandler(scene.ctrl);\n            scene.ctrl.setPrinter(scene.bookPrinter);\n            var test = pageCallback(0);\n            scene.search = new _Search2.default(scene.view.getSearchView(), scene.book.getPages());\n            scene.search.onQuery = scene.book.setQuery.bind(scene.book);\n            scene.book.addEventListener('searchResults', function (e) {\n              scene.search.setResults(e.results, e.lastPage);\n            });\n            scene.thumbnails = new _Thumbnails2.default(scene.visual, scene.view.getThumbnailsView(), pageCallback, 2 * (sheets + 2), {\n              kWtoH: props.width / props.height\n            });\n            scene.tocCtrl = new _TocController2.default(scene.view, scene.ctrl);\n            scene.tocCtrl.setThumbnails(scene.thumbnails);\n            scene.tocCtrl.setSearch(scene.search);\n            scene.ctrl.setTocCtrl(scene.tocCtrl);\n            scene.view.addHandler(scene.tocCtrl);\n            if (test.type === 'pdf') {\n              scene.pdfLinksHandler = new _PdfLinksHandler2.default(test.src, scene.ctrl, scene.visual.element);\n              scene.book.addEventListener('pdfAnnotation', scene.pdfLinksHandler.handleEvent.bind(scene.pdfLinksHandler));\n              test.src.getHandler(function (handler) {\n                handler.getOutline().then(function (outline) {\n                  scene.bookmarks = new _Bookmarks2.default(scene.view.getBookmarksView(), outline);\n                  scene.tocCtrl.setBookmarks(scene.bookmarks, test.src);\n                });\n              });\n              if (options.pdfLinks && options.pdfLinks.handler) {\n                scene.pdfLinksHandler.setHandler(options.pdfLinks.handler);\n              }\n            }\n            scene.sounds = new _SoundsEnviroment2.default(options.template);\n            scene.ctrl.setSounds(scene.sounds);\n            scene.sounds.subscribeFlips(scene.ctrl);\n            scene.ready = true;\n            new _AutoNavigator2.default(scene.visual, scene.ctrl, options.autoNavigation).dispose();\n            if (options.ready) {\n              options.ready(scene);\n            }\n            if (scene.pendingDispose) {\n              scene.dispose();\n            }\n          };\n          if (options.pdf) {\n            scene.propsBuilder = new _PdfBookPropsBuilder2.default(options.pdf, scene.bookBuilder);\n            scene.propsBuilder.pdf.setLoadingProgressClb(scene.loadingCtrl.setProgress.bind(scene.loadingCtrl));\n          } else if (options.pageCallback) {\n            scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, options.pageCallback, options.pages, scene.bookBuilder);\n          } else {\n            scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, _Book2.default.pageCallback, 6, scene.bookBuilder);\n          }\n        }\n      }, options.template);\n      return scene;\n    };\n    (0, _libs.$)(function () {\n      var containers = (0, _libs.$)('.flip-book-container');\n      for (var i = 0; i < containers.length; ++i) {\n        var jContainer = (0, _libs.$)(containers[i]),\n          src = jContainer.attr('src');\n        if (!!src) {\n          jContainer.FlipBook({\n            pdf: src\n          });\n        }\n      }\n    });\n    window.jQuery = window.$ = _libs.$;\n\n    /***/\n  }, /* 23 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    if (!Array.prototype.fill) {\n      Array.prototype.fill = function (value) {\n        // Шаги 1-2.\n        if (this == null) {\n          throw new TypeError('this is null or not defined');\n        }\n        var O = Object(this);\n\n        // Шаги 3-5.\n        var len = O.length >>> 0;\n\n        // Шаги 6-7.\n        var start = arguments[1];\n        var relativeStart = start >> 0;\n\n        // Шаг 8.\n        var k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);\n\n        // Шаги 9-10.\n        var end = arguments[2];\n        var relativeEnd = end === undefined ? len : end >> 0;\n\n        // Шаг 11.\n        var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);\n\n        // Шаг 12.\n        while (k < final) {\n          O[k] = value;\n          k++;\n        }\n\n        // Шаг 13.\n        return O;\n      };\n    }\n    if (!Array.prototype.find) {\n      Object.defineProperty(Array.prototype, 'find', {\n        value: function value(predicate) {\n          'use strict';\n\n          if (this == null) {\n            throw new TypeError('Array.prototype.find called on null or undefined');\n          }\n          if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n          }\n          var list = Object(this);\n          var length = list.length >>> 0;\n          var thisArg = arguments[1];\n          var value;\n          for (var i = 0; i < length; i++) {\n            value = list[i];\n            if (predicate.call(thisArg, value, i, list)) {\n              return value;\n            }\n          }\n          return undefined;\n        }\n      });\n    }\n    if (!Array.prototype.findIndex) {\n      Array.prototype.findIndex = function (predicate) {\n        if (this == null) {\n          throw new TypeError('Array.prototype.findIndex called on null or undefined');\n        }\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        }\n        var list = Object(this);\n        var length = list.length >>> 0;\n        var thisArg = arguments[1];\n        var value;\n        for (var i = 0; i < length; i++) {\n          value = list[i];\n          if (predicate.call(thisArg, value, i, list)) {\n            return i;\n          }\n        }\n        return -1;\n      };\n    }\n    if (!Object.values) {\n      Object.values = function values(O) {\n        return Object.keys(O).map(function (name) {\n          return O[name];\n        }) || [];\n      };\n    }\n\n    /***/\n  }, /* 24 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var AutoNavigator = function () {\n      function AutoNavigator(context, bookCtrl) {\n        var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        _classCallCheck(this, AutoNavigator);\n        props = _extends({}, props, {\n          urlParam: props.urlParam || 'fb3d-page',\n          navigates: props.navigates === undefined ? 1 : props.navigates\n        });\n        this.props = props;\n        this.context = context;\n        this.bookCtrl = bookCtrl;\n        this.urlParam = props.urlParam;\n        this.wnd = context.wnd;\n        this.wnd.fb3d = _extends({}, this.wnd.fb3d);\n        this.wnd.fb3d.navigator = _extends({}, this.wnd.fb3d.navigator);\n        this.navigator = this.wnd.fb3d.navigator[this.urlParam] = _extends({}, this.wnd.fb3d.navigator[this.urlParam]);\n        this.navigator.instances = (this.navigator.instances || 0) + 1;\n        if (this.navigator.instances <= this.props.navigates) {\n          this.bookCtrl.goToPage(this.getPageNumber());\n        }\n      }\n      AutoNavigator.prototype.dispose = function dispose() {};\n      AutoNavigator.prototype.getParameterByName = function getParameterByName(name, url) {\n        if (!url) {\n          url = window.location.href;\n        }\n        name = name.replace(/[\\[\\]]/g, '\\\\$&');\n        var regex = new RegExp('[?&]' + name + '(=([^]*)|&|#|$)'),\n          results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return '';\n        return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n      };\n      AutoNavigator.prototype.getPageNumber = function getPageNumber() {\n        var number = this.getParameterByName(this.urlParam);\n        number = parseInt(number);\n        if (isNaN(number)) {\n          number = 1;\n        }\n        return number - 1;\n      };\n      return AutoNavigator;\n    }();\n    exports.default = AutoNavigator;\n\n    /***/\n  }, /* 25 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _MathUtils = __webpack_require__(3);\n    var _MathUtils2 = _interopRequireDefault(_MathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Binder = function () {\n      function Binder(visual, p) {\n        var _this = this;\n        _classCallCheck(this, Binder);\n        this.visual = visual;\n        this.p = _extends({}, p, {\n          backSize: 2 * p.cover.depth + p.sheets * p.page.depth\n        });\n        this.OZ = new _libs.THREE.Vector3(0, 0, 1);\n        this.backG = new _libs.THREE.BoxGeometry(p.cover.depth, this.p.backSize, p.cover.height);\n        this.materials = [new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        }), new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        }), new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        }), new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        }), new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        }), new _libs.THREE.MeshPhongMaterial({\n          color: p.cover.color\n        })];\n        var backM = new _libs.THREE.Mesh(this.backG, new _libs.THREE.MeshFaceMaterial(this.materials));\n        if (p.cover.binderTexture !== '') {\n          this.visual.textureLoader.load(p.cover.binderTexture, function (texture) {\n            _this.materials[1].color.setHex(0xFFFFFF);\n            _this.materials[1].map = texture;\n            texture.minFilter = _libs.THREE.LinearFilter;\n            texture.needsUpdate = true;\n            _this.materials[1].needsUpdate = true;\n          });\n        }\n        this.three = new _libs.THREE.Object3D();\n        this.back = new _libs.THREE.Object3D();\n        this.backRT = new _libs.THREE.Object3D();\n        this.backRR = new _libs.THREE.Object3D();\n        this.backLT = new _libs.THREE.Object3D();\n        this.backLR = new _libs.THREE.Object3D();\n        this.leftPivot = new _libs.THREE.Object3D();\n        this.rightPivot = new _libs.THREE.Object3D();\n        this.back.add(backM);\n        this.back.add(this.leftPivot);\n        this.back.add(this.rightPivot);\n        this.backRT.add(this.back);\n        this.backRR.add(this.backRT);\n        this.backLT.add(this.backRR);\n        this.backLR.add(this.backLT);\n        this.three.add(this.backLR);\n      }\n      Binder.prototype.dispose = function dispose() {\n        for (var _iterator = this.materials, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var m = _ref;\n          if (m.map) {\n            m.map = null;\n            m.needsUpdate = true;\n          }\n          m.dispose();\n        }\n        delete this.materials;\n        this.backG.dispose();\n      };\n      Binder.prototype.set = function set(angle) {\n        var right = void 0,\n          left = void 0;\n        if (angle > Math.PI / 2) {\n          right = Math.PI / 2;\n          left = angle - Math.PI / 2;\n        } else {\n          right = angle;\n          left = 0;\n        }\n        var p = this.p,\n          tr1 = {\n            x: -0.5 * p.cover.depth,\n            y: 0.5 * p.backSize - p.cover.depth\n          };\n        this.backRT.position.set(tr1.x, tr1.y, 0);\n        this.backRR.position.set(-tr1.x, -tr1.y, 0);\n        this.backRR.quaternion.setFromAxisAngle(this.OZ, right);\n        var tr2 = {\n          x: p.backSize - 2 * p.cover.depth - 0.5 * p.cover.depth,\n          y: 0.5 * p.backSize - p.cover.depth\n        };\n        this.backLT.position.set(tr2.x, tr2.y, 0);\n        this.backLR.position.set(-tr2.x, -tr2.y, 0);\n        this.backLR.quaternion.setFromAxisAngle(this.OZ, left);\n      };\n      Binder.prototype.setLeft = function setLeft(angle) {\n        var PI = Math.PI;\n        this.leftPivot.position.set(_MathUtils2.default.interpolateLinear([-PI, -PI / 2], [0, this.p.cover.depth], angle), 0.5 * this.p.backSize - 0.5 * this.p.cover.depth, 0);\n        this.leftPivot.quaternion.setFromAxisAngle(this.OZ, angle);\n      };\n      Binder.prototype.setRight = function setRight(angle) {\n        var PI = Math.PI;\n        this.rightPivot.position.set(_MathUtils2.default.interpolateLinear([-PI / 2, 0], [this.p.cover.depth, 0], angle), -0.5 * this.p.backSize + 0.5 * this.p.cover.depth, 0);\n        this.rightPivot.quaternion.setFromAxisAngle(this.OZ, angle);\n      };\n      Binder.prototype.joinLeftCover = function joinLeftCover(cover) {\n        cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);\n        this.leftPivot.add(cover.three);\n      };\n      Binder.prototype.disconnectLeftCover = function disconnectLeftCover(cover) {\n        this.leftPivot.remove(cover.three);\n      };\n      Binder.prototype.joinRightCover = function joinRightCover(cover) {\n        cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);\n        this.rightPivot.add(cover.three);\n      };\n      Binder.prototype.disconnectRightCover = function disconnectRightCover(cover) {\n        this.rightPivot.remove(cover.three);\n      };\n      return Binder;\n    }();\n    exports.default = Binder;\n\n    /***/\n  }, /* 26 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _book = __webpack_require__(11);\n    var _GraphUtils = __webpack_require__(7);\n    var _GraphUtils2 = _interopRequireDefault(_GraphUtils);\n    var _Binder = __webpack_require__(25);\n    var _Binder2 = _interopRequireDefault(_Binder);\n    var _Cover = __webpack_require__(31);\n    var _Cover2 = _interopRequireDefault(_Cover);\n    var _SheetBlock = __webpack_require__(10);\n    var _SheetBlock2 = _interopRequireDefault(_SheetBlock);\n    var _SheetPhysics = __webpack_require__(38);\n    var _SheetPhysics2 = _interopRequireDefault(_SheetPhysics);\n    var _PageManager = __webpack_require__(33);\n    var _PageManager2 = _interopRequireDefault(_PageManager);\n    var _CSSLayer = __webpack_require__(13);\n    var _CSSLayer2 = _interopRequireDefault(_CSSLayer);\n    var _CssLayersManager = __webpack_require__(32);\n    var _CssLayersManager2 = _interopRequireDefault(_CssLayersManager);\n    var _SearchEngine = __webpack_require__(36);\n    var _SearchEngine2 = _interopRequireDefault(_SearchEngine);\n    var _CustomEventConverter = __webpack_require__(16);\n    var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);\n    var _CircleTarget = __webpack_require__(68);\n    var _CircleTarget2 = _interopRequireDefault(_CircleTarget);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var Book = function (_THREE$EventDispatche) {\n      _inherits(Book, _THREE$EventDispatche);\n\n      // pageCallback samples\n\n      // (n)=> ({\n      //   type: 'image',\n      //   src: 'sample.png',\n      //   interactive: false\n      // });\n      //\n      // (n)=> ({\n      //   type: 'html',\n      //   src: 'sample.html',\n      //   interactive: true\n      // });\n      //\n      // const pdf = new Pdf('sample.pdf');\n      // (n)=> ({\n      //   type: 'pdf',\n      //   src: pdf,\n      //   interactive: false\n      // });\n\n      function Book(visual, sheets, pageCallback, props) {\n        _classCallCheck(this, Book);\n        var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));\n        sheets = Math.min(3, sheets);\n        visual.jContainer.append('\\n      <style type=\"text/css\">\\n        .demo-msg {\\n          position: absolute;\\n          top: 10px;\\n          right: 10px;\\n          padding: 10px;\\n          background-color: #ffe4e1;\\n          border-radius: 3px;\\n        }\\n      </style>\\n      <div class=\"demo-msg\">\\n        This is the demo version, only 10 pages are available. Use the <a href=\"http://3dflipbook.net/download-jq\" target=\"_blank\">full version</a>.\\n      </div>\\n    ');\n        _this.visual = visual;\n        _this.mouseController = true;\n        _this.p = _extends({}, Book.prepareProps(props), {\n          sheets: sheets,\n          pageCallback: pageCallback,\n          zoom: 1,\n          singlePage: false,\n          autoResolution: {\n            enable: false,\n            k: 1.5\n          }\n        });\n        _this.pageManager = new _PageManager2.default(visual, _this, _this.p);\n        _CSSLayer2.default.init(visual.doc);\n        _this.layerManager = new _CssLayersManager2.default(_this);\n        _this.searchEngine = new _SearchEngine2.default(pageCallback, 2 * (sheets + 2));\n        _this.searchEngine.onPageHitsChanged = function (page, query) {\n          _this.pageManager.refreshPageQuery(page, query);\n          _this.dispatchEvent({\n            type: 'searchResults',\n            results: _this.searchEngine.results,\n            lastPage: page,\n            query: query\n          });\n        };\n        _this.three = new _libs.THREE.Object3D();\n        _this.binder = new _Binder2.default(visual, _this.p);\n        _this.three.add(_this.binder.three);\n        _this.leftCover = new _Cover2.default(visual, _extends({}, _this.p, {\n          setTexture: _this.setLeftCoverTexture.bind(_this)\n        }), Math.PI / 2, 'opened');\n        _this.binder.joinLeftCover(_this.leftCover);\n        _this.subscribeSheetBlock(_this.leftCover, 0);\n        _this.rightCover = new _Cover2.default(visual, _extends({}, _this.p, {\n          setTexture: _this.setRightCoverTexture.bind(_this)\n        }), 0, 'closed');\n        _this.binder.joinRightCover(_this.rightCover);\n        _this.subscribeSheetBlock(_this.rightCover, 2 * (_this.p.sheets + 1));\n        _this.threeSheetBlocks = new _libs.THREE.Object3D();\n        _this.three.add(_this.threeSheetBlocks);\n        _this.threeSheetBlocks.position.set(0.5 * _this.p.cover.depth - 0.5 * sheets * _this.p.page.depth, -0.5 * sheets * _this.p.page.depth, 0);\n        _this.sheetBlocks = [];\n        if (sheets > 0) {\n          _this.addSheetBlock(0, new _SheetBlock2.default(visual, _extends({}, _this.p, {\n            setTexture: _this.setPageTexture.bind(_this)\n          }), 0, sheets, 0, 'closed'));\n        }\n        _this.angle = _this.p.rtl ? Math.PI : 0;\n        _this.closedAngle = 0;\n        _this.set(_this.angle, 0);\n        _this.lastMousePos = {\n          t: 0\n        };\n        _this.three.position.set(-0.5 * _this.p.cover.depth + 0.5 * sheets * _this.p.page.depth, 0, 0);\n        _this.sheetPhysics = new _SheetPhysics2.default(_this.p.page.width / _this.p.scale, _this.p.gravity, _this.p.page.cornerDeviation);\n        _this.binds = {\n          update: _this.update.bind(_this),\n          lastMousePos: function lastMousePos(e) {\n            _this.lastMousePos = _extends({}, _this.lastMousePos, {\n              pageX: e.pageX,\n              pageY: e.pageY\n            });\n          }\n        };\n        _this.visual.addRenderCallback(_this.binds.update);\n        (0, _libs.$)(_this.visual.element).on('mousemove', _this.binds.lastMousePos);\n        _this.binds.onPickCallback = _this.onPickCallback.bind(_this);\n        _this.visual.drag.onPickCallback = _this.binds.onPickCallback;\n        _this.binds.onDragCallback = _this.onDragCallback.bind(_this);\n        _this.visual.drag.onDragCallback = _this.binds.onDragCallback;\n        _this.binds.onReleaseCallback = _this.onReleaseCallback.bind(_this);\n        _this.visual.drag.onReleaseCallback = _this.binds.onReleaseCallback;\n        _this.dragAngle = 0.05;\n        _this.tmp = {\n          boxs: [new _libs.THREE.Box3(), new _libs.THREE.Box3()]\n        };\n        _this.visual.addObject(_this.three);\n        _this.visual.addEventListener('resize', _this.pageManager.refreshZoom.bind(_this.pageManager));\n        setTimeout(function () {\n          _this.notifyBeforeAnimation();\n          _this.notifyAfterAnimation();\n        }, 100);\n        return _this;\n      }\n      Book.prototype.dispose = function dispose() {\n        this.visual.removeObject(this.three);\n        this.sheetPhysics.dispose();\n        delete this.visual.drag.onPickCallback;\n        delete this.visual.drag.onDragCallback;\n        delete this.visual.drag.onReleaseCallback;\n        (0, _libs.$)(this.visual.element).off('mousemove', this.binds.lastMousePos);\n        this.visual.removeRenderCallback(this.binds.update);\n        this.removeSheetBlocks(0, this.sheetBlocks.length);\n        this.binder.disconnectLeftCover(this.leftCover);\n        this.removeSheetBlock(this.leftCover);\n        this.binder.disconnectRightCover(this.rightCover);\n        this.removeSheetBlock(this.rightCover);\n        this.binder.dispose();\n        this.layerManager.dispose();\n        _CSSLayer2.default.dispose();\n        this.pageManager.dispose();\n      };\n\n      // publics {\n\n      Book.prototype.setAutoResolution = function setAutoResolution(enable) {\n        var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.5;\n        this.p.autoResolution = _extends({}, this.p.autoResolution, {\n          enable: enable,\n          k: k\n        });\n      };\n      Book.prototype.setZoom = function setZoom(zoom, singlePage) {\n        if (Math.abs(this.p.zoom - zoom) > 1e-3 || singlePage !== this.p.singlePage) {\n          this.p.zoom = zoom;\n          this.p.singlePage = singlePage;\n          this.pageManager.refreshZoom();\n        }\n      };\n      Book.prototype.getPageCallback = function getPageCallback() {\n        return this.p.pageCallback;\n      };\n      Book.prototype.setQuery = function setQuery(query) {\n        this.searchEngine.setQuery(query);\n      };\n      Book.prototype.isProcessing = function isProcessing() {\n        return this.sheetPhysics.getSize() !== 0;\n      };\n      Book.prototype.getPages = function getPages() {\n        return 4 + 2 * this.p.sheets;\n      };\n      Book.prototype.setFlipProgressClb = function setFlipProgressClb(clb) {\n        this.p.flipProgressClb = clb;\n      };\n      Book.prototype.setInjector = function setInjector(injector) {\n        this.p.injector = injector;\n      };\n      Book.prototype.isActivePage = function isActivePage(n) {\n        var res = true;\n        if (n > 1 && n < this.getPages() - 2) {\n          for (var _iterator = this.sheetBlocks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n            var b = _ref;\n            if (n - 2 > 2 * b.p.first && n - 2 < 2 * b.p.last - 1) {\n              res = false;\n              break;\n            }\n          }\n        }\n        return res;\n      };\n      Book.prototype.getBlockByPage = function getBlockByPage(n) {\n        var block = void 0;\n        if (n < 2) {\n          block = this.leftCover;\n        } else if (n < 2 * (this.p.sheets + 1)) {\n          for (var _iterator2 = this.sheetBlocks, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var b = _ref2;\n            if (n - 2 >= 2 * b.p.first && n - 2 < 2 * b.p.last) {\n              block = b;\n              break;\n            }\n          }\n        } else {\n          block = this.rightCover;\n        }\n        return block;\n      };\n      Book.prototype.getBlockPages = function getBlockPages(block) {\n        var range = void 0;\n        switch (block) {\n          case this.leftCover:\n            {\n              range = [0, 1];\n              break;\n            }\n          case this.rightCover:\n            {\n              range = [2 * (this.p.sheets + 1), 2 * (this.p.sheets + 1) + 1];\n              break;\n            }\n          default:\n            {\n              range = block ? [2 * (block.p.first + 1), 2 * (block.p.last + 1) - 1] : undefined;\n            }\n        }\n        return range;\n      };\n      Book.prototype.getPage = function getPage() {\n        var PI = Math.PI;\n        var p = void 0;\n        if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {\n          for (var _iterator3 = this.sheetBlocks, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n            var _ref3;\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref3 = _i3.value;\n            }\n            var block = _ref3;\n            if (block.angle <= PI / 2) {\n              p = this.getBlockPages(block)[0] - 1;\n              break;\n            }\n          }\n          if (!p) {\n            p = this.getPages() - 3;\n          }\n        } else if (this.angle < PI / 2) {\n          p = 0;\n        } else if (this.angle > 3 * PI / 2) {\n          p = 1;\n        } else if (this.angle < PI) {\n          p = this.getPages() - 3;\n        } else if (this.angle >= PI) {\n          p = this.getPages() - 1;\n        }\n        return p;\n      };\n      Book.prototype.getTopPages = function getTopPages() {\n        var p = this.getPage();\n        return p === 0 || p === this.getPages() - 1 ? [p] : [p, p + 1];\n      };\n      Book.prototype.getPageState = function getPageState(n) {\n        return this.pageManager.getPageState(n);\n      };\n      Book.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {\n        this.pageManager.enableLoadingAnimation(enable);\n      };\n      Book.prototype.getLeftFlipping = function getLeftFlipping() {\n        var block = void 0;\n        var left = this.sheetBlocks[0],\n          PI = Math.PI;\n        if (this.angle === PI) {\n          block = this.rightCover;\n        } else {\n          if (left && left.state === 'closed' && left.angle > PI / 2) {\n            block = left;\n          } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {\n            block = this.leftCover;\n          }\n        }\n        return block;\n      };\n      Book.prototype.getRightFlipping = function getRightFlipping() {\n        var block = void 0;\n        var right = this.sheetBlocks[this.sheetBlocks.length - 1],\n          PI = Math.PI;\n        if (this.angle === 0) {\n          block = this.leftCover;\n        } else {\n          if (right && right.state === 'closed' && right.angle <= PI / 2) {\n            block = right;\n          } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {\n            block = this.rightCover;\n          }\n        }\n        return block;\n      };\n      Book.prototype.getClosedBlockAngle = function getClosedBlockAngle(angle) {\n        var closedAngle = void 0,\n          PI = Math.PI;\n        if (this.leftCover.physicId) {\n          var test = void 0;\n          try {\n            test = Math.abs(this.sheetPhysics.getParametr(this.leftCover.physicId, 'angle') - angle);\n          } catch (e) {\n            test = 0;\n          }\n          closedAngle = angle > PI / 2 || test > PI / 6 ? PI / 2 : this.closedAngle;\n        } else if (this.rightCover.physicId) {\n          var _test = void 0;\n          try {\n            _test = Math.abs(this.sheetPhysics.getParametr(this.rightCover.physicId, 'angle') - angle);\n          } catch (e) {\n            _test = 0;\n          }\n          closedAngle = angle < PI / 2 || _test > PI / 6 ? PI / 2 + 1e-7 : this.closedAngle;\n        } else {\n          closedAngle = PI / 2 + (angle !== 0) * 1e-7;\n        }\n        return {\n          openedAngle: angle,\n          closedAngle: closedAngle,\n          binderTurn: this.closedAngle\n        };\n      };\n      Book.prototype.flipLeft = function flipLeft() {\n        var _this2 = this;\n        var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;\n        var block = void 0,\n          res = void 0;\n        if (this.sheetPhysics.getSize() < 25) {\n          (function () {\n            var left = _this2.sheetBlocks[0],\n              PI = Math.PI;\n            if (_this2.angle === PI) {\n              res = _this2.connectPhysics(block = _this2.rightCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {\n                return _this2.set(3 * PI / 2 - angle / 2, height);\n              }, function (angle, height) {\n                _this2.set(3 * PI / 2 - angle / 2, 0);\n                _this2.setSheetBlocks(angle ? PI : PI / 2 + 1e-7, 'closed');\n              }, progressClb);\n            } else {\n              if (left && left.state === 'closed' && left.angle > PI / 2) {\n                block = size < left.getSize() ? _this2.splitSheetBlock(0, left.getSize() - size)[1] : left;\n                res = _this2.connectPhysics(block, _this2.p.page.mass * block.getSize(), PI, -_this2.p.page.startVelocity, _this2.p.page.flexibility, 0, function (angle, height) {\n                  return block.set(_this2.getClosedBlockAngle(angle), 'opened', height);\n                }, Book.finishAnimationClb.bind({\n                  book: _this2,\n                  block: block\n                }), progressClb);\n              } else if (_this2.angle === PI / 2 || _this2.angle === 3 * PI / 2) {\n                res = _this2.connectPhysics(block = _this2.leftCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {\n                  _this2.set(2 * PI - angle / 2, height);\n                  if (angle > PI / 2) {\n                    _this2.setSheetBlocks(angle ? PI / 2 : 0, 'closed');\n                  }\n                }, function (angle, height) {\n                  return _this2.set(angle === 0 ? 0 : 2 * PI - angle / 2, 0);\n                }, progressClb);\n              }\n            }\n          })();\n        }\n        return res;\n      };\n      Book.prototype.flipRight = function flipRight() {\n        var _this3 = this;\n        var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;\n        var block = void 0,\n          res = void 0;\n        if (this.sheetPhysics.getSize() < 25) {\n          (function () {\n            var right = _this3.sheetBlocks[_this3.sheetBlocks.length - 1],\n              PI = Math.PI;\n            if (_this3.angle === 0) {\n              res = _this3.connectPhysics(block = _this3.leftCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {\n                return _this3.set(angle / 2, height);\n              }, function (angle, height) {\n                _this3.set(angle / 2, 0);\n                _this3.setSheetBlocks(angle ? PI / 2 : 0, 'closed');\n              }, progressClb);\n            } else {\n              if (right && right.state === 'closed' && right.angle <= PI / 2) {\n                block = size < right.getSize() ? _this3.splitSheetBlock(_this3.sheetBlocks.length - 1, size)[0] : right;\n                res = _this3.connectPhysics(block, _this3.p.page.mass * block.getSize(), 0, _this3.p.page.startVelocity, _this3.p.page.flexibility, 0, function (angle, height) {\n                  return block.set(_this3.getClosedBlockAngle(angle), 'opened', height);\n                }, Book.finishAnimationClb.bind({\n                  book: _this3,\n                  block: block\n                }), progressClb);\n              } else if (_this3.angle === PI / 2 || _this3.angle === 3 * PI / 2) {\n                res = _this3.connectPhysics(block = _this3.rightCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {\n                  _this3.set(PI / 2 + angle / 2, height);\n                  if (angle < PI / 2) {\n                    _this3.setSheetBlocks(PI / 2 + 1e-7, 'closed');\n                  }\n                }, function (angle, height) {\n                  return _this3.set(PI / 2 + angle / 2, 0);\n                }, progressClb);\n              }\n            }\n          })();\n        }\n        return res;\n      };\n\n      // }\n\n      Book.prototype.clearHoverInfo = function clearHoverInfo() {\n        this.pageManager.turnOnEvents();\n        delete this.hoverInfo.block.force;\n        delete this.hoverInfo.block.cornerForce;\n        delete this.hoverInfo;\n      };\n      Book.prototype.xSegment = function xSegment() {\n        var boxs = this.tmp.boxs,\n          res = {};\n        if (this.leftCover.physicId) {\n          boxs[0].setFromObject(this.rightCover.three);\n          res.min = -(res.max = boxs[0].max.x);\n        } else if (this.rightCover.physicId) {\n          boxs[0].setFromObject(this.leftCover.three);\n          res.max = -(res.min = boxs[0].min.x);\n        } else {\n          boxs[0].setFromObject(this.leftCover.three);\n          boxs[1].setFromObject(this.rightCover.three);\n          boxs[0].union(boxs[1]);\n          res.min = boxs[0].min.x;\n          res.max = boxs[0].max.x;\n        }\n        return res;\n      };\n      Book.prototype.computeTarget = function computeTarget(point) {\n        var x = point.x,\n          y = point.y,\n          seg = this.xSegment(),\n          angle = void 0;\n        angle = (seg.max - x) / (seg.max - seg.min) * Math.PI;\n        // angle = Math.acos(x/Math.sqrt(x*x+y*y));\n        return Math.max(this.dragAngle, Math.min(Math.PI - this.dragAngle, angle));\n      };\n      Book.prototype.onPickCallback = function onPickCallback(object) {\n        var res = false;\n        var block = object.object.userData.self,\n          p = _extends({}, object.uv),\n          i = object.face.materialIndex;\n        if (i < 2) {\n          p.x = i === 0 ? p.x : 1 - p.x;\n          if (block.cornerTarget.testIntersection(null, p) && block.physicId) {\n            if (this.hoverInfo) {\n              this.clearHoverInfo();\n            }\n            block.force = _SheetPhysics2.default.dragForceClb;\n            block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(object.point));\n            this.dragInfo = {\n              object: object,\n              block: block\n            };\n            res = true;\n            this.pageManager.turnOffEvents();\n          }\n        }\n        return res;\n      };\n      Book.prototype.onDragCallback = function onDragCallback(point) {\n        var block = this.dragInfo.block,\n          p = block.getProps();\n        block.force = _SheetPhysics2.default.dragForceClb;\n        block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(point));\n        return true;\n      };\n      Book.prototype.onReleaseCallback = function onReleaseCallback() {\n        delete this.dragInfo.block.force;\n        delete this.dragInfo.block.cornerForce;\n        delete this.dragInfo;\n        this.pageManager.turnOnEvents();\n      };\n      Book.prototype.getFlipping = function getFlipping(i) {\n        return i ? this.getLeftFlipping() : this.getRightFlipping();\n      };\n      Book.prototype.flip = function flip(i) {\n        var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return i ? this.flipLeft(size) : this.flipRight(size);\n      };\n      Book.prototype.enableMouse = function enableMouse(enable) {\n        this.mouseController = enable;\n      };\n      Book.prototype.cornerCallback = function cornerCallback(e, data) {\n        var _this4 = this;\n        if (this.mouseController) {\n          (function () {\n            var _data$data = data.data,\n              i = _data$data.i,\n              n = _data$data.n;\n            if (e.type === 'mouseover') {\n              if (_this4.hoverInfo && _this4.hoverInfo.pendings !== undefined) {\n                ++_this4.hoverInfo.pendings;\n              } else {\n                if (_this4.hoverInfo) {\n                  console.warn('Wrong state: element is already hover');\n                  if (_this4.hoverInfo.n !== n) {\n                    _this4.clearHoverInfo();\n                  }\n                }\n                if (!_this4.hoverInfo && !_this4.dragInfo) {\n                  (function () {\n                    var res = Promise.resolve(undefined);\n                    var hoverAngle = 0.02,\n                      hover = _this4.getBlockByPage(n),\n                      possible = _this4.getFlipping(i);\n                    if (n > 1 && n < 2 * (_this4.p.sheets + 1) && hover.physicId && (hover.angle < hoverAngle || hover.angle > Math.PI - hoverAngle)) {\n                      res = Promise.resolve(hover);\n                    } else if (hover === possible) {\n                      var sheetBlocks = [_this4.leftCover].concat(_this4.sheetBlocks, [_this4.rightCover]);\n                      var j = sheetBlocks.indexOf(hover),\n                        nextBlock = ~j ? sheetBlocks[j + 2 * i - 1] : undefined;\n                      if (!nextBlock || !nextBlock.physicId || nextBlock.angle > hoverAngle && nextBlock.angle < Math.PI - hoverAngle) {\n                        res = _this4.flip(i, 1).then(function (block) {\n                          if (!block) {\n                            delete _this4.hoverInfo;\n                          } else {\n                            _this4.sheetPhysics.setParametr(block.physicId, 'velocity', 0);\n                          }\n                          return block;\n                        });\n                        _this4.hoverInfo = {\n                          pendings: 1\n                        };\n                      }\n                    }\n                    res.then(function (block) {\n                      if (_this4.hoverInfo && _this4.hoverInfo.pendings < 1) {\n                        block = undefined;\n                        delete _this4.hoverInfo;\n                      }\n                      if (block) {\n                        _this4.pageManager.turnOffEvents();\n                        var p = block.getProps();\n                        block.force = _this4.sheetPhysics.getTargetForceClb(p.mass * block.getSize(), i ? Math.PI - hoverAngle : hoverAngle);\n                        block.cornerForce = function () {\n                          return (i ? -1 : 1) * _SheetPhysics2.default.hoverCornerForceClb();\n                        };\n                        _this4.sheetPhysics.setParametr(block.physicId, 'angle', i ? Math.PI - 0.5 * hoverAngle : 0.5 * hoverAngle);\n                        _this4.hoverInfo = {\n                          n: n,\n                          block: block\n                        };\n                        _this4.update(1 / 30);\n                      }\n                    });\n                  })();\n                }\n              }\n            } else if (_this4.hoverInfo && e.type === 'mouseout') {\n              if (_this4.hoverInfo.pendings !== undefined) {\n                --_this4.hoverInfo.pendings;\n              } else if (n === _this4.hoverInfo.n) {\n                _this4.clearHoverInfo();\n              }\n            } else if (e.type === 'mousedown') {\n              _this4.cornerClickData = {\n                x: e.pageX,\n                y: e.pageY\n              };\n            } else if (e.type === 'click') {\n              if (Math.sqrt(Math.pow(_this4.cornerClickData.x - e.pageX, 2) + Math.pow(_this4.cornerClickData.y - e.pageY, 2)) < 5) {\n                var hover = _this4.getBlockByPage(n);\n                if (hover.physicId) {\n                  var id = hover.physicId,\n                    props = hover.getProps();\n                  _this4.sheetPhysics.setParametr(id, 'velocity', (i ? -1 : 1) * props.startVelocity);\n                }\n              }\n              delete _this4.cornerClickData;\n            }\n          })();\n        }\n      };\n      Book.prototype.addSheetBlock = function addSheetBlock(p, block) {\n        this.sheetBlocks.splice(p, 0, block);\n        this.subscribeSheetBlock(block, 2);\n        this.threeSheetBlocks.add(block.three);\n      };\n      Book.prototype.subscribeSheetBlock = function subscribeSheetBlock(block, offset) {\n        var _this5 = this;\n        var eventConverter = new _CustomEventConverter2.default(this.visual.wnd, this.visual.doc, _CircleTarget2.default.test),\n          r = 0.15,\n          target = new _CircleTarget2.default(1 - 0.5 * r, 0.5 * r, r);\n        target.block = block;\n        target.callback = this.cornerCallback.bind(this);\n        eventConverter.addCustom(target);\n        block.cornerTarget = target;\n        block.three.userData.mouseCallback = function (e, data) {\n          var i = data.face.materialIndex;\n          if (i < 2) {\n            var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;\n            eventConverter.convert(e, {\n              x: i === 0 ? data.uv.x : 1 - data.uv.x,\n              y: data.uv.y,\n              i: i,\n              n: n\n            });\n            _this5.pageManager.transferEventToTexture(n, e, data);\n          }\n        };\n        block.three.userData.touchCallback = function (e, data) {\n          var i = data.face.materialIndex;\n          if (i < 2) {\n            var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;\n            _this5.pageManager.transferEventToTexture(n, e, data);\n          }\n        };\n        this.visual.drag.addThree(block.three);\n        this.visual.mouseEvents.addThree(block.three);\n        this.visual.touchEvents.addThree(block.three);\n      };\n      Book.prototype.removeSheetBlock = function removeSheetBlock(block) {\n        this.visual.mouseEvents.removeThree(block.three);\n        this.visual.touchEvents.removeThree(block.three);\n        this.visual.drag.removeThree(block.three);\n        this.threeSheetBlocks.remove(block.three);\n        block.dispose();\n      };\n      Book.prototype.removeSheetBlocks = function removeSheetBlocks(first, size) {\n        var blocks = this.sheetBlocks.splice(first, size);\n        for (var _iterator4 = blocks, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n          var _ref4;\n          if (_isArray4) {\n            if (_i4 >= _iterator4.length) break;\n            _ref4 = _iterator4[_i4++];\n          } else {\n            _i4 = _iterator4.next();\n            if (_i4.done) break;\n            _ref4 = _i4.value;\n          }\n          var block = _ref4;\n          this.removeSheetBlock(block);\n        }\n      };\n      Book.prototype.setTexture = function setTexture(material, n) {\n        this.pageManager.setTexture(material, n);\n      };\n      Book.prototype.setPageTexture = function setPageTexture(material, n) {\n        this.setTexture(material, n + 2);\n      };\n      Book.prototype.setLeftCoverTexture = function setLeftCoverTexture(material, n) {\n        this.setTexture(material, n);\n      };\n      Book.prototype.setRightCoverTexture = function setRightCoverTexture(material, n) {\n        this.setTexture(material, n + 2 * (this.p.sheets + 1));\n      };\n      Book.finishAnimationClb = function finishAnimationClb(angle) {\n        this.block.set(this.book.getClosedBlockAngle(angle).closedAngle, 'closed', 0);\n        var i = this.book.sheetBlocks.indexOf(this.block);\n        if (~i) {\n          if (angle === 0) {\n            this.book.mergeSheetBlocks(i, this.book.sheetBlocks.length - i);\n          } else {\n            this.book.mergeSheetBlocks(0, i + 1);\n          }\n        }\n      };\n      Book.prototype.calcBlockForce = function calcBlockForce(block, object, angle, velocity, cornerHeight) {\n        return block.force ? block.force(object, angle, velocity, cornerHeight) : 0;\n      };\n      Book.prototype.calcBlockCornerForce = function calcBlockCornerForce(block, object, angle, velocity, cornerHeight) {\n        return block.cornerForce ? block.cornerForce(object, angle, velocity, cornerHeight) : 0;\n      };\n      Book.prototype.notifyBeforeAnimation = function notifyBeforeAnimation() {\n        var res = void 0;\n        if (this.animationNotification) {\n          res = Promise.reject();\n        } else {\n          this.animationNotification = true;\n          this.dispatchEvent({\n            type: 'beforeAnimation'\n          });\n          res = this.layerManager.hide();\n        }\n        return res;\n      };\n      Book.prototype.notifyAfterAnimation = function notifyAfterAnimation() {\n        if (this.animationNotification) {\n          delete this.animationNotification;\n          this.layerManager.show();\n          this.dispatchEvent({\n            type: 'afterAnimation'\n          });\n        }\n      };\n      Book.prototype.connectPhysics = function connectPhysics(block, mass, angle, velocity, flexibility, coverHeight, simulateClb, removeClb, progressClb) {\n        var _this6 = this;\n        var type = function type() {\n            return _this6.hoverInfo ? 'hover' : _this6.dragInfo ? 'drag' : 'free';\n          },\n          res = this.sheetPhysics.getSize() ? Promise.resolve() : this.notifyBeforeAnimation();\n        return res.then(function () {\n          block.physicId = _this6.sheetPhysics.addObject(mass, angle, velocity, flexibility, coverHeight, function (angl, ch) {\n            simulateClb(angl, ch);\n            progressClb(block, Math.abs(angle - angl) / Math.PI, 'process', type());\n          }, function (angl, ch) {\n            removeClb(angl, ch);\n            delete block.physicId;\n            progressClb(block, Math.abs(angle - angl) / Math.PI, 'finish', type());\n            Promise.resolve().then(function () {\n              if (!_this6.sheetPhysics.getSize()) {\n                _this6.notifyAfterAnimation();\n              }\n            });\n          }, function (object, angle, velocity, cornerHeight) {\n            return _this6.calcBlockForce(block, object, angle, velocity, cornerHeight);\n          }, function (object, angle, velocity, cornerHeight) {\n            return _this6.calcBlockCornerForce(block, object, angle, velocity, cornerHeight);\n          });\n          progressClb(block, 0, 'init', type());\n          return block;\n        }).catch(function () {\n          return undefined;\n        });\n      };\n      Book.prototype.update = function update(dt) {\n        var _this7 = this;\n        this.lastMousePos.t += dt;\n        if (this.isProcessing() && this.lastMousePos.pageX !== undefined && this.lastMousePos.t - (this.lastMousePos.lastT || 0) > 0.25 && !this.hoverInfo && !this.dragInfo) {\n          this.lastMousePos.lastT = this.lastMousePos.t;\n          Promise.resolve().then(function () {\n            (0, _libs.$)(_this7.visual.element).trigger(_libs.$.Event('mousemove', _this7.lastMousePos));\n          });\n        }\n        this.sheetPhysics.simulate(dt);\n      };\n      Book.prototype.splitSheetBlock = function splitSheetBlock(i, leftSize) {\n        var block = this.sheetBlocks[i];\n        if (block && leftSize < block.getSize()) {\n          var newBlock = new _SheetBlock2.default(this.visual, _extends({}, this.p, {\n            setTexture: this.setPageTexture.bind(this)\n          }), block.p.first, block.p.first + leftSize, block.angle, block.state);\n          block.set(block.angle, block.state, block.corner.height, block.p.first + leftSize, block.p.last);\n          this.addSheetBlock(i, newBlock);\n          return [newBlock, block];\n        }\n      };\n      Book.prototype.mergeSheetBlocks = function mergeSheetBlocks(first, size) {\n        if (first < this.sheetBlocks.length) {\n          size = Math.min(this.sheetBlocks.length - first, size);\n          var firstBlock = this.sheetBlocks[first],\n            lastBlock = this.sheetBlocks[first + size - 1];\n          firstBlock.set(firstBlock.angle, firstBlock.state, firstBlock.corner.height, firstBlock.p.first, lastBlock.p.last);\n          this.removeSheetBlocks(first + 1, size - 1);\n        }\n      };\n      Book.prototype.setSheetBlocks = function setSheetBlocks(angle, state) {\n        if (state === 'closed') {\n          this.closedAngle = angle;\n        }\n        this.sheetBlocks.forEach(function (s) {\n          if (!s.physicId) {\n            s.set(angle, state);\n          }\n        });\n      };\n      Book.prototype.set = function set(angle) {\n        var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        this.angle = angle;\n        var PI = Math.PI;\n        if (angle < PI / 4) {\n          this.binder.set(0);\n          this.binder.setLeft(-PI / 2 + 2 * angle);\n          this.leftCover.set(PI / 2, 'opened', height);\n          this.setSheetBlocks(0, 'closed');\n          this.binder.setRight(0);\n          this.rightCover.set(0, 'closed', 0);\n        } else if (angle < 2 * PI / 4) {\n          var a = 2 * (angle - PI / 4);\n          this.binder.set(a);\n          this.binder.setLeft(-a);\n          this.leftCover.set(PI / 2 + a, 'opened', height);\n          this.setSheetBlocks(a, 'closed');\n          this.binder.setRight(-a);\n          this.rightCover.set(a, 'closed', 0);\n        } else if (angle < 3 * PI / 4) {\n          var _a = 2 * (angle - PI / 2);\n          this.binder.set(PI / 2);\n          this.binder.setLeft(-PI / 2);\n          this.leftCover.set(PI, 'opened', 0);\n          this.binder.setRight(-PI / 2);\n          this.rightCover.set(_a, 'opened', height);\n        } else if (angle < 4 * PI / 4) {\n          var _a2 = 2 * (angle - 3 * PI / 4) + PI / 2;\n          this.binder.set(_a2);\n          this.binder.setLeft(-_a2);\n          this.leftCover.set(_a2, 'closed', 0);\n          this.setSheetBlocks(_a2, 'closed');\n          this.binder.setRight(-PI / 2);\n          this.rightCover.set(PI / 2, 'opened', height);\n        } else if (angle < 5 * PI / 4) {\n          this.binder.set(PI);\n          this.binder.setLeft(-PI);\n          this.leftCover.set(PI, 'closed', 0);\n          this.setSheetBlocks(PI, 'closed');\n          this.binder.setRight(-PI / 2 - 2 * (angle - PI));\n          this.rightCover.set(PI / 2, 'opened', height);\n        } else if (angle < 6 * PI / 4) {\n          var _a3 = 2 * (angle - 5 * PI / 4);\n          this.binder.set(PI - _a3);\n          this.binder.setLeft(-PI + _a3);\n          this.leftCover.set(PI - _a3, 'closed', 0);\n          this.setSheetBlocks(PI - _a3, 'closed');\n          this.binder.setRight(-PI + _a3);\n          this.rightCover.set(PI / 2 - _a3, 'opened', height);\n        } else if (angle < 7 * PI / 4) {\n          var _a4 = 2 * (angle - 6 * PI / 4);\n          this.binder.set(PI / 2);\n          this.binder.setLeft(-PI / 2);\n          this.leftCover.set(PI - _a4, 'opened', height);\n          this.binder.setRight(-PI / 2);\n          this.rightCover.set(0, 'opened', 0);\n        } else if (angle < 8 * PI / 4) {\n          var _a5 = 2 * (angle - 7 * PI / 4);\n          this.binder.set(PI / 2 - _a5);\n          this.binder.setLeft(-PI / 2);\n          this.leftCover.set(PI / 2, 'opened', height);\n          this.setSheetBlocks(PI / 2 - _a5, 'closed');\n          this.binder.setRight(-PI / 2 + _a5);\n          this.rightCover.set(PI / 2 - _a5, 'closed', 0);\n        }\n      };\n      Book.createSideTexture = function createSideTexture(color) {\n        var jC = (0, _libs.$)('<canvas width=\"8\" height=\"8\"></canvas>');\n        var ctx = jC[0].getContext('2d');\n        ctx.beginPath();\n        ctx.fillStyle = _GraphUtils2.default.color2Rgba(color, 1);\n        ctx.rect(0, 0, 8, 7);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(color, 0.5), 1);\n        ctx.rect(0, 7, 8, 1);\n        ctx.fill();\n        return jC[0];\n      };\n      Book.prepareProps = function prepareProps(props) {\n        return Book.calcProps(Book.mergeProps((0, _book.props)(), props));\n      };\n      Book.mergeProps = function mergeProps(first, second) {\n        second = second || {};\n        return _extends({}, first, second, {\n          sheet: _extends({}, first.sheet, second.sheet),\n          cover: _extends({}, first.cover, second.cover),\n          page: _extends({}, first.page, second.page),\n          cssLayerProps: _extends({}, first.cssLayerProps, second.cssLayerProps)\n        });\n      };\n      Book.calcProps = function calcProps(props) {\n        var p = _extends({}, props, {\n            sheet: _extends({}, props.sheet),\n            cover: _extends({}, props.sheet, props.cover),\n            page: _extends({}, props.sheet, props.page),\n            cssLayerProps: _extends({}, props.cssLayerProps, {\n              $: _libs.$\n            })\n          }),\n          scale = 10,\n          height = scale * p.height,\n          width = scale * p.width,\n          flipProgressClb = function flipProgressClb() {\n            return undefined;\n          },\n          sheet = {\n            sideTexture: p.sheet.sideTexture || Book.createSideTexture(p.sheet.color)\n          },\n          cover = _extends({}, sheet, p.cover, {\n            depth: scale * p.cover.depth,\n            width: width,\n            height: height,\n            padding: scale * p.cover.padding\n          }),\n          page = _extends({}, sheet, p.page, {\n            depth: scale * p.page.depth,\n            width: cover.width - cover.padding,\n            height: cover.height - 2 * cover.padding\n          }),\n          marker = {\n            use: false,\n            color: 0XFF0000,\n            size: scale * 0.001\n          };\n        if (cover.color !== sheet.color && !p.cover.sideTexture) {\n          cover.sideTexture = Book.createSideTexture(cover.color);\n        }\n        if (page.color !== sheet.color && !p.page.sideTexture) {\n          page.sideTexture = Book.createSideTexture(page.color);\n        }\n        return _extends({}, p, {\n          scale: scale,\n          height: height,\n          width: width,\n          flipProgressClb: flipProgressClb,\n          cover: cover,\n          page: page,\n          marker: marker\n        });\n      };\n      return Book;\n    }(_libs.THREE.EventDispatcher);\n    exports.default = Book;\n\n    /***/\n  }, /* 27 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\n      return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\n    };\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _Controller2 = __webpack_require__(15);\n    var _Controller3 = _interopRequireDefault(_Controller2);\n    var _bookController = __webpack_require__(42);\n    var _EventsToActions = __webpack_require__(49);\n    var _EventsToActions2 = _interopRequireDefault(_EventsToActions);\n    var _stats = __webpack_require__(70);\n    var _stats2 = _interopRequireDefault(_stats);\n    var _Object3DWatcher = __webpack_require__(55);\n    var _Object3DWatcher2 = _interopRequireDefault(_Object3DWatcher);\n    var _FullScreen = __webpack_require__(50);\n    var _FullScreen2 = _interopRequireDefault(_FullScreen);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var BookController = function (_Controller) {\n      _inherits(BookController, _Controller);\n      function BookController(book, view, props) {\n        _classCallCheck(this, BookController);\n        var _this = _possibleConstructorReturn(this, _Controller.call(this));\n        _this.navigationControls = true;\n        _this.book = book;\n        _this.visual = book.visual;\n        _this.p = BookController.prepareProps(props);\n        _this.p.rtl = book.p.rtl;\n        _this.devicePixelRatio = _this.visual.wnd.devicePixelRatio || 1;\n        _this.orbit = book.visual.getOrbit();\n        book.setFlipProgressClb(_this.updateViewIfState.bind(_this));\n        _this.view = view;\n        _this.bindActions();\n        _this.state = {\n          smartPan: !_this.actions['cmdSmartPan'].active,\n          singlePage: _this.actions['cmdSinglePage'].active || _this.actions['cmdSinglePage'].activeForMobile && _this.devicePixelRatio > 1,\n          stats: _this.actions['cmdStats'].active,\n          lighting: _this.p.lighting.default,\n          activeSide: 1\n        };\n        _this.boxs = [new _libs.THREE.Box3(), new _libs.THREE.Box3()];\n        _this.bookWatcher = new _Object3DWatcher2.default(_this.visual, function () {\n          if (_this.state.singlePage) {\n            if (_this.state.activeSide) {\n              _this.boxs[0].setFromObject(book.rightCover.three);\n            } else {\n              _this.boxs[0].setFromObject(book.leftCover.three);\n            }\n          } else {\n            _this.boxs[0].setFromObject(book.leftCover.three);\n            _this.boxs[1].setFromObject(book.rightCover.three);\n            _this.boxs[0].union(_this.boxs[1]);\n          }\n          return _this.boxs[0];\n        });\n        _this.bookWatcher.scale = _this.p.scale.default;\n        _this.book.setZoom(_this.bookWatcher.scale, _this.state.singlePage);\n        _this.Stats = new _stats2.default();\n        _this.Stats.domElement.style.position = 'absolute';\n        _this.Stats.domElement.style.top = '0px';\n        _this.visual.setExtraLighting(_this.state.lighting);\n        _this.binds = {\n          onScreenModeChanged: _this.onScreenModeChanged.bind(_this),\n          stats: _this.Stats.update.bind(_this.Stats),\n          onUpdateView: _this.updateView.bind(_this)\n        };\n        _FullScreen2.default.addEventListener(_this.view.getParentContainer().ownerDocument, _this.binds.onScreenModeChanged);\n        _this.cmdSmartPan();\n        if (_this.view.templateObject.appLoaded) {\n          Promise.resolve().then(_this.view.templateObject.appLoaded);\n        }\n        _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);\n        if (_this.p.loadingAnimation.skin) {\n          _this.initLoadingAnimation();\n        }\n        _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);\n        _this.book.setAutoResolution(_this.p.autoResolution.enabled, _this.p.autoResolution.coefficient);\n        return _this;\n      }\n      BookController.prototype.dispose = function dispose() {\n        _FullScreen2.default.removeEventListener(this.view.getParentContainer().ownerDocument, this.binds.onScreenModeChanged);\n        delete this.book;\n        delete this.view;\n        delete this.visual;\n      };\n      BookController.prototype.initLoadingAnimation = function initLoadingAnimation() {\n        var _this2 = this;\n        var handler = function handler() {\n          var pages = _this2.book.getTopPages();\n          var visible = false;\n          for (var _iterator = pages, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n            var n = _ref;\n            var state = _this2.book.getPageState(n);\n            visible = state === undefined || state === 'loading';\n            if (visible) {\n              break;\n            }\n          }\n          _this2.view.setState('widLoading', {\n            visible: visible\n          });\n        };\n        this.book.addEventListener('beforeAnimation', handler);\n        this.book.addEventListener('afterAnimation', handler);\n        this.book.addEventListener('loadPage', handler);\n        this.book.addEventListener('loadedPage', handler);\n      };\n      BookController.prototype.enableNavigation = function enableNavigation(enable) {\n        this.navigationControls = enable;\n      };\n      BookController.prototype.setTocCtrl = function setTocCtrl(tocCtrl) {\n        this.tocCtrl = tocCtrl;\n        this.tocCtrl.onChange = this.updateView.bind(this);\n        this.updateView();\n      };\n      BookController.prototype.setPrinter = function setPrinter(printer) {\n        this.printer = printer;\n        this.updateView();\n      };\n      BookController.prototype.setSounds = function setSounds(sounds) {\n        this.sounds = sounds;\n        sounds.setEnabled(this.actions['cmdSounds'].active);\n        this.updateView();\n      };\n      BookController.prototype.onScreenModeChanged = function onScreenModeChanged(e) {\n        this.updateView();\n      };\n      BookController.prototype.canZoomIn = function canZoomIn() {\n        return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.max) > this.p.eps;\n      };\n      BookController.prototype.canZoomOut = function canZoomOut() {\n        return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.min) > this.p.eps;\n      };\n      BookController.prototype.canDefaultZoom = function canDefaultZoom() {\n        return this.state.smartPan;\n      };\n      BookController.prototype.setBookZoom = function setBookZoom(scale) {\n        var _this3 = this;\n        setTimeout(function () {\n          if (_this3.bookWatcher.scale === scale) {\n            _this3.book.setZoom(scale, _this3.state.singlePage);\n          }\n        }, 1000);\n      };\n      BookController.prototype.cmdZoomIn = function cmdZoomIn() {\n        if (this.state.smartPan) {\n          this.bookWatcher.scale = Math.min(this.p.scale.max, this.bookWatcher.scale + this.p.scale.delta);\n          this.setBookZoom(this.bookWatcher.scale);\n        } else {\n          this.orbit.zoomIn(6.6 * this.p.scale.delta / 0.32);\n        }\n        this.updateView();\n      };\n      BookController.prototype.cmdZoomOut = function cmdZoomOut() {\n        if (this.state.smartPan) {\n          this.bookWatcher.scale = Math.max(this.p.scale.min, this.bookWatcher.scale - this.p.scale.delta);\n          this.setBookZoom(this.bookWatcher.scale);\n        } else {\n          this.orbit.zoomOut(6.6 * this.p.scale.delta / 0.32);\n        }\n        this.updateView();\n      };\n      BookController.prototype.cmdDefaultZoom = function cmdDefaultZoom() {\n        if (this.state.smartPan) {\n          this.bookWatcher.scale = this.p.scale.default;\n          this.setBookZoom(this.bookWatcher.scale);\n          this.updateView();\n        }\n      };\n      BookController.prototype.cmdToc = function cmdToc() {\n        if (this.tocCtrl) {\n          this.tocCtrl.togle();\n        }\n      };\n      BookController.prototype.cmdFastBackward = function cmdFastBackward() {\n        this.startFlip(this.book.flipLeft(5));\n      };\n      BookController.prototype.cmdBackward = function cmdBackward() {\n        var _this4 = this;\n        if (this.state.singlePage) {\n          this.state.activeSide = (this.getPage() + 1) % 2;\n          if (this.state.activeSide) {\n            this.state.activeSide = 0;\n            this.updateView();\n          } else {\n            this.startFlip(this.book.flipLeft(1)).then(function (block) {\n              if (block) {\n                _this4.state.activeSide = 1;\n              }\n            });\n          }\n        } else {\n          this.startFlip(this.book.flipLeft(1));\n        }\n      };\n      BookController.prototype.cmdForward = function cmdForward() {\n        var _this5 = this;\n        if (this.state.singlePage) {\n          this.state.activeSide = (this.getPage() + 1) % 2;\n          if (!this.state.activeSide) {\n            this.state.activeSide = 1;\n            this.updateView();\n          } else {\n            this.startFlip(this.book.flipRight(1)).then(function (block) {\n              if (block) {\n                _this5.state.activeSide = 0;\n              }\n            });\n          }\n        } else {\n          this.startFlip(this.book.flipRight(1));\n        }\n      };\n      BookController.prototype.cmdFastForward = function cmdFastForward() {\n        this.startFlip(this.book.flipRight(5));\n      };\n      BookController.prototype.cmdSave = function cmdSave() {\n        window.open(this.p.downloadURL, '_blank');\n      };\n      BookController.prototype.cmdPrint = function cmdPrint() {\n        this.printer.print();\n      };\n      BookController.prototype.cmdFullScreen = function cmdFullScreen() {\n        if (!_FullScreen2.default.activated()) {\n          _FullScreen2.default.request(this.view.getParentContainer());\n        } else {\n          _FullScreen2.default.cancel();\n        }\n      };\n      BookController.prototype.cmdSmartPan = function cmdSmartPan() {\n        this.state.smartPan = !this.state.smartPan;\n        if (this.state.smartPan) {\n          this.orbit.minAzimuthAngle = 0;\n          this.orbit.maxAzimuthAngle = 0;\n          this.orbit.minPolarAngle = 0;\n          this.orbit.maxPolarAngle = Math.PI / 4;\n          this.bookWatcher.enabled = true;\n        } else {\n          this.orbit.minAzimuthAngle = -Infinity;\n          this.orbit.maxAzimuthAngle = Infinity;\n          this.orbit.minPolarAngle = 0;\n          this.orbit.maxPolarAngle = Math.PI;\n          this.bookWatcher.enabled = false;\n        }\n        this.updateView();\n      };\n      BookController.prototype.cmdSinglePage = function cmdSinglePage() {\n        this.state.singlePage = !this.state.singlePage;\n        this.setBookZoom(this.bookWatcher.scale);\n        this.updateView();\n      };\n      BookController.prototype.cmdSounds = function cmdSounds() {\n        if (this.sounds) {\n          this.sounds.togle();\n        }\n        this.updateView();\n      };\n      BookController.prototype.cmdStats = function cmdStats() {\n        this.state.stats = !this.state.stats;\n        if (this.state.stats) {\n          (0, _libs.$)(this.view.getContainer()).append(this.Stats.domElement);\n          this.visual.addRenderCallback(this.binds.stats);\n        } else {\n          (0, _libs.$)(this.view.getContainer()).find(this.Stats.domElement).remove();\n          this.visual.removeRenderCallback(this.binds.stats);\n        }\n        this.updateView();\n      };\n      BookController.prototype.cmdLightingUp = function cmdLightingUp() {\n        this.state.lighting = Math.min(this.state.lighting + this.p.lighting.delta, this.p.lighting.max);\n        this.visual.setExtraLighting(this.state.lighting);\n        this.updateView();\n      };\n      BookController.prototype.cmdLightingDown = function cmdLightingDown() {\n        this.state.lighting = Math.max(this.state.lighting - this.p.lighting.delta, this.p.lighting.min);\n        this.visual.setExtraLighting(this.state.lighting);\n        this.updateView();\n      };\n      BookController.prototype.goToPage = function goToPage(page) {\n        var _this6 = this;\n        if (this.p.rtl) {\n          page = this.book.getPages() - 1 - page;\n        }\n        var pageNum = Math.max(Math.min(page, this.book.getPages() - 1), 0);\n        this.state.activeSide = (pageNum + 1) % 2;\n        var target = Math.max(Math.min(page - 1 + page % 2, this.book.getPages() - 1), 0),\n          current = this.book.getPage(),\n          flips = [],\n          covs = 0;\n        ;\n        if (target != current) {\n          if (current === 0) {\n            flips.push(1);\n            current += 1;\n            ++covs;\n          } else if (current === this.book.getPages() - 1) {\n            flips.push(-1);\n            current -= 2;\n            ++covs;\n          }\n          var cv = 0;\n          if (target === 0) {\n            cv = -1;\n            target += 1;\n            ++covs;\n          } else if (target === this.book.getPages() - 1) {\n            cv = 1;\n            target -= 2;\n            ++covs;\n          }\n          if (target - current) {\n            flips.push(Math.ceil((target - current) / 2));\n          }\n          if (cv) {\n            flips.push(cv);\n          }\n        }\n        var setClb = function setClb(fl, time, clb) {\n          setTimeout(function () {\n            if (fl < 0) {\n              _this6.startFlip(_this6.book.flipLeft(-fl, clb));\n            } else {\n              _this6.startFlip(_this6.book.flipRight(fl, clb));\n            }\n          }, time);\n        };\n        if (covs === 2) {\n          setClb(flips[0], 0, function (block, progress, state) {\n            if (state == 'finish' && progress == 1) {\n              setClb(flips[flips.length - 1], 0);\n            }\n          });\n          setClb(flips[1], 500);\n        } else {\n          var time = 0;\n          for (var _iterator2 = flips, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var fl = _ref2;\n            setClb(fl, time);\n            time += 250;\n          }\n        }\n      };\n      BookController.prototype.startFlip = function startFlip(flipRes) {\n        var _this7 = this;\n        return flipRes ? flipRes.then(function (block) {\n          if (block) {\n            _this7.dispatchAsync({\n              type: 'startFlip'\n            });\n          }\n          return block;\n        }) : Promise.resolve(undefined);\n      };\n      BookController.prototype.endFlip = function endFlip(block) {\n        this.dispatchAsync({\n          type: 'endFlip'\n        });\n        return block;\n      };\n      BookController.prototype.getPage = function getPage() {\n        var page = this.book.getPage();\n        return page ? Math.min(this.book.getPage() + this.state.activeSide, this.book.getPages() - 1) : 0;\n      };\n      BookController.prototype.getPageForGUI = function getPageForGUI() {\n        var n = (this.state.singlePage ? this.getPage() : this.book.getPage()) + 1;\n        if (this.p.rtl) {\n          n = this.book.getPages() - n + 1;\n        }\n        return n;\n      };\n      BookController.prototype.inpPage = function inpPage(e, data) {\n        this.goToPage(data - 1);\n      };\n      BookController.prototype.updateViewIfState = function updateViewIfState(block, progress, state, type) {\n        if (state === 'init' || state === 'finish') {\n          setTimeout(this.updateView.bind(this), 100);\n        }\n        if (state === 'finish') {\n          this.endFlip(block);\n        }\n      };\n      BookController.prototype.updateViewState = function updateViewState() {\n        this.viewState = {\n          'cmdZoomIn': {\n            enable: this.canZoomIn(),\n            visible: this.actions['cmdZoomIn'].enabled,\n            active: false\n          },\n          'cmdZoomOut': {\n            enable: this.canZoomOut(),\n            visible: this.actions['cmdZoomOut'].enabled,\n            active: false\n          },\n          'cmdDefaultZoom': {\n            enable: this.canDefaultZoom(),\n            visible: this.actions['cmdDefaultZoom'].enabled,\n            active: this.canDefaultZoom() && Math.abs(this.bookWatcher.scale - this.p.scale.default) < this.p.eps\n          },\n          'cmdToc': {\n            enable: !!this.tocCtrl,\n            visible: this.actions['cmdToc'].enabled && this.tocCtrl,\n            active: this.tocCtrl && this.tocCtrl.visible\n          },\n          'inpPages': {\n            visible: true,\n            value: this.book.getPages()\n          },\n          'inpPage': {\n            visible: true,\n            enable: !this.book.isProcessing() && this.navigationControls,\n            value: this.getPageForGUI()\n          },\n          'cmdSave': {\n            enable: true,\n            visible: this.actions['cmdSave'].enabled && !!this.p.downloadURL,\n            active: false\n          },\n          'cmdPrint': {\n            enable: true,\n            visible: this.actions['cmdPrint'].enabled && !!this.printer,\n            active: false\n          },\n          'cmdFullScreen': {\n            enable: _FullScreen2.default.available(),\n            visible: this.actions['cmdFullScreen'].enabled,\n            active: _FullScreen2.default.available() && _FullScreen2.default.activated()\n          },\n          'widSettings': {\n            enable: true,\n            visible: this.actions['widSettings'].enabled,\n            active: false\n          },\n          'cmdSmartPan': {\n            enable: true,\n            visible: this.actions['cmdSmartPan'].enabled,\n            active: this.state.smartPan\n          },\n          'cmdSinglePage': {\n            enable: true,\n            visible: this.actions['cmdSinglePage'].enabled,\n            active: this.state.singlePage\n          },\n          'cmdSounds': {\n            enable: true,\n            visible: this.actions['cmdSounds'].enabled && !!this.sounds,\n            active: !!this.sounds && this.sounds.enabled\n          },\n          'cmdStats': {\n            enable: true,\n            visible: this.actions['cmdStats'].enabled,\n            active: this.state.stats\n          },\n          'cmdLightingUp': {\n            enable: Math.abs(this.state.lighting - this.p.lighting.max) > this.p.eps,\n            visible: this.actions['cmdLightingUp'].enabled,\n            active: false\n          },\n          'cmdLightingDown': {\n            enable: Math.abs(this.state.lighting - this.p.lighting.min) > this.p.eps,\n            visible: this.actions['cmdLightingDown'].enabled,\n            active: false\n          }\n        };\n        var left = this.book.getLeftFlipping(),\n          right = this.book.getRightFlipping();\n        var flippersEnable = {\n          cmdFastBackward: !!left && this.navigationControls,\n          cmdBackward: !!left && this.navigationControls,\n          cmdForward: !!right && this.navigationControls,\n          cmdFastForward: !!right && this.navigationControls\n        };\n        for (var _iterator3 = Object.keys(flippersEnable), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n          var name = _ref3;\n          this.viewState[name] = {\n            enable: flippersEnable[name],\n            visible: this.actions[name].enabled,\n            active: false\n          };\n        }\n        ;\n      };\n      BookController.prototype.updateView = function updateView() {\n        if (this.view) {\n          this.updateViewState();\n          for (var _iterator4 = Object.keys(this.viewState), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n            var name = _ref4;\n            this.view.setState(name, this.viewState[name]);\n          }\n        }\n      };\n      BookController.prototype.getActions = function getActions() {\n        var _this8 = this;\n        var isSwipping = function isSwipping(name) {\n            return _this8.actions.touchCmdSwipe.enabled && _this8.actions.touchCmdSwipe.code === _this8.actions[name].code && _this8.state.smartPan && _this8.bookWatcher.scale <= 1;\n          },\n          cmds = {};\n        var _loop = function _loop(name) {\n          if (name.indexOf('cmd') === 0) {\n            cmds[name] = {\n              activate: function activate() {\n                if (_this8.viewState && _this8.viewState[name].enable) {\n                  _this8[name].apply(_this8, arguments);\n                }\n              }\n            };\n          }\n        };\n        for (var name in this) {\n          _loop(name);\n        }\n        return _extends({}, cmds, {\n          cmdPanLeft: {\n            activate: function activate(e) {\n              return _this8.orbit.actions.pan(e, {\n                state: 'move',\n                dx: -_this8.p.pan.speed,\n                dy: 0\n              });\n            }\n          },\n          cmdPanRight: {\n            activate: function activate(e) {\n              return _this8.orbit.actions.pan(e, {\n                state: 'move',\n                dx: _this8.p.pan.speed,\n                dy: 0\n              });\n            }\n          },\n          cmdPanUp: {\n            activate: function activate(e) {\n              return _this8.orbit.actions.pan(e, {\n                state: 'move',\n                dx: 0,\n                dy: -_this8.p.pan.speed\n              });\n            }\n          },\n          cmdPanDown: {\n            activate: function activate(e) {\n              return _this8.orbit.actions.pan(e, {\n                state: 'move',\n                dx: 0,\n                dy: _this8.p.pan.speed\n              });\n            }\n          },\n          mouseCmdRotate: {\n            activate: this.orbit.actions.rotate\n          },\n          mouseCmdDragZoom: {\n            activate: function activate(e, data) {\n              if (data.dy > 0) {\n                _this8.cmdZoomOut();\n              } else if (data.dy < 0) {\n                _this8.cmdZoomIn();\n              }\n            }\n          },\n          mouseCmdPan: {\n            activate: this.orbit.actions.pan\n          },\n          mouseCmdWheelZoom: {\n            activate: function activate(e) {\n              e.preventDefault();\n              if (e.deltaY < 0) {\n                _this8.cmdZoomOut();\n              } else if (e.deltaY > 0) {\n                _this8.cmdZoomIn();\n              }\n            }\n          },\n          touchCmdRotate: {\n            activate: function activate(e, data) {\n              if (!isSwipping('touchCmdRotate')) {\n                e.preventDefault();\n                _this8.orbit.actions.rotate(e, data);\n              }\n            }\n          },\n          touchCmdZoom: {\n            activate: function activate(e, data) {\n              if (!isSwipping('touchCmdZoom')) {\n                e.preventDefault();\n                if (data.dy > 0) {\n                  _this8.cmdZoomOut();\n                } else if (data.dy < 0) {\n                  _this8.cmdZoomIn();\n                }\n              }\n            }\n          },\n          touchCmdPan: {\n            activate: function activate(e, data) {\n              if (!isSwipping('touchCmdPan')) {\n                e.preventDefault();\n                _this8.orbit.actions.pan(e, data);\n              }\n            }\n          },\n          touchCmdSwipe: {\n            activate: function activate(e, data) {\n              if (isSwipping('touchCmdSwipe')) {\n                e.preventDefault();\n                if (data.state === 'start') {\n                  var touch = (e.touches || e.originalEvent.touches)[_this8.actions.touchCmdSwipe.code - 1];\n                  _this8.swipeData = {\n                    handled: false,\n                    x0: touch.pageX,\n                    y0: touch.pageY,\n                    x: touch.pageX,\n                    y: touch.pageY\n                  };\n                } else if (data.state === 'move') {\n                  if (!_this8.swipeData.handled) {\n                    _this8.swipeData = _extends({}, _this8.swipeData, {\n                      x: _this8.swipeData.x + data.dx,\n                      y: _this8.swipeData.y + data.dy\n                    });\n                    if (Math.abs(_this8.swipeData.x0 - _this8.swipeData.x) > 100) {\n                      _this8.swipeData.x0 > _this8.swipeData.x ? _this8.cmdForward() : _this8.cmdBackward();\n                      _this8.swipeData.handled = true;\n                    }\n                  }\n                } else {\n                  delete _this8.swipeData;\n                }\n              }\n            }\n          },\n          widSettings: {\n            activate: function activate() {\n              return undefined;\n            }\n          }\n        });\n      };\n      BookController.prototype.bindActions = function bindActions() {\n        this.eToA = new _EventsToActions2.default((0, _libs.$)(this.visual.element));\n        this.eToA.addAction(function (e) {\n          return e.preventDefault();\n        }, 'contextmenu', _EventsToActions2.default.mouseButtons.Right, 0);\n        this.actions = this.getActions();\n        for (var _iterator5 = Object.keys(this.actions), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n          var _ref5;\n          if (_isArray5) {\n            if (_i5 >= _iterator5.length) break;\n            _ref5 = _iterator5[_i5++];\n          } else {\n            _i5 = _iterator5.next();\n            if (_i5.done) break;\n            _ref5 = _i5.value;\n          }\n          var name = _ref5;\n          var action = _extends({}, this.actions[name], this.p.actions[name]);\n          this.actions[name] = action;\n          if (action.enabled) {\n            var flags = action.flags || 0;\n            if (action.type) {\n              this.eToA.addAction(action.activate, action.type, action.code, flags);\n            } else if (action.code !== undefined) {\n              this.eToA.addAction(action.activate, 'keydown', action.code, flags);\n            }\n          }\n        }\n      };\n      BookController.prepareProps = function prepareProps(props) {\n        return BookController.calcProps(BookController.mergeProps((0, _bookController.props)(), props));\n      };\n      BookController.setActions = function setActions(props, actions) {\n        for (var _iterator6 = Object.keys(actions || {}), _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n          var _ref6;\n          if (_isArray6) {\n            if (_i6 >= _iterator6.length) break;\n            _ref6 = _iterator6[_i6++];\n          } else {\n            _i6 = _iterator6.next();\n            if (_i6.done) break;\n            _ref6 = _i6.value;\n          }\n          var name = _ref6;\n          props.actions[name] = _extends({}, props.actions[name], actions[name]);\n        }\n      };\n      BookController.mergeProps = function mergeProps(first, second) {\n        second = second || {};\n        function merge(first, second) {\n          second = second || {};\n          var props = _extends({}, first, second);\n          for (var _iterator7 = Object.keys(first), _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n            var _ref7;\n            if (_isArray7) {\n              if (_i7 >= _iterator7.length) break;\n              _ref7 = _iterator7[_i7++];\n            } else {\n              _i7 = _iterator7.next();\n              if (_i7.done) break;\n              _ref7 = _i7.value;\n            }\n            var name = _ref7;\n            if (_typeof(first[name]) === 'object') {\n              props[name] = merge(first[name], second[name]);\n            }\n          }\n          return props;\n        }\n        var props = merge(first, second);\n        BookController.setActions(props, first.actions);\n        BookController.setActions(props, second.actions);\n        return props;\n      };\n      BookController.calcProps = function calcProps(props) {\n        props.scale.delta = (props.scale.max - props.scale.min) / props.scale.levels;\n        props.lighting.delta = (props.lighting.max - props.lighting.min) / props.lighting.levels;\n        return props;\n      };\n      return BookController;\n    }(_Controller3.default);\n    exports.default = BookController;\n\n    /***/\n  }, /* 28 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(1);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var BookPrinter = function () {\n      function BookPrinter(context, book, styleSheet) {\n        _classCallCheck(this, BookPrinter);\n        this.book = book;\n        this.styleSheet = styleSheet;\n        this.wnd = context.wnd;\n        this.doc = context.doc;\n        this.pageCallback = book.getPageCallback();\n        var test = this.pageCallback(0);\n        this.type = test.type;\n        if (this.type === 'pdf') {\n          this.pdfSrc = test.src.src;\n        }\n      }\n      BookPrinter.prototype.cancel = function cancel() {\n        this.canceled = true;\n      };\n      BookPrinter.prototype.dispose = function dispose() {\n        if (this.frame) {\n          this.frame.remove();\n          delete this.frame;\n        }\n      };\n      BookPrinter.prototype.print = function print() {\n        var _this = this;\n        delete this.canceled;\n        if (this.type === 'pdf') {\n          (function () {\n            var printWnd = void 0,\n              callManually = false;\n            if (_this.useIFrame()) {\n              callManually = !!_this.frame;\n              if (!_this.frame) {\n                _this.frame = (0, _libs.$)('<iframe src=\"' + _this.pdfSrc + '\" style=\"display: none;\"></iframe>').appendTo(_this.doc.body);\n              }\n              printWnd = _this.frame[0].contentWindow;\n            } else {\n              printWnd = _this.wnd.open(_this.pdfSrc);\n            }\n            if (callManually) {\n              printWnd.print();\n            } else {\n              (0, _libs.$)(printWnd).on('load', function () {\n                try {\n                  printWnd.print();\n                } catch (e) {\n                  console.error(e);\n                }\n              });\n            }\n          })();\n        } else {\n          this.renderContent().then(function (content) {\n            var printWnd = _this.wnd.open(),\n              printDoc = printWnd.document,\n              html = '\\n            <!DOCTYPE html>\\n            <html>\\n              <head>\\n                <meta charset=\"utf-8\">\\n                <title>3D FlipBook - Printing</title>\\n                ' + content.head + '\\n                <script type=\"text/javascript\">\\n                  function printDocument() {\\n                    window.print();\\n                    window.close();\\n                  }\\n                  function init() {\\n                    setTimeout(printDocument, 100);\\n                  }\\n                </script>\\n              </head>\\n              <body onload=\"init()\">\\n                ' + content.body + '\\n              </body>\\n            </html>\\n          ';\n            printDoc.open();\n            printDoc.write(html);\n            printDoc.close();\n          }).catch(function (e) {\n            return console.warn('3D FlipBook - Printing was canceled');\n          });\n        }\n      };\n      BookPrinter.prototype.progress = function progress(v) {\n        if (this.canceled) {\n          throw 'Cancel Printing';\n        }\n        if (this.onProgress) {\n          this.onProgress(Math.floor(v * 100));\n        }\n      };\n      BookPrinter.prototype.renderContent = function renderContent() {\n        var _this2 = this;\n        var pages = this.book.getPages(),\n          head = new Set(),\n          body = [];\n        var done = Promise.resolve();\n        var _loop = function _loop(page) {\n          var info = _this2.pageCallback(page);\n          if (info.type === 'image') {\n            done = done.then(function () {\n              _this2.progress(page / pages);\n              return _this2.renderImage(head, body, info.src);\n            });\n          } else if (info.type === 'html') {\n            done = done.then(function () {\n              _this2.progress(page / pages);\n              return _this2.renderHtml(head, body, info.src);\n            });\n          }\n        };\n        for (var page = 0; page < pages; ++page) {\n          _loop(page);\n        }\n        return done.then(function () {\n          _this2.progress(1);\n          return {\n            head: _this2.renderHead(head),\n            body: body.join('\\n')\n          };\n        });\n      };\n      BookPrinter.wrap = function wrap(content) {\n        return '<div class=\"fb3d-printer-page\">' + content + '</div>';\n      };\n      BookPrinter.prototype.renderImage = function renderImage(head, body, src) {\n        body.push(BookPrinter.wrap('<img src=\"' + src + '\" />'));\n      };\n      BookPrinter.prototype.renderHtml = function renderHtml(head, body, src) {\n        return new Promise(function (resolve, reject) {\n          _libs.$.get(src, function (html) {\n            var links = html.match(/<link.*?>/ig) || [];\n            for (var _iterator = links, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n              var _ref;\n              if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n              } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n              }\n              var link = _ref;\n              if (link.match(/stylesheet/i)) {\n                var href = link.match(/href\\s*=\\s*['\"](.*)['\"]/i);\n                if (href) {\n                  head.add(href[1]);\n                }\n              }\n            }\n            var content = html.match(/<body.*?>([\\S\\s]*)<\\/body>/i);\n            if (content) {\n              body.push(BookPrinter.wrap(content[1]));\n            }\n            resolve();\n          }).fail(function (e) {\n            console.error(e.responseText);\n            reject();\n          });\n        });\n      };\n      BookPrinter.prototype.renderHead = function renderHead(head) {\n        var content = [];\n        head.forEach(function (k) {\n          return content.push('<link rel=\"stylesheet\" href=\"' + k + '\">');\n        });\n        content.push(this.styleSheet ? '<link rel=\"stylesheet\" href=\"' + this.styleSheet + '\">' : BookPrinter.defaultStyleSheet());\n        return content.join('\\n');\n      };\n      BookPrinter.prototype.useIFrame = function useIFrame() {\n        var isChromium = this.wnd.chrome,\n          winNav = this.wnd.navigator,\n          vendorName = winNav.vendor,\n          isIEedge = winNav.userAgent.indexOf(\"Edge\") > -1,\n          isIOSChrome = winNav.userAgent.match(\"CriOS\");\n        var use = void 0;\n        if (isIOSChrome) {\n          use = true;\n        } else if (isChromium && vendorName === 'Google Inc.' && !isIEedge) {\n          use = true;\n        } else {\n          use = false;\n        }\n        return use;\n      };\n      BookPrinter.defaultStyleSheet = function defaultStyleSheet() {\n        return '\\n      <style type=\"text/css\">\\n        body {\\n          margin: 0;\\n          padding: 0;\\n        }\\n        .fb3d-printer-page {\\n          page-break-after: always;\\n        }\\n      </style>\\n    ';\n      };\n      return BookPrinter;\n    }();\n    exports.default = BookPrinter;\n\n    /***/\n  }, /* 29 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(1);\n    var _View2 = __webpack_require__(65);\n    var _View3 = _interopRequireDefault(_View2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var BookView = function (_View) {\n      _inherits(BookView, _View);\n      function BookView(container, onLoad, template, handler) {\n        _classCallCheck(this, BookView);\n        return _possibleConstructorReturn(this, _View.call(this, container, onLoad, template, handler));\n      }\n      BookView.prototype.initView = function initView() {\n        this.view = this.container.find('.view');\n        this.bookmarksView = this.container.find('.widBookmarks');\n        this.thumbnailsView = this.container.find('.widThumbnails');\n        this.searchView = this.container.find('.widSearch');\n      };\n      BookView.prototype.getHandlers = function getHandlers(id) {\n        var _this2 = this;\n        var handlers = void 0;\n        if (id === 'inpPage') {\n          handlers = [{\n            inpPage: function inpPage(e, data) {\n              return _this2.callLater(_View.prototype.getHandlers.call(_this2, id), id, e, data, BookView.PAGE_HANDLER_DELAY);\n            }\n          }];\n        } else {\n          handlers = _View.prototype.getHandlers.call(this, id);\n        }\n        return handlers;\n      };\n      BookView.prototype.onItemStateChanged = function onItemStateChanged(id, state) {\n        if (id === 'cmdFullScreen') {\n          if (state.active) {\n            this.parentContainer.addClass('fullscreen');\n          } else {\n            this.parentContainer.removeClass('fullscreen');\n          }\n        }\n      };\n      BookView.prototype.getView = function getView() {\n        return this.view;\n      };\n      BookView.prototype.getBookmarksView = function getBookmarksView() {\n        return this.bookmarksView;\n      };\n      BookView.prototype.getThumbnailsView = function getThumbnailsView() {\n        return this.thumbnailsView;\n      };\n      BookView.prototype.getSearchView = function getSearchView() {\n        return this.searchView;\n      };\n      BookView.prototype.getForms = function getForms() {\n        return [];\n      };\n      BookView.prototype.getLinks = function getLinks() {\n        return ['cmdZoomIn', 'cmdZoomOut', 'cmdDefaultZoom', 'cmdToc', 'cmdFastBackward', 'cmdBackward', 'cmdForward', 'cmdFastForward', 'cmdSave', 'cmdPrint', 'cmdFullScreen', 'cmdSmartPan', 'cmdSinglePage', 'cmdSounds', 'cmdStats', 'cmdLightingUp', 'cmdLightingDown', 'cmdCloseToc', 'cmdBookmarks', 'cmdSearch', 'cmdThumbnails'];\n      };\n      BookView.prototype.getWidgets = function getWidgets() {\n        return ['widLoadingProgress', 'widFloatWnd', 'widTocMenu', 'widBookmarks', 'widThumbnails', 'widSearch', 'widSettings', 'widLoading'];\n      };\n      BookView.prototype.getInputs = function getInputs() {\n        return ['inpPage', 'inpPages'];\n      };\n      BookView.prototype.getTexts = function getTexts() {\n        return ['txtLoadingProgress'];\n      };\n      BookView.prototype.getTemplate = function getTemplate() {\n        return {\n          html: 'templates/default-book-view.html',\n          styles: ['css/black-book-view.css'],\n          links: [{\n            rel: 'stylesheet',\n            href: 'css/font-awesome.min.css'\n          }],\n          script: 'js/default-book-view.js'\n        };\n      };\n      return BookView;\n    }(_View3.default);\n    BookView.PAGE_HANDLER_DELAY = 1000;\n    exports.default = BookView;\n\n    /***/\n  }, /* 30 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _BookPropsBuilder2 = __webpack_require__(9);\n    var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);\n    var _ImageFactory = __webpack_require__(8);\n    var _ImageFactory2 = _interopRequireDefault(_ImageFactory);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var ClbBookPropsBuilder = function (_BookPropsBuilder) {\n      _inherits(ClbBookPropsBuilder, _BookPropsBuilder);\n      function ClbBookPropsBuilder(context, pageCallback, pages, onReady) {\n        _classCallCheck(this, ClbBookPropsBuilder);\n        var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));\n        _this.calcSheets(pages);\n        _this.pageCallback = pageCallback;\n        _this.binds = {\n          pageCallback: pageCallback.bind(_this)\n        };\n        _this.imageFactory = new _ImageFactory2.default(context);\n        if (pages > 0) {\n          (function () {\n            var test = _this.imageFactory.build(pageCallback(0), 0, _this.defaults.sheet.widthTexels, _this.defaults.sheet.heightTexels, _this.defaults.sheet.color);\n            test.onLoad = function () {\n              _this.calcProps(test.width, test.height);\n              test.dispose();\n              _this.ready();\n            };\n          })();\n        } else {\n          _this.props = _this.defaults;\n          _this.ready();\n        }\n        return _this;\n      }\n      return ClbBookPropsBuilder;\n    }(_BookPropsBuilder3.default);\n    exports.default = ClbBookPropsBuilder;\n\n    /***/\n  }, /* 31 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _SheetBlock2 = __webpack_require__(10);\n    var _SheetBlock3 = _interopRequireDefault(_SheetBlock2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var Cover = function (_SheetBlock) {\n      _inherits(Cover, _SheetBlock);\n      function Cover(visual, p, angle, state) {\n        _classCallCheck(this, Cover);\n        return _possibleConstructorReturn(this, _SheetBlock.call(this, visual, p, 0, 1, angle, state));\n      }\n      Cover.prototype.getProps = function getProps() {\n        return _extends({}, this.p.cover, {\n          sheets: 1\n        });\n      };\n      Cover.prototype.loadPoints = function loadPoints() {\n        var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],\n          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],\n          interpolationPoints = [{\n            x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0, 0.1370, 0.3881, 0.5342, 0.6758], [0, 0, 0, 0, 0]],\n            y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0, 0.2466, 0.4795, 0.5708, 0.6758], [0, 0.2877, 0.6347, 0.8174, 1.0000]]\n          }, {\n            x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0]],\n            y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000]]\n          }];\n        return {\n          interpolationPoints: interpolationPoints,\n          openedInterpolationIndeces: openedInterpolationIndeces,\n          closedInterpolationIndeces: closedInterpolationIndeces\n        };\n      };\n      return Cover;\n    }(_SheetBlock3.default);\n    exports.default = Cover;\n\n    /***/\n  }, /* 32 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _SheetCssLayer = __webpack_require__(37);\n    var _SheetCssLayer2 = _interopRequireDefault(_SheetCssLayer);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var CssLayersManager = function () {\n      function CssLayersManager(book) {\n        _classCallCheck(this, CssLayersManager);\n        this.book = book;\n        this.props = book.p.cssLayerProps;\n        this.visual = book.visual;\n        this.pageManager = book.pageManager;\n        this.wrappers = {};\n      }\n      CssLayersManager.prototype.getActives = function getActives() {\n        var page = this.book.getPage(),\n          pages = this.book.getPages();\n        return page === 0 || page === pages - 1 ? [page] : [page, page + 1];\n      };\n      CssLayersManager.prototype.dispose = function dispose() {\n        for (var _iterator = Object.values(this.wrappers), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var w = _ref;\n          w.layers.forEach(function (l) {\n            return l.dispose();\n          });\n        }\n        delete this.wrappers;\n      };\n      CssLayersManager.prototype.show = function show() {\n        var _this = this;\n        this.hidden = false;\n        var _loop = function _loop() {\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) return 'break';\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) return 'break';\n            _ref2 = _i2.value;\n          }\n          var n = _ref2;\n          var w = _this.wrappers[n];\n          if (w) {\n            if (w.state === 'ready' && w.layers.length) {\n              (function () {\n                var block = _this.book.getBlockByPage(n);\n                w.layers.forEach(function (l) {\n                  if (l.isHidden()) {\n                    l.update(block);\n                    l.show();\n                  }\n                });\n              })();\n            }\n          } else {\n            (function () {\n              var w = _this.wrappers[n] = {\n                state: 'loading',\n                layers: []\n              };\n              Promise.resolve().then(function () {\n                _this.pageManager.getLayers(n, function (layers) {\n                  if (layers.length && _this.wrappers) {\n                    var block = _this.book.getBlockByPage(n);\n                    for (var _iterator3 = layers, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n                      var _ref3;\n                      if (_isArray3) {\n                        if (_i3 >= _iterator3.length) break;\n                        _ref3 = _iterator3[_i3++];\n                      } else {\n                        _i3 = _iterator3.next();\n                        if (_i3.done) break;\n                        _ref3 = _i3.value;\n                      }\n                      var l = _ref3;\n                      var sl = new _SheetCssLayer2.default(_this.visual, block, _this.props);\n                      w.layers.push(sl);\n                      sl.set(l.css, l.html, l.js);\n                    }\n                    setTimeout(function () {\n                      if (!_this.hidden && ~_this.getActives().indexOf(n)) {\n                        w.layers.forEach(function (l) {\n                          return l.show();\n                        });\n                      }\n                    }, 10);\n                  }\n                  w.state = 'ready';\n                });\n              });\n            })();\n          }\n        };\n        for (var _iterator2 = this.getActives(), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          var _ret = _loop();\n          if (_ret === 'break') break;\n        }\n      };\n      CssLayersManager.prototype.hide = function hide() {\n        this.hidden = true;\n        var wait = [];\n        for (var _iterator4 = Object.values(this.wrappers), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n          var _ref4;\n          if (_isArray4) {\n            if (_i4 >= _iterator4.length) break;\n            _ref4 = _iterator4[_i4++];\n          } else {\n            _i4 = _iterator4.next();\n            if (_i4.done) break;\n            _ref4 = _i4.value;\n          }\n          var _w = _ref4;\n          _w.layers.forEach(function (l) {\n            return wait.push(l.hide());\n          });\n        }\n        return Promise.all(wait);\n      };\n      return CssLayersManager;\n    }();\n    exports.default = CssLayersManager;\n\n    /***/\n  }, /* 33 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(1);\n    var _Cache = __webpack_require__(14);\n    var _Cache2 = _interopRequireDefault(_Cache);\n    var _LoadingAnimation = __webpack_require__(52);\n    var _LoadingAnimation2 = _interopRequireDefault(_LoadingAnimation);\n    var _ImageFactory = __webpack_require__(8);\n    var _ImageFactory2 = _interopRequireDefault(_ImageFactory);\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    var _TextureAnimator = __webpack_require__(60);\n    var _TextureAnimator2 = _interopRequireDefault(_TextureAnimator);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var PageManager = function () {\n      function PageManager(visual, book, p) {\n        _classCallCheck(this, PageManager);\n        this.visual = visual;\n        this.book = book;\n        this.pageQuery = '';\n        this.p = p;\n        this.pageCache = new _Cache2.default(p.cachedPages);\n        this.resourcesCache = new _Cache2.default();\n        this.canvas = (0, _libs.$)('<canvas>')[0];\n        this.imageFactory = new _ImageFactory2.default(_extends({}, visual, {\n          dispatchEvent: book.dispatchEvent.bind(book),\n          renderCanvas: this.canvas,\n          renderCanvasCtx: this.canvas.getContext('2d')\n        }), this.resourcesCache);\n        this.loadings = [];\n        this.renderQueue = [];\n        this.pageRequests = [];\n        this.predictedRequests = [];\n        this.tmpMaterial = new _libs.THREE.MeshBasicMaterial();\n        visual.addObject(new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(0, 0), this.tmpMaterial));\n        this.loadingAnimation = true;\n        this.loading = {};\n        this.loading[p.cover.color] = this.createLoadingTexture(p.cover);\n        if (p.page.color !== p.cover.color) {\n          this.loading[p.page.color] = this.createLoadingTexture(p.page);\n        }\n        this.turnOnEvents();\n        visual.addRenderCallback(this.update.bind(this));\n        setTimeout(this.updateRenderQueue.bind(this), 250);\n      }\n      PageManager.prototype.createLoadingTexture = function createLoadingTexture(p) {\n        var spriteTiles = 6,\n          scale = Math.sqrt(4.5 * 210 * 4.5 * 297 / (p.widthTexels * p.heightTexels)),\n          animation = new _LoadingAnimation2.default(scale * p.widthTexels, scale * p.heightTexels, p.color),\n          animator = new _TextureAnimator2.default(animation.createSprite(spriteTiles), spriteTiles, 1, spriteTiles, 0.2);\n        animation.dispose();\n        return animator;\n      };\n      PageManager.prototype.dispose = function dispose() {\n        this.turnOffEvents();\n        for (var _iterator = Object.keys(this.loading), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var color = _ref;\n          this.loading[color].dispose();\n        }\n        delete this.loading;\n        this.resourcesCache.dispose();\n        this.pageCache.dispose();\n        this.canvas.height = this.canvas.width = 0;\n        delete this.canvas;\n      };\n      PageManager.prototype.isCover = function isCover(n) {\n        return n < 2 || n >= 2 * (this.p.sheets + 1);\n      };\n      PageManager.prototype.isMobile = function isMobile() {\n        return (this.visual.wnd.devicePixelRatio || 1) > 1;\n      };\n      PageManager.prototype.getPageState = function getPageState(n) {\n        var object = this.pageCache.get(n);\n        return object ? object.state : undefined;\n      };\n      PageManager.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {\n        this.loadingAnimation = enable;\n        for (var _iterator2 = this.loadings, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n          var o = _ref2;\n          this.setupMaterial(o);\n        }\n      };\n      PageManager.prototype.update = function update(dt) {\n        if (this.loadingAnimation) {\n          var loading = {};\n          for (var _iterator3 = this.loadings, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n            var _ref3;\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref3 = _i3.value;\n            }\n            var o = _ref3;\n            if (o.isActive()) {\n              loading[o.color] = true;\n              ;\n            }\n          }\n          for (var _iterator4 = Object.keys(loading), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n            var color = _ref4;\n            this.loading[color].update(dt);\n          }\n        }\n      };\n      PageManager.prototype.removeFromLoadings = function removeFromLoadings(o) {\n        var i = this.loadings.indexOf(o);\n        if (~i) {\n          this.loadings.splice(i, 1);\n        }\n      };\n      PageManager.prototype.removeFromRenderQueue = function removeFromRenderQueue(o) {\n        var i = this.renderQueue.indexOf(o);\n        if (~i) {\n          this.renderQueue.splice(i, 1);\n        }\n      };\n      PageManager.prototype.refreshPageQuery = function refreshPageQuery(n) {\n        var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        this.pageQuery = query;\n        var object = this.pageCache.get(n);\n        if (object && object.wrapper && object.wrapper.setQuery) {\n          if (!this.pageCache.remove(n)) {\n            object.wrapper.setQuery(query);\n            this.pushInRenderQueue(object);\n          }\n        }\n      };\n      PageManager.prototype.refreshZoom = function refreshZoom() {\n        var _this = this;\n        if (this.p.autoResolution.enable) {\n          (function () {\n            var es = [];\n            _this.pageCache.forEach(function (e) {\n              es.push(e);\n            });\n            es.forEach(function (e) {\n              var object = e[1];\n              if (object && object.wrapper) {\n                if (!_this.pageCache.remove(e[0])) {\n                  _this.pushInRenderQueue(object);\n                }\n              }\n            });\n          })();\n        }\n      };\n      PageManager.prototype.getLayers = function getLayers(n, clb) {\n        var _this2 = this;\n        if (this.p.cssLayersLoader) {\n          this.p.cssLayersLoader(n, function () {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n            var object = _this2.pageCache.get(n);\n            if (object) {\n              if (object.state !== 'active') {\n                object.pendings.push({\n                  clb: clb,\n                  args: args\n                });\n              } else {\n                clb.apply(undefined, args);\n              }\n            }\n          });\n        } else {\n          clb([]);\n        }\n      };\n      PageManager.prototype.resolvePendings = function resolvePendings(pendings) {\n        for (var _iterator5 = pendings, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n          var _ref5;\n          if (_isArray5) {\n            if (_i5 >= _iterator5.length) break;\n            _ref5 = _iterator5[_i5++];\n          } else {\n            _i5 = _iterator5.next();\n            if (_i5.done) break;\n            _ref5 = _i5.value;\n          }\n          var p = _ref5;\n          try {\n            p.clb.apply(p, p.args);\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        pendings.splice(0, pendings.length);\n      };\n      PageManager.prototype.rtlPageN = function rtlPageN(n) {\n        return this.p.rtl ? 2 * (this.p.sheets + 2) - 1 - n : n;\n      };\n      PageManager.prototype.load = function load(material, n) {\n        var _this3 = this;\n        var pi = this.p.pageCallback(this.rtlPageN(n)),\n          p = this.isCover(n) ? this.p.cover : this.p.page;\n        var o = {\n          n: n,\n          texture: new _libs.THREE.Texture(),\n          wrapper: null,\n          state: 'loading',\n          locked: function locked(n) {\n            return o.state === 'loading' || o.state === 'rendering' || _this3.book.isActivePage(n);\n          },\n          color: p.color,\n          isActive: function isActive() {\n            return _this3.book.isActivePage(n);\n          },\n          isTop: function isTop() {\n            return ~_this3.book.getTopPages().indexOf(n);\n          },\n          dispose: function dispose() {\n            _this3.removeFromLoadings(o);\n            _this3.removeFromRenderQueue(o);\n            if (o.wrapper && o.wrapper.dispose) {\n              o.wrapper.dispose();\n            }\n            o.texture.dispose();\n            delete o.texture;\n            delete o.wrapper;\n          },\n          pendings: []\n        };\n        o.texture.minFilter = _libs.THREE.LinearFilter;\n        this.loadings.push(o);\n        this.setMaterial(o, material);\n        Promise.resolve().then(function () {\n          if (o.texture) {\n            o.widthTexels = pi.widthTexels || p.widthTexels;\n            o.heightTexels = pi.heightTexels || p.heightTexels;\n            var res = _this3.calcResolution(o);\n            o.wrapper = _this3.imageFactory.build(pi, pi.number === undefined ? n : pi.number, res.width, res.height, p.color, _this3.p.injector);\n            if (o.wrapper.setQuery) {\n              o.wrapper.setQuery(_this3.pageQuery);\n            }\n            o.simulate = pi.interactive ? (o.wrapper.simulate || function () {\n              return undefined;\n            }).bind(o.wrapper) : undefined;\n            o.wrapper.onLoad = function () {\n              _this3.pushInRenderQueue(o);\n              _this3.book.dispatchEvent({\n                type: 'loadedPage',\n                page: n\n              });\n            };\n            o.wrapper.onChange = function (image) {\n              if (o.texture) {\n                _this3.removeFromLoadings(o);\n                if (o.material) {\n                  o.material.map = o.texture;\n                  o.material.color = new _libs.THREE.Color(0xFFFFFF);\n                  o.material.needsUpdate = true;\n                }\n                o.texture.image = image;\n                o.texture.needsUpdate = true;\n                o.texture.onUpdate = function () {\n                  if (o.state !== 'queuedForRender') {\n                    o.state = 'active';\n                    _this3.resolvePendings(o.pendings);\n                  }\n                  delete _this3.rendering;\n                  //this.updateRenderQueue();\n                };\n                _this3.tmpMaterial.map = o.texture;\n                _this3.tmpMaterial.needsUpdate = true;\n              }\n            };\n          }\n        });\n        this.book.dispatchEvent({\n          type: 'loadPage',\n          page: n\n        });\n        return this.pageCache.put(n, o);\n      };\n      PageManager.prototype.isSinglePage = function isSinglePage(o) {\n        return this.p.singlePage || !o.n || o.n === this.book.getPages() - 1;\n      };\n      PageManager.prototype.calcResolution = function calcResolution(o) {\n        var res = void 0;\n        if (this.p.autoResolution.enable) {\n          var k = Math.min((this.isSinglePage(o) ? 1 : 0.5) * this.visual.width() / o.widthTexels, this.visual.height() / o.heightTexels);\n          res = {\n            width: this.p.autoResolution.k * this.p.zoom * k * o.widthTexels,\n            height: this.p.autoResolution.k * this.p.zoom * k * o.heightTexels\n          };\n        } else {\n          res = {\n            width: o.widthTexels,\n            height: o.heightTexels\n          };\n        }\n        return res;\n      };\n      PageManager.prototype.pushInRenderQueue = function pushInRenderQueue(o) {\n        if (o.state !== 'queuedForRender') {\n          o.state = 'queuedForRender';\n          this.renderQueue.push(o);\n          // this.updateRenderQueue();\n        }\n      };\n      PageManager.prototype.updateRenderQueue = function updateRenderQueue() {\n        if (this.canvas) {\n          var p = this.p;\n          if (!this.rendering && (p.renderWhileFlipping || !this.book.isProcessing())) {\n            var active = void 0,\n              top = void 0;\n            for (var _iterator6 = this.renderQueue, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n              var _ref6;\n              if (_isArray6) {\n                if (_i6 >= _iterator6.length) break;\n                _ref6 = _iterator6[_i6++];\n              } else {\n                _i6 = _iterator6.next();\n                if (_i6.done) break;\n                _ref6 = _i6.value;\n              }\n              var o = _ref6;\n              if (!active && o.isActive()) {\n                active = o;\n              }\n              if (o.isTop()) {\n                top = o;\n                break;\n              }\n            }\n            this.rendering = top || active;\n            if (this.isMobile() && p.renderInactivePagesOnMobile || !this.isMobile() && p.renderInactivePages) {\n              this.rendering = this.rendering || this.renderQueue[0];\n            }\n            if (this.rendering) {\n              if (this.rendering.wrapper.startRender) {\n                this.removeFromRenderQueue(this.rendering);\n                this.rendering.state = 'rendering';\n                this.rendering.wrapper.setResolution(this.calcResolution(this.rendering));\n                this.rendering.wrapper.startRender();\n              } else {\n                delete this.rendering;\n              }\n            }\n          }\n          setTimeout(this.updateRenderQueue.bind(this), 250);\n        }\n      };\n      PageManager.prototype.turnOnEvents = function turnOnEvents() {\n        this.transferEvents = true;\n      };\n      PageManager.prototype.turnOffEvents = function turnOffEvents() {\n        var mouseup = _libs.$.Event('mouseup'),\n          mouseout = _libs.$.Event('mouseout');\n        this.pageCache.forEach(function (ent) {\n          var object = ent[1];\n          if (object.simulate) {\n            object.simulate(mouseup, undefined, 0, 0);\n            object.simulate(mouseout, undefined, 0, 0);\n          }\n        });\n        this.transferEvents = false;\n      };\n      PageManager.prototype.transferEventToTexture = function transferEventToTexture(n, e, data) {\n        var _this4 = this;\n        if (this.transferEvents) {\n          var toObject = this.getOrLoadTextureObject(undefined, n);\n          if (toObject.wrapper) {\n            (function () {\n              var uv = data.uv,\n                toDoc = toObject.wrapper.getSimulatedDoc();\n              _this4.pageCache.forEach(function (ent) {\n                var object = ent[1];\n                if (object.simulate) {\n                  object.simulate(e, toDoc, uv.x, uv.y);\n                }\n              });\n            })();\n          }\n        }\n      };\n      PageManager.prototype.loadPredictedPages = function loadPredictedPages() {\n        this.predictedRequests = _BaseMathUtils2.default.predict(this.pageRequests, this.p.preloadPages);\n        for (var _iterator7 = this.predictedRequests, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n          var _ref7;\n          if (_isArray7) {\n            if (_i7 >= _iterator7.length) break;\n            _ref7 = _iterator7[_i7++];\n          } else {\n            _i7 = _iterator7.next();\n            if (_i7.done) break;\n            _ref7 = _i7.value;\n          }\n          var p = _ref7;\n          if (p < this.book.getPages() && !this.pageCache.get(p)) {\n            this.load(undefined, p);\n          }\n        }\n      };\n      PageManager.prototype.addPageRequest = function addPageRequest(n) {\n        this.pageRequests.push(n);\n        if (this.pageRequests.length > this.p.pagesForPredicting) {\n          this.pageRequests.shift();\n        }\n        Promise.resolve().then(this.loadPredictedPages.bind(this));\n      };\n      PageManager.prototype.setMaterial = function setMaterial(o, material) {\n        this.pageCache.forEach(function (e) {\n          var ob = e[1];\n          if (o !== ob && ob.material === material) {\n            delete ob.material;\n          }\n        });\n        if (material && material !== o.material) {\n          o.material = material;\n          this.setupMaterial(o);\n        }\n      };\n      PageManager.prototype.setupMaterial = function setupMaterial(o) {\n        o.material.map = o.texture.image ? o.texture : this.loadingAnimation ? this.loading[o.color].texture : null;\n        if (!o.material.map) {\n          o.material.color = new _libs.THREE.Color(o.color);\n        }\n        o.material.needsUpdate = true;\n      };\n      PageManager.prototype.getOrLoadTextureObject = function getOrLoadTextureObject(material, n) {\n        var object = this.pageCache.get(n);\n        if (!object) {\n          object = this.load(material, n);\n          this.addPageRequest(n);\n        } else {\n          this.setMaterial(object, material);\n        }\n        return object;\n      };\n      PageManager.prototype.setTexture = function setTexture(material, n) {\n        if (~this.predictedRequests.indexOf(n)) {\n          this.addPageRequest(n);\n        }\n        this.getOrLoadTextureObject(material, n);\n      };\n      return PageManager;\n    }();\n    exports.default = PageManager;\n\n    /***/\n  }, /* 34 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _BookPropsBuilder2 = __webpack_require__(9);\n    var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);\n    var _Pdf = __webpack_require__(18);\n    var _Pdf2 = _interopRequireDefault(_Pdf);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var PdfBookPropsBuilder = function (_BookPropsBuilder) {\n      _inherits(PdfBookPropsBuilder, _BookPropsBuilder);\n      function PdfBookPropsBuilder(src, onReady) {\n        _classCallCheck(this, PdfBookPropsBuilder);\n        var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));\n        _this.pdf = new _Pdf2.default(src);\n        _this.pageDescription = {\n          type: 'pdf',\n          src: _this.pdf,\n          interactive: true\n        };\n        _this.binds = {\n          pageCallback: _this.pageCallback.bind(_this)\n        };\n        _this.pdf.getHandler(_this.init.bind(_this));\n        return _this;\n      }\n      PdfBookPropsBuilder.prototype.dispose = function dispose() {\n        this.pdf.dispose();\n        _BookPropsBuilder.prototype.dispose.call(this);\n      };\n      PdfBookPropsBuilder.prototype.init = function init(handler) {\n        var _this2 = this;\n        var pages = this.pdf.getPagesNum();\n        this.calcSheets(pages);\n        if (pages > 0) {\n          handler.getPage(1).then(function (page) {\n            var size = _Pdf2.default.getPageSize(page);\n            _this2.calcProps(size.width, size.height);\n            _this2.ready();\n          }).catch(function (e) {\n            console.error(e);\n          });\n        } else {\n          this.props = this.defaults;\n          this.ready();\n        }\n      };\n      PdfBookPropsBuilder.prototype.pageCallback = function pageCallback(n) {\n        return this.pageDescription;\n      };\n      return PdfBookPropsBuilder;\n    }(_BookPropsBuilder3.default);\n    exports.default = PdfBookPropsBuilder;\n\n    /***/\n  }, /* 35 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(1);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var PdfLinksHandler = function () {\n      function PdfLinksHandler(pdf, ctrl, element) {\n        _classCallCheck(this, PdfLinksHandler);\n        this.pdf = pdf;\n        this.ctrl = ctrl;\n        this.element = (0, _libs.$)(element);\n        this.cursors = [];\n      }\n      PdfLinksHandler.prototype.dispose = function dispose() {};\n      PdfLinksHandler.prototype.setHandler = function setHandler(handler) {\n        this.handler = handler;\n      };\n      PdfLinksHandler.prototype.defaultHandler = function defaultHandler(type, destination) {\n        if (type === 'internal') {\n          this.ctrl.goToPage(destination);\n        } else if (type === 'external') {\n          window.open(destination, '_blank');\n        }\n      };\n      PdfLinksHandler.prototype.callHandlers = function callHandlers(type, destination) {\n        if (!this.handler || !this.handler(type, destination)) {\n          this.defaultHandler(type, destination);\n        }\n      };\n      PdfLinksHandler.prototype.handleEvent = function handleEvent(data) {\n        var _this = this;\n        var e = data.event,\n          anno = data.annotation;\n        switch (e.type) {\n          case 'mouseover':\n            {\n              this.cursors.push(this.element.css('cursor'));\n              this.element.css('cursor', 'pointer');\n              break;\n            }\n          case 'mouseout':\n            {\n              this.element.css('cursor', this.cursors.pop() || '');\n              break;\n            }\n          case 'touchtap':\n          case 'click':\n            {\n              if (anno.url) {\n                this.callHandlers('external', anno.url);\n              } else if (anno.dest) {\n                var destPromise = void 0;\n                if (typeof anno.dest === 'string') {\n                  destPromise = this.pdf.handler.getDestination(anno.dest);\n                } else {\n                  destPromise = Promise.resolve(anno.dest);\n                }\n                destPromise.then(function (dest) {\n                  return typeof dest[0] === 'number' ? dest[0] : _this.pdf.handler.getPageIndex(dest[0]);\n                }).then(function (number) {\n                  return _this.callHandlers('internal', number);\n                }).catch(function () {\n                  return console.error('Bad link');\n                });\n              }\n              break;\n            }\n        }\n      };\n      return PdfLinksHandler;\n    }();\n    exports.default = PdfLinksHandler;\n\n    /***/\n  }, /* 36 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _Finder = __webpack_require__(17);\n    var _Finder2 = _interopRequireDefault(_Finder);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var SearchEngine = function () {\n      function SearchEngine(pageCallback, pages) {\n        _classCallCheck(this, SearchEngine);\n        this.pageCallback = pageCallback;\n        this.pages = pages;\n        this.results = [];\n      }\n      SearchEngine.prototype.setQuery = function setQuery(query) {\n        this.query = query;\n        this.update = true;\n        this.process();\n      };\n      SearchEngine.prototype.process = function process() {\n        var _this = this;\n        if (this.update) {\n          var results = this.results;\n          this.results = [];\n          if (this.onPageHitsChanged) {\n            for (var _iterator = results, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n              var _ref;\n              if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n              } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n              }\n              var res = _ref;\n              this.onPageHitsChanged(undefined, '');\n            }\n          }\n          this.update = false;\n          this.page = 0;\n          this.stamp = Date.now();\n          if (this.query.length > 1) {\n            this.process();\n          }\n        } else {\n          if (this.page < this.pages) {\n            (function () {\n              var stamp = _this.stamp;\n              _this.find(_this.pageCallback(_this.page)).then(function (contexts) {\n                if (stamp === _this.stamp) {\n                  if (contexts.length) {\n                    _this.results.push({\n                      page: _this.page,\n                      contexts: contexts\n                    });\n                  }\n                  ++_this.page;\n                  if (_this.onPageHitsChanged) {\n                    _this.onPageHitsChanged(_this.page, _this.query);\n                  }\n                  _this.process();\n                }\n              });\n            })();\n          }\n        }\n      };\n      SearchEngine.prototype.find = function find(pi) {\n        var _this2 = this;\n        var next = void 0;\n        if (pi.type === 'pdf') {\n          next = new Promise(function (resolve) {\n            pi.src.getHandler(function () {\n              var n = pi.number === undefined ? _this2.page : pi.number;\n              if (pi.src.getPageType(n) === 'right') {\n                resolve([]);\n              } else {\n                pi.src.getPage(n).then(function (page) {\n                  page.getTextContent().then(function (textContent) {\n                    resolve(new _Finder2.default(textContent.items.map(function (item) {\n                      return item.str;\n                    }), _this2.query, {\n                      hits: false\n                    }).getContexts());\n                  });\n                }).catch(function () {\n                  return resolve([]);\n                });\n              }\n            });\n          });\n        } else {\n          next = Promise.resolve([]);\n        }\n        return next;\n      };\n      return SearchEngine;\n    }();\n    exports.default = SearchEngine;\n\n    /***/\n  }, /* 37 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _CSSLayer = __webpack_require__(13);\n    var _CSSLayer2 = _interopRequireDefault(_CSSLayer);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var SheetCssLayer = function () {\n      function SheetCssLayer(visual, block, props) {\n        _classCallCheck(this, SheetCssLayer);\n        this.visual = visual;\n        var size = block.getTopSize();\n        this.layer = new _CSSLayer2.default(size.width, size.height, props);\n        this.update(block);\n        this.visual.addCssObject(this.layer);\n      }\n      SheetCssLayer.prototype.dispose = function dispose() {\n        this.layer.dispose();\n        this.visual.removeCssObject(this.layer);\n      };\n      SheetCssLayer.prototype.isHidden = function isHidden() {\n        return this.layer.isHidden();\n      };\n      SheetCssLayer.prototype.hide = function hide() {\n        return this.layer.hide();\n      };\n      SheetCssLayer.prototype.show = function show() {\n        return this.layer.show();\n      };\n      SheetCssLayer.prototype.set = function set(css, html, js) {\n        this.layer.setData(css, html, js);\n      };\n      SheetCssLayer.prototype.update = function update(block) {\n        this.block = block;\n        this.block.getTopWorldRotation(this.layer.rotation);\n        this.block.getTopWorldPosition(this.layer.position);\n      };\n      return SheetCssLayer;\n    }();\n    exports.default = SheetCssLayer;\n\n    /***/\n  }, /* 38 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _MathUtils = __webpack_require__(3);\n    var _MathUtils2 = _interopRequireDefault(_MathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var SheetPhysics = function () {\n      SheetPhysics.targetForceClb = function targetForceClb(o, a, v, ch) {\n        var l = a * this.r;\n        return 100 * this.m * this.g * (2 / (1 + Math.exp(10 * (l - this.tl))) - 1) - this.m * 40 * v;\n      };\n      SheetPhysics.hoverCornerForceClb = function hoverCornerForceClb(o, v, l, ch) {\n        return 5;\n      };\n      SheetPhysics.prototype.getTargetForceClb = function getTargetForceClb(mass, targetAngle) {\n        return SheetPhysics.targetForceClb.bind({\n          g: this.p.gravity,\n          m: mass,\n          tl: targetAngle * this.p.r,\n          r: this.p.r\n        });\n      };\n      SheetPhysics.dragForceClb = function dragForceClb(o, a, v, ch) {\n        return o.flbt * o.m * (10 * o.g * ch - 50 * v / (1 + Math.exp(3.5 * Math.abs(ch))));\n      };\n      SheetPhysics.dragCornerForceClb = function dragCornerForceClb(o, a, v, ch) {\n        return 15 * (2 / (1 + Math.exp(10 * (a - this.ta) * o.r)) - 1);\n      };\n      SheetPhysics.getDragCornerForceClb = function getDragCornerForceClb(targetAngle) {\n        return SheetPhysics.dragCornerForceClb.bind({\n          ta: targetAngle\n        });\n      };\n      function SheetPhysics() {\n        var r = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n        var gravity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        var cornerDeviation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.15;\n        var fps = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 240;\n        _classCallCheck(this, SheetPhysics);\n        this.p = {\n          r: r,\n          cornerDeviation: cornerDeviation,\n          l: Math.PI * r,\n          startDt: 1 / fps,\n          gravity: gravity,\n          margin: 0.002 * r,\n          infM: 1e4,\n          attempts: 16,\n          maxIterations: 100\n        };\n        this.os = [];\n      }\n      SheetPhysics.prototype.dispose = function dispose() {\n        this.os = [];\n      };\n      SheetPhysics.prototype.getSize = function getSize() {\n        return this.os.length;\n      };\n      SheetPhysics.prototype.addObject = function addObject(mass, angle, velocity, flexibility, cornerHeight, simulateClb, removeClb) {\n        var forceClb = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : function () {\n          return 0;\n        };\n        var cornerForceClb = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : function () {\n          return 0;\n        };\n        var no = {\n          id: _MathUtils2.default.getUnique(),\n          m: mass,\n          v: velocity,\n          l: angle * this.p.r,\n          f: forceClb,\n          cf: cornerForceClb,\n          ch: cornerHeight,\n          flbt: flexibility,\n          simulateClb: simulateClb,\n          removeClb: removeClb\n        };\n        var i = this.os.findIndex(function (o) {\n          return no.l <= o.l;\n        });\n        i = ~i ? i : this.os.length;\n        this.os.splice(i, 0, no);\n        return no.id;\n      };\n      SheetPhysics.prototype.getParametrMap = function getParametrMap(name) {\n        var map = {\n          mass: 'm',\n          velocity: 'v',\n          flexibility: 'flbt',\n          cornerHeight: 'ch',\n          simulateClb: 'simulateClb',\n          removeClb: 'removeClb',\n          forceClb: 'f',\n          cornerForceClb: 'cf'\n        };\n        return map[name];\n      };\n      SheetPhysics.prototype.setParametr = function setParametr(id, name, value) {\n        var o = this.os.find(function (o) {\n          return o.id === id;\n        });\n        if (name === 'angle') {\n          o.l = value * this.p.r;\n        } else {\n          o[this.getParametrMap(name)] = value;\n        }\n      };\n      SheetPhysics.prototype.getParametr = function getParametr(id, name) {\n        var o = this.os.find(function (o) {\n          return o.id === id;\n        });\n        var value = void 0;\n        if (name === 'angle') {\n          value = o.l / this.p.r;\n        } else {\n          value = o[this.getParametrMap(name)];\n        }\n        return value;\n      };\n      SheetPhysics.prototype.simulate = function simulate(T) {\n        var t = 0,\n          dt = this.p.startDt,\n          attempt = 0,\n          it = 0;\n        while (t < T && it < this.p.maxIterations) {\n          if (dt > T - t) {\n            dt = T - t;\n          }\n          var nos = this.integrate(this.os, dt),\n            ci = this.findCollisions(nos);\n          if (ci.num > 1 && attempt < this.p.attempts) {\n            dt /= 2;\n            ++attempt;\n          } else {\n            if (ci.num === 1) {\n              var scos = this.solveCollision(nos[ci.last - 1], nos[ci.last]);\n              nos[ci.last - 1] = scos[0];\n              nos[ci.last] = scos[1];\n            } else if (ci.num > 1) {\n              var gs = [];\n              var last = -2;\n              for (var _iterator = ci.all, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n                var _ref;\n                if (_isArray) {\n                  if (_i >= _iterator.length) break;\n                  _ref = _iterator[_i++];\n                } else {\n                  _i = _iterator.next();\n                  if (_i.done) break;\n                  _ref = _i.value;\n                }\n                var i = _ref;\n                if (i - last > 1) {\n                  gs.push([]);\n                }\n                gs[gs.length - 1].push(i);\n                last = i;\n              }\n              for (var _iterator2 = gs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n                var _ref2;\n                if (_isArray2) {\n                  if (_i2 >= _iterator2.length) break;\n                  _ref2 = _iterator2[_i2++];\n                } else {\n                  _i2 = _iterator2.next();\n                  if (_i2.done) break;\n                  _ref2 = _i2.value;\n                }\n                var g = _ref2;\n                var sg = void 0,\n                  i0 = void 0;\n                if (nos[g[0]].l > Math.PI / 2 * this.p.r) {\n                  sg = -1;\n                  i0 = g[g.length - 1];\n                } else {\n                  sg = 1;\n                  i0 = g[0];\n                }\n                for (var _i3 = i0; _i3 < nos.length && _i3 > -1; _i3 += sg) {\n                  var o = nos[_i3 + sg];\n                  if (o && sg * (o.l - nos[_i3].l) <= this.p.margin) {\n                    o.l = nos[_i3].l + sg * 2 * this.p.margin;\n                    if (o.l > this.p.l || o.l < 0) {\n                      o.l = o.l > this.p.l ? this.p.l : 0;\n                      o.ch = 0;\n                      o.v = 0;\n                      console.error('Bad collision');\n                    }\n                  } else {\n                    break;\n                  }\n                }\n              }\n            }\n            this.os = nos;\n            this.findAndSolveCornerCollisions();\n            t += dt;\n            dt = this.p.startDt;\n            attempt = 0;\n          }\n          ++it;\n        }\n        this.removeStatics();\n      };\n      SheetPhysics.prototype.removeStatics = function removeStatics() {\n        var nos = [],\n          notify = [[], []];\n        for (var _iterator3 = this.os, _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n          if (_isArray3) {\n            if (_i4 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i4++];\n          } else {\n            _i4 = _iterator3.next();\n            if (_i4.done) break;\n            _ref3 = _i4.value;\n          }\n          var o = _ref3;\n          if (o.simulateClb) {\n            o.simulateClb(o.l / this.p.r, o.ch);\n          }\n          if ((o.l === this.p.l || o.l === 0) && o.v === 0) {\n            if (o.removeClb !== undefined) {\n              notify[(o.l !== this.p.l) + 0].push(o);\n            }\n          } else {\n            nos.push(o);\n          }\n        }\n        this.os = nos;\n        for (var _iterator4 = notify[0].reverse(), _isArray4 = Array.isArray(_iterator4), _i5 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n          var _ref4;\n          if (_isArray4) {\n            if (_i5 >= _iterator4.length) break;\n            _ref4 = _iterator4[_i5++];\n          } else {\n            _i5 = _iterator4.next();\n            if (_i5.done) break;\n            _ref4 = _i5.value;\n          }\n          var _o = _ref4;\n          _o.removeClb(Math.PI, _o.ch);\n        }\n        for (var _iterator5 = notify[1], _isArray5 = Array.isArray(_iterator5), _i6 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n          var _ref5;\n          if (_isArray5) {\n            if (_i6 >= _iterator5.length) break;\n            _ref5 = _iterator5[_i6++];\n          } else {\n            _i6 = _iterator5.next();\n            if (_i6.done) break;\n            _ref5 = _i6.value;\n          }\n          var _o2 = _ref5;\n          _o2.removeClb(0, _o2.ch);\n        }\n      };\n      SheetPhysics.prototype.findAndSolveCornerCollisions = function findAndSolveCornerCollisions() {\n        if (this.os.length) {\n          var os = [_extends({}, this.os[0], {\n            l: 0,\n            m: this.p.infM,\n            ch: 0\n          })].concat(this.os, [_extends({}, this.os[0], {\n            l: 1.05 * this.p.l,\n            m: this.p.infM,\n            ch: 0\n          })]);\n          for (var i = 1; i < os.length; ++i) {\n            var a = os[i - 1],\n              b = os[i],\n              al = a.l + this.p.cornerDeviation * a.ch * this.p.r,\n              bl = b.l + this.p.cornerDeviation * b.ch * this.p.r;\n            if (1.05 * al > bl && a.ch > b.ch) {\n              var dCh = a.ch - b.ch,\n                dv = a.m / a.flbt + b.m / b.flbt,\n                ka = a.m / a.flbt / dv,\n                kb = b.m / b.flbt / dv;\n              a.ch = a.ch - kb * dCh;\n              b.ch = b.ch + ka * dCh;\n            }\n          }\n        }\n      };\n      SheetPhysics.prototype.solveCollision = function solveCollision(a, b) {\n        var mm = b.m + a.m,\n          av = (-a.v * b.m + a.m * a.v + 2 * b.m * b.v) / mm,\n          bv = (b.m * b.v - b.v * a.m + 2 * a.m * a.v) / mm;\n        return [_extends({}, a, {\n          v: av\n        }), _extends({}, b, {\n          v: bv\n        })];\n      };\n      SheetPhysics.prototype.findCollisions = function findCollisions(os) {\n        var ci = {\n          num: 0,\n          last: 0,\n          all: []\n        };\n        for (var i = 1; i < os.length && ci.num < 2; ++i) {\n          if (os[i - 1].l > os[i].l || this.isCollision(os[i - 1], os[i])) {\n            if (os[i - 1].l > os[i].l) {\n              ++ci.num;\n            }\n            ++ci.num;\n            ci.last = i;\n            if (ci.all.indexOf(i - 1) === -1) {\n              ci.all.push(i - 1);\n            }\n            if (ci.all.indexOf(i) === -1) {\n              ci.all.push(i);\n            }\n          }\n        }\n        return ci;\n      };\n      SheetPhysics.prototype.isCollision = function isCollision(a, b) {\n        return Math.abs(a.l - b.l) < this.p.margin && a.v > b.v;\n      };\n      SheetPhysics.prototype.integrate = function integrate(os, dt) {\n        var nos = [];\n        for (var _iterator6 = os, _isArray6 = Array.isArray(_iterator6), _i7 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n          var _ref6;\n          if (_isArray6) {\n            if (_i7 >= _iterator6.length) break;\n            _ref6 = _iterator6[_i7++];\n          } else {\n            _i7 = _iterator6.next();\n            if (_i7.done) break;\n            _ref6 = _i7.value;\n          }\n          var o = _ref6;\n          var vl = _MathUtils2.default.rk4(this.dy.bind({\n            g: this.p.gravity,\n            r: this.p.r,\n            m: o.m,\n            f: o.f,\n            cf: o.cf,\n            ch: o.ch,\n            flbt: o.flbt\n          }), 0, dt, [o.v, o.l, o.ch]);\n          var no = _extends({}, o, {\n            v: vl[0],\n            l: vl[1],\n            ch: vl[2]\n          });\n          if (no.l <= 0 || no.l >= this.p.l) {\n            no.l = no.l <= 0 ? 0 : this.p.l;\n            no.v = 0;\n            no.ch = 0;\n          }\n          nos.push(no);\n        }\n        return nos;\n      };\n      SheetPhysics.prototype.dy = function dy(t, y) {\n        var v = y[0],\n          l = y[1],\n          ch = y[2],\n          f = this.f(this, l / this.r, v, ch),\n          cf = this.cf(this, l / this.r, v, ch);\n        return [(-this.g * Math.cos(l / this.r) * this.m + f) / this.m, v + 0.01 * (Math.random() - 0.5), this.flbt * ((2 / (1 + Math.exp(-0.2 * cf)) - 1) * (1 - 2 / (1 + Math.exp(-5 * (Math.abs(ch) - 2)))) - ch)];\n      };\n      return SheetPhysics;\n    }();\n    exports.default = SheetPhysics;\n\n    /***/\n  }, /* 39 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var SoundsEnviroment = function () {\n      function SoundsEnviroment() {\n        var template = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _classCallCheck(this, SoundsEnviroment);\n        this.sounds = template.sounds || {};\n        this.audio = {};\n        if (this.sounds.startFlip) {\n          this.audio.startFlip = new Audio(this.sounds.startFlip);\n        }\n        if (this.sounds.endFlip) {\n          this.audio.endFlip = new Audio(this.sounds.endFlip);\n        }\n      }\n      SoundsEnviroment.prototype.setEnabled = function setEnabled(enabled) {\n        this.enabled = enabled;\n      };\n      SoundsEnviroment.prototype.togle = function togle() {\n        this.enabled = !this.enabled;\n      };\n      SoundsEnviroment.prototype.dispose = function dispose() {\n        delete this.audio.startFlip;\n        delete this.audio.endFlip;\n      };\n      SoundsEnviroment.prototype.startFlip = function startFlip() {\n        if (this.enabled && this.audio.startFlip) {\n          this.audio.startFlip.play();\n        }\n      };\n      SoundsEnviroment.prototype.endFlip = function endFlip() {\n        if (this.enabled && this.audio.startFlip) {\n          this.audio.startFlip.pause();\n          this.audio.startFlip.currentTime = 0;\n        }\n        if (this.enabled && this.audio.endFlip) {\n          this.audio.endFlip.play();\n        }\n      };\n      SoundsEnviroment.prototype.subscribeFlips = function subscribeFlips(emitter) {\n        emitter.addEventListener('startFlip', this.startFlip.bind(this));\n        emitter.addEventListener('endFlip', this.endFlip.bind(this));\n      };\n      return SoundsEnviroment;\n    }();\n    exports.default = SoundsEnviroment;\n\n    /***/\n  }, /* 40 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _WidgetController2 = __webpack_require__(67);\n    var _WidgetController3 = _interopRequireDefault(_WidgetController2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var TocController = function (_WidgetController) {\n      _inherits(TocController, _WidgetController);\n      function TocController(view, bookCtrl) {\n        _classCallCheck(this, TocController);\n        var _this = _possibleConstructorReturn(this, _WidgetController.call(this, view));\n        _this.bookCtrl = bookCtrl;\n        _this.tab = 'none';\n        return _this;\n      }\n      TocController.prototype.setThumbnails = function setThumbnails(thumbnails) {\n        this.thumbnails = thumbnails;\n        thumbnails.onNavigate = this.navigateThumbnails.bind(this);\n        if (this.tab === 'none') {\n          this.tab = 'thumbnails';\n        }\n        this.fireChange();\n      };\n      TocController.prototype.setSearch = function setSearch(search) {\n        this.search = search;\n        search.onNavigate = this.navigateSearch.bind(this);\n        this.fireChange();\n      };\n      TocController.prototype.setBookmarks = function setBookmarks(bookmarks, pdf) {\n        this.bookmarks = bookmarks;\n        this.pdf = pdf;\n        bookmarks.onNavigate = this.navigateBookmarks.bind(this);\n        if (bookmarks.getSize()) {\n          this.tab = 'bookmarks';\n          this.isBookmarks = true;\n        }\n        this.fireChange();\n      };\n      TocController.prototype.cmdBookmarks = function cmdBookmarks() {\n        this.tab = 'bookmarks';\n        this.fireChange();\n      };\n      TocController.prototype.cmdThumbnails = function cmdThumbnails() {\n        this.tab = 'thumbnails';\n        this.fireChange();\n      };\n      TocController.prototype.cmdSearch = function cmdSearch() {\n        this.tab = 'search';\n        this.fireChange();\n      };\n      TocController.prototype.cmdCloseToc = function cmdCloseToc() {\n        this.hide();\n      };\n      TocController.prototype.navigateThumbnails = function navigateThumbnails(number) {\n        this.bookCtrl.goToPage(number);\n      };\n      TocController.prototype.navigateSearch = function navigateSearch(number) {\n        this.bookCtrl.goToPage(number);\n      };\n      TocController.prototype.navigateBookmarks = function navigateBookmarks(item) {\n        var _this2 = this;\n        if (item.url) {\n          window.open(item.url, '_blank');\n        } else if (item.dest) {\n          var destPromise = void 0;\n          if (typeof item.dest === 'string') {\n            destPromise = this.pdf.handler.getDestination(item.dest);\n          } else {\n            destPromise = Promise.resolve(item.dest);\n          }\n          destPromise.then(function (dest) {\n            return _this2.pdf.handler.getPageIndex(dest[0]);\n          }).then(function (number) {\n            return _this2.bookCtrl.goToPage(number);\n          }).catch(function () {\n            return console.error('Bad bookmark');\n          });\n        }\n      };\n      TocController.prototype.updateView = function updateView() {\n        var _this3 = this;\n        if (this.view) {\n          this.view.setState('widTocMenu', {\n            enable: true,\n            visible: true,\n            active: false\n          });\n          this.view.setState('widThumbnails', {\n            enable: true,\n            visible: this.tab === 'thumbnails',\n            active: false\n          });\n          this.view.setState('widSearch', {\n            enable: true,\n            visible: this.tab === 'search',\n            active: false\n          });\n          this.view.setState('widBookmarks', {\n            enable: true,\n            visible: this.tab === 'bookmarks',\n            active: false\n          });\n          this.view.setState('cmdBookmarks', {\n            enable: true,\n            visible: true,\n            active: this.tab === 'bookmarks'\n          });\n          this.view.setState('cmdCloseToc', {\n            enable: true,\n            visible: true,\n            active: false\n          });\n          this.view.setState('cmdThumbnails', {\n            enable: true,\n            visible: true,\n            active: this.tab === 'thumbnails'\n          });\n          this.view.setState('cmdSearch', {\n            enable: true,\n            visible: true,\n            active: this.tab === 'search'\n          });\n          Promise.resolve().then(function () {\n            return _this3.thumbnails.setEnable(_this3.visible && _this3.tab === 'thumbnails');\n          });\n          _WidgetController.prototype.updateView.call(this);\n        }\n      };\n      return TocController;\n    }(_WidgetController3.default);\n    exports.default = TocController;\n\n    /***/\n  }, /* 41 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(1);\n    var _ThreeUtils = __webpack_require__(20);\n    var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    var resX = 11,\n      resY = 2,\n      resZ = 15,\n      scale = 1,\n      faces = [];\n    var frontGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);\n    frontGeometry.translate(0.5 * scale, 0.5 * scale, scale);\n    var backGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);\n    backGeometry.rotateY(Math.PI);\n    backGeometry.translate(0.5 * scale, 0.5 * scale, 0);\n    var leftGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);\n    leftGeometry.rotateY(-Math.PI / 2);\n    leftGeometry.translate(0, 0.5 * scale, 0.5 * scale);\n    var rightGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);\n    rightGeometry.rotateY(Math.PI / 2);\n    rightGeometry.translate(scale, 0.5 * scale, 0.5 * scale);\n    var topGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resZ - 1);\n    topGeometry.rotateX(-Math.PI / 2);\n    topGeometry.translate(0.5 * scale, scale, 0.5 * scale);\n    var bottomGeometry = topGeometry.clone();\n    bottomGeometry.translate(0, -scale, 0);\n    for (var _iterator = bottomGeometry.faces, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n      var f = _ref;\n      var _ref3 = [f.b, f.a];\n      f.a = _ref3[0];\n      f.b = _ref3[1];\n    }\n    var geometry = new _libs.THREE.Geometry();\n    geometry.vertices = [].concat(bottomGeometry.vertices, topGeometry.vertices);\n    var addFaces = function addFaces(fs, map) {\n      for (var _iterator2 = fs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n        var f = _ref2;\n        geometry.faces.push(new _libs.THREE.Face3(map(f.a), map(f.b), map(f.c)));\n      }\n      faces.push(geometry.faces.length);\n    };\n    var mapVertices = function mapVertices(src, dst) {\n      var map = [];\n      var eq = function eq(a, b) {\n        return Math.abs(a.x - b.x) + Math.abs(a.y - b.y) + Math.abs(a.z - b.z) < 1e-4;\n      };\n      for (var i = 0; i < src.length; ++i) {\n        for (var j = 0; j < dst.length; ++j) {\n          if (eq(src[i], dst[j])) {\n            map[i] = j;\n            break;\n          }\n        }\n      }\n      return map;\n    };\n    var frontMap = mapVertices(frontGeometry.vertices, geometry.vertices);\n    var backMap = mapVertices(backGeometry.vertices, geometry.vertices);\n    var leftMap = mapVertices(leftGeometry.vertices, geometry.vertices);\n    var rightMap = mapVertices(rightGeometry.vertices, geometry.vertices);\n    addFaces(topGeometry.faces, function (i) {\n      return i + bottomGeometry.vertices.length;\n    });\n    addFaces(bottomGeometry.faces, function (i) {\n      return i;\n    });\n    addFaces(frontGeometry.faces, function (i) {\n      return frontMap[i];\n    });\n    addFaces(backGeometry.faces, function (i) {\n      return backMap[i];\n    });\n    addFaces(leftGeometry.faces, function (i) {\n      return leftMap[i];\n    });\n    addFaces(rightGeometry.faces, function (i) {\n      return rightMap[i];\n    });\n    faces.pop();\n    _ThreeUtils2.default.computeFaceVertexUvs(geometry, faces);\n    geometry.computeVertexNormals();\n    //geometry.computeFaceNormals();\n    geometry.computeBoundingSphere();\n    //geometry.computeBoundingBox();\n    geometry.verticesNeedUpdate = true;\n    exports.default = {\n      resX: resX,\n      resY: resY,\n      resZ: resZ,\n      faces: faces,\n      geometry: geometry\n    };\n\n    /***/\n  }, /* 42 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    exports.props = props;\n    var mouseButtons = {\n      Left: 0,\n      Middle: 1,\n      Right: 2\n    };\n    function props() {\n      return {\n        eps: 1e-4,\n        skin: {\n          default: 'short-white-book-view'\n        },\n        scale: {\n          default: 0.9,\n          min: 0.9,\n          max: 2.5,\n          levels: 7\n        },\n        lighting: {\n          default: 0.7,\n          min: 0,\n          max: 1,\n          levels: 7\n        },\n        pan: {\n          speed: 50\n        },\n        loadingAnimation: {\n          skin: false,\n          book: true\n        },\n        autoResolution: {\n          enabled: true,\n          coefficient: 1.5\n        },\n        actions: {\n          cmdZoomIn: {\n            enabled: true\n          },\n          cmdZoomOut: {\n            enabled: true\n          },\n          cmdDefaultZoom: {\n            enabled: true,\n            type: 'dblclick',\n            code: 0\n          },\n          cmdToc: {\n            enabled: true\n          },\n          cmdFastBackward: {\n            enabled: false\n          },\n          cmdBackward: {\n            enabled: true\n          },\n          cmdForward: {\n            enabled: true\n          },\n          cmdFastForward: {\n            enabled: false\n          },\n          cmdSave: {\n            enabled: true\n          },\n          cmdPrint: {\n            enabled: true\n          },\n          cmdFullScreen: {\n            enabled: true\n          },\n          widSettings: {\n            enabled: true\n          },\n          cmdSmartPan: {\n            enabled: true,\n            active: true\n          },\n          cmdSinglePage: {\n            enabled: true,\n            active: false,\n            activeForMobile: false\n          },\n          cmdSounds: {\n            enabled: true,\n            active: true\n          },\n          cmdStats: {\n            enabled: true,\n            active: false\n          },\n          cmdLightingUp: {\n            enabled: true\n          },\n          cmdLightingDown: {\n            enabled: true\n          },\n          cmdPanLeft: {\n            enabled: false\n          },\n          cmdPanRight: {\n            enabled: false\n          },\n          cmdPanUp: {\n            enabled: false\n          },\n          cmdPanDown: {\n            enabled: false\n          },\n          mouseCmdRotate: {\n            enabled: true,\n            type: 'mousedrag',\n            code: mouseButtons.Right\n          },\n          mouseCmdDragZoom: {\n            enabled: true,\n            type: 'mousedrag',\n            code: mouseButtons.Middle\n          },\n          mouseCmdPan: {\n            enabled: true,\n            type: 'mousedrag',\n            code: mouseButtons.Left\n          },\n          mouseCmdWheelZoom: {\n            enabled: true,\n            type: 'mousewheel',\n            code: 0\n          },\n          touchCmdRotate: {\n            enabled: true,\n            type: 'touchdrag',\n            code: 3\n          },\n          touchCmdZoom: {\n            enabled: true,\n            type: 'touchdrag',\n            code: 2\n          },\n          touchCmdPan: {\n            enabled: true,\n            type: 'touchdrag',\n            code: 1\n          },\n          touchCmdSwipe: {\n            enabled: true,\n            type: 'touchdrag',\n            code: 1\n          }\n        }\n      };\n    }\n    ;\n\n    /***/\n  }, /* 43 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _ImageBase2 = __webpack_require__(5);\n    var _ImageBase3 = _interopRequireDefault(_ImageBase2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var BlankImage = function (_ImageBase) {\n      _inherits(BlankImage, _ImageBase);\n      function BlankImage(context, width, height, color) {\n        _classCallCheck(this, BlankImage);\n        var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));\n        Promise.resolve().then(function () {\n          _this.startRender = function () {\n            _this.renderBlankPage();\n            _this.finishRender();\n          };\n          _this.finishLoad();\n        });\n        return _this;\n      }\n      return BlankImage;\n    }(_ImageBase3.default);\n    exports.default = BlankImage;\n\n    /***/\n  }, /* 44 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Bookmarks = function () {\n      function Bookmarks(container, items) {\n        var _this = this;\n        var getTitle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (i) {\n          return i.title;\n        };\n        var getItems = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (i) {\n          return i.items;\n        };\n        _classCallCheck(this, Bookmarks);\n        this.container = container;\n        this.map = [];\n        this.getTitle = getTitle;\n        this.getItems = getItems;\n        this.nodes = this.mapNodes(items, this.map);\n        this.binds = {\n          togle: function togle(e) {\n            e.preventDefault();\n            var li = (0, _libs.$)(e.target);\n            while (li[0] && li[0] !== container[0] && !li.hasClass('item')) {\n              li = (0, _libs.$)(li[0].parentNode);\n            }\n            if (li.hasClass('item')) {\n              var cmd = (0, _libs.$)(e.target);\n              while (cmd[0] && cmd[0] !== li[0] && !cmd.hasClass('cmd')) {\n                cmd = (0, _libs.$)(cmd[0].parentNode);\n              }\n              if (cmd.hasClass('cmd')) {\n                var node = _this.map[li.attr('data-id')];\n                if (cmd.hasClass('togle')) {\n                  node.minimized = !node.minimized;\n                  if (node.minimized) {\n                    li.find('ul').remove();\n                    li.find('.togle').addClass('minimized');\n                  } else {\n                    li.find('.togle').removeClass('minimized');\n                    li.append((_this.renderNode(node).match(/<ul.*<\\/ul>/) || [''])[0]);\n                  }\n                } else {\n                  if (_this.onNavigate) {\n                    _this.onNavigate(node.item);\n                  }\n                }\n              }\n            }\n          }\n        };\n        container.on('click', this.binds.togle);\n        this.update();\n      }\n      Bookmarks.prototype.getSize = function getSize() {\n        return this.map.length;\n      };\n      Bookmarks.prototype.dispose = function dispose() {\n        this.container.off('click', this.binds.togle);\n        this.container.html('');\n      };\n      Bookmarks.prototype.update = function update() {\n        this.container.html(this.renderNodes(this.nodes));\n      };\n      Bookmarks.prototype.forEach = function forEach(f) {\n        var nodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.nodes;\n        for (var _iterator = nodes || [], _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var node = _ref;\n          f(node);\n          this.forEach(f, node.children);\n        }\n      };\n      Bookmarks.prototype.expand = function expand() {\n        this.forEach(function (n) {\n          return n.minimized = false;\n        });\n        this.update();\n      };\n      Bookmarks.prototype.minimize = function minimize() {\n        this.forEach(function (n) {\n          return n.minimized = true;\n        });\n        this.update();\n      };\n      Bookmarks.prototype.renderNode = function renderNode(node) {\n        return ['<div class=\"area\">', node.children ? '<a href=\"#\" class=\"cmd togle' + (node.minimized ? ' minimized' : '') + '\"><i class=\"fa fa-angle-right\"></i></a> ' : '<i class=\"white-space\"></i> ', '<a class=\"cmd\" title=\"', node.title, '\" href=\"#\">', node.title, '</a></div>', node.minimized ? '' : this.renderNodes(node.children)].join('');\n      };\n      Bookmarks.prototype.renderNodes = function renderNodes(nodes) {\n        var res = ['<div class=\"bookmarks\">'];\n        if (nodes && nodes.length) {\n          res.push('<ul class=\"level-', nodes[0].level, '\">');\n          for (var _iterator2 = nodes, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var node = _ref2;\n            res.push(['<li class=\"item\" data-id=\"', node.id, '\">', this.renderNode(node), '</li>'].join(''));\n          }\n          res.push('</ul>');\n        }\n        res.push('</div>');\n        return res.join('');\n      };\n      Bookmarks.prototype.mapNodes = function mapNodes(items) {\n        var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var nodes = null;\n        if (items && items.length) {\n          nodes = [];\n          for (var _iterator3 = items, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n            var _ref3;\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref3 = _i3.value;\n            }\n            var item = _ref3;\n            var id = map.length;\n            map.push(undefined);\n            var node = {\n              id: id,\n              title: this.getTitle(item),\n              level: level,\n              item: item,\n              minimized: true,\n              children: this.mapNodes(this.getItems(item), map, level + 1)\n            };\n            nodes.push(node);\n            map[id] = node;\n          }\n        }\n        return nodes;\n      };\n      return Bookmarks;\n    }();\n    exports.default = Bookmarks;\n\n    /***/\n  }, /* 45 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Detector = function () {\n      function Detector() {\n        _classCallCheck(this, Detector);\n      }\n      Detector.getWebGLErrorMessage = function getWebGLErrorMessage() {\n        var element = document.createElement('div');\n        element.id = 'webgl-error-message';\n        element.style.fontFamily = 'monospace';\n        element.style.fontSize = '13px';\n        element.style.fontWeight = 'normal';\n        element.style.textAlign = 'center';\n        element.style.background = '#fff';\n        element.style.color = '#000';\n        element.style.padding = '1.5em';\n        element.style.width = '400px';\n        element.style.margin = '5em auto 0';\n        if (!Detector.webgl) {\n          element.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n') : ['Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n');\n        }\n        return element;\n      };\n      Detector.addGetWebGLMessage = function addGetWebGLMessage(parameters) {\n        var parent = void 0,\n          id = void 0,\n          element = void 0;\n        parameters = parameters || {};\n        parent = parameters.parent || (0, _libs.$)(document.body);\n        id = parameters.id || 'oldie';\n        element = Detector.getWebGLErrorMessage();\n        //element.id = id;\n\n        parent.append(element);\n      };\n      return Detector;\n    }();\n    Detector.canvas = !!window.CanvasRenderingContext2D;\n    Detector.webgl = function () {\n      try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n      } catch (e) {\n        return false;\n      }\n    }();\n    Detector.workers = !!window.Worker;\n    Detector.fileapi = window.File && window.FileReader && window.FileList && window.Blob;\n    exports.default = Detector;\n\n    /***/\n  }, /* 46 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var DocMouseSimulator = function () {\n      function DocMouseSimulator(jFrame, element) {\n        var bElement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document.body;\n        _classCallCheck(this, DocMouseSimulator);\n        this.jFrame = jFrame;\n        this.wnd = jFrame[0].contentWindow;\n        this.doc = jFrame[0].contentDocument;\n        this.element = element || doc.body;\n        this.bElement = bElement;\n        this.resendProperties = this.getDefaultResendProperties();\n        this.undefinedProperties = this.getDefaultUndefinedProperties();\n        this.cursors = [];\n        this.onDocChangeClbs = [];\n        var terms = [{\n          find: ':hover',\n          replace: '.' + DocMouseSimulator.HOVER\n        }, {\n          find: ':active',\n          replace: '.' + DocMouseSimulator.ACTIVE\n        }];\n        var style = ['<style type=\"text/css\">'];\n        for (var i = 0; i < this.doc.styleSheets.length; ++i) {\n          var ss = this.doc.styleSheets[i];\n          for (var j = 0; j < ss.cssRules.length; ++j) {\n            var r = ss.cssRules[j],\n              cssText = void 0;\n            for (var _iterator = terms, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n              var _ref;\n              if (_isArray) {\n                if (_i >= _iterator.length) break;\n                _ref = _iterator[_i++];\n              } else {\n                _i = _iterator.next();\n                if (_i.done) break;\n                _ref = _i.value;\n              }\n              var term = _ref;\n              if (~r.selectorText.indexOf(term.find)) {\n                cssText = (cssText || r.cssText).replace(new RegExp(term.find, 'g'), term.replace);\n              }\n            }\n            if (cssText) {\n              style.push(cssText);\n            }\n          }\n        }\n        style.push('</style>');\n        (0, _libs.$)(this.doc.head).append((0, _libs.$)(style.join('')));\n      }\n      DocMouseSimulator.prototype.convertCoords = function convertCoords(x, y) {\n        var jElement = (0, _libs.$)(this.element);\n        var offset = jElement.offset();\n        return {\n          x: offset.left + jElement.width() * x,\n          y: offset.top + jElement.height() * (1 - y)\n        };\n      };\n      DocMouseSimulator.prototype.triggerEvent = function triggerEvent(element, e, p, type, advancedProps) {\n        var props = {};\n        for (var _iterator2 = this.resendProperties, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) break;\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) break;\n            _ref2 = _i2.value;\n          }\n          var _n = _ref2;\n          props[_n] = e[_n];\n        }\n        for (var _iterator3 = this.undefinedProperties, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n          var _ref3;\n          if (_isArray3) {\n            if (_i3 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i3++];\n          } else {\n            _i3 = _iterator3.next();\n            if (_i3.done) break;\n            _ref3 = _i3.value;\n          }\n          var _n2 = _ref3;\n          props[_n2] = undefined;\n        }\n        for (var n in advancedProps) {\n          if (advancedProps.hasOwnProperty(n)) {\n            props[n] = advancedProps[n];\n          }\n        }\n        props.view = this.wnd;\n        props.pageX = p.x;\n        props.pageY = p.y;\n        var jE = _libs.$.Event(type, props);\n        jE.timeStamp = e.timeStamp;\n        (0, _libs.$)(element).trigger(jE);\n      };\n      DocMouseSimulator.prototype.addClass = function addClass(element, name) {\n        (0, _libs.$)(element).addClass(name);\n        var style = this.wnd.getComputedStyle(element);\n        this.cursors.push((0, _libs.$)(this.bElement).css('cursor'));\n        (0, _libs.$)(this.bElement).css('cursor', style.getPropertyValue('cursor'));\n      };\n      DocMouseSimulator.prototype.removeClass = function removeClass(element, name) {\n        (0, _libs.$)(element).removeClass(name);\n        (0, _libs.$)(this.bElement).css('cursor', this.cursors.pop());\n      };\n      DocMouseSimulator.prototype.enterElement = function enterElement(element) {\n        this.addClass(element, DocMouseSimulator.HOVER);\n      };\n      DocMouseSimulator.prototype.leaveElement = function leaveElement(element) {\n        this.removeClass(element, DocMouseSimulator.HOVER);\n      };\n      DocMouseSimulator.prototype.activateElement = function activateElement(element) {\n        this.addClass(element, DocMouseSimulator.ACTIVE);\n      };\n      DocMouseSimulator.prototype.deactivateElement = function deactivateElement(element) {\n        this.removeClass(element, DocMouseSimulator.ACTIVE);\n      };\n      DocMouseSimulator.prototype.addDocChangeClb = function addDocChangeClb(clb) {\n        this.onDocChangeClbs.push(clb);\n      };\n      DocMouseSimulator.prototype.notify = function notify() {\n        for (var _iterator4 = this.onDocChangeClbs, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n          var _ref4;\n          if (_isArray4) {\n            if (_i4 >= _iterator4.length) break;\n            _ref4 = _iterator4[_i4++];\n          } else {\n            _i4 = _iterator4.next();\n            if (_i4.done) break;\n            _ref4 = _i4.value;\n          }\n          var clb = _ref4;\n          clb(this.wnd, this.doc);\n        }\n      };\n      DocMouseSimulator.prototype.elementFromPoint = function elementFromPoint(p) {\n        var node = this.doc.body,\n          next = true;\n        while (next) {\n          next = false;\n          for (var i = 0; i < node.childNodes.length; ++i) {\n            var child = node.childNodes[i];\n            if (child instanceof this.wnd.Element) {\n              var jC = (0, _libs.$)(child),\n                offset = jC.offset(),\n                height = jC.height(),\n                width = jC.width();\n              if (p.x > offset.left && p.x < offset.left + width && p.y > offset.top && p.y < offset.top + height) {\n                node = child;\n                next = true;\n                break;\n              }\n            }\n          }\n        }\n        return node;\n      };\n      DocMouseSimulator.prototype.getElement = function getElement(p) {\n        var off0 = this.jFrame.offset();\n        this.jFrame.offset({\n          left: 0.5 * window.innerWidth - p.x,\n          top: 0.5 * window.innerHeight - p.y\n        });\n        var element = this.doc.elementFromPoint(p.x, p.y);\n        if (!element) {\n          // it isn't a joke it's IE\n          element = this.doc.elementFromPoint(p.x, p.y);\n        }\n        this.jFrame.offset(off0);\n        return element ? element : this.elementFromPoint(p);\n      };\n      DocMouseSimulator.prototype.simulate = function simulate(e, doc, x, y) {\n        var p = this.convertCoords(x, y),\n          element = doc === this.doc ? this.getElement(p) : undefined;\n        var trigger = element !== undefined,\n          notify = false;\n        switch (e.type) {\n          case 'mousedown':\n            {\n              if (this.capElement) {\n                this.deactivateElement(this.capElement);\n                notify = true;\n              }\n              this.capElement = element;\n              if (this.capElement) {\n                this.activateElement(this.capElement);\n                notify = true;\n              }\n              break;\n            }\n          case 'mouseup':\n            {\n              if (this.capElement) {\n                this.deactivateElement(this.capElement);\n                notify = true;\n              }\n              this.timeStamp = e.timeStamp;\n              break;\n            }\n          case 'click':\n            {\n              trigger = element && this.capElement === element && e.timeStamp === this.timeStamp;\n              this.capElement = undefined;\n              break;\n            }\n          case 'mouseenter':\n          case 'mouseover':\n          case 'mousemove':\n            {\n              var leaved = null;\n              if (this.hovElement !== element && this.hovElement) {\n                this.triggerEvent(this.hovElement, e, p, 'mouseout', {\n                  relatedTarget: element ? element : null\n                });\n                this.leaveElement(this.hovElement);\n                leaved = this.hovElement;\n                this.hovElement = undefined;\n                notify = true;\n              }\n              if (!this.hovElement && element) {\n                this.triggerEvent(element, e, p, 'mouseover', {\n                  relatedTarget: leaved\n                });\n                this.enterElement(element);\n                this.hovElement = element;\n                notify = true;\n              }\n              trigger = element && e.type === 'mousemove';\n              break;\n            }\n          case 'mouseleave':\n          case 'mouseout':\n            {\n              if (this.hovElement) {\n                this.triggerEvent(this.hovElement, e, p, 'mouseout', {\n                  relatedTarget: e.relatedTarget\n                });\n                this.leaveElement(this.hovElement);\n                this.hovElement = undefined;\n                notify = true;\n              }\n              trigger = false;\n              break;\n            }\n        }\n        if (trigger) {\n          this.triggerEvent(element, e, p, e.type);\n        }\n        if (notify) {\n          this.notify();\n        }\n      };\n      DocMouseSimulator.prototype.getDefaultUndefinedProperties = function getDefaultUndefinedProperties() {\n        return ['clientX', 'clientY', 'offsetX', 'offsetY', 'screenX', 'screenY'];\n      };\n      DocMouseSimulator.prototype.getDefaultResendProperties = function getDefaultResendProperties() {\n        return ['altKey', 'bubbles', 'button', 'buttons', 'cancelable', 'changedTouches', 'char', 'charCode', 'ctrlKey', 'data', 'detail', 'eventPhase', 'isDefaultPrevented', 'key', 'keyCode', 'metaKey', 'pointerId', 'pointerType', 'shiftKey', 'targetTouches', 'touches', 'which'];\n      };\n      return DocMouseSimulator;\n    }();\n\n    /*\r\n    altKey,\r\n    bubbles,\r\n    button,\r\n    buttons,\r\n    cancelable,\r\n    changedTouches,\r\n    char,\r\n    charCode,\r\n    clientX,\r\n    clientY,\r\n    ctrlKey,\r\n    currentTarget,\r\n    data,\r\n    delegateTarget,\r\n    detail,\r\n    eventPhase,\r\n    handleObj,\r\n    isDefaultPrevented,\r\n    key,\r\n    keyCode,\r\n    metaKey,\r\n    offsetX,\r\n    offsetY,\r\n    originalEvent,\r\n    pageX,\r\n    pageY,\r\n    pointerId,\r\n    pointerType,\r\n    relatedTarget,\r\n    screenX,\r\n    screenY,\r\n    shiftKey,\r\n    target,\r\n    targetTouches,\r\n    timeStamp,\r\n    toElement,\r\n    touches,\r\n    type,\r\n    view,\r\n    which\r\n    */\n\n    DocMouseSimulator.HOVER = 'SIMULATED-HOVER';\n    DocMouseSimulator.ACTIVE = 'SIMULATED-ACTIVE';\n    exports.default = DocMouseSimulator;\n\n    /***/\n  }, /* 47 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Dom2Image = function Dom2Image(wnd, doc, cache) {\n      _classCallCheck(this, Dom2Image);\n      var self = this;\n      this.window = wnd;\n      this.document = doc;\n      this.cache = cache;\n      var util = newUtil();\n      var inliner = newInliner();\n      var fontFaces = newFontFaces();\n      var images = newImages();\n      this.toSvg = toSvg;\n      this.toPng = toPng;\n      this.toJpeg = toJpeg;\n      this.toBlob = toBlob;\n      this.toPixelData = toPixelData;\n      this.impl = {\n        fontFaces: fontFaces,\n        images: images,\n        util: util,\n        inliner: inliner\n      };\n\n      /**\r\n       * @param {Node} node - The DOM Node object to render\r\n       * @param {Object} options - Rendering options\r\n       * @param {Function} options.filter - Should return true if passed node should be included in the output\r\n       *          (excluding node means excluding it's children as well). Not called on the root node.\r\n       * @param {String} options.bgcolor - color for the background, any valid CSS color value.\r\n       * @param {Number} options.width - width to be applied to node before rendering.\r\n       * @param {Number} options.height - height to be applied to node before rendering.\r\n       * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\r\n       * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\r\n                  defaults to 1.0.\r\n       * @return {Promise} - A promise that is fulfilled with a SVG image data URL\r\n       * */\n\n      function toSvg(node, options) {\n        options = options || {};\n        return Promise.resolve(node).then(function (node) {\n          return cloneNode(node, options.filter, true);\n        }).then(embedFonts).then(inlineImages).then(applyOptions).then(function (clone) {\n          return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));\n        });\n        function applyOptions(clone) {\n          if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n          if (options.width) clone.style.width = options.width + 'px';\n          if (options.height) clone.style.height = options.height + 'px';\n          if (options.style) self.window.Object.keys(options.style).forEach(function (property) {\n            clone.style[property] = options.style[property];\n          });\n          return clone;\n        }\n      }\n\n      /**\r\n       * @param {Node} node - The DOM Node object to render\r\n       * @param {Object} options - Rendering options, @see {@link toSvg}\r\n       * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\r\n       * */\n      function toPixelData(node, options) {\n        return draw(node, options || {}).then(function (canvas) {\n          return canvas.getContext('2d').getImageData(0, 0, util.width(node), util.height(node)).data;\n        });\n      }\n\n      /**\r\n       * @param {Node} node - The DOM Node object to render\r\n       * @param {Object} options - Rendering options, @see {@link toSvg}\r\n       * @return {Promise} - A promise that is fulfilled with a PNG image data URL\r\n       * */\n      function toPng(node, options) {\n        return draw(node, options || {}).then(function (canvas) {\n          return canvas.toDataURL();\n        });\n      }\n\n      /**\r\n       * @param {Node} node - The DOM Node object to render\r\n       * @param {Object} options - Rendering options, @see {@link toSvg}\r\n       * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\r\n       * */\n      function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options).then(function (canvas) {\n          return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n        });\n      }\n\n      /**\r\n       * @param {Node} node - The DOM Node object to render\r\n       * @param {Object} options - Rendering options, @see {@link toSvg}\r\n       * @return {Promise} - A promise that is fulfilled with a PNG image blob\r\n       * */\n      function toBlob(node, options) {\n        return draw(node, options || {}).then(util.canvasToBlob);\n      }\n      function draw(domNode, options) {\n        return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function (image) {\n          var canvas = newCanvas(domNode);\n          canvas.getContext('2d').drawImage(image, 0, 0);\n          return canvas;\n        });\n        function newCanvas(domNode) {\n          var canvas = self.document.createElement('canvas');\n          canvas.width = options.width || util.width(domNode);\n          canvas.height = options.height || util.height(domNode);\n          if (options.bgcolor) {\n            var ctx = canvas.getContext('2d');\n            ctx.fillStyle = options.bgcolor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n          }\n          return canvas;\n        }\n      }\n      function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n        return Promise.resolve(node).then(makeNodeCopy).then(function (clone) {\n          return cloneChildren(node, clone, filter);\n        }).then(function (clone) {\n          return processClone(node, clone);\n        });\n        function makeNodeCopy(node) {\n          if (util.isCanvas(node)) return util.makeImage(node.toDataURL());\n          return node.cloneNode(false);\n        }\n        function cloneChildren(original, clone, filter) {\n          var children = original.childNodes;\n          if (children.length === 0) return Promise.resolve(clone);\n          return cloneChildrenInOrder(clone, util.asArray(children), filter).then(function () {\n            return clone;\n          });\n          function cloneChildrenInOrder(parent, children, filter) {\n            var done = Promise.resolve();\n            children.forEach(function (child) {\n              done = done.then(function () {\n                return cloneNode(child, filter);\n              }).then(function (childClone) {\n                if (childClone) parent.appendChild(childClone);\n              });\n            });\n            return done;\n          }\n        }\n        function processClone(original, clone) {\n          if (!util.isElement(clone)) return clone;\n          return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function () {\n            return clone;\n          });\n          function cloneStyle() {\n            copyStyle(self.window.getComputedStyle(original), clone.style);\n            function copyStyle(source, target) {\n              if (source.cssText) target.cssText = source.cssText;else copyProperties(source, target);\n              function copyProperties(source, target) {\n                util.asArray(source).forEach(function (name) {\n                  target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n                });\n              }\n            }\n          }\n          function clonePseudoElements() {\n            [':before', ':after'].forEach(function (element) {\n              clonePseudoElement(element);\n            });\n            function clonePseudoElement(element) {\n              var style = self.window.getComputedStyle(original, element);\n              var content = style.getPropertyValue('content');\n              if (content === '' || content === 'none') return;\n              var className = util.uid();\n              clone.className = clone.className + ' ' + className;\n              var styleElement = self.document.createElement('style');\n              styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n              clone.appendChild(styleElement);\n              function formatPseudoElementStyle(className, element, style) {\n                var selector = '.' + className + ':' + element;\n                var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                return self.document.createTextNode(selector + '{' + cssText + '}');\n                function formatCssText(style) {\n                  var content = style.getPropertyValue('content');\n                  return style.cssText + ' content: ' + content + ';';\n                }\n                function formatCssProperties(style) {\n                  return util.asArray(style).map(formatProperty).join('; ') + ';';\n                  function formatProperty(name) {\n                    return name + ': ' + style.getPropertyValue(name) + (style.getPropertyPriority(name) ? ' !important' : '');\n                  }\n                }\n              }\n            }\n          }\n          function copyUserInput() {\n            if (util.isTextArea(original)) clone.innerHTML = original.value;\n            if (util.isInput(original)) clone.setAttribute(\"value\", original.value);\n          }\n          function fixSvg() {\n            if (!util.isSVG(clone)) return;\n            clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n            if (!util.isSVGRect(clone)) return;\n            ['width', 'height'].forEach(function (attribute) {\n              var value = clone.getAttribute(attribute);\n              if (!value) return;\n              clone.style.setProperty(attribute, value);\n            });\n          }\n        }\n      }\n      function embedFonts(node) {\n        return fontFaces.resolveAll().then(function (cssText) {\n          var styleNode = self.document.createElement('style');\n          node.appendChild(styleNode);\n          styleNode.appendChild(self.document.createTextNode(cssText));\n          return node;\n        });\n      }\n      function inlineImages(node) {\n        return images.inlineAll(node).then(function () {\n          return node;\n        });\n      }\n      function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node).then(function (node) {\n          node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n          return new self.window.XMLSerializer().serializeToString(node);\n        }).then(util.escapeXhtml).then(function (xhtml) {\n          return ['data:image/svg+xml;charset=utf-8,', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"', width, '\" height=\"', height, '\">', '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">', xhtml, '</foreignObject>', '</svg>'].join('');\n        });\n      }\n      function newUtil() {\n        return {\n          escape: escape,\n          parseExtension: parseExtension,\n          mimeType: mimeType,\n          dataAsUrl: dataAsUrl,\n          isDataUrl: isDataUrl,\n          canvasToBlob: canvasToBlob,\n          resolveUrl: resolveUrl,\n          getAndEncode: getAndEncode,\n          uid: uid(),\n          delay: delay,\n          asArray: asArray,\n          escapeXhtml: escapeXhtml,\n          makeImage: makeImage,\n          width: width,\n          height: height,\n          isElement: isElement,\n          isCanvas: isCanvas,\n          isTextArea: isTextArea,\n          isInput: isInput,\n          isSVG: isSVG,\n          isSVGRect: isSVGRect,\n          isImage: isImage\n        };\n        function mimes() {\n          /*\r\n           * Only WOFF and EOT mime types for fonts are 'real'\r\n           * see http://www.iana.org/assignments/media-types/media-types.xhtml\r\n           */\n          var WOFF = 'application/font-woff';\n          var JPEG = 'image/jpeg';\n          return {\n            'woff': WOFF,\n            'woff2': WOFF,\n            'ttf': 'application/font-truetype',\n            'eot': 'application/vnd.ms-fontobject',\n            'png': 'image/png',\n            'jpg': JPEG,\n            'jpeg': JPEG,\n            'gif': 'image/gif',\n            'tiff': 'image/tiff',\n            'svg': 'image/svg+xml'\n          };\n        }\n        function parseExtension(url) {\n          var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n          if (match) return match[1];else return '';\n        }\n        function mimeType(url) {\n          var extension = parseExtension(url).toLowerCase();\n          return mimes()[extension] || '';\n        }\n        function isDataUrl(url) {\n          return url.search(/^(data:)/) !== -1;\n        }\n        function toBlob(canvas) {\n          return new Promise(function (resolve) {\n            var binaryString = self.window.atob(canvas.toDataURL().split(',')[1]);\n            var length = binaryString.length;\n            var binaryArray = new self.window.Uint8Array(length);\n            for (var i = 0; i < length; i++) {\n              binaryArray[i] = binaryString.charCodeAt(i);\n            }\n            resolve(new self.window.Blob([binaryArray], {\n              type: 'image/png'\n            }));\n          });\n        }\n        function canvasToBlob(canvas) {\n          if (canvas.toBlob) return new Promise(function (resolve) {\n            canvas.toBlob(resolve);\n          });\n          return toBlob(canvas);\n        }\n        function resolveUrl(url, baseUrl) {\n          var doc = self.document.implementation.createHTMLDocument();\n          var base = doc.createElement('base');\n          doc.head.appendChild(base);\n          var a = doc.createElement('a');\n          doc.body.appendChild(a);\n          base.href = baseUrl;\n          a.href = url;\n          return a.href;\n        }\n        function uid() {\n          var index = 0;\n          return function () {\n            return 'u' + fourRandomChars() + index++;\n            function fourRandomChars() {\n              /* see http://stackoverflow.com/a/6248722/2519373 */\n              return ('0000' + (self.window.Math.random() * self.window.Math.pow(36, 4) << 0).toString(36)).slice(-4);\n            }\n          };\n        }\n        function makeImage(uri) {\n          return new Promise(function (resolve, reject) {\n            var image = new self.window.Image();\n            image.onload = function () {\n              resolve(image);\n            };\n            image.onerror = reject;\n            image.src = uri;\n          });\n        }\n        function getAndEncode(url) {\n          var data = self.cache.get(url);\n          if (data) {\n            if (data.content) {\n              return data.content;\n            } else {\n              return new Promise(function (resolve) {\n                if (data.content) {\n                  resolve(data.content);\n                } else {\n                  data.pendings.push(resolve);\n                }\n              });\n            }\n          } else {\n            data = self.cache.put(url, {\n              pendings: []\n            });\n            var TIMEOUT = 30000;\n            return new Promise(function (resolve) {\n              var request = new self.window.XMLHttpRequest();\n              request.onreadystatechange = done;\n              request.ontimeout = timeout;\n              request.responseType = 'blob';\n              request.timeout = TIMEOUT;\n              request.open('GET', url, true);\n              request.send();\n              function done() {\n                if (request.readyState !== 4) return;\n                if (request.status !== 200) {\n                  fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                  return;\n                }\n                var encoder = new self.window.FileReader();\n                encoder.onloadend = function () {\n                  data.content = encoder.result.split(/,/)[1];\n                  for (var _iterator = data.pendings, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n                    var _ref;\n                    if (_isArray) {\n                      if (_i >= _iterator.length) break;\n                      _ref = _iterator[_i++];\n                    } else {\n                      _i = _iterator.next();\n                      if (_i.done) break;\n                      _ref = _i.value;\n                    }\n                    var _resolve = _ref;\n                    _resolve(data.content);\n                  }\n                  data.pendings = [];\n                  resolve(data.content);\n                };\n                encoder.readAsDataURL(request.response);\n              }\n              function timeout() {\n                fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n              }\n              function fail(message) {\n                console.error(message);\n                resolve('');\n              }\n            });\n          }\n        }\n        function dataAsUrl(content, type) {\n          return ['data:', type, ';base64,', content].join('');\n        }\n        function escape(string) {\n          return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n        function delay(ms) {\n          return function (arg) {\n            return new Promise(function (resolve) {\n              setTimeout(function () {\n                resolve(arg);\n              }, ms);\n            });\n          };\n        }\n        function asArray(arrayLike) {\n          var array = [];\n          var length = arrayLike.length;\n          for (var i = 0; i < length; i++) {\n            array.push(arrayLike[i]);\n          }\n          return array;\n        }\n        function escapeXhtml(string) {\n          return string.replace(/(#|\\n)/g, function (c) {\n            return c === '#' ? '%23' : '%0A';\n          });\n        }\n        function width(node) {\n          var leftBorder = px(node, 'border-left-width');\n          var rightBorder = px(node, 'border-right-width');\n          return node.scrollWidth + leftBorder + rightBorder;\n        }\n        function height(node) {\n          var topBorder = px(node, 'border-top-width');\n          var bottomBorder = px(node, 'border-bottom-width');\n          return node.scrollHeight + topBorder + bottomBorder;\n        }\n        function px(node, styleProperty) {\n          var value = self.window.getComputedStyle(node).getPropertyValue(styleProperty);\n          return parseFloat(value.replace('px', ''));\n        }\n        function isElement(node) {\n          return node instanceof self.window.Element;\n        }\n        function isCanvas(node) {\n          return node instanceof self.window.HTMLCanvasElement;\n        }\n        function isTextArea(node) {\n          return node instanceof self.window.HTMLTextAreaElement;\n        }\n        function isInput(node) {\n          return node instanceof self.window.HTMLInputElement;\n        }\n        function isSVG(node) {\n          return node instanceof self.window.SVGElement;\n        }\n        function isSVGRect(node) {\n          return node instanceof self.window.SVGRectElement;\n        }\n        function isImage(node) {\n          return node instanceof self.window.HTMLImageElement;\n        }\n      }\n      function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n        return {\n          inlineAll: inlineAll,\n          shouldProcess: shouldProcess,\n          impl: {\n            readUrls: readUrls,\n            inline: inline\n          }\n        };\n        function shouldProcess(string) {\n          return string.search(URL_REGEX) !== -1;\n        }\n        function readUrls(string) {\n          var result = [];\n          var match = void 0;\n          while ((match = URL_REGEX.exec(string)) !== null) {\n            result.push(match[1]);\n          }\n          return result.filter(function (url) {\n            return !util.isDataUrl(url);\n          });\n        }\n        function inline(string, url, baseUrl, get) {\n          return Promise.resolve(url).then(function (url) {\n            return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n          }).then(get || util.getAndEncode).then(function (data) {\n            return util.dataAsUrl(data, util.mimeType(url));\n          }).then(function (dataUrl) {\n            return string.replace(urlAsRegex(url), ['$1', dataUrl, '$3'].join(''));\n          });\n          function urlAsRegex(url) {\n            return new self.window.RegExp(['(url\\\\([\\'\"]?)(', util.escape(url), ')([\\'\"]?\\\\))'].join(''), 'g');\n          }\n        }\n        function inlineAll(string, baseUrl, get) {\n          if (nothingToInline()) return Promise.resolve(string);\n          return Promise.resolve(string).then(readUrls).then(function (urls) {\n            var done = Promise.resolve(string);\n            urls.forEach(function (url) {\n              done = done.then(function (string) {\n                return inline(string, url, baseUrl, get);\n              });\n            });\n            return done;\n          });\n          function nothingToInline() {\n            return !shouldProcess(string);\n          }\n        }\n      }\n      function newFontFaces() {\n        return {\n          resolveAll: resolveAll,\n          impl: {\n            readAll: readAll\n          }\n        };\n        function resolveAll() {\n          return readAll(self.document).then(function (webFonts) {\n            return Promise.all(webFonts.map(function (webFont) {\n              return webFont.resolve();\n            }));\n          }).then(function (cssStrings) {\n            return cssStrings.join('\\n');\n          });\n        }\n        function readAll() {\n          return Promise.resolve(util.asArray(self.document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function (rules) {\n            return rules.map(newWebFont);\n          });\n          function selectWebFontRules(cssRules) {\n            return cssRules.filter(function (rule) {\n              return rule.type === CSSRule.FONT_FACE_RULE;\n            }).filter(function (rule) {\n              return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n            });\n          }\n          function getCssRules(styleSheets) {\n            var cssRules = [];\n            styleSheets.forEach(function (sheet) {\n              try {\n                util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n              } catch (e) {\n                console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n              }\n            });\n            return cssRules;\n          }\n          function newWebFont(webFontRule) {\n            return {\n              resolve: function resolve() {\n                var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                return inliner.inlineAll(webFontRule.cssText, baseUrl);\n              },\n              src: function src() {\n                return webFontRule.style.getPropertyValue('src');\n              }\n            };\n          }\n        }\n      }\n      function newImages() {\n        return {\n          inlineAll: inlineAll,\n          impl: {\n            newImage: newImage\n          }\n        };\n        function newImage(element) {\n          return {\n            inline: inline\n          };\n          function inline(get) {\n            if (util.isDataUrl(element.src)) return Promise.resolve();\n            return Promise.resolve(element.src).then(get || util.getAndEncode).then(function (data) {\n              return util.dataAsUrl(data, util.mimeType(element.src));\n            }).then(function (dataUrl) {\n              return new Promise(function (resolve, reject) {\n                element.onload = resolve;\n                element.onerror = reject;\n                element.src = dataUrl;\n              });\n            });\n          }\n        }\n        function inlineAll(node) {\n          if (!util.isElement(node)) return Promise.resolve(node);\n          return inlineBackground(node).then(function () {\n            if (util.isImage(node)) return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function (child) {\n              return inlineAll(child);\n            }));\n          });\n          function inlineBackground(node) {\n            var background = node.style.getPropertyValue('background');\n            if (!background) return Promise.resolve(node);\n            return inliner.inlineAll(background).then(function (inlined) {\n              node.style.setProperty('background', inlined, node.style.getPropertyPriority('background'));\n            }).then(function () {\n              return node;\n            });\n          }\n        }\n      }\n    };\n    exports.default = Dom2Image;\n\n    /***/\n  }, /* 48 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Drag = function () {\n      function Drag(wnd, doc, visualWorld) {\n        _classCallCheck(this, Drag);\n        this.wnd = wnd;\n        this.doc = doc;\n        this.visual = visualWorld;\n        this.coords = new _libs.THREE.Vector2();\n        this.intersection = new _libs.THREE.Vector3();\n        this.raycaster = this.visual.raycaster;\n        this.camera = this.visual.camera;\n        this.plane = new _libs.THREE.Plane();\n        this.threes = [];\n        this.selected = null;\n        this.enabled = true;\n        this.controlsState = this.visual.getControlsState();\n        this.element = this.visual.element;\n        this.binds = {\n          onMouseMove: this.onMouseMove.bind(this),\n          onMouseDown: this.onMouseDown.bind(this),\n          onMouseUp: this.onMouseUp.bind(this)\n        };\n        (0, _libs.$)(this.element).on('mousemove', this.binds.onMouseMove);\n        (0, _libs.$)(this.element).on('mousedown', this.binds.onMouseDown);\n        (0, _libs.$)(this.doc).on('mouseup', this.binds.onMouseUp);\n      }\n      Drag.prototype.addThree = function addThree(three) {\n        this.threes.push(three);\n      };\n      Drag.prototype.removeThree = function removeThree(three) {\n        var i = this.threes.indexOf(three);\n        if (~i) {\n          this.threes.splice(i, 1);\n        }\n      };\n      Drag.prototype.onPickCallback = function onPickCallback() {\n        return true;\n      };\n      Drag.prototype.onDragCallback = function onDragCallback() {\n        return true;\n      };\n      Drag.prototype.onReleaseCallback = function onReleaseCallback() {};\n      Drag.prototype.dispose = function dispose() {\n        (0, _libs.$)(this.element).off('mousemove', this.binds.onMouseMove);\n        (0, _libs.$)(this.element).off('mousedown', this.binds.onMouseDown);\n        (0, _libs.$)(this.doc).off('mouseup', this.binds.onMouseUp);\n      };\n      Drag.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {\n        var jElement = (0, _libs.$)(this.element);\n        var offset = jElement.offset();\n        this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;\n        this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;\n        return this.coords;\n      };\n      Drag.prototype.onMouseDown = function onMouseDown(e) {\n        if (!this.enabled) return;\n        if (this.selected) this.onMouseUp(e);\n        this.setCoordsFromEvent(e);\n        this.raycaster.setFromCamera(this.coords, this.camera);\n        var intersects = this.raycaster.intersectObjects(this.threes);\n        if (intersects.length > 0) {\n          var selected = intersects[0].object;\n          if (!this.onPickCallback(intersects[0])) return;\n          var v = intersects[0].point.clone();\n          this.distance = v.sub(this.raycaster.ray.origin).length();\n          ;\n          this.controlsState = this.visual.getControlsState();\n          this.visual.setControlsState(false);\n          this.plane.setFromNormalAndCoplanarPoint(this.visual.camera.getWorldDirection(this.plane.normal), intersects[0].point);\n          //this.plane.setFromNormalAndCoplanarPoint(this.plane.normal.set(0,0,1), new THREE.Vector3(0,0,0));\n          this.selected = selected;\n        }\n      };\n      Drag.prototype.onMouseMove = function onMouseMove(e) {\n        if (!this.enabled) return;\n        e.preventDefault();\n        if (this.selected) {\n          this.setCoordsFromEvent(e);\n          this.raycaster.setFromCamera(this.coords, this.camera);\n          if (this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {\n            if (!this.onDragCallback(this.intersection)) this.onMouseUp(e);\n          } /**/\n          //this.intersection.copy(this.raycaster.ray.direction).normalize().multiplyScalar(this.distance).add(this.raycaster.ray.origin);/**/\n          //if(!this.onDragCallback(this.selected, this.intersection)) this.onMouseUp(e);\n        }\n      };\n      Drag.prototype.onMouseUp = function onMouseUp(e) {\n        if (this.selected) {\n          this.onReleaseCallback();\n          this.selected = null;\n          this.visual.setControlsState(this.controlsState);\n        }\n        if (!this.enabled) return;\n        e.preventDefault();\n      };\n      return Drag;\n    }();\n    exports.default = Drag;\n\n    /***/\n  }, /* 49 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    __webpack_require__(71)(_libs.$);\n    var EventsToActions = function () {\n      EventsToActions.getEventFlags = function getEventFlags(e) {\n        return e.ctrlKey << 0 | e.shiftKey << 1 | e.altKey << 2;\n      };\n      EventsToActions.getPosition = function getPosition(touches) {\n        var x = void 0,\n          y = void 0;\n        if (touches.length === 2) {\n          x = touches[1].pageX - touches[0].pageX;\n          y = touches[1].pageY - touches[0].pageY;\n          y = -Math.sqrt(x * x + y * y);\n          x = 0;\n        } else {\n          x = touches[0].pageX;\n          y = touches[0].pageY;\n        }\n        return {\n          x: x,\n          y: y\n        };\n      };\n      function EventsToActions(element, actions) {\n        _classCallCheck(this, EventsToActions);\n        this.actions = actions || {};\n        this.element = element;\n        this.doc = element[0].ownerDocument;\n        this.wnd = this.doc.defaultView;\n        this.enabled = true;\n        this.binds = {\n          contextMenu: this.contextMenu.bind(this),\n          mouseDown: this.mouseDown.bind(this),\n          mouseMove: this.mouseMove.bind(this),\n          mouseUp: this.mouseUp.bind(this),\n          mouseWheel: this.mouseWheel.bind(this),\n          mouseMoveDoc: this.mouseMoveDoc.bind(this),\n          mouseUpDoc: this.mouseUpDoc.bind(this),\n          click: this.click.bind(this),\n          dblclick: this.dblclick.bind(this),\n          touchStart: this.touchStart.bind(this),\n          touchMove: this.touchMove.bind(this),\n          touchEnd: this.touchEnd.bind(this),\n          keyDown: this.keyDown.bind(this),\n          keyPress: this.keyPress.bind(this),\n          keyUp: this.keyUp.bind(this)\n        };\n        this.element.on('contextmenu', this.binds.contextMenu);\n        this.element.on('mousedown', this.binds.mouseDown);\n        this.element.on('mousemove', this.binds.mouseMove);\n        this.element.on('mouseup', this.binds.mouseUp);\n        this.element.on('mousewheel', this.binds.mouseWheel);\n        (0, _libs.$)(this.doc).on('mousemove', this.binds.mouseMoveDoc);\n        (0, _libs.$)(this.doc).on('mouseup', this.binds.mouseUpDoc);\n        this.element.on('click', this.binds.click);\n        this.element.on('dblclick', this.binds.dblclick);\n        this.element.on('touchstart', this.binds.touchStart);\n        this.element.on('touchmove', this.binds.touchMove);\n        this.element.on('touchend', this.binds.touchEnd);\n        (0, _libs.$)(this.wnd).on('keydown', this.binds.keyDown);\n        (0, _libs.$)(this.wnd).on('keypress', this.binds.keyPress);\n        (0, _libs.$)(this.wnd).on('keyup', this.binds.keyUp);\n      }\n      EventsToActions.prototype.addAction = function addAction(action, type, code, flags) {\n        type = type.toLowerCase();\n        if (!this.actions[type]) {\n          this.actions[type] = {};\n        }\n        if (!this.actions[type][code]) {\n          this.actions[type][code] = {};\n        }\n        if (!this.actions[type][code][flags]) {\n          this.actions[type][code][flags] = [];\n        }\n        this.actions[type][code][flags].push(action);\n      };\n      EventsToActions.prototype.getActions = function getActions(type, code, flags) {\n        return ((this.actions[type] || {})[code] || {})[flags] || [];\n      };\n      EventsToActions.prototype.fireActions = function fireActions(actions, e, data) {\n        for (var _iterator = actions, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var action = _ref;\n          action(e, data);\n        }\n      };\n      EventsToActions.prototype.contextMenu = function contextMenu(e) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions('contextmenu', e.button, flags), e);\n        }\n      };\n      EventsToActions.prototype.mouseDown = function mouseDown(e) {\n        if (this.picked) {\n          this.mouseUpDoc();\n        }\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions('mousedown', e.button, flags), e);\n          this.picked = {\n            x: e.pageX,\n            y: e.pageY,\n            actions: this.getActions('mousedrag', e.button, flags)\n          };\n          this.fireActions(this.picked.actions, e, {\n            state: 'start'\n          });\n        }\n      };\n      EventsToActions.prototype.mouseMove = function mouseMove(e) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions('mousemove', e.button, flags), e);\n        }\n      };\n      EventsToActions.prototype.mouseMoveDoc = function mouseMoveDoc(e) {\n        if (this.enabled && this.picked) {\n          this.fireActions(this.picked.actions, e, {\n            state: 'move',\n            dx: e.pageX - this.picked.x,\n            dy: e.pageY - this.picked.y\n          });\n          this.picked = {\n            x: e.pageX,\n            y: e.pageY,\n            actions: this.picked.actions\n          };\n        }\n      };\n      EventsToActions.prototype.mouseUp = function mouseUp(e) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions('mouseup', e.button, flags), e);\n        }\n      };\n      EventsToActions.prototype.mouseUpDoc = function mouseUpDoc(e) {\n        if (this.picked) {\n          this.fireActions(this.picked.actions, e, {\n            state: 'end'\n          });\n          delete this.picked;\n        }\n      };\n      EventsToActions.prototype.mouseWheel = function mouseWheel(e) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions('mousewheel', 0, flags), e);\n        }\n      };\n      EventsToActions.prototype.clicks = function clicks(e, type) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions(type, e.button, flags), e);\n        }\n      };\n      EventsToActions.prototype.click = function click(e) {\n        this.clicks(e, 'click');\n      };\n      EventsToActions.prototype.dblclick = function dblclick(e) {\n        this.clicks(e, 'dblclick');\n      };\n      EventsToActions.prototype.touchPick = function touchPick(e, flags, touches) {\n        this.touchPicked = _extends({}, EventsToActions.getPosition(touches), {\n          actions: this.getActions('touchdrag', touches.length, flags),\n          code: touches.length,\n          flags: flags\n        });\n        this.fireActions(this.touchPicked.actions, e, {\n          state: 'start'\n        });\n      };\n      EventsToActions.prototype.touchStart = function touchStart(e) {\n        if (this.touchPicked) {\n          this.touchEnd(e);\n        }\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e),\n            touches = e.touches || e.originalEvent.touches;\n          this.fireActions(this.getActions('touchstart', touches.length, flags), e);\n          this.touchPick(e, flags, touches);\n        }\n      };\n      EventsToActions.prototype.touchMove = function touchMove(e) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e),\n            touches = e.touches || e.originalEvent.touches;\n          this.fireActions(this.getActions('touchmove', touches.length, flags), e);\n          if (this.touchPicked) {\n            if (this.touchPicked.code === touches.length && this.touchPicked.flags === flags) {\n              var pos = EventsToActions.getPosition(touches);\n              this.fireActions(this.touchPicked.actions, e, {\n                state: 'move',\n                dx: pos.x - this.touchPicked.x,\n                dy: pos.y - this.touchPicked.y\n              });\n              this.touchPicked = _extends({}, this.touchPicked, pos);\n            } else {\n              this.touchEnd(e);\n              this.touchPick(e, flags, touches);\n            }\n          }\n        }\n      };\n      EventsToActions.prototype.touchEnd = function touchEnd(e) {\n        if (this.touchPicked) {\n          this.fireActions(this.touchPicked.actions, e, {\n            state: 'end'\n          });\n          delete this.touchPicked;\n        }\n      };\n      EventsToActions.prototype.key = function key(e, type) {\n        if (this.enabled) {\n          var flags = EventsToActions.getEventFlags(e);\n          this.fireActions(this.getActions(type, e.keyCode, flags), e);\n        }\n      };\n      EventsToActions.prototype.keyDown = function keyDown(e) {\n        this.key(e, 'keydown');\n      };\n      EventsToActions.prototype.keyPress = function keyPress(e) {\n        this.key(e, 'keypress');\n      };\n      EventsToActions.prototype.keyUp = function keyUp(e) {\n        this.key(e, 'keyup');\n      };\n      EventsToActions.prototype.dispose = function dispose() {\n        this.element.off('contextmenu', this.binds.contextMenu);\n        this.element.off('mousedown', this.binds.mouseDown);\n        this.element.off('mousemove', this.binds.mouseMove);\n        this.element.off('mouseup', this.binds.mouseUp);\n        this.element.off('mousewheel', this.binds.mouseWheel);\n        (0, _libs.$)(this.doc).off('mousemove', this.binds.mouseMoveDoc);\n        (0, _libs.$)(this.doc).off('mouseup', this.binds.mouseUpDoc);\n        this.element.off('click', this.binds.click);\n        this.element.off('dblclick', this.binds.dblclick);\n        this.element.off('touchstart', this.binds.touchStart);\n        this.element.off('touchmove', this.binds.touchMove);\n        this.element.off('touchend', this.binds.touchEnd);\n        (0, _libs.$)(this.wnd).off('keydown', this.binds.keyDown);\n        (0, _libs.$)(this.wnd).off('keypress', this.binds.keyPress);\n        (0, _libs.$)(this.wnd).off('keyup', this.binds.keyUp);\n      };\n      return EventsToActions;\n    }();\n    EventsToActions.modKeys = {\n      Ctrl: 1,\n      Shift: 2,\n      Alt: 4\n    };\n    EventsToActions.mouseButtons = {\n      Left: 0,\n      Middle: 1,\n      Right: 2\n    };\n    exports.default = EventsToActions;\n\n    /***/\n  }, /* 50 */\n  /***/function (module, exports) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var FullScreen = function () {\n      function FullScreen() {\n        _classCallCheck(this, FullScreen);\n      }\n      FullScreen.available = function available() {\n        return FullScreen._hasWebkitFullScreen || FullScreen._hasMozFullScreen || FullScreen._hasMsFullscreen;\n      };\n      FullScreen.activated = function activated() {\n        if (FullScreen._hasWebkitFullScreen) {\n          return document.webkitIsFullScreen;\n        } else if (FullScreen._hasMozFullScreen) {\n          return document.mozFullScreen;\n        } else if (FullScreen._hasMsFullscreen) {\n          return !!document.msFullscreenElement;\n        } else {\n          console.assert(false);\n        }\n      };\n      FullScreen.addEventListener = function addEventListener(element, handler) {\n        if (element.addEventListener) {\n          element.addEventListener('webkitfullscreenchange', handler, false);\n          element.addEventListener('mozfullscreenchange', handler, false);\n          element.addEventListener('fullscreenchange', handler, false);\n          element.addEventListener('MSFullscreenChange', handler, false);\n        }\n      };\n      FullScreen.removeEventListener = function removeEventListener(element, handler) {\n        if (element.removeEventListener) {\n          element.removeEventListener('webkitfullscreenchange', handler, false);\n          element.removeEventListener('mozfullscreenchange', handler, false);\n          element.removeEventListener('fullscreenchange', handler, false);\n          element.removeEventListener('MSFullscreenChange', handler, false);\n        }\n      };\n      FullScreen.request = function request(element) {\n        element = element || document.body;\n        if (FullScreen._hasWebkitFullScreen) {\n          element.webkitRequestFullScreen();\n        } else if (FullScreen._hasMozFullScreen) {\n          element.mozRequestFullScreen();\n        } else if (FullScreen._hasMsFullscreen) {\n          element.msRequestFullscreen();\n        } else {\n          console.assert(false);\n        }\n      };\n      FullScreen.cancel = function cancel() {\n        if (FullScreen._hasWebkitFullScreen) {\n          document.webkitCancelFullScreen();\n        } else if (FullScreen._hasMozFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (FullScreen._hasMsFullscreen) {\n          document.msExitFullscreen();\n        } else {\n          console.assert(false);\n        }\n      };\n      return FullScreen;\n    }();\n    FullScreen._hasWebkitFullScreen = !!document.webkitCancelFullScreen;\n    FullScreen._hasMozFullScreen = !!document.mozCancelFullScreen;\n    FullScreen._hasMsFullscreen = !!document.documentElement.msRequestFullscreen;\n    exports.default = FullScreen;\n\n    /***/\n  }, /* 51 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _ImageBase2 = __webpack_require__(5);\n    var _ImageBase3 = _interopRequireDefault(_ImageBase2);\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    var _Dom2Image = __webpack_require__(47);\n    var _Dom2Image2 = _interopRequireDefault(_Dom2Image);\n    var _DocMouseSimulator = __webpack_require__(46);\n    var _DocMouseSimulator2 = _interopRequireDefault(_DocMouseSimulator);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var InteractiveImage = function (_ImageBase) {\n      _inherits(InteractiveImage, _ImageBase);\n      function InteractiveImage(context, width, height, color, src, cache, injector) {\n        _classCallCheck(this, InteractiveImage);\n        var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));\n        _this.iId = 'i' + _BaseMathUtils2.default.getUnique();\n        var jFrame = (0, _libs.$)('<iframe id=\"' + _this.iId + '\" src=\"' + src + '\" style=\"position: fixed; left: -1000px;\"></iframe>');\n        (0, _libs.$)(_this.doc.body).append(jFrame);\n        _this.frame = jFrame[0];\n        _this.binds = {};\n        if (injector) {\n          injector(_this.frame.contentWindow);\n        }\n        if (_this.doc.implementation.hasFeature('www.http://w3.org/TR/SVG11/feature#Extensibility', '1.1')) {\n          // svg foreignObject renderer\n          _this.image = new Image();\n          _this.binds.imageLoad = function () {\n            _this.renderImage(_this.image);\n            _this.finishRender();\n          };\n          (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad);\n          _this.svgRender = new _Dom2Image2.default(_this.frame.contentWindow, _this.frame.contentDocument, cache);\n        } // otherwise - html2canvas\n\n        _this.binds.frameLoad = function () {\n          if (~_this.frame.contentDocument.title.indexOf('404')) {\n            _this.startRender = function () {\n              _this.renderNotFoundPage();\n              _this.finishRender();\n            };\n            _this.finishLoad();\n          } else {\n            setTimeout(function () {\n              if (_this.frame) {\n                _this.width = (0, _libs.$)(_this.frame.contentDocument.body).width();\n                _this.height = (0, _libs.$)(_this.frame.contentDocument.body).height();\n                jFrame.css('width', _this.width + 'px').css('height', _this.height + 'px');\n                jFrame.offset({\n                  left: -_this.width - 100,\n                  top: 0\n                });\n                if (_this.svgRender) {\n                  _this.simulator = new _DocMouseSimulator2.default(jFrame, _this.frame.contentDocument.body, _this.element);\n                  _this.simulator.addDocChangeClb(_this.finishLoad.bind(_this));\n                }\n                _this.startRender = function () {\n                  _this.render();\n                };\n                _this.finishLoad();\n              }\n            }, 500);\n          }\n        };\n        (0, _libs.$)(_this.frame.contentWindow).on('load', _this.binds.frameLoad);\n        return _this;\n      }\n      InteractiveImage.prototype.getSimulatedDoc = function getSimulatedDoc() {\n        return this.frame.contentDocument;\n      };\n      InteractiveImage.prototype.render = function render() {\n        var _this2 = this;\n        if (this.svgRender) {\n          this.svgRender.toSvg(this.simulator.element, {\n            height: this.height + 'px',\n            width: this.width + 'px'\n          }).then(function (dataUrl) {\n            _this2.image.src = dataUrl;\n          }).catch(function (error) {\n            console.error('Dom2Image: ', error);\n            _this2.renderBlankPage();\n            _this2.finishRender();\n          });\n        } else {\n          (0, _libs.html2canvas)(this.frame.contentDocument.body, {\n            timeout: 30000\n          }).then(function (canvas) {\n            _this2.renderImage(canvas);\n            _this2.finishRender();\n          });\n        }\n      };\n      InteractiveImage.prototype.dispose = function dispose() {\n        (0, _libs.$)(this.image).off('load', this.binds.imageLoad);\n        (0, _libs.$)(this.frame.contentWindow).off('load', this.binds.frameLoad);\n        (0, _libs.$)(this.doc.body).find('#' + this.iId).remove();\n        if (this.image) {\n          this.image.src = '';\n          delete this.image;\n        }\n        this.frame.src = '';\n        delete this.frame;\n        _ImageBase.prototype.dispose.call(this);\n      };\n      InteractiveImage.prototype.simulate = function simulate(e, doc, x, y) {\n        if (this.simulator) {\n          this.simulator.simulate(e, doc, x, y);\n        }\n      };\n      return InteractiveImage;\n    }(_ImageBase3.default);\n    exports.default = InteractiveImage;\n\n    /***/\n  }, /* 52 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _GraphUtils = __webpack_require__(7);\n    var _GraphUtils2 = _interopRequireDefault(_GraphUtils);\n    var _MathUtils = __webpack_require__(3);\n    var _MathUtils2 = _interopRequireDefault(_MathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var LoadingAnimation = function () {\n      LoadingAnimation.prototype.dy = function dy(t, y) {\n        var w = y[0],\n          a = y[1];\n        return [-this.g * Math.cos(a), w];\n      };\n      LoadingAnimation.prototype.integrate = function integrate(T) {\n        var t = 0,\n          dt = this.p.dt,\n          os = this.os;\n        while (t < T) {\n          if (t + dt > T) {\n            dt = T - t;\n          }\n          os = _MathUtils2.default.rk4(this.dy.bind({\n            g: this.p.g\n          }), 0, dt, os);\n          t += dt;\n        }\n        return os;\n      };\n      LoadingAnimation.prototype.calcTimeTo = function calcTimeTo(target) {\n        var t = 0,\n          dt = this.p.dt,\n          os = this.os;\n        while (Math.abs(os[1] - target) > 1e-4) {\n          var nos = _MathUtils2.default.rk4(this.dy.bind({\n            g: this.p.g\n          }), 0, dt, os);\n          if (nos[0] < 0 && nos[1] < target || nos[0] > 0 && nos[1] > target) {\n            dt /= 2;\n          } else {\n            os = nos;\n            t += dt;\n          }\n        }\n        return t;\n      };\n      LoadingAnimation.prototype.update = function update(T) {\n        this.os = this.integrate(T);\n        this.t += T;\n        if (this.t >= this.p.updateInterval) {\n          this.t = 0;\n          var r = 0.06 * Math.min(this.c.width, this.c.height),\n            a = this.os[1],\n            x0 = 0.5 * this.c.width,\n            y0 = 0.5 * this.c.height,\n            ctx = this.ctx;\n          ctx.clearRect(0, 0, this.c.width, this.c.height);\n          ctx.beginPath();\n          ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.p.color, 1);\n          ctx.rect(0, 0, this.c.width, this.c.height);\n          ctx.fill();\n          ctx.beginPath();\n          ctx.shadowBlur = 50;\n          ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 0.9), Math.abs(this.os[0] / 6.36));\n          ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.9);\n          ctx.shadowOffsetX = 0;\n          ctx.shadowOffsetY = 0;\n          ctx.font = 'bold ' + Math.round(0.25 * r) + 'px Arial';\n          ctx.textAlign = 'center';\n          ctx.textBaseline = 'middle';\n          ctx.fillText((0, _libs.tr)('Loading...'), x0, y0);\n          var ps = 10,\n            da = 2 * Math.PI / ps; //2.5*_r/r\n          ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.7);\n          for (var i = 0, _a = a, _r = 0.2 * r; i < ps; ++i, _r *= 0.9, _a += da) {\n            ctx.beginPath();\n            ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, (ps - i) / ps), 0.7 * (ps - i) / ps);\n            var cx = x0 + r * Math.cos(_a),\n              cy = y0 - r * Math.sin(_a),\n              nx = x0 + r * Math.cos(_a + da),\n              ny = y0 - r * Math.sin(_a + da);\n            ctx.shadowOffsetX = 0.2 * (nx - cx);\n            ctx.shadowOffsetY = 0.2 * (ny - cy);\n            ctx.arc(cx, cy, _r, 0, Math.PI * 2, 1);\n            ctx.fill();\n          }\n          if (this.onChange) {\n            this.onChange(this.c, this.p.color);\n          }\n        }\n      };\n      LoadingAnimation.prototype.getImage = function getImage() {\n        return this.c;\n      };\n      LoadingAnimation.prototype.dispose = function dispose() {\n        this.c.width = 0;\n        this.c.height = 0;\n        delete this.ctx;\n        delete this.c;\n      };\n      LoadingAnimation.prototype.createSprite = function createSprite(n) {\n        var c = (0, _libs.$)('<canvas width=\"' + this.c.width * n + '\" height=\"' + this.c.height + '\"></canvas>')[0],\n          ctx = c.getContext('2d'),\n          t = this.calcTimeTo(this.os[1] + Math.sign(this.os[0]) * 2 * Math.PI),\n          dt = t / (n + 1);\n        var updateInterval = this.p.updateInterval;\n        this.p.updateInterval = 0;\n        for (var i = 0; i < n; ++i) {\n          this.update(dt);\n          ctx.drawImage(this.c, i * this.c.width, 0);\n        }\n        this.p.updateInterval = updateInterval;\n        return c;\n      };\n      function LoadingAnimation(width, height, color) {\n        _classCallCheck(this, LoadingAnimation);\n        var jC = (0, _libs.$)('<canvas width=\"' + width + '\" height=\"' + height + '\"></canvas>');\n        this.c = jC[0];\n        this.p = {\n          g: 9.8,\n          dt: 1 / 60,\n          color: color,\n          updateInterval: 0.25\n        };\n        this.ctx = this.c.getContext('2d');\n        this.os = [-2, Math.PI / 2];\n        this.t = this.p.updateInterval;\n      }\n      return LoadingAnimation;\n    }();\n    exports.default = LoadingAnimation;\n\n    /***/\n  }, /* 53 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var LoadingController = function () {\n      function LoadingController(view) {\n        var showProgress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        var loadingMsg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n        _classCallCheck(this, LoadingController);\n        this.view = view;\n        this.progress = 0;\n        this.showProgress = showProgress;\n        this.getLoadingMsg = loadingMsg || LoadingController.defaultLoadingMsg;\n        this.updateView();\n      }\n      LoadingController.defaultLoadingMsg = function defaultLoadingMsg(progress) {\n        return ['Please wait... the Application is Loading: ', progress, '%'].join('');\n      };\n      LoadingController.prototype.dispose = function dispose() {\n        this.showProgress = false;\n        this.updateView();\n        delete this.view;\n      };\n      LoadingController.prototype.setProgress = function setProgress(v) {\n        this.progress = v;\n        this.updateView();\n      };\n      LoadingController.prototype.updateView = function updateView() {\n        if (this.view) {\n          this.view.setState('widLoadingProgress', {\n            enable: true,\n            visible: this.showProgress,\n            active: false\n          });\n          this.view.setState('txtLoadingProgress', {\n            value: this.getLoadingMsg(this.progress),\n            visible: true\n          });\n          for (var _iterator = this.view.getLinks(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n            var _ref;\n            if (_isArray) {\n              if (_i >= _iterator.length) break;\n              _ref = _iterator[_i++];\n            } else {\n              _i = _iterator.next();\n              if (_i.done) break;\n              _ref = _i.value;\n            }\n            var name = _ref;\n            this.view.setState(name, {\n              enable: false,\n              visible: true,\n              active: false\n            });\n          }\n          this.view.setState('inpPages', {\n            visible: true,\n            value: ''\n          });\n          this.view.setState('inpPage', {\n            visible: true,\n            enable: false,\n            value: ''\n          });\n        }\n      };\n      return LoadingController;\n    }();\n    exports.default = LoadingController;\n\n    /***/\n  }, /* 54 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _EventConverter2 = __webpack_require__(6);\n    var _EventConverter3 = _interopRequireDefault(_EventConverter2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var MouseEventConverter = function (_EventConverter) {\n      _inherits(MouseEventConverter, _EventConverter);\n      function MouseEventConverter(wnd, doc, element) {\n        _classCallCheck(this, MouseEventConverter);\n        var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));\n        _this.element = element;\n        _this.binds = {\n          convert: _this.convert.bind(_this)\n        };\n        (0, _libs.$)(_this.element).on('mousemove mousedown mouseover mouseout click', _this.binds.convert);\n        (0, _libs.$)(_this.doc).on('mouseup', _this.binds.convert);\n        return _this;\n      }\n      MouseEventConverter.prototype.dispose = function dispose() {\n        (0, _libs.$)(this.element).off('mousemove mousedown mouseover mouseout click', this.binds.convert);\n        (0, _libs.$)(this.doc).off('mouseup', this.binds.convert);\n      };\n      return MouseEventConverter;\n    }(_EventConverter3.default);\n    exports.default = MouseEventConverter;\n\n    /***/\n  }, /* 55 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    var _MathUtils = __webpack_require__(3);\n    var _MathUtils2 = _interopRequireDefault(_MathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Object3DWatcher = function () {\n      function Object3DWatcher(visual, boundBoxClb) {\n        var testScale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.testScale;\n        _classCallCheck(this, Object3DWatcher);\n        this.visual = visual;\n        this.boundBoxClb = boundBoxClb;\n        this.testScale = testScale;\n        this.camera = visual.camera;\n        this.element = this.visual.element;\n        this.elementSize = {\n          w: 1,\n          h: 1\n        };\n        this.devicePixelRatio = this.visual.wnd.devicePixelRatio || 1;\n        this.orbit = visual.getOrbit();\n        this.scale = 1;\n        this.eps = 1e-4;\n        this.v = new _libs.THREE.Vector3();\n        this.dv = new _libs.THREE.Vector2();\n        this.enabled = false;\n        visual.addRenderCallback(this.update.bind(this));\n        this.os = {\n          vx: 0,\n          vy: 0,\n          x: 0,\n          y: 0\n        };\n        this.orbit.update();\n        this.camera.updateMatrixWorld();\n        var box = this.computeClientBoundBox(),\n          k = 1.11;\n        this.movePan({\n          x: -k * box.mid.x,\n          y: -k * box.mid.y\n        });\n      }\n      Object3DWatcher.prototype.movePan = function movePan(dv) {\n        this.orbit.pan(dv.x * this.visual.width(), -dv.y * this.visual.height());\n      };\n      Object3DWatcher.prototype.vToCamera = function vToCamera(v) {\n        v.project(this.camera);\n        return {\n          x: 0.5 * v.x,\n          y: 0.5 * v.y\n        };\n      };\n      Object3DWatcher.prototype.computeClientBoundBox = function computeClientBoundBox() {\n        var box = this.boundBoxClb(),\n          xs = [box.min.x, box.max.x],\n          ys = [0, 0],\n          zs = [box.min.z, box.max.z];\n        var ps = [],\n          res = {\n            max: {},\n            min: {}\n          };\n        for (var _iterator = xs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var x = _ref;\n          for (var _iterator2 = ys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var y = _ref2;\n            for (var _iterator3 = zs, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n              var _ref3;\n              if (_isArray3) {\n                if (_i3 >= _iterator3.length) break;\n                _ref3 = _iterator3[_i3++];\n              } else {\n                _i3 = _iterator3.next();\n                if (_i3.done) break;\n                _ref3 = _i3.value;\n              }\n              var z = _ref3;\n              ps.push(this.vToCamera(this.v.set(x, y, z)));\n            }\n          }\n        }\n        ps.sort(function (p1, p2) {\n          return p1.x - p2.x;\n        });\n        res.min.x = ps[0].x;\n        res.max.x = ps[ps.length - 1].x;\n        ps.sort(function (p1, p2) {\n          return p1.y - p2.y;\n        });\n        res.min.y = ps[0].y;\n        res.max.y = ps[ps.length - 1].y;\n        res.width = res.max.x - res.min.x;\n        res.height = res.max.y - res.min.y;\n        res.mid = {\n          x: 0.5 * (res.max.x + res.min.x),\n          y: 0.5 * (res.max.y + res.min.y)\n        };\n        return res;\n      };\n      Object3DWatcher.prototype.setObject = function setObject(boundBoxClb) {\n        this.boundBoxClb = boundBoxClb;\n      };\n      Object3DWatcher.prototype.testScale = function testScale() {\n        return true;\n      };\n      Object3DWatcher.prototype.computeCorr = function computeCorr(K, min, max) {\n        var corr = 0;\n        if (K < 1) {\n          if (min > -0.5) {\n            corr = -0.5 - min;\n          } else if (max < 0.5) {\n            corr = 0.5 - max;\n          }\n        } else {\n          if (min < -0.5) {\n            corr = -0.5 - min;\n          } else if (max > 0.5) {\n            corr = 0.5 - max;\n          }\n        }\n        return corr;\n      };\n      Object3DWatcher.prototype.getScale = function getScale() {\n        var box = this.computeClientBoundBox(),\n          Kx = this.elementSize.w / box.width,\n          Ky = this.elementSize.h / box.height;\n        return 1 / Math.min(Kx, Ky);\n      };\n      Object3DWatcher.prototype.centerView = function centerView(T) {\n        var _this = this;\n        var box = this.computeClientBoundBox(),\n          Kx = this.elementSize.w / box.width,\n          Ky = this.elementSize.h / box.height,\n          K = Math.min(Kx, Ky);\n        if (this.testScale() && Math.abs(1 / K - this.scale) > this.eps) {\n          var scale = 1 / K + 0.2 * (this.scale - 1 / K);\n          this.orbit.setScale(this.orbit.getScale() / (K * scale));\n          this.orbit.update();\n          this.camera.updateMatrixWorld();\n          box = this.computeClientBoundBox();\n          Kx = this.elementSize.w / box.width;\n          Ky = this.elementSize.h / box.height;\n          K = Math.min(Kx, Ky);\n        }\n        var dv = this.dv;\n        if (K > 1 - this.eps) {\n          dv.set(-box.mid.x, -box.mid.y);\n        } else {\n          dv.set(this.computeCorr(Kx, box.min.x, box.max.x), this.computeCorr(Ky, box.min.y, box.max.y));\n        }\n        if (Math.sqrt(this.os.vx * this.os.vx + this.os.vy * this.os.vy) > 0.003 || dv.length() > 0.003) {\n          var dt = 1 / 60,\n            t = 0,\n            os = _extends({}, this.os, {\n              x: 0,\n              y: 0\n            });\n          os.tf = function (vx, vy, x, y) {\n            return {\n              x: 75 * (dv.x - x) / Math.pow(_this.devicePixelRatio, 1.0),\n              y: 75 * (dv.y - y) / Math.pow(_this.devicePixelRatio, 1.0)\n            };\n          };\n          while (t < T) {\n            if (t + dt > T) {\n              dt = T - t;\n            }\n            os = this.integrate(os, dt);\n            t += dt;\n          }\n          this.movePan(os);\n          this.os = os;\n        }\n      };\n      Object3DWatcher.prototype.integrate = function integrate(os, dt) {\n        var _MathUtils$rk = _MathUtils2.default.rk4(this.dy.bind(os), 0, dt, [os.vx, os.vy, os.x, os.y]),\n          vx = _MathUtils$rk[0],\n          vy = _MathUtils$rk[1],\n          x = _MathUtils$rk[2],\n          y = _MathUtils$rk[3];\n        return _extends({}, os, {\n          vx: vx,\n          vy: vy,\n          x: x,\n          y: y\n        });\n      };\n      Object3DWatcher.prototype.dy = function dy(t, Y) {\n        var vx = Y[0],\n          vy = Y[1],\n          x = Y[2],\n          y = Y[3],\n          vd = 15,\n          tf = this.tf(vx, vy, x, y);\n        return [tf.x - vd * vx, tf.y - vd * vy, vx, vy];\n      };\n      Object3DWatcher.prototype.update = function update(dt) {\n        if (this.enabled && this.boundBoxClb) {\n          this.centerView(dt);\n        }\n      };\n      return Object3DWatcher;\n    }();\n    exports.default = Object3DWatcher;\n\n    /***/\n  }, /* 56 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var Orbit = function (_THREE$EventDispatche) {\n      _inherits(Orbit, _THREE$EventDispatche);\n      function Orbit(object, domElement) {\n        _classCallCheck(this, Orbit);\n        var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));\n        _this.object = object;\n        _this.domElement = domElement || document.body;\n\n        // Set to false to disable this control\n        _this.enabled = true;\n\n        // \"target\" sets the location of focus, where the object orbits around\n        _this.target = new _libs.THREE.Vector3();\n\n        // How far you can dolly in and out(PerspectiveCamera only)\n        _this.minDistance = 0;\n        _this.maxDistance = Infinity;\n\n        // How far you can zoom in and out(OrthographicCamera only)\n        _this.minZoom = 0;\n        _this.maxZoom = Infinity;\n\n        // How far you can orbit vertically, upper and lower limits.\n        // Range is 0 to Math.PI radians.\n        _this.minPolarAngle = 0; // radians\n        _this.maxPolarAngle = Math.PI; // radians\n\n        // How far you can orbit horizontally, upper and lower limits.\n        // If set, must be a sub-interval of the interval [-Math.PI, Math.PI ].\n        _this.minAzimuthAngle = -Infinity; // radians\n        _this.maxAzimuthAngle = Infinity; // radians\n\n        // Set to true to enable damping (inertia)\n        // If damping is enabled, you must call controls.update() in your animation loop\n        _this.enableDamping = false;\n        _this.dampingFactor = 0.25;\n\n        // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n        // Set to false to disable zooming\n        _this.enableZoom = true;\n        _this.zoomSpeed = 1.0;\n\n        // Set to false to disable rotating\n        _this.enableRotate = true;\n        _this.rotateSpeed = 1.0;\n\n        // Set to false to disable panning\n        _this.enablePan = true;\n\n        // Set to true to automatically rotate around the target\n        // If auto-rotate is enabled, you must call controls.update() in your animation loop\n        _this.autoRotate = false;\n        _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n        // for reset\n        _this.target0 = _this.target.clone();\n        _this.position0 = _this.object.position.clone();\n        _this.zoom0 = _this.object.zoom;\n\n        //\n        // public methods\n        //\n        _this.getPolarAngle = function () {\n          return spherical.phi;\n        };\n        _this.getAzimuthalAngle = function () {\n          return spherical.theta;\n        };\n        _this.reset = function () {\n          scope.target.copy(scope.target0);\n          scope.object.position.copy(scope.position0);\n          scope.object.zoom = scope.zoom0;\n          scope.object.updateProjectionMatrix();\n          scope.dispatchEvent(changeEvent);\n          scope.update();\n        };\n        _this.zoomOut = function () {\n          var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;\n          var _speed = this.zoomSpeed;\n          this.zoomSpeed = speed;\n          dollyIn(getZoomScale());\n          this.zoomSpeed = _speed;\n        };\n        _this.zoomIn = function () {\n          var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;\n          var _speed = this.zoomSpeed;\n          this.zoomSpeed = speed;\n          dollyOut(getZoomScale());\n          this.zoomSpeed = _speed;\n        };\n        _this.getScale = function () {\n          return scale;\n        };\n        _this.setScale = function (newScale) {\n          scale = newScale;\n        };\n\n        // this method is exposed, but perhaps it would be better if we can make it private...\n        _this.update = function () {\n          var offset = new _libs.THREE.Vector3();\n          // so camera.up is the orbit axis\n          var quat = new _libs.THREE.Quaternion().setFromUnitVectors(object.up, new _libs.THREE.Vector3(0, 1, 0));\n          var quatInverse = quat.clone().inverse();\n          var lastPosition = new _libs.THREE.Vector3();\n          var lastQuaternion = new _libs.THREE.Quaternion();\n          return function update() {\n            var position = scope.object.position;\n            offset.copy(position).sub(scope.target);\n            // rotate offset to \"y-axis-is-up\" space\n            offset.applyQuaternion(quat);\n            // angle from z-axis around y-axis\n            spherical.setFromVector3(offset);\n            if (scope.autoRotate) {\n              rotateLeft(getAutoRotationAngle());\n            }\n            spherical.theta += sphericalDelta.theta;\n            spherical.phi += sphericalDelta.phi;\n            // restrict theta to be between desired limits\n            spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n            // restrict phi to be between desired limits\n            spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n            spherical.makeSafe();\n            spherical.radius *= scale;\n            // restrict radius to be between desired limits\n            spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n            // move target to panned location\n            scope.target.add(panOffset);\n            offset.setFromSpherical(spherical);\n            // rotate offset back to \"camera-up-vector-is-up\" space\n            offset.applyQuaternion(quatInverse);\n            position.copy(scope.target).add(offset);\n            scope.object.lookAt(scope.target);\n            if (scope.enableDamping === true) {\n              sphericalDelta.theta *= 1 - scope.dampingFactor;\n              sphericalDelta.phi *= 1 - scope.dampingFactor;\n            } else {\n              sphericalDelta.set(0, 0, 0);\n            }\n            scale = 1;\n            panOffset.set(0, 0, 0);\n\n            // update condition is:\n            // min(camera displacement, camera rotation in radians)^2 > EPS\n            // using small-angle approximation cos(x/2) = 1-x^2 / 8\n\n            if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n              scope.dispatchEvent(changeEvent);\n              lastPosition.copy(scope.object.position);\n              lastQuaternion.copy(scope.object.quaternion);\n              zoomChanged = false;\n              return true;\n            }\n            return false;\n          };\n        }();\n        _this.dispose = function () {};\n\n        //\n        // internals\n        //\n        var scope = _this;\n        var changeEvent = {\n          type: 'change'\n        };\n        var EPS = 1e-6;\n        // current position in spherical coordinates\n        var spherical = new _libs.THREE.Spherical();\n        var sphericalDelta = new _libs.THREE.Spherical();\n        var scale = 1;\n        var panOffset = new _libs.THREE.Vector3();\n        var zoomChanged = false;\n        function getAutoRotationAngle() {\n          return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n        }\n        function getZoomScale() {\n          return Math.pow(0.95, scope.zoomSpeed);\n        }\n        function rotateLeft(angle) {\n          sphericalDelta.theta -= angle;\n        }\n        function rotateUp(angle) {\n          sphericalDelta.phi -= angle;\n        }\n        var panLeft = function () {\n          var v = new _libs.THREE.Vector3();\n          return function panLeft(distance, objectMatrix) {\n            v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n            v.multiplyScalar(-distance);\n            panOffset.add(v);\n          };\n        }();\n        var panUp = function () {\n          var v = new _libs.THREE.Vector3();\n          return function panUp(distance, objectMatrix) {\n            v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n            v.multiplyScalar(distance);\n            panOffset.add(v);\n          };\n        }();\n\n        // deltaX and deltaY are in pixels; right and down are positive\n        scope.pan = function () {\n          var offset = new _libs.THREE.Vector3();\n          return function pan(deltaX, deltaY) {\n            var element = scope.domElement;\n            if (scope.object instanceof _libs.THREE.PerspectiveCamera) {\n              // perspective\n              var position = scope.object.position;\n              offset.copy(position).sub(scope.target);\n              var targetDistance = offset.length();\n              // half of the fov is center to top of screen\n              targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n              // we actually don't use screenWidth, since perspective camera is fixed to screen height\n              panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n              panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n            } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {\n              // orthographic\n              panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n              panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n            } else {\n              // camera neither orthographic nor perspective\n              console.warn('WARNING: OrbitControls.js encountered an unknown camera type-pan disabled.');\n              scope.enablePan = false;\n            }\n          };\n        }();\n        function dollyIn(dollyScale) {\n          if (scope.object instanceof _libs.THREE.PerspectiveCamera) {\n            scale /= dollyScale;\n          } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {\n            scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n            scope.object.updateProjectionMatrix();\n            zoomChanged = true;\n          } else {\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');\n            scope.enableZoom = false;\n          }\n        }\n        function dollyOut(dollyScale) {\n          if (scope.object instanceof _libs.THREE.PerspectiveCamera) {\n            scale *= dollyScale;\n          } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {\n            scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n            scope.object.updateProjectionMatrix();\n            zoomChanged = true;\n          } else {\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');\n            scope.enableZoom = false;\n          }\n        }\n\n        /* Actions */\n\n        function rotate(event, data) {\n          if (scope.enabled && scope.enableRotate && data.state === 'move') {\n            var element = scope.domElement;\n            // rotating across whole screen goes 360 degrees around\n            rotateLeft(2 * Math.PI * data.dx / element.clientWidth * scope.rotateSpeed);\n            // rotating up and down along whole screen attempts to go 360, but limited to 180\n            rotateUp(2 * Math.PI * data.dy / element.clientHeight * scope.rotateSpeed);\n            scope.update();\n          }\n        }\n        function pan(event, data) {\n          if (scope.enabled && scope.enablePan && data.state === 'move') {\n            scope.pan(data.dx, data.dy);\n            scope.update();\n          }\n        }\n        function offsetDolly(event, data) {\n          if (scope.enabled && scope.enableZoom && data.state === 'move') {\n            if (data.dy > 0) {\n              dollyIn(getZoomScale());\n            } else if (data.dy < 0) {\n              dollyOut(getZoomScale());\n            }\n            scope.update();\n          }\n        }\n        function wheelDolly(event) {\n          if (scope.enabled && scope.enableZoom) {\n            if (event.deltaY > 0) {\n              dollyOut(getZoomScale());\n            } else if (event.deltaY < 0) {\n              dollyIn(getZoomScale());\n            }\n            scope.update();\n          }\n        }\n        _this.actions = {\n          rotate: rotate,\n          pan: pan,\n          offsetDolly: offsetDolly,\n          wheelDolly: wheelDolly\n        };\n\n        // force an update at start\n        _this.update();\n        return _this;\n      }\n      return Orbit;\n    }(_libs.THREE.EventDispatcher);\n    exports.default = Orbit;\n\n    /***/\n  }, /* 57 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _ImageBase2 = __webpack_require__(5);\n    var _ImageBase3 = _interopRequireDefault(_ImageBase2);\n    var _Pdf = __webpack_require__(18);\n    var _Pdf2 = _interopRequireDefault(_Pdf);\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    var _CustomEventConverter = __webpack_require__(16);\n    var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);\n    var _PolyTarget = __webpack_require__(69);\n    var _PolyTarget2 = _interopRequireDefault(_PolyTarget);\n    var _Finder = __webpack_require__(17);\n    var _Finder2 = _interopRequireDefault(_Finder);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var PdfImage = function (_ImageBase) {\n      _inherits(PdfImage, _ImageBase);\n      function PdfImage(context, width, height, color, pdf, n) {\n        _classCallCheck(this, PdfImage);\n        var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));\n        _this.query = '';\n        _this.n = n;\n        _this.pdf = pdf;\n        _this.v = {\n          x: 0,\n          y: 0,\n          z: 0,\n          set: function set(x, y, z) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            return this;\n          },\n          transform: function transform(m) {\n            var x = m.m[0][0] * this.x + m.m[1][0] * this.y + m.m[2][0] * this.z,\n              y = m.m[0][1] * this.x + m.m[1][1] * this.y + m.m[2][1] * this.z,\n              z = m.m[0][2] * this.x + m.m[0][2] * this.y + m.m[2][0] * this.z;\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            return this;\n          }\n        };\n        _this.m = {\n          m: [[1, 0, 0], [0, 1, 0], [0, 0, 1]],\n          set: function set(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n            this.m = [[m00, m01, m02], [m10, m11, m12], [m20, m21, m22]];\n            return this;\n          }\n        };\n        _this.startRender = function () {\n          _this.pdf.getHandler(_this.render.bind(_this));\n        };\n        Promise.resolve().then(function () {\n          return _this.pdf.getHandler(_this.init.bind(_this));\n        });\n        return _this;\n      }\n      PdfImage.prototype.setQuery = function setQuery(query) {\n        this.query = query.trim();\n        if (this.textContent) {\n          this.setHits(this.textContent);\n          // this.finishLoad();\n        }\n      };\n      PdfImage.prototype.rectSize = function rectSize(r) {\n        return {\n          width: r[2] - r[0],\n          height: r[3] - r[1]\n        };\n      };\n      PdfImage.prototype.createPoly = function createPoly(m, p, s) {\n        var poly = [],\n          v = this.v;\n        v.set(p.x, p.y, 1).transform(m);\n        poly.push({\n          x: v.x,\n          y: v.y\n        });\n        v.set(p.x, p.y + s.height, 1).transform(m);\n        poly.push({\n          x: v.x,\n          y: v.y\n        });\n        v.set(p.x + s.width, p.y + s.height, 1).transform(m);\n        poly.push({\n          x: v.x,\n          y: v.y\n        });\n        v.set(p.x + s.width, p.y, 1).transform(m);\n        poly.push({\n          x: v.x,\n          y: v.y\n        });\n        return poly;\n      };\n      PdfImage.prototype.getSimulatedDoc = function getSimulatedDoc() {\n        return this.page;\n      };\n      PdfImage.prototype.simulate = function simulate(e, doc, x, y) {\n        if (this.eventConverter) {\n          this.eventConverter.convert(e, {\n            doc: doc,\n            x: x,\n            y: y\n          });\n        }\n      };\n      PdfImage.prototype.setAnnotations = function setAnnotations(annos) {\n        var _this2 = this;\n        var t = this.viewport.transform,\n          targets = [];\n        this.m.set(t[0], t[1], 0, t[2], t[3], 0, t[4], t[5], 1);\n        for (var _iterator = annos, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var anno = _ref;\n          if (anno.subtype === 'Link') {\n            var rect = anno.rect,\n              aPos = {\n                x: rect[0],\n                y: rect[1]\n              },\n              aSz = this.rectSize(rect);\n            var _target = new _PolyTarget2.default(this.createPoly(this.m, aPos, aSz).map(function (p) {\n              return {\n                x: p.x / _this2.viewport.width,\n                y: 1 - p.y / _this2.viewport.height\n              };\n            }));\n            _target.anno = anno;\n            _target.callback = this.annoClb.bind(this);\n            targets.push(_target);\n          }\n        }\n        if (targets.length) {\n          this.eventConverter = new _CustomEventConverter2.default(this.wnd, this.doc, _PolyTarget2.default.test, this.page);\n          for (var _iterator2 = targets, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var target = _ref2;\n            this.eventConverter.addCustom(target);\n          }\n        }\n      };\n      PdfImage.prototype.setHits = function setHits(textContent) {\n        this.textContent = textContent;\n        if (this.query !== '') {\n          this.finder = new _Finder2.default(textContent.items.map(function (item) {\n            return item.str;\n          }), this.query, {\n            contexts: false\n          });\n        }\n      };\n      PdfImage.prototype.renderHits = function renderHits() {\n        var _this3 = this;\n        if (this.finder) {\n          var view = this.page.view,\n            testSz = (0, _libs.$)('<div style=\"position: absolute; visibility: hidden;\"></div>').appendTo('body'),\n            textDiv = testSz[0],\n            baseOffset = testSz.offset().left;\n          for (var _iterator3 = this.finder.getHits(), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n            var _ref3;\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref3 = _i3.value;\n            }\n            var hit = _ref3;\n            var item = this.textContent.items[hit.index],\n              t = PDFJS.Util.transform(this.viewport.transform, item.transform),\n              style = this.textContent.styles[item.fontName],\n              angle = Math.atan2(t[1], t[0]) + (style.vertical ? Math.PI / 2 : 0),\n              fontHeight = Math.sqrt(t[2] * t[2] + t[3] * t[3]),\n              fontAscent = style.ascent ? style.ascent * fontHeight : style.descent ? (1 + style.descent) * fontHeight : fontHeight;\n            testSz.html(item.str.substr(0, hit.offset) + '<span>' + item.str.substr(hit.offset, hit.length) + '</span>' + item.str.substr(hit.offset + hit.length));\n            textDiv.style.fontSize = fontHeight + 'px';\n            textDiv.style.fontFamily = style.fontFamily;\n            var testSpan = testSz.find('span'),\n              iwidth = style.vertical ? item.height * this.viewport.scale : item.width * this.viewport.scale,\n              width = testSz.width(),\n              relativeOffset = (testSpan.offset().left - baseOffset) / width;\n            this.m.set(1, 0, 0, 0, 1, 0, t[4] + fontAscent * Math.sin(angle), t[5] - fontAscent * Math.cos(angle), 1);\n            var poly = this.createPoly(this.m, {\n              x: relativeOffset * iwidth,\n              y: 0\n            }, {\n              width: iwidth * testSpan.width() / width,\n              height: testSpan.height()\n            });\n            poly = poly.map(function (p) {\n              return {\n                x: p.x / _this3.viewport.width,\n                y: 1 - p.y / _this3.viewport.height\n              };\n            });\n            this.renderHit(poly);\n          }\n          testSz.remove();\n        }\n      };\n      PdfImage.prototype.annoClb = function annoClb(e, data) {\n        if (this.context.dispatchEvent) {\n          this.context.dispatchEvent({\n            type: 'pdfAnnotation',\n            event: e,\n            annotation: data.target.anno\n          });\n        }\n      };\n      PdfImage.prototype.calcViewport = function calcViewport() {\n        var scale = _BaseMathUtils2.default.calcScale(this.size.width, this.size.height, this.resW, this.resH);\n        if (!this.viewport || Math.abs(this.viewport.scale - scale) > 1e-4) {\n          this.viewport = this.page.getViewport(scale);\n          if (this.type !== 'full') {\n            if (this.type === 'right') {\n              this.viewport.offsetX += 0.5 * this.viewport.width;\n              this.viewport.transform[4] -= 0.5 * this.viewport.width;\n            }\n            this.viewport.width /= 2;\n          }\n          this.resW = this.width = this.viewport.width;\n          this.resH = this.height = this.viewport.height;\n        }\n      };\n      PdfImage.prototype.init = function init() {\n        var _this4 = this;\n        this.type = this.pdf.getPageType(this.n);\n        this.pdf.getPage(this.n).then(function (page) {\n          _this4.page = page;\n          _this4.size = _Pdf2.default.getPageSize(page);\n          if (_this4.type !== 'full') {\n            _this4.size.width /= 2;\n          }\n          page.getAnnotations().then(_this4.setAnnotations.bind(_this4));\n          page.getTextContent().then(_this4.setHits.bind(_this4));\n          _this4.calcViewport();\n          _this4.finishLoad();\n        }).catch(function (e) {\n          console.error('Cannot load PDF page: ' + (_this4.n + 1));\n          _this4.finishLoad();\n        });\n      };\n      PdfImage.prototype.setResolution = function setResolution(res) {\n        _ImageBase.prototype.setResolution.call(this, res);\n        if (this.page) {\n          this.calcViewport();\n        }\n      };\n      PdfImage.prototype.render = function render(handler) {\n        var _this5 = this;\n        if (this.page) {\n          this.page.render({\n            canvasContext: this.pushCtx(),\n            viewport: this.viewport\n          }).then(function () {\n            _this5.renderHits();\n            _this5.popCtx();\n            _this5.finishRender();\n          });\n        } else {\n          this.renderBlankPage();\n          this.finishRender();\n        }\n      };\n      return PdfImage;\n    }(_ImageBase3.default);\n    exports.default = PdfImage;\n\n    /***/\n  }, /* 58 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Search = function () {\n      function Search(container, pages) {\n        _classCallCheck(this, Search);\n        this.container = container;\n        this.pages = pages;\n        this.prevResults = [];\n        container.html('\\n      <div class=\"search\">\\n        <div class=\"query\">\\n          <input class=\"inpQuery\" type=\"text\" maxlength=\"30\" value=\"\" />\\n        </div>\\n        <div class=\"results\">\\n        </div>\\n        <div class=\"status\">\\n\\n        </div>\\n      </div>\\n    ');\n        this.query = container.find('.query input');\n        this.results = container.find('.results');\n        this.status = container.find('.status');\n        this.binds = {\n          navigate: this.navigate.bind(this),\n          doQuery: this.doQuery.bind(this)\n        };\n        this.query.on('keydown', this.binds.doQuery);\n        this.results.on('click', this.binds.navigate);\n      }\n      Search.prototype.dispose = function dispose() {\n        this.results.off('click', this.binds.navigate);\n        this.query.off('keydown', this.binds.doQuery);\n      };\n      Search.prototype.navigate = function navigate(e) {\n        e.preventDefault();\n        if (this.onNavigate !== undefined) {\n          var target = (0, _libs.$)(e.target);\n          if (!target.hasClass('result')) {\n            var t = target.find('.result');\n            if (t.length) {\n              target = t;\n            } else {\n              while (target.length && !target.hasClass('result')) {\n                target = (0, _libs.$)(target[0].parentNode);\n              }\n            }\n          }\n          var page = target.attr('data');\n          if (page !== undefined) {\n            this.onNavigate(parseInt(page));\n          }\n        }\n      };\n      Search.prototype.doQuery = function doQuery() {\n        var _this = this;\n        if (this.onQuery) {\n          var queryStamp = this.queryStamp = Date.now();\n          setTimeout(function () {\n            if (queryStamp === _this.queryStamp) {\n              _this.onQuery(_this.query[0].value.trim());\n            }\n          }, 1000);\n        }\n      };\n      Search.prototype.setResults = function setResults(results, lastPage) {\n        if (this.prevResults.length && results[0] !== this.prevResults[0]) {\n          this.prevResults = [];\n          this.results.html('');\n        }\n        var htmls = [];\n        for (var i = this.prevResults.length; i < results.length; ++i) {\n          var result = results[i];\n          htmls.push('<div class=\"result\" data=\"' + result.page + '\">');\n          htmls.push('<a href=\"#\">');\n          htmls.push('<div>' + result.contexts.join('</div><div>') + '</div>');\n          htmls.push('</a>');\n          htmls.push('</div>');\n        }\n        (0, _libs.$)(htmls.join('')).appendTo(this.results);\n        this.prevResults = [].concat(results);\n        if (lastPage === undefined) {\n          this.status.html('');\n        } else {\n          this.status.html(lastPage + ' of ' + this.pages);\n        }\n      };\n      return Search;\n    }();\n    exports.default = Search;\n\n    /***/\n  }, /* 59 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _ImageBase2 = __webpack_require__(5);\n    var _ImageBase3 = _interopRequireDefault(_ImageBase2);\n    var _Utils = __webpack_require__(4);\n    var _Utils2 = _interopRequireDefault(_Utils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var StaticImage = function (_ImageBase) {\n      _inherits(StaticImage, _ImageBase);\n      function StaticImage(context, width, height, color, src) {\n        _classCallCheck(this, StaticImage);\n        var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));\n        _this.binds = {};\n        _this.image = new Image();\n        _this.image.crossOrigin = 'Anonymous';\n        _this.binds.imageLoad = function () {\n          _this.width = _this.image.width;\n          _this.height = _this.image.height;\n          _this.startRender = function () {\n            _this.renderImage(_this.image);\n            _this.finishRender();\n          };\n          _this.finishLoad();\n        };\n        _this.binds.imageError = function () {\n          _this.startRender = function () {\n            _this.renderNotFoundPage();\n            _this.finishRender();\n          };\n          _this.finishLoad();\n        };\n        (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad).on('error', _this.binds.imageError);\n        _this.image.src = _Utils2.default.normalizeUrl(src);\n        return _this;\n      }\n      StaticImage.prototype.dispose = function dispose() {\n        (0, _libs.$)(this.image).off('load', this.binds.imageLoad).off('error', this.binds.imageError);\n        this.image.src = '';\n        delete this.image;\n        _ImageBase.prototype.dispose.call(this);\n      };\n      return StaticImage;\n    }(_ImageBase3.default);\n    exports.default = StaticImage;\n\n    /***/\n  }, /* 60 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var TextureAnimator = function () {\n      function TextureAnimator(img, tilesHoriz, tilesVert, numTiles, tileDispDuration) {\n        _classCallCheck(this, TextureAnimator);\n        var texture = new _libs.THREE.Texture();\n        texture.minFilter = _libs.THREE.LinearFilter;\n        texture.image = img;\n        texture.needsUpdate = true;\n\n        // note: texture passed by reference, will be updated by the update function.\n        this.texture = texture;\n        this.tilesHorizontal = tilesHoriz;\n        this.tilesVertical = tilesVert;\n        // how many images does this spritesheet contain?\n        //  usually equals tilesHoriz * tilesVert, but not necessarily,\n        //  if there at blank tiles at the bottom of the spritesheet.\n        this.numberOfTiles = numTiles;\n        texture.repeat.set(1 / this.tilesHorizontal, 1 / this.tilesVertical);\n\n        // how long should each image be displayed?\n        this.tileDisplayDuration = tileDispDuration;\n\n        // how long has the current image been displayed?\n        this.currentDisplayTime = 0;\n\n        // which image is currently being displayed?\n        this.currentTile = 0;\n      }\n      TextureAnimator.prototype.update = function update(milliSec) {\n        this.currentDisplayTime += milliSec;\n        while (this.currentDisplayTime > this.tileDisplayDuration) {\n          this.currentDisplayTime -= this.tileDisplayDuration;\n          ++this.currentTile;\n          if (this.currentTile == this.numberOfTiles) this.currentTile = 0;\n          var currentColumn = this.currentTile % this.tilesHorizontal;\n          this.texture.offset.x = currentColumn / this.tilesHorizontal;\n          var currentRow = Math.floor(this.currentTile / this.tilesHorizontal);\n          this.texture.offset.y = currentRow / this.tilesVertical;\n        }\n      };\n      TextureAnimator.prototype.dispose = function dispose() {\n        var img = this.texture.image;\n        img.height = img.width = 0;\n        this.texture.dispose();\n      };\n      return TextureAnimator;\n    }();\n    exports.default = TextureAnimator;\n\n    /***/\n  }, /* 61 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _Utils = __webpack_require__(4);\n    var _Utils2 = _interopRequireDefault(_Utils);\n    var _MouseEventConverter2 = __webpack_require__(54);\n    var _MouseEventConverter3 = _interopRequireDefault(_MouseEventConverter2);\n    var _ThreeEventConverter = __webpack_require__(19);\n    var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var ThreeMouseEventConverter = function (_MouseEventConverter) {\n      _inherits(ThreeMouseEventConverter, _MouseEventConverter);\n      function ThreeMouseEventConverter(wnd, doc, visualWorld, test) {\n        _classCallCheck(this, ThreeMouseEventConverter);\n        var _this = _possibleConstructorReturn(this, _MouseEventConverter.call(this, wnd, doc, visualWorld.element));\n        _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));\n        return _this;\n      }\n      ThreeMouseEventConverter.prototype.getCallback = function getCallback(object) {\n        return object.object.userData.mouseCallback;\n      };\n      ThreeMouseEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {\n        var jElement = (0, _libs.$)(this.element);\n        var offset = jElement.offset();\n        this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;\n        this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;\n        return this.coords;\n      };\n      return ThreeMouseEventConverter;\n    }(_MouseEventConverter3.default);\n    exports.default = ThreeMouseEventConverter;\n\n    /***/\n  }, /* 62 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _Utils = __webpack_require__(4);\n    var _Utils2 = _interopRequireDefault(_Utils);\n    var _TouchEventConverter2 = __webpack_require__(64);\n    var _TouchEventConverter3 = _interopRequireDefault(_TouchEventConverter2);\n    var _ThreeEventConverter = __webpack_require__(19);\n    var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var ThreeTouchEventConverter = function (_TouchEventConverter) {\n      _inherits(ThreeTouchEventConverter, _TouchEventConverter);\n      function ThreeTouchEventConverter(wnd, doc, visualWorld, test) {\n        _classCallCheck(this, ThreeTouchEventConverter);\n        var _this = _possibleConstructorReturn(this, _TouchEventConverter.call(this, wnd, doc, visualWorld.element));\n        _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));\n        return _this;\n      }\n      ThreeTouchEventConverter.prototype.getCallback = function getCallback(object) {\n        return object.object.userData.touchCallback;\n      };\n      ThreeTouchEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {\n        var jElement = (0, _libs.$)(this.element),\n          offset = jElement.offset(),\n          touches = e.touches || e.originalEvent.touches,\n          touch = touches.length ? touches[0] : (this.lastTouches || [{\n            pageX: 0,\n            pageY: 0\n          }])[0],\n          pageX = touch.pageX,\n          pageY = touch.pageY;\n        this.lastTouches = touches.length ? touches : this.lastTouches;\n        this.coords.x = (pageX - offset.left) / jElement.width() * 2 - 1;\n        this.coords.y = -((pageY - offset.top) / jElement.height()) * 2 + 1;\n        return this.coords;\n      };\n      return ThreeTouchEventConverter;\n    }(_TouchEventConverter3.default);\n    exports.default = ThreeTouchEventConverter;\n\n    /***/\n  }, /* 63 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    var _ImageFactory = __webpack_require__(8);\n    var _ImageFactory2 = _interopRequireDefault(_ImageFactory);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var Thumbnails = function () {\n      function Thumbnails(context, container, thumbnailsClb, size) {\n        var _this = this;\n        var props = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n          kWtoH: 210 / 297\n        };\n        _classCallCheck(this, Thumbnails);\n        this.container = container;\n        this.p = props;\n        this.thumbnailsClb = thumbnailsClb;\n        this.size = size;\n        this.canvas = (0, _libs.$)('<canvas>')[0];\n        this.imageFactory = new _ImageFactory2.default(_extends({}, context, {\n          renderCanvas: this.canvas,\n          renderCanvasCtx: this.canvas.getContext('2d')\n        }));\n        this.thumbnails = [];\n        for (var i = 0; i < size; ++i) {\n          var info = this.thumbnailsClb(i);\n          this.thumbnails.push(_extends({}, info, {\n            index: i,\n            loaded: info.type === 'thumbnail-image',\n            heading: null,\n            thumbnail: null,\n            title: info.title || i\n          }));\n        }\n        this.binds = {\n          update: this.update.bind(this),\n          navigate: function navigate(e) {\n            e.preventDefault();\n            if (_this.onNavigate) {\n              var node = e.target;\n              while (node && !node.dataThumbnail) {\n                node = node.parentNode;\n              }\n              _this.onNavigate(node.dataThumbnail.index);\n            }\n          }\n        };\n        this.container.on('scroll', this.binds.update);\n      }\n      Thumbnails.prototype.getSize = function getSize() {\n        return this.size;\n      };\n      Thumbnails.prototype.setEnable = function setEnable(enable) {\n        this.enable = enable;\n        this.update();\n      };\n      Thumbnails.prototype.dispose = function dispose() {\n        this.container.find('a').off('click', this.binds.navigate);\n        this.container.off('scroll', this.binds.update);\n        this.container.html('');\n        this.canvas.height = this.canvas.width = 0;\n        delete this.canvas;\n      };\n      Thumbnails.prototype.load = function load(thumbnail) {\n        var _this2 = this;\n        this.loading = true;\n        var wrapper = this.imageFactory.build(thumbnail, thumbnail.number === undefined ? thumbnail.index : thumbnail.number, this.p.kWtoH * 300, 300);\n        wrapper.onChange = function (canvas) {\n          _this2.setImage(thumbnail, canvas.toDataURL('image/png'));\n          thumbnail.loaded = true;\n          wrapper.dispose();\n          _this2.loading = false;\n          Promise.resolve().then(function () {\n            return _this2.update();\n          });\n        };\n      };\n      Thumbnails.prototype.getActive = function getActive() {\n        var first = this.container.scrollTop(),\n          last = first + this.container.height(),\n          res = [];\n        for (var _iterator = this.thumbnails, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var thumbnail = _ref;\n          if (Math.max(thumbnail.first, first) < Math.min(thumbnail.last, last)) {\n            res.push(thumbnail);\n          }\n        }\n        return res;\n      };\n      Thumbnails.prototype.update = function update() {\n        if (!this.loading && this.canvas && this.enable) {\n          if (!this.built) {\n            this.render();\n          }\n          var active = this.getActive();\n          for (var _iterator2 = active, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref2 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref2 = _i2.value;\n            }\n            var thumbnail = _ref2;\n            if (!thumbnail.loaded) {\n              this.load(thumbnail);\n              break;\n            }\n          }\n        }\n      };\n      Thumbnails.prototype.setImage = function setImage(thumbnail, img) {\n        thumbnail.img = img;\n        thumbnail.thumbnail.css('background-image', ['url(\\'', img, '\\')'].join(''));\n        thumbnail.thumbnail.removeClass('loading');\n      };\n      Thumbnails.prototype.render = function render() {\n        var elements = ['<div class=\"thumbnails\">'];\n        for (var i = 0; i < this.size; ++i) {\n          elements.push(['<div class=\"item\"><a href=\"#\"><div class=\"thumbnail loading\"></div></a><div class=\"heading\"><a href=\"#\" title=\"', i + 1, '\">', i + 1, '</a></div></div>'].join(''));\n        }\n        elements.push('</div>');\n        this.container.append(elements.join(''));\n        var items = this.container.find('.item'),\n          base = this.container.find('.thumbnails').offset().top;\n        for (var _i3 = 0; _i3 < items.length; ++_i3) {\n          var item = (0, _libs.$)(items[_i3]);\n          this.thumbnails[_i3].heading = item.find('.heading');\n          this.thumbnails[_i3].thumbnail = item.find('.thumbnail');\n          this.thumbnails[_i3].first = item.offset().top - base;\n          this.thumbnails[_i3].last = this.thumbnails[_i3].first + item.height();\n          if (this.thumbnails[_i3].loaded) {\n            this.setImage(this.thumbnails[_i3], this.thumbnails[_i3].src);\n          }\n          var as = item.find('a');\n          for (var j = 0; j < as.length; ++j) {\n            var a = as[j];\n            a.dataThumbnail = this.thumbnails[_i3];\n          }\n        }\n        this.container.find('a').on('click', this.binds.navigate);\n        this.built = true;\n      };\n      return Thumbnails;\n    }();\n    exports.default = Thumbnails;\n\n    /***/\n  }, /* 64 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _libs = __webpack_require__(0);\n    var _EventConverter2 = __webpack_require__(6);\n    var _EventConverter3 = _interopRequireDefault(_EventConverter2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var TouchConverter = function (_EventConverter) {\n      _inherits(TouchConverter, _EventConverter);\n      function TouchConverter(wnd, doc, element) {\n        _classCallCheck(this, TouchConverter);\n        var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));\n        _this.element = element;\n        _this.binds = {\n          convert: _this.convert.bind(_this)\n        };\n        (0, _libs.$)(_this.element).on('touchstart touchmove', _this.binds.convert);\n        (0, _libs.$)(_this.doc).on('touchend', _this.binds.convert);\n        return _this;\n      }\n      TouchConverter.prototype.dispose = function dispose() {\n        (0, _libs.$)(this.element).off('touchstart touchmove', this.binds.convert);\n        (0, _libs.$)(this.doc).off('touchend', this.binds.convert);\n      };\n      return TouchConverter;\n    }(_EventConverter3.default);\n    exports.default = TouchConverter;\n\n    /***/\n  }, /* 65 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var View = function () {\n      View.classProperty = function classProperty(ctrl, className, value) {\n        if (value) {\n          ctrl.addClass(className);\n        } else {\n          ctrl.removeClass(className);\n        }\n      };\n      View.attributeProperty = function attributeProperty(ctrl, attributeName, value) {\n        if (value) {\n          ctrl.attr(attributeName, value);\n        } else {\n          ctrl.removeAttr(attributeName);\n        }\n      };\n      View.callHandlers = function callHandlers(handlers, id, e, data) {\n        for (var _iterator = handlers, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var handler = _ref;\n          if (handler[id]) {\n            handler[id](e, data);\n          } else if (handler.handleDefault) {\n            handler.handleDefault(id, e, data);\n          }\n        }\n      };\n      View.handleEvent = function handleEvent(id, getHandlers, e, data) {\n        View.callHandlers(getHandlers(id), id, e, data);\n      };\n      View.handleLinkEvent = function handleLinkEvent(e) {\n        e.preventDefault();\n        if (!this.ctrl.hasClass('disabled')) {\n          View.handleEvent(this.id, this.getHandlers, e);\n        }\n      };\n      View.handleInputEvent = function handleInputEvent(e) {\n        View.handleEvent(this.id, this.getHandlers, e, e.target.value);\n      };\n      View.handleFormEvent = function handleFormEvent(e) {\n        e.preventDefault();\n        View.handleEvent(this.id, this.getHandlers, e);\n      };\n\n      // virtual functions {\n\n      View.prototype.getLinks = function getLinks() {\n        return null;\n      };\n      View.prototype.getWidgets = function getWidgets() {\n        return null;\n      };\n      View.prototype.getInputs = function getInputs() {\n        return null;\n      };\n      View.prototype.getTexts = function getTexts() {\n        return null;\n      };\n      View.prototype.getTemplate = function getTemplate() {\n        return {};\n      };\n      View.prototype.getHandlers = function getHandlers(id) {\n        return this.handlers;\n      };\n      // }\n\n      View.prototype.callLater = function callLater(handlers, id, e, data, ms) {\n        var _this = this;\n        this.pendings[id] = {\n          timestamp: new Date().getTime()\n        };\n        setTimeout(function () {\n          var timestamp = new Date().getTime(),\n            pending = _this.pendings[id];\n          if (pending && timestamp - pending.timestamp >= ms) {\n            View.callHandlers(handlers, id, e, data);\n            delete _this.pendings[id];\n          }\n        }, ms);\n      };\n\n      // loadFiles(urls, ready, failure) {\n      //   let done = Promise.resolve();\n      //   for(let url of urls) {\n      //     done = done.then(()=> {\n      //       return new Promise((resolve, reject)=> {\n      //         $.get(url, (res)=> {\n      //           ready(res, url);\n      //           resolve();\n      //         }).fail((res)=> {\n      //           if(failure && failure(res, url)) {\n      //             resolve();\n      //           }\n      //           else {\n      //             reject(res);\n      //           }\n      //         });\n      //       });\n      //     });\n      //   }\n      //   return done;\n      // }\n\n      View.prototype.loadFiles = function loadFiles(urls, files) {\n        var tasks = [];\n        var _loop = function _loop() {\n          if (_isArray2) {\n            if (_i2 >= _iterator2.length) return 'break';\n            _ref2 = _iterator2[_i2++];\n          } else {\n            _i2 = _iterator2.next();\n            if (_i2.done) return 'break';\n            _ref2 = _i2.value;\n          }\n          var name = _ref2;\n          files[name] = [];\n          var _loop2 = function _loop2() {\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) return 'break';\n              _ref3 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) return 'break';\n              _ref3 = _i3.value;\n            }\n            var url = _ref3;\n            tasks.push(new Promise(function (resolve, reject) {\n              _libs.$.get(url, function (data) {\n                files[name].push({\n                  url: url,\n                  data: data\n                });\n                resolve();\n              }).fail(function (res) {\n                reject(res);\n              });\n            }));\n          };\n          for (var _iterator3 = urls[name], _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n            var _ref3;\n            var _ret2 = _loop2();\n            if (_ret2 === 'break') break;\n          }\n        };\n        for (var _iterator2 = Object.keys(urls), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n          var _ref2;\n          var _ret = _loop();\n          if (_ret === 'break') break;\n        }\n        return Promise.all(tasks);\n      };\n      View.prototype.urlResolver = function urlResolver(baseUrl, url) {\n        url = url.replace(/\\\\/g, '/');\n        if (url.charAt(0) !== '/') {\n          baseUrl = baseUrl.replace(/\\\\/g, '/');\n          var p = baseUrl.lastIndexOf('/');\n          url = (~p ? baseUrl.substr(0, p + 1) : '') + url;\n          var parts = url.split('/');\n          url = [];\n          for (var _iterator4 = parts, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n            if (_isArray4) {\n              if (_i4 >= _iterator4.length) break;\n              _ref4 = _iterator4[_i4++];\n            } else {\n              _i4 = _iterator4.next();\n              if (_i4.done) break;\n              _ref4 = _i4.value;\n            }\n            var part = _ref4;\n            if (part === '.') {} else if (part === '..') {\n              if (url.length && !(url.length === 1 && url[0] === '')) {\n                url.pop();\n              }\n            } else {\n              url.push(part);\n            }\n          }\n          url = url.join('/');\n        }\n        return url;\n      };\n      View.prototype.objToAttrsStr = function objToAttrsStr(o) {\n        var res = [];\n        for (var _iterator5 = Object.keys(o), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n          var _ref5;\n          if (_isArray5) {\n            if (_i5 >= _iterator5.length) break;\n            _ref5 = _iterator5[_i5++];\n          } else {\n            _i5 = _iterator5.next();\n            if (_i5.done) break;\n            _ref5 = _i5.value;\n          }\n          var _name = _ref5;\n          res.push([_name, '=\"', o[_name], '\"'].join(''));\n        }\n        return res.join(' ');\n      };\n      View.prototype.checkIframeSize = function checkIframeSize() {\n        if (this.frame) {\n          if (Math.abs(this.frame.width - this.parentContainer.width()) > 1 || Math.abs(this.frame.height - this.parentContainer.height()) > 1) {\n            this.onResize();\n          }\n          setTimeout(this.checkIframeSize.bind(this), 250);\n        }\n      };\n      View.prototype.onResize = function onResize() {\n        this.frame.width = this.parentContainer.width();\n        this.frame.height = this.parentContainer.height();\n      };\n      View.prototype.translate = function translate(html) {\n        return html.replace(/<\\$tr>(.*)<\\/\\$tr>/gi, function (s0, s1) {\n          return (0, _libs.tr)(s1);\n        });\n      };\n      View.prototype.fireLinksOnLoadEvent = function fireLinksOnLoadEvent() {\n        var _this2 = this;\n        if (this.templateObject && this.templateObject.linkLoaded) {\n          var loaded = true;\n          var _loop3 = function _loop3() {\n            if (_isArray6) {\n              if (_i6 >= _iterator6.length) return 'break';\n              _ref6 = _iterator6[_i6++];\n            } else {\n              _i6 = _iterator6.next();\n              if (_i6.done) return 'break';\n              _ref6 = _i6.value;\n            }\n            var jLink = _ref6;\n            var link = jLink[0];\n            var img = new Image();\n            img.onerror = function () {\n              return _this2.templateObject.linkLoaded(link);\n            };\n            img.src = link.href;\n          };\n          for (var _iterator6 = this.jLinks, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n            var _ref6;\n            var _ret3 = _loop3();\n            if (_ret3 === 'break') break;\n          }\n        }\n      };\n      function View(parentContainer, onLoad) {\n        var _this3 = this;\n        var template = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        _classCallCheck(this, View);\n        this.pendings = {};\n        this.binds = {\n          onResize: this.onResize.bind(this)\n        };\n        this.parentContainer = (0, _libs.$)(parentContainer);\n        this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n        this.parentContainer.html('<iframe style=\"border: 0;' + (this.isIOS ? '' : ' width: 100%; height: 100%') + '\" scrolling=\"no\"></iframe>');\n        this.frame = this.parentContainer.find('iframe')[0];\n        if (this.frame.contentWindow.stop) {\n          this.frame.contentWindow.stop();\n        }\n        if (this.isIOS) {\n          (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).on('resize', this.binds.onResize);\n          this.onResize();\n          setTimeout(this.checkIframeSize.bind(this), 250);\n        }\n        this.container = (0, _libs.$)(this.frame.contentDocument.body);\n        this.container.css('margin', '0');\n        this.head = (0, _libs.$)(this.frame.contentDocument.head);\n        this.onLoad = onLoad;\n        this.handlers = [];\n        var script = template.html ? template.script : this.getTemplate().script;\n        var urls = {\n            styles: template.styles || this.getTemplate().styles,\n            html: [template.html || this.getTemplate().html],\n            script: script ? [script] : []\n          },\n          files = {},\n          links = template.links || this.getTemplate().links;\n        this.loadFiles(urls, files).then(function () {\n          var _loop4 = function _loop4() {\n            if (_isArray7) {\n              if (_i7 >= _iterator7.length) return 'break';\n              _ref7 = _iterator7[_i7++];\n            } else {\n              _i7 = _iterator7.next();\n              if (_i7.done) return 'break';\n              _ref7 = _i7.value;\n            }\n            var style = _ref7;\n            var textCss = style.data,\n              url = style.url;\n            textCss = textCss.replace(/url\\(['\"](.*?)[\"']\\)/g, function (r, r1) {\n              return ['url(', _this3.urlResolver(url, r1), ')'].join('');\n            });\n            (0, _libs.$)('<style type=\"text/css\">' + textCss + '</style>').appendTo(_this3.head);\n          };\n          for (var _iterator7 = files.styles, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n            var _ref7;\n            var _ret4 = _loop4();\n            if (_ret4 === 'break') break;\n          }\n          _this3.container.html(_this3.translate(files.html[0].data));\n          _this3.jLinks = [];\n          for (var _iterator8 = links, _isArray8 = Array.isArray(_iterator8), _i8 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {\n            var _ref8;\n            if (_isArray8) {\n              if (_i8 >= _iterator8.length) break;\n              _ref8 = _iterator8[_i8++];\n            } else {\n              _i8 = _iterator8.next();\n              if (_i8.done) break;\n              _ref8 = _i8.value;\n            }\n            var _link = _ref8;\n            _this3.jLinks.push((0, _libs.$)(['<link ', _this3.objToAttrsStr(_link), '>'].join('')).appendTo(_this3.head));\n          }\n          if (files.script[0]) {\n            var init = eval(files.script[0].data);\n            _this3.templateObject = init(_this3.container);\n          } else {\n            _this3.templateObject = {};\n          }\n          _this3.linkControls = {};\n          for (var _iterator9 = _this3.getLinks(), _isArray9 = Array.isArray(_iterator9), _i9 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {\n            var _ref9;\n            if (_isArray9) {\n              if (_i9 >= _iterator9.length) break;\n              _ref9 = _iterator9[_i9++];\n            } else {\n              _i9 = _iterator9.next();\n              if (_i9.done) break;\n              _ref9 = _i9.value;\n            }\n            var id = _ref9;\n            _this3.linkControls[id] = _this3.container.find('.' + id);\n            _this3.binds[id] = View.handleLinkEvent.bind({\n              getHandlers: _this3.getHandlers.bind(_this3),\n              id: id,\n              ctrl: _this3.linkControls[id]\n            });\n            _this3.linkControls[id].on('click', _this3.binds[id]);\n          }\n          _this3.widgetControls = {};\n          for (var _iterator10 = _this3.getWidgets(), _isArray10 = Array.isArray(_iterator10), _i10 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {\n            var _ref10;\n            if (_isArray10) {\n              if (_i10 >= _iterator10.length) break;\n              _ref10 = _iterator10[_i10++];\n            } else {\n              _i10 = _iterator10.next();\n              if (_i10.done) break;\n              _ref10 = _i10.value;\n            }\n            var _id = _ref10;\n            _this3.widgetControls[_id] = _this3.container.find('.' + _id);\n          }\n          _this3.inputControls = {};\n          for (var _iterator11 = _this3.getInputs(), _isArray11 = Array.isArray(_iterator11), _i11 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {\n            var _ref11;\n            if (_isArray11) {\n              if (_i11 >= _iterator11.length) break;\n              _ref11 = _iterator11[_i11++];\n            } else {\n              _i11 = _iterator11.next();\n              if (_i11.done) break;\n              _ref11 = _i11.value;\n            }\n            var _id2 = _ref11;\n            _this3.inputControls[_id2] = _this3.container.find('.' + _id2);\n            _this3.binds[_id2] = View.handleInputEvent.bind({\n              getHandlers: _this3.getHandlers.bind(_this3),\n              id: _id2,\n              ctrl: _this3.inputControls[_id2]\n            });\n            _this3.inputControls[_id2].on('keyup', _this3.binds[_id2]);\n          }\n          _this3.formControls = {};\n          for (var _iterator12 = _this3.getForms(), _isArray12 = Array.isArray(_iterator12), _i12 = 0, _iterator12 = _isArray12 ? _iterator12 : _iterator12[Symbol.iterator]();;) {\n            var _ref12;\n            if (_isArray12) {\n              if (_i12 >= _iterator12.length) break;\n              _ref12 = _iterator12[_i12++];\n            } else {\n              _i12 = _iterator12.next();\n              if (_i12.done) break;\n              _ref12 = _i12.value;\n            }\n            var _id3 = _ref12;\n            _this3.formControls[_id3] = _this3.container.find('.' + _id3);\n            _this3.binds[_id3] = View.handleFormEvent.bind({\n              getHandlers: _this3.getHandlers.bind(_this3),\n              id: _id3,\n              ctrl: _this3.formControls[_id3]\n            });\n            _this3.formControls[_id3].on('submit', _this3.binds[_id3]);\n          }\n          _this3.textControls = {};\n          for (var _iterator13 = _this3.getTexts(), _isArray13 = Array.isArray(_iterator13), _i13 = 0, _iterator13 = _isArray13 ? _iterator13 : _iterator13[Symbol.iterator]();;) {\n            var _ref13;\n            if (_isArray13) {\n              if (_i13 >= _iterator13.length) break;\n              _ref13 = _iterator13[_i13++];\n            } else {\n              _i13 = _iterator13.next();\n              if (_i13.done) break;\n              _ref13 = _i13.value;\n            }\n            var _id4 = _ref13;\n            _this3.textControls[_id4] = _this3.container.find('.' + _id4);\n          }\n          _this3.stateSetters = [{\n            map: _this3.linkControls,\n            setter: _this3.setLinkControlState.bind(_this3)\n          }, {\n            map: _this3.widgetControls,\n            setter: _this3.setWidgetControlState.bind(_this3)\n          }, {\n            map: _this3.inputControls,\n            setter: _this3.setInputControlState.bind(_this3)\n          }, {\n            map: _this3.textControls,\n            setter: _this3.setTextControlState.bind(_this3)\n          }];\n          _this3.initView();\n          if (_this3.onLoad) {\n            _this3.onLoad();\n          }\n          _this3.fireLinksOnLoadEvent();\n        }).catch(function (res) {\n          return console.error(res);\n        });\n      }\n      View.prototype.dispose = function dispose() {\n        delete this.textControls;\n        for (var _iterator14 = this.getLinks(), _isArray14 = Array.isArray(_iterator14), _i14 = 0, _iterator14 = _isArray14 ? _iterator14 : _iterator14[Symbol.iterator]();;) {\n          var _ref14;\n          if (_isArray14) {\n            if (_i14 >= _iterator14.length) break;\n            _ref14 = _iterator14[_i14++];\n          } else {\n            _i14 = _iterator14.next();\n            if (_i14.done) break;\n            _ref14 = _i14.value;\n          }\n          var id = _ref14;\n          this.linkControls[id].off('click', this.binds[id]);\n        }\n        delete this.linkControls;\n        delete this.widgetControls;\n        for (var _iterator15 = this.getInputs(), _isArray15 = Array.isArray(_iterator15), _i15 = 0, _iterator15 = _isArray15 ? _iterator15 : _iterator15[Symbol.iterator]();;) {\n          var _ref15;\n          if (_isArray15) {\n            if (_i15 >= _iterator15.length) break;\n            _ref15 = _iterator15[_i15++];\n          } else {\n            _i15 = _iterator15.next();\n            if (_i15.done) break;\n            _ref15 = _i15.value;\n          }\n          var _id5 = _ref15;\n          this.inputControls[_id5].off('keyup', this.binds[_id5]);\n        }\n        delete this.inputControls;\n        for (var _iterator16 = this.getForms(), _isArray16 = Array.isArray(_iterator16), _i16 = 0, _iterator16 = _isArray16 ? _iterator16 : _iterator16[Symbol.iterator]();;) {\n          var _ref16;\n          if (_isArray16) {\n            if (_i16 >= _iterator16.length) break;\n            _ref16 = _iterator16[_i16++];\n          } else {\n            _i16 = _iterator16.next();\n            if (_i16.done) break;\n            _ref16 = _i16.value;\n          }\n          var _id6 = _ref16;\n          this.formControls[_id6].off('submit', this.binds[_id6]);\n        }\n        delete this.formControls;\n        !this.templateObject.dispose || this.templateObject.dispose();\n        delete this.templateObject;\n        if (this.isIOS) {\n          (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).off('resize', this.binds.onResize);\n        }\n        this.parentContainer.html('');\n        delete this.frame;\n      };\n      View.prototype.getContainer = function getContainer() {\n        return this.container[0];\n      };\n      View.prototype.getParentContainer = function getParentContainer() {\n        return this.parentContainer[0];\n      };\n      View.prototype.addHandler = function addHandler(handler) {\n        this.handlers.push(handler);\n      };\n      View.prototype.initView = function initView() {};\n      View.setControlState = function setControlState(ctrl, defaults, state, stateHandlers) {\n        if (ctrl) {\n          var st = _extends({}, defaults, state);\n          for (var _name2 in st) {\n            if (st.hasOwnProperty(_name2) && stateHandlers[_name2]) {\n              stateHandlers[_name2](ctrl, st[_name2]);\n            }\n          }\n        }\n      };\n      View.prototype.setLinkControlState = function setLinkControlState(id, state) {\n        View.setControlState(this.linkControls[id], {\n          visible: true,\n          active: false,\n          enable: true\n        }, state, View.linkStateHandlers);\n      };\n      View.prototype.setWidgetControlState = function setWidgetControlState(id, state) {\n        View.setControlState(this.widgetControls[id], {\n          visible: true,\n          active: false,\n          enable: true\n        }, state, View.widgetStateHandlers);\n      };\n      View.prototype.setInputControlState = function setInputControlState(id, state) {\n        View.setControlState(this.inputControls[id], {\n          visible: true,\n          enable: true,\n          value: ''\n        }, state, View.inputStateHandlers);\n      };\n      View.prototype.setTextControlState = function setTextControlState(id, state) {\n        View.setControlState(this.textControls[id], {\n          visible: true,\n          value: ''\n        }, state, View.textStateHandlers);\n      };\n      View.prototype.onItemStateChanged = function onItemStateChanged() {};\n      View.prototype.setState = function setState(id, state) {\n        for (var _iterator17 = this.stateSetters, _isArray17 = Array.isArray(_iterator17), _i17 = 0, _iterator17 = _isArray17 ? _iterator17 : _iterator17[Symbol.iterator]();;) {\n          var _ref17;\n          if (_isArray17) {\n            if (_i17 >= _iterator17.length) break;\n            _ref17 = _iterator17[_i17++];\n          } else {\n            _i17 = _iterator17.next();\n            if (_i17.done) break;\n            _ref17 = _i17.value;\n          }\n          var item = _ref17;\n          if (item.map[id]) {\n            item.setter(id, state);\n            this.onItemStateChanged(id, state);\n            break;\n          }\n        }\n      };\n      return View;\n    }();\n    View.linkStateHandlers = {\n      visible: function visible(ctrl, value) {\n        return View.classProperty(ctrl, 'hidden', !value);\n      },\n      active: function active(ctrl, value) {\n        return View.classProperty(ctrl, 'active', value);\n      },\n      enable: function enable(ctrl, value) {\n        return View.classProperty(ctrl, 'disabled', !value);\n      }\n    };\n    View.widgetStateHandlers = {\n      visible: function visible(ctrl, value) {\n        return View.classProperty(ctrl, 'hidden', !value);\n      },\n      active: function active(ctrl, value) {\n        return View.classProperty(ctrl, 'active', value);\n      },\n      enable: function enable(ctrl, value) {\n        return View.classProperty(ctrl, 'disabled', !value);\n      }\n    };\n    View.inputStateHandlers = {\n      visible: function visible(ctrl, value) {\n        return View.classProperty(ctrl, 'hidden', !value);\n      },\n      value: function value(ctrl, _value) {\n        return ctrl[0].value = _value;\n      },\n      enable: function enable(ctrl, value) {\n        return View.attributeProperty(ctrl, 'disabled', !value);\n      }\n    };\n    View.textStateHandlers = {\n      visible: function visible(ctrl, value) {\n        return View.classProperty(ctrl, 'hidden', !value);\n      },\n      value: function value(ctrl, _value2) {\n        return ctrl.text(_value2);\n      }\n    };\n    exports.default = View;\n\n    /***/\n  }, /* 66 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    var _libs = __webpack_require__(0);\n    var _Orbit = __webpack_require__(56);\n    var _Orbit2 = _interopRequireDefault(_Orbit);\n    var _ThreeMouseEventConverter = __webpack_require__(61);\n    var _ThreeMouseEventConverter2 = _interopRequireDefault(_ThreeMouseEventConverter);\n    var _ThreeTouchEventConverter = __webpack_require__(62);\n    var _ThreeTouchEventConverter2 = _interopRequireDefault(_ThreeTouchEventConverter);\n    var _Drag = __webpack_require__(48);\n    var _Drag2 = _interopRequireDefault(_Drag);\n    var _CSS3DRenderer = __webpack_require__(12);\n    var _CSS3DRenderer2 = _interopRequireDefault(_CSS3DRenderer);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var VisualWorld = function (_THREE$EventDispatche) {\n      _inherits(VisualWorld, _THREE$EventDispatche);\n      function VisualWorld(wnd, doc, container) {\n        var useHelpers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        _classCallCheck(this, VisualWorld);\n        var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));\n        _this.wnd = wnd;\n        _this.doc = doc;\n        _this.jContainer = container;\n        _this.renderCallbacks = [];\n        _this.clock = new _libs.THREE.Clock();\n        _this.raycaster = new _libs.THREE.Raycaster();\n        _this.scene = new _libs.THREE.Scene();\n        _this.cssScene = new _libs.THREE.Scene();\n        _this.camera = new _libs.THREE.PerspectiveCamera(30, _this.width() / _this.height(), 0.2, 2000);\n        var scale = 1;\n        _this.camera.position.x = 0;\n        _this.camera.position.y = 5.5 * scale;\n        _this.camera.position.z = 0;\n        _this.renderer = new _libs.THREE.WebGLRenderer({\n          alpha: true,\n          antialias: true\n        });\n        _this.renderer.setClearColor(0x000000, 0);\n        _this.renderer.setPixelRatio(_this.wnd.devicePixelRatio);\n        _this.renderer.setSize(_this.width(), _this.height());\n        _this.jContainer.append(_this.renderer.domElement);\n        _this.cssRenderer = new _CSS3DRenderer2.default();\n        _this.cssRenderer.setSize(_this.width(), _this.height());\n        (0, _libs.$)(_this.cssRenderer.domElement).css({\n          position: 'absolute',\n          top: 0,\n          margin: 0,\n          padding: 0\n        });\n        _this.jContainer.append(_this.cssRenderer.domElement);\n        _this.element = _this.cssRenderer.domElement;\n        _this.controls = new _Orbit2.default(_this.camera, _this.element);\n        _this.controls.target.y = 0.5;\n        var cssScene = (0, _libs.$)(_this.cssRenderer.domElement).find('div'),\n          tmpVector = new _libs.THREE.Vector3();\n        _this.controls.addEventListener('change', function () {\n          _this.camera.getWorldDirection(tmpVector);\n          cssScene.css('display', tmpVector.y - _this.camera.position.y > 0 ? 'none' : 'block');\n        });\n        _this.textureLoader = new _libs.THREE.TextureLoader();\n        _this.scene.add(new _libs.THREE.AmbientLight(0xD0D0D0)); //0xC0C0C0\n\n        _this.light = new _libs.THREE.DirectionalLight(0x404040, 1);\n        _this.light.position.set(0, 6 * scale, 0);\n        _this.light.castShadow = false;\n        // const d = 20*scale;\n        // this.light.shadow.camera.left = -d;\n        // this.light.shadow.camera.right = d;\n        // this.light.shadow.camera.top = d;\n        // this.light.shadow.camera.bottom = -d;\n        // this.light.shadow.camera.near = 1*scale;\n        // this.light.shadow.camera.far = 25*scale;\n        // this.light.shadow.mapSize.x = 1024;\n        // this.light.shadow.mapSize.y = 1024;\n        _this.scene.add(_this.light);\n        if (useHelpers) {\n          _this.scene.add(new _libs.THREE.AxisHelper(5));\n        }\n        _this.binds = {\n          onWindowResize: _this.onWindowResize.bind(_this),\n          animate: _this.animate.bind(_this)\n        };\n        (0, _libs.$)(_this.wnd).on('resize', _this.binds.onWindowResize);\n        _this.mouseEvents = new _ThreeMouseEventConverter2.default(_this.wnd, _this.doc, _this);\n        _this.touchEvents = new _ThreeTouchEventConverter2.default(_this.wnd, _this.doc, _this);\n        var filterData = {\n          type: 'mousemove'\n        };\n        _this.mouseEvents.filter = function (element, e) {\n          var types = ['mouseenter', 'mouseover', 'mouseleave', 'mouseout'],\n            contains = function contains(p, c) {\n              return p === c || _libs.$.contains(p, c);\n            };\n          if (e.type === 'mousemove') {\n            filterData.pageX = e.pageX;\n            filterData.pageY = e.pageY;\n          }\n          return e.relatedTarget && ~types.indexOf(e.type) && contains(element, e.target) && contains(element, e.relatedTarget) ? _extends({}, e, filterData) : e;\n        };\n        _this.drag = new _Drag2.default(_this.wnd, _this.doc, _this);\n        _this.animate();\n        return _this;\n      }\n      VisualWorld.prototype.dispose = function dispose() {\n        delete this.binds.animate;\n        (0, _libs.$)(this.wnd).off('resize', this.binds.onWindowResize);\n        this.mouseEvents.dispose();\n        this.touchEvents.dispose();\n        this.drag.dispose();\n        this.controls.dispose();\n      };\n      VisualWorld.prototype.width = function width() {\n        return this.jContainer.width();\n      };\n      VisualWorld.prototype.height = function height() {\n        return this.jContainer.height();\n      };\n      VisualWorld.prototype.setExtraLighting = function setExtraLighting(v) {\n        this.light.intensity = v;\n      };\n      VisualWorld.prototype.getOrbit = function getOrbit() {\n        return this.controls;\n      };\n      VisualWorld.prototype.setControlsState = function setControlsState(state) {\n        this.controls.enabled = state;\n      };\n      VisualWorld.prototype.getControlsState = function getControlsState() {\n        return this.controls.enabled;\n      };\n      VisualWorld.prototype.onWindowResize = function onWindowResize() {\n        var _this2 = this;\n        var updateCamera = function updateCamera(camera) {\n            camera.aspect = _this2.width() / _this2.height();\n            camera.updateProjectionMatrix();\n          },\n          updateRenderer = function updateRenderer(renderer) {\n            renderer.setSize(_this2.width(), _this2.height());\n          };\n        updateCamera(this.camera);\n        updateRenderer(this.renderer);\n        updateRenderer(this.cssRenderer);\n        this.dispatchEvent({\n          type: 'resize'\n        });\n      };\n      VisualWorld.prototype.addObject = function addObject(object) {\n        this.scene.add(object);\n      };\n      VisualWorld.prototype.addCssObject = function addCssObject(object) {\n        this.cssScene.add(object);\n      };\n      VisualWorld.prototype.removeCssObject = function removeCssObject(object) {\n        this.cssScene.remove(object);\n      };\n      VisualWorld.prototype.removeObject = function removeObject(object) {\n        this.scene.remove(object);\n      };\n      VisualWorld.prototype.animate = function animate() {\n        if (this.binds.animate) {\n          requestAnimationFrame(this.binds.animate);\n        }\n        this.render();\n      };\n      VisualWorld.prototype.addRenderCallback = function addRenderCallback(clb) {\n        this.renderCallbacks.push(clb);\n      };\n      VisualWorld.prototype.removeRenderCallback = function removeRenderCallback(clb) {\n        var i = this.renderCallbacks.indexOf(clb);\n        if (~i) {\n          this.renderCallbacks.splice(i, 1);\n        }\n      };\n      VisualWorld.prototype.render = function render() {\n        var deltaTime = this.clock.getDelta();\n        this.controls.update(deltaTime);\n        for (var _iterator = this.renderCallbacks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n          var clb = _ref;\n          clb(deltaTime);\n        }\n        this.cssRenderer.render(this.cssScene, this.camera);\n        this.renderer.render(this.scene, this.camera);\n      };\n      VisualWorld.prototype.processGeometry = function processGeometry(bufGeometry, mesh) {\n        mesh.geometry = bufGeometry;\n        // Obtain a Geometry\n        var geometry = new _libs.THREE.Geometry().fromBufferGeometry(bufGeometry);\n        // Merge the vertices so the triangle soup is converted to indexed triangles\n        geometry.mergeVertices();\n        // Convert again to BufferGeometry, indexed\n        var indexedBufferGeom = this.createIndexedBufferGeometryFromGeometry(geometry);\n        // Create index arrays mapping the indexed vertices to bufGeometry vertices\n        return this.mapIndices(bufGeometry, indexedBufferGeom);\n      };\n      VisualWorld.prototype.createIndexedBufferGeometryFromGeometry = function createIndexedBufferGeometryFromGeometry(geometry) {\n        var numVertices = geometry.vertices.length;\n        var numFaces = geometry.faces.length;\n        var bufferGeom = new _libs.THREE.BufferGeometry();\n        var vertices = new Float32Array(numVertices * 3);\n        var indices = new (numFaces * 3 > 65535 ? Uint32Array : Uint16Array)(numFaces * 3);\n        for (var i = 0; i < numVertices; i++) {\n          var p = geometry.vertices[i];\n          var i3 = i * 3;\n          vertices[i3] = p.x;\n          vertices[i3 + 1] = p.y;\n          vertices[i3 + 2] = p.z;\n        }\n        for (var _i2 = 0; _i2 < numFaces; _i2++) {\n          var f = geometry.faces[_i2];\n          var _i3 = _i2 * 3;\n          indices[_i3] = f.a;\n          indices[_i3 + 1] = f.b;\n          indices[_i3 + 2] = f.c;\n        }\n        bufferGeom.setIndex(new _libs.THREE.BufferAttribute(indices, 1));\n        bufferGeom.addAttribute('position', new _libs.THREE.BufferAttribute(vertices, 3));\n        return bufferGeom;\n      };\n      VisualWorld.prototype.isEqual = function isEqual(x1, y1, z1, x2, y2, z2) {\n        var delta = 0.000001;\n        return Math.abs(x2 - x1) < delta && Math.abs(y2 - y1) < delta && Math.abs(z2 - z1) < delta;\n      };\n      VisualWorld.prototype.mapIndices = function mapIndices(bufGeometry, indexedBufferGeom) {\n        // Creates mappedVertices, mappedIndices and mappedAssociation in bufGeometry\n        var vertices = bufGeometry.attributes.position.array;\n        var idxVertices = indexedBufferGeom.attributes.position.array;\n        var indices = indexedBufferGeom.index.array;\n        var numIdxVertices = idxVertices.length / 3;\n        var numVertices = vertices.length / 3;\n        bufGeometry.mappedVertices = idxVertices;\n        bufGeometry.mappedIndices = indices;\n        bufGeometry.mappedAssociation = [];\n        for (var i = 0; i < numIdxVertices; i++) {\n          var association = [];\n          bufGeometry.mappedAssociation.push(association);\n          var i3 = i * 3;\n          for (var j = 0; j < numVertices; j++) {\n            var j3 = j * 3;\n            if (this.isEqual(idxVertices[i3], idxVertices[i3 + 1], idxVertices[i3 + 2], vertices[j3], vertices[j3 + 1], vertices[j3 + 2])) {\n              association.push(j3);\n            }\n          }\n        }\n        return {\n          vertices: bufGeometry.mappedVertices,\n          indices: bufGeometry.mappedIndices\n        };\n      };\n      VisualWorld.prototype.oneNodePositionCallback = function oneNodePositionCallback(p, q) {\n        this.position.set(p.x, p.y, p.z);\n        this.quaternion.set(q.x, q.y, q.z, q.w);\n      };\n      VisualWorld.prototype.multyNodePositionCallback = function multyNodePositionCallback(node, p, n) {\n        var geometry = this.geometry;\n        var volumePositions = geometry.attributes.position.array;\n        var volumeNormals = geometry.attributes.normal.array;\n        var assocVertex = geometry.mappedAssociation[node];\n        for (var k = 0; k < assocVertex.length; k++) {\n          var indexVertex = assocVertex[k];\n          volumePositions[indexVertex] = p.x;\n          volumeNormals[indexVertex] = n.x;\n          ++indexVertex;\n          volumePositions[indexVertex] = p.y;\n          volumeNormals[indexVertex] = n.y;\n          ++indexVertex;\n          volumePositions[indexVertex] = p.z;\n          volumeNormals[indexVertex] = n.z;\n        }\n      };\n      VisualWorld.prototype.multyNodePositionPostCallback = function multyNodePositionPostCallback() {\n        var geometry = this.geometry;\n        geometry.attributes.position.needsUpdate = true;\n        geometry.attributes.normal.needsUpdate = true;\n      };\n      VisualWorld.prototype.pathPositionCallback = function pathPositionCallback(node, p) {\n        var positions = this.geometry.attributes.position.array;\n        var i = 3 * node;\n        positions[i++] = p.x;\n        positions[i++] = p.y;\n        positions[i] = p.z;\n      };\n      VisualWorld.prototype.pathPositionPostCallback = function pathPositionPostCallback() {\n        var geometry = this.geometry;\n        geometry.computeVertexNormals();\n        geometry.attributes.position.needsUpdate = true;\n        geometry.attributes.normal.needsUpdate = true;\n      };\n      return VisualWorld;\n    }(_libs.THREE.EventDispatcher);\n    exports.default = VisualWorld;\n\n    /***/\n  }, /* 67 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _Controller2 = __webpack_require__(15);\n    var _Controller3 = _interopRequireDefault(_Controller2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var WidgetController = function (_Controller) {\n      _inherits(WidgetController, _Controller);\n      function WidgetController(view) {\n        _classCallCheck(this, WidgetController);\n        var _this = _possibleConstructorReturn(this, _Controller.call(this));\n        _this.view = view;\n        _this.visible = false;\n        return _this;\n      }\n      WidgetController.prototype.togle = function togle() {\n        this.visible = !this.visible;\n        this.fireChange();\n      };\n      WidgetController.prototype.hide = function hide() {\n        this.visible = false;\n        this.fireChange();\n      };\n      WidgetController.prototype.fireChange = function fireChange() {\n        if (this.onChange) {\n          this.onChange();\n        }\n        this.updateView();\n      };\n      WidgetController.prototype.updateView = function updateView() {\n        if (this.view) {\n          this.view.setState('widFloatWnd', {\n            enable: true,\n            visible: this.visible,\n            active: false\n          });\n        }\n      };\n      return WidgetController;\n    }(_Controller3.default);\n    exports.default = WidgetController;\n\n    /***/\n  }, /* 68 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _Target2 = __webpack_require__(21);\n    var _Target3 = _interopRequireDefault(_Target2);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var CircleTarget = function (_Target) {\n      _inherits(CircleTarget, _Target);\n      function CircleTarget(x, y, r) {\n        _classCallCheck(this, CircleTarget);\n        var _this = _possibleConstructorReturn(this, _Target.call(this));\n        _this.p = {\n          x: x,\n          y: y,\n          r: r\n        };\n        return _this;\n      }\n      CircleTarget.prototype.testIntersection = function testIntersection(e, data) {\n        var res = void 0;\n        var x = data.x,\n          y = data.y,\n          p = this.p;\n        if ((x - p.x) * (x - p.x) + (y - p.y) * (y - p.y) <= p.r * p.r) {\n          res = {\n            target: this,\n            data: data\n          };\n        }\n        return res;\n      };\n      return CircleTarget;\n    }(_Target3.default);\n    exports.default = CircleTarget;\n\n    /***/\n  }, /* 69 */\n  /***/function (module, exports, __webpack_require__) {\n    \"use strict\";\n    'use strict';\n\n    exports.__esModule = true;\n    var _Target2 = __webpack_require__(21);\n    var _Target3 = _interopRequireDefault(_Target2);\n    var _BaseMathUtils = __webpack_require__(2);\n    var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    var PolyTarget = function (_Target) {\n      _inherits(PolyTarget, _Target);\n      function PolyTarget(poly) {\n        _classCallCheck(this, PolyTarget);\n        var _this = _possibleConstructorReturn(this, _Target.call(this));\n        _this.poly = poly;\n        return _this;\n      }\n      PolyTarget.prototype.testIntersection = function testIntersection(e, p) {\n        return _BaseMathUtils2.default.isInsidePoly(this.poly, p) ? {\n          target: this,\n          data: p\n        } : undefined;\n      };\n      return PolyTarget;\n    }(_Target3.default);\n    exports.default = PolyTarget;\n\n    /***/\n  }, /* 70 */\n  /***/function (module, exports, __webpack_require__) {\n    // stats.js - http://github.com/mrdoob/stats.js\n    (function (f, e) {\n      true ? module.exports = e() : \"function\" === typeof define && define.amd ? define(e) : f.Stats = e();\n    })(this, function () {\n      var f = function f() {\n        function e(a) {\n          c.appendChild(a.dom);\n          return a;\n        }\n        function u(a) {\n          for (var d = 0; d < c.children.length; d++) {\n            c.children[d].style.display = d === a ? \"block\" : \"none\";\n          }\n          l = a;\n        }\n        var l = 0,\n          c = document.createElement(\"div\");\n        c.style.cssText = \"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";\n        c.addEventListener(\"click\", function (a) {\n          a.preventDefault();\n          u(++l % c.children.length);\n        }, !1);\n        var k = (performance || Date).now(),\n          g = k,\n          a = 0,\n          r = e(new f.Panel(\"FPS\", \"#0ff\", \"#002\")),\n          h = e(new f.Panel(\"MS\", \"#0f0\", \"#020\"));\n        if (self.performance && self.performance.memory) var t = e(new f.Panel(\"MB\", \"#f08\", \"#201\"));\n        u(0);\n        return {\n          REVISION: 16,\n          dom: c,\n          addPanel: e,\n          showPanel: u,\n          begin: function begin() {\n            k = (performance || Date).now();\n          },\n          end: function end() {\n            a++;\n            var c = (performance || Date).now();\n            h.update(c - k, 200);\n            if (c > g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {\n              var d = performance.memory;\n              t.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);\n            }\n            return c;\n          },\n          update: function update() {\n            k = this.end();\n          },\n          domElement: c,\n          setMode: u\n        };\n      };\n      f.Panel = function (e, f, l) {\n        var c = Infinity,\n          k = 0,\n          g = Math.round,\n          a = g(window.devicePixelRatio || 1),\n          r = 80 * a,\n          h = 48 * a,\n          t = 3 * a,\n          v = 2 * a,\n          d = 3 * a,\n          m = 15 * a,\n          n = 74 * a,\n          p = 30 * a,\n          q = document.createElement(\"canvas\");\n        q.width = r;\n        q.height = h;\n        q.style.cssText = \"width:80px;height:48px\";\n        var b = q.getContext(\"2d\");\n        b.font = \"bold \" + 9 * a + \"px Helvetica,Arial,sans-serif\";\n        b.textBaseline = \"top\";\n        b.fillStyle = l;\n        b.fillRect(0, 0, r, h);\n        b.fillStyle = f;\n        b.fillText(e, t, v);\n        b.fillRect(d, m, n, p);\n        b.fillStyle = l;\n        b.globalAlpha = .9;\n        b.fillRect(d, m, n, p);\n        return {\n          dom: q,\n          update: function update(h, w) {\n            c = Math.min(c, h);\n            k = Math.max(k, h);\n            b.fillStyle = l;\n            b.globalAlpha = 1;\n            b.fillRect(0, 0, r, m);\n            b.fillStyle = f;\n            b.fillText(g(h) + \" \" + e + \" (\" + g(c) + \"-\" + g(k) + \")\", t, v);\n            b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p);\n            b.fillRect(d + n - a, m, a, p);\n            b.fillStyle = l;\n            b.globalAlpha = .9;\n            b.fillRect(d + n - a, m, a, g((1 - h / w) * p));\n          }\n        };\n      };\n      return f;\n    });\n\n    /***/\n  }, /* 71 */\n  /***/function (module, exports, __webpack_require__) {\n    /*** IMPORTS FROM imports-loader ***/\n    var define = false;\n\n    /*!\r\n     * jQuery Mousewheel 3.1.13\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license\r\n     * http://jquery.org/license\r\n     */\n\n    (function (factory) {\n      if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n      } else if (true) {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n      } else {\n        // Browser globals\n        factory(jQuery);\n      }\n    })(function ($) {\n      var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n        toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n        slice = Array.prototype.slice,\n        nullLowestDeltaTimeout,\n        lowestDelta;\n      if ($.event.fixHooks) {\n        for (var i = toFix.length; i;) {\n          $.event.fixHooks[toFix[--i]] = $.event.mouseHooks;\n        }\n      }\n      var special = $.event.special.mousewheel = {\n        version: '3.1.12',\n        setup: function setup() {\n          if (this.addEventListener) {\n            for (var i = toBind.length; i;) {\n              this.addEventListener(toBind[--i], handler, false);\n            }\n          } else {\n            this.onmousewheel = handler;\n          }\n          // Store the line height and page height for this particular element\n          $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n          $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n        },\n        teardown: function teardown() {\n          if (this.removeEventListener) {\n            for (var i = toBind.length; i;) {\n              this.removeEventListener(toBind[--i], handler, false);\n            }\n          } else {\n            this.onmousewheel = null;\n          }\n          // Clean up the data we added to the element\n          $.removeData(this, 'mousewheel-line-height');\n          $.removeData(this, 'mousewheel-page-height');\n        },\n        getLineHeight: function getLineHeight(elem) {\n          var $elem = $(elem),\n            $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n          if (!$parent.length) {\n            $parent = $('body');\n          }\n          return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n        },\n        getPageHeight: function getPageHeight(elem) {\n          return $(elem).height();\n        },\n        settings: {\n          adjustOldDeltas: true,\n          // see shouldAdjustOldDeltas() below\n          normalizeOffset: true // calls getBoundingClientRect for each event\n        }\n      };\n      $.fn.extend({\n        mousewheel: function mousewheel(fn) {\n          return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n        },\n        unmousewheel: function unmousewheel(fn) {\n          return this.unbind('mousewheel', fn);\n        }\n      });\n      function handler(event) {\n        var orgEvent = event || window.event,\n          args = slice.call(arguments, 1),\n          delta = 0,\n          deltaX = 0,\n          deltaY = 0,\n          absDelta = 0,\n          offsetX = 0,\n          offsetY = 0;\n        event = $.event.fix(orgEvent);\n        event.type = 'mousewheel';\n\n        // Old school scrollwheel delta\n        if ('detail' in orgEvent) {\n          deltaY = orgEvent.detail * -1;\n        }\n        if ('wheelDelta' in orgEvent) {\n          deltaY = orgEvent.wheelDelta;\n        }\n        if ('wheelDeltaY' in orgEvent) {\n          deltaY = orgEvent.wheelDeltaY;\n        }\n        if ('wheelDeltaX' in orgEvent) {\n          deltaX = orgEvent.wheelDeltaX * -1;\n        }\n\n        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n        if ('axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS) {\n          deltaX = deltaY * -1;\n          deltaY = 0;\n        }\n\n        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        // New school wheel delta (wheel event)\n        if ('deltaY' in orgEvent) {\n          deltaY = orgEvent.deltaY * -1;\n          delta = deltaY;\n        }\n        if ('deltaX' in orgEvent) {\n          deltaX = orgEvent.deltaX;\n          if (deltaY === 0) {\n            delta = deltaX * -1;\n          }\n        }\n\n        // No change actually happened, no reason to go any further\n        if (deltaY === 0 && deltaX === 0) {\n          return;\n        }\n\n        // Need to convert lines and pages to pixels if we aren't already in pixels\n        // There are three delta modes:\n        //   * deltaMode 0 is by pixels, nothing to do\n        //   * deltaMode 1 is by lines\n        //   * deltaMode 2 is by pages\n        if (orgEvent.deltaMode === 1) {\n          var lineHeight = $.data(this, 'mousewheel-line-height');\n          delta *= lineHeight;\n          deltaY *= lineHeight;\n          deltaX *= lineHeight;\n        } else if (orgEvent.deltaMode === 2) {\n          var pageHeight = $.data(this, 'mousewheel-page-height');\n          delta *= pageHeight;\n          deltaY *= pageHeight;\n          deltaX *= pageHeight;\n        }\n\n        // Store lowest absolute delta to normalize the delta values\n        absDelta = Math.max(Math.abs(deltaY), Math.abs(deltaX));\n        if (!lowestDelta || absDelta < lowestDelta) {\n          lowestDelta = absDelta;\n\n          // Adjust older deltas if necessary\n          if (shouldAdjustOldDeltas(orgEvent, absDelta)) {\n            lowestDelta /= 40;\n          }\n        }\n\n        // Adjust older deltas if necessary\n        if (shouldAdjustOldDeltas(orgEvent, absDelta)) {\n          // Divide all the things by 40!\n          delta /= 40;\n          deltaX /= 40;\n          deltaY /= 40;\n        }\n\n        // Get a whole, normalized value for the deltas\n        delta = Math[delta >= 1 ? 'floor' : 'ceil'](delta / lowestDelta);\n        deltaX = Math[deltaX >= 1 ? 'floor' : 'ceil'](deltaX / lowestDelta);\n        deltaY = Math[deltaY >= 1 ? 'floor' : 'ceil'](deltaY / lowestDelta);\n\n        // Normalise offsetX and offsetY properties\n        if (special.settings.normalizeOffset && this.getBoundingClientRect) {\n          var boundingRect = this.getBoundingClientRect();\n          offsetX = event.clientX - boundingRect.left;\n          offsetY = event.clientY - boundingRect.top;\n        }\n\n        // Add information to the event object\n        event.deltaX = deltaX;\n        event.deltaY = deltaY;\n        event.deltaFactor = lowestDelta;\n        event.offsetX = offsetX;\n        event.offsetY = offsetY;\n        // Go ahead and set deltaMode to 0 since we converted to pixels\n        // Although this is a little odd since we overwrite the deltaX/Y\n        // properties with normalized deltas.\n        event.deltaMode = 0;\n\n        // Add event and delta to the front of the arguments\n        args.unshift(event, delta, deltaX, deltaY);\n\n        // Clearout lowestDelta after sometime to better\n        // handle multiple device types that give different\n        // a different lowestDelta\n        // Ex: trackpad = 3 and mouse wheel = 120\n        if (nullLowestDeltaTimeout) {\n          clearTimeout(nullLowestDeltaTimeout);\n        }\n        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n        return ($.event.dispatch || $.event.handle).apply(this, args);\n      }\n      function nullLowestDelta() {\n        lowestDelta = null;\n      }\n      function shouldAdjustOldDeltas(orgEvent, absDelta) {\n        // If this is an older event and the delta is divisable by 120,\n        // then we are assuming that the browser is treating this as an\n        // older mouse wheel event and that we should divide the deltas\n        // by 40 to try and get a more usable deltaFactor.\n        // Side note, this actually impacts the reported scroll distance\n        // in older browsers and can cause scrolling to be slower than native.\n        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n      }\n    });\n\n    /***/\n  }, /* 72 */\n  /***/function (module, exports, __webpack_require__) {\n    __webpack_require__(23);\n    module.exports = __webpack_require__(22);\n\n    /***/\n  }\n  /******/]);\n\n  /***/\n}), (/* 2 */\n/***/function (module, exports, __webpack_require__) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  var _$ = true ? window.jQuery : require('jquery'),\n    _html2canvas = true ? window.html2canvas : require('html2canvas'),\n    _THREE = true ? window.THREE : require('three'),\n    _PDFJS = true ? window.PDFJS : require('pdfjs');\n  exports.$ = _$;\n  exports.html2canvas = _html2canvas;\n  exports.THREE = _THREE;\n  exports.PDFJS = _PDFJS;\n\n  /***/\n}), (/* 3 */\n/***/function (module, exports, __webpack_require__) {\n  module.exports = __webpack_require__(0);\n\n  /***/\n}\n/******/)]);","map":{"version":3,"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","_libs","_$","window","jQuery","require","_html2canvas","html2canvas","_THREE","THREE","_React","React","_ReactDOM","ReactDOM","_PDFJS","PDFJS","_tr","iberezansky","tr","$","FB3D_LOCALE","_extends","dictionary","BaseMathUtils","sum1","ka","a","kb","b","sum2","sum3","sum4","rk4","dy","t","dt","y","sum","arguments","length","undefined","k1","k2","k3","k4","extrapolateLinear","x","xi","interpolateLinear","yi","reverse","calcScale","srcW","srcH","dstW","dstH","Math","min","mulM","r","push","j","k","transM","mat","data","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","disp","M","_iterator2","_isArray2","_i2","_ref2","predict","num","D","am","bm","ta","_i3","v","round","indexOf","getUnique","ceil","random","setSplinePoints","spline","ps","points","console","warn","set","z","mapl2L","ls","len","f","dL","L","abs","det2","solve2Lin","a1","b1","a2","b2","res","eps","dx","isInsidePoly","ct","v2dist","np","rn","_i4","p0","p1","ip","max","tn","isInsideConvPoly","sg","v2len","v2","sqrt","v21","v22","computeSquare","computeInterpCoefs","tri","coefs","_BaseMathUtils2","MathUtils","splitSpline","N","dl","getPoint","v1","distanceTo","copy","getLinearIndeces","del","dDel","_d","refinePoly","poly","maxDl","_BaseMathUtils3","default","Vector2","Vector3","Utils","normalizeUrl","url","split","replace","base","location","href","join","extends","der","defaultCmp","lowerBound","cmp","h","mid","floor","_GraphUtils","ImageBase","context","width","height","color","_classCallCheck","wnd","doc","element","body","renderCanvas","ctx","renderCanvasCtx","resW","resH","setResolution","dispose","renderBlankPage","beginPath","fillStyle","_GraphUtils2","color2Rgba","rect","fill","renderImage","image","pushCtx","drawImage","popCtx","normToConv","renderHit","moveTo","lineTo","closePath","save","scale","restore","renderNotFoundPage","finishRender","onChange","finishLoad","onLoad","startRender","getSimulatedDoc","getContext","EventConverter","enabled","setEnable","vl","mCapObject","notify","Event","mHovObject","getCallback","e","type","callback","props","view","jE","convert","filter","getObject","convertTouch","convertMouse","tCapObject","test","GraphUtils","interpolate01","y1","y2","getColorBytes","inverseColor","bs","ibs","nbs","bytes2Color","bytes2Rgba","_Cache","_BlankImage","_StaticImage","_PdfImage","_InteractiveImage","ImageFactory","cache","_Cache2","build","info","widthTexels","heightTexels","injector","_InteractiveImage2","src","_StaticImage2","_PdfImage2","_BlankImage2","_book","_BaseMathUtils","BookPropsBuilder","onReady","defaults","calcSize","calcTexels","sheet","calcProps","cover","page","calcSheets","pages","sheets","getSheets","getProps","getPageCallback","binds","pageCallback","ready","_sheetBlock","_MathUtils","_ThreeUtils","SheetBlock","visual","first","last","angle","_this","state","loadedPoints","loadPoints","keys","map","shape","pSpline","Spline","interpolationPoints","iSpline","_sheetBlock2","resX","aSplines","geometry","clone","sideFaces","faces","sideTexture","Texture","wrapT","RepeatWrapping","repeat","needsUpdate","materials","MeshPhongMaterial","setTexture","mesh","Mesh","MeshFaceMaterial","castShadow","receiveShadow","three","userData","self","markers","marker","use","vertices","is","apply","_","_ThreeUtils2","createMarker","size","vertex","add","corner","maxDistance","OZ","axis","getSize","getTopCerners","off","PI","resZ","getTopSize","vs","getTopWorldRotation","q","getTopWorldPosition","_iterator3","_isArray3","_i5","_ref3","vi","localToWorld","getInterpolationPoints","inds","mod","K","wave","_iterator4","_isArray4","_i6","_ref4","concat","closedAngle","binderTurn","_typeof","openedAngle","closedInterpolationIndeces","flatInterpolationIndeces","getPointsAtAngle","openedInterpolationIndeces","hl","hr","offset","depth","inAngle","hAngle","_getPointsAtAngleAndH","getPointsAtAngleAndHs","left","right","inverse","setPoints","_this2","ys","resY","plane","Plane","normal","planeOffset","flexibleCorner","proj","setFromNormalAndCoplanarPoint","normalize","_i7","projectPoint","sub","distance","d2Angle","cornerDeviation","exp","bending","applyAxisAngle","_iterator5","_isArray5","_i8","_ref5","point","_iterator6","_isArray6","_i9","_ref6","position","computeVertexNormals","computeBoundingSphere","verticesNeedUpdate","markup","computeVertices","getPointsAtHs","hs","_this3","_MathUtils2","bl","p2","dp","ln","sp","sin","cos","_p","nps","_loop","angles","xps","yps","_j","interpolate","_i10","_arr","_i11","gravity","cachedPages","renderInactivePages","renderInactivePagesOnMobile","renderWhileFlipping","pagesForPredicting","preloadPages","rtl","startVelocity","flexibility","binderTexture","padding","mass","cssLayerProps","CSS3DObject","_THREE$Object3D","_inherits","_possibleConstructorReturn","style","addEventListener","parentNode","removeChild","Object3D","CSS3DSprite","_THREE$CSS3DObject","CSS3DRenderer","_width","_height","_widthHalf","_heightHalf","matrix","Matrix4","camera","fov","objects","domElement","document","createElement","overflow","cameraElement","WebkitTransformStyle","MozTransformStyle","transformStyle","appendChild","isIE","navigator","userAgent","setClearColor","setSize","epsilon","getCameraCSSMatrix","elements","getObjectCSSMatrix","cameraCSSMatrix","matrix3d","renderObject","matrixWorldInverse","transpose","copyPosition","matrixWorld","cachedStyle","id","WebkitTransform","MozTransform","transform","distanceToCameraSquared","getDistanceToSquared","children","object1","object2","setFromMatrixPosition","distanceToSquared","zOrder","scene","order","sort","zMax","traverse","index","zIndex","render","projectionMatrix","WebkitPerspective","MozPerspective","perspective","updateMatrixWorld","parent","_CSS3DObject","_CSS3DSprite","_CSS3DRenderer","CSSLayer","init","delay","appendTo","head","remove","jContainer","widthPxs","heightPxs","setData","callInternal","error","clearInternals","css","html","js","eval","pendedCall","clb","timestamp","Date","now","setTimeout","isHidden","hasClass","hide","addClass","Promise","resolve","show","_this4","removeClass","Cache","maxSize","Infinity","sizeof","countSizeof","os","Map","forEach","locked","delete","freeSpace","arr","key","recursionSizeof","getTimestamp","put","Controller","handleDefault","dispatchAsync","then","dispatchEvent","EventDispatcher","_EventConverter2","CustomEventConverter","customTest","eDoc","_EventConverter","customs","target","addCustom","custom","testIntersection","_Utils","Finder","isDelimetr","DELIMITER","merge","as","strs","charAt","str","addHits","_Utils2","chars","pattern","delimeter","hits","addContext","dels","contextLength","prevDels","contexts","substr","getHits","getContexts","toLowerCase","lstr","workerSrc","PDFJS_LOCALE","pdfJsWorker","cMapUrl","pdfJsCMapUrl","cMapPacked","Pdf","loadingProgress","handlerQueue","progresData","loaded","total","getDocument","rangeChunkSize","cur","old","isNaN","handler","numPages","all","getPage","doubledPages","getPageSize","_ret","getPageType","getPagesNum","splice","setLoadingProgressClb","getHandler","ThreeEventConverterFs","objectsTest","objectsAndFacesTest","face","materialIndex","visualWorld","coords","raycaster","threes","addThree","removeThree","setCoordsFromEvent","setFromCamera","intersects","intersectObjects","ThreeUtils","vertices2UVs","indeces","converClb","vis","computeFaceVertexUvs","uvs","uvsi","faceVertexUvs","SphereGeometry","findUvTris","found","findInternalVertices","vertexNormals","values","Target","_Detector","_VisualWorld","_PdfLinksHandler","_Book","_BookView","_BookController","_PdfBookPropsBuilder","_ClbBookPropsBuilder","_LoadingController","_Search","_Bookmarks","_Thumbnails","_TocController","_BookPrinter","_AutoNavigator","_SoundsEnviroment","fn","FlipBook","options","pdfLinksHandler","sounds","tocCtrl","thumbnails","bookmarks","ctrl","bookPrinter","book","propsBuilder","bookBuilder","pendingDispose","_BookView2","_Detector2","webgl","addGetWebGLMessage","getView","loadingCtrl","_LoadingController2","progress","_VisualWorld2","getContainer","ownerDocument","defaultView","propertiesCallback","_Book2","_BookPrinter2","template","printStyle","_BookController2","controlsProps","setInjector","w","bookCtrl","addHandler","setPrinter","search","_Search2","getSearchView","getPages","onQuery","setQuery","bind","setResults","results","lastPage","_Thumbnails2","getThumbnailsView","kWtoH","_TocController2","setThumbnails","setSearch","setTocCtrl","_PdfLinksHandler2","handleEvent","getOutline","outline","_Bookmarks2","getBookmarksView","setBookmarks","pdfLinks","setHandler","_SoundsEnviroment2","setSounds","subscribeFlips","_AutoNavigator2","autoNavigation","pdf","_PdfBookPropsBuilder2","setProgress","_ClbBookPropsBuilder2","containers","attr","TypeError","O","start","relativeStart","end","relativeEnd","final","find","predicate","list","thisArg","findIndex","AutoNavigator","urlParam","navigates","fb3d","instances","goToPage","getPageNumber","getParameterByName","regex","RegExp","exec","decodeURIComponent","number","parseInt","Binder","backSize","backG","BoxGeometry","backM","textureLoader","load","texture","setHex","minFilter","LinearFilter","back","backRT","backRR","backLT","backLR","leftPivot","rightPivot","tr1","quaternion","setFromAxisAngle","tr2","setLeft","setRight","joinLeftCover","disconnectLeftCover","joinRightCover","disconnectRightCover","_Binder","_Cover","_SheetBlock","_SheetPhysics","_PageManager","_CSSLayer","_CssLayersManager","_SearchEngine","_CustomEventConverter","_CircleTarget","Book","_THREE$EventDispatche","append","mouseController","prepareProps","zoom","singlePage","autoResolution","enable","pageManager","_PageManager2","_CSSLayer2","layerManager","_CssLayersManager2","searchEngine","_SearchEngine2","onPageHitsChanged","query","refreshPageQuery","binder","_Binder2","leftCover","_Cover2","setLeftCoverTexture","subscribeSheetBlock","rightCover","setRightCoverTexture","threeSheetBlocks","sheetBlocks","addSheetBlock","_SheetBlock2","setPageTexture","lastMousePos","sheetPhysics","_SheetPhysics2","update","pageX","pageY","addRenderCallback","on","onPickCallback","drag","onDragCallback","onReleaseCallback","dragAngle","tmp","boxs","Box3","addObject","refreshZoom","notifyBeforeAnimation","notifyAfterAnimation","removeObject","removeRenderCallback","removeSheetBlocks","removeSheetBlock","setAutoResolution","setZoom","isProcessing","setFlipProgressClb","flipProgressClb","isActivePage","getBlockByPage","block","getBlockPages","range","getTopPages","getPageState","enableLoadingAnimation","getLeftFlipping","getRightFlipping","getClosedBlockAngle","physicId","getParametr","_test","flipLeft","progressClb","connectPhysics","setSheetBlocks","splitSheetBlock","finishAnimationClb","flipRight","clearHoverInfo","turnOnEvents","hoverInfo","force","cornerForce","xSegment","setFromObject","union","computeTarget","seg","uv","cornerTarget","dragForceClb","getDragCornerForceClb","dragInfo","turnOffEvents","getFlipping","flip","enableMouse","cornerCallback","_data$data","pendings","hoverAngle","hover","possible","nextBlock","setParametr","getTargetForceClb","hoverCornerForceClb","cornerClickData","pow","_this5","eventConverter","_CustomEventConverter2","_CircleTarget2","mouseCallback","transferEventToTexture","touchCallback","mouseEvents","touchEvents","blocks","material","mergeSheetBlocks","calcBlockForce","velocity","cornerHeight","calcBlockCornerForce","animationNotification","reject","coverHeight","simulateClb","removeClb","_this6","angl","ch","catch","_this7","lastT","trigger","simulate","leftSize","newBlock","firstBlock","lastBlock","_a","_a2","_a3","_a4","_a5","createSideTexture","jC","mergeProps","second","_Controller2","_bookController","_EventsToActions","_stats","_Object3DWatcher","_FullScreen","BookController","_Controller","navigationControls","devicePixelRatio","orbit","getOrbit","updateViewIfState","bindActions","smartPan","actions","active","activeForMobile","stats","lighting","activeSide","bookWatcher","_Object3DWatcher2","Stats","_stats2","top","setExtraLighting","onScreenModeChanged","onUpdateView","updateView","_FullScreen2","getParentContainer","cmdSmartPan","templateObject","appLoaded","loadingAnimation","skin","initLoadingAnimation","coefficient","removeEventListener","visible","setState","enableNavigation","printer","setEnabled","canZoomIn","canZoomOut","canDefaultZoom","setBookZoom","cmdZoomIn","delta","zoomIn","cmdZoomOut","zoomOut","cmdDefaultZoom","cmdToc","togle","cmdFastBackward","startFlip","cmdBackward","cmdForward","cmdFastForward","cmdSave","open","downloadURL","cmdPrint","print","cmdFullScreen","activated","request","cancel","minAzimuthAngle","maxAzimuthAngle","minPolarAngle","maxPolarAngle","cmdSinglePage","cmdSounds","cmdStats","cmdLightingUp","cmdLightingDown","pageNum","current","flips","covs","cv","setClb","fl","time","flipRes","endFlip","getPageForGUI","inpPage","updateViewState","viewState","available","flippersEnable","getActions","_this8","isSwipping","touchCmdSwipe","code","cmds","activate","cmdPanLeft","pan","speed","cmdPanRight","cmdPanUp","cmdPanDown","mouseCmdRotate","rotate","mouseCmdDragZoom","mouseCmdPan","mouseCmdWheelZoom","preventDefault","deltaY","touchCmdRotate","touchCmdZoom","touchCmdPan","touch","touches","originalEvent","swipeData","handled","x0","y0","widSettings","eToA","_EventsToActions2","addAction","mouseButtons","Right","action","flags","setActions","_iterator7","_isArray7","_ref7","levels","BookPrinter","styleSheet","pdfSrc","canceled","frame","printWnd","callManually","useIFrame","contentWindow","renderContent","content","printDoc","write","close","onProgress","Set","renderHtml","renderHead","wrap","links","match","link","fail","responseText","defaultStyleSheet","isChromium","chrome","winNav","vendorName","vendor","isIEedge","isIOSChrome","_View2","BookView","container","_View","initView","bookmarksView","thumbnailsView","searchView","getHandlers","handlers","callLater","PAGE_HANDLER_DELAY","onItemStateChanged","parentContainer","getForms","getLinks","getWidgets","getInputs","getTexts","getTemplate","styles","rel","script","_BookPropsBuilder2","_ImageFactory","ClbBookPropsBuilder","_BookPropsBuilder","imageFactory","_ImageFactory2","Cover","_SheetCssLayer","CssLayersManager","wrappers","getActives","layers","hidden","getLayers","sl","_SheetCssLayer2","wait","_w","_LoadingAnimation","_TextureAnimator","PageManager","pageQuery","pageCache","resourcesCache","canvas","loadings","renderQueue","pageRequests","predictedRequests","tmpMaterial","MeshBasicMaterial","PlaneGeometry","loading","createLoadingTexture","updateRenderQueue","spriteTiles","animation","_LoadingAnimation2","animator","_TextureAnimator2","createSprite","isCover","isMobile","setupMaterial","isActive","removeFromLoadings","removeFromRenderQueue","wrapper","pushInRenderQueue","es","cssLayersLoader","_len","args","_key","resolvePendings","rtlPageN","pi","isTop","setMaterial","calcResolution","interactive","Color","onUpdate","rendering","isSinglePage","transferEvents","mouseup","mouseout","ent","toObject","getOrLoadTextureObject","toDoc","loadPredictedPages","addPageRequest","shift","ob","_Pdf","PdfBookPropsBuilder","_Pdf2","pageDescription","PdfLinksHandler","cursors","defaultHandler","destination","callHandlers","event","anno","annotation","pop","dest","destPromise","getDestination","getPageIndex","_Finder","SearchEngine","process","stamp","getTextContent","textContent","_Finder2","items","item","SheetCssLayer","layer","addCssObject","removeCssObject","rotation","SheetPhysics","targetForceClb","g","tl","targetAngle","flbt","dragCornerForceClb","fps","startDt","margin","infM","attempts","maxIterations","forceClb","cornerForceClb","no","cf","getParametrMap","T","attempt","it","nos","integrate","ci","findCollisions","scos","solveCollision","gs","i0","findAndSolveCornerCollisions","removeStatics","_o","_o2","al","dCh","dv","mm","av","bv","isCollision","SoundsEnviroment","audio","Audio","play","pause","currentTime","emitter","_WidgetController2","TocController","_WidgetController","tab","onNavigate","navigateThumbnails","fireChange","navigateSearch","navigateBookmarks","isBookmarks","cmdBookmarks","cmdThumbnails","cmdSearch","cmdCloseToc","frontGeometry","translate","backGeometry","rotateY","leftGeometry","rightGeometry","topGeometry","rotateX","bottomGeometry","Geometry","addFaces","fs","Face3","mapVertices","dst","eq","frontMap","backMap","leftMap","rightMap","Left","Middle","_ImageBase2","BlankImage","_ImageBase","Bookmarks","getTitle","title","getItems","nodes","mapNodes","li","cmd","node","minimized","renderNode","renderNodes","expand","minimize","level","Detector","getWebGLErrorMessage","fontFamily","fontSize","fontWeight","textAlign","background","innerHTML","WebGLRenderingContext","parameters","CanvasRenderingContext2D","workers","Worker","fileapi","File","FileReader","FileList","Blob","DocMouseSimulator","jFrame","bElement","contentDocument","resendProperties","getDefaultResendProperties","undefinedProperties","getDefaultUndefinedProperties","onDocChangeClbs","terms","HOVER","ACTIVE","styleSheets","ss","cssRules","cssText","term","selectorText","convertCoords","jElement","triggerEvent","advancedProps","_n","_n2","timeStamp","getComputedStyle","getPropertyValue","enterElement","leaveElement","activateElement","deactivateElement","addDocChangeClb","elementFromPoint","childNodes","child","Element","getElement","off0","innerWidth","innerHeight","capElement","leaved","hovElement","relatedTarget","Dom2Image","util","newUtil","inliner","newInliner","fontFaces","newFontFaces","images","newImages","toSvg","toPng","toJpeg","toBlob","toPixelData","impl","cloneNode","embedFonts","inlineImages","applyOptions","makeSvgDataUri","bgcolor","backgroundColor","draw","getImageData","toDataURL","quality","canvasToBlob","domNode","makeImage","newCanvas","fillRect","root","makeNodeCopy","cloneChildren","processClone","isCanvas","original","cloneChildrenInOrder","asArray","childClone","isElement","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","source","copyProperties","setProperty","getPropertyPriority","clonePseudoElement","className","uid","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","formatProperty","isTextArea","isInput","setAttribute","isSVG","isSVGRect","attribute","getAttribute","resolveAll","styleNode","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","escape","parseExtension","mimeType","dataAsUrl","isDataUrl","resolveUrl","getAndEncode","isImage","mimes","WOFF","JPEG","extension","binaryString","atob","binaryArray","Uint8Array","charCodeAt","baseUrl","implementation","createHTMLDocument","fourRandomChars","toString","slice","uri","Image","onload","onerror","TIMEOUT","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","send","readyState","status","encoder","onloadend","result","_resolve","readAsDataURL","response","message","string","ms","arg","arrayLike","array","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","parseFloat","HTMLCanvasElement","HTMLTextAreaElement","HTMLInputElement","SVGElement","SVGRectElement","HTMLImageElement","URL_REGEX","shouldProcess","readUrls","inline","dataUrl","urlAsRegex","nothingToInline","urls","readAll","webFonts","webFont","cssStrings","getCssRules","selectWebFontRules","rules","newWebFont","rule","CSSRule","FONT_FACE_RULE","log","webFontRule","parentStyleSheet","newImage","inlineBackground","inlined","Drag","intersection","selected","controlsState","getControlsState","onMouseMove","onMouseDown","onMouseUp","ray","origin","setControlsState","getWorldDirection","intersectPlane","EventsToActions","getEventFlags","ctrlKey","shiftKey","altKey","getPosition","contextMenu","mouseDown","mouseMove","mouseUp","mouseWheel","mouseMoveDoc","mouseUpDoc","click","dblclick","touchStart","touchMove","touchEnd","keyDown","keyPress","keyUp","fireActions","button","picked","clicks","touchPick","touchPicked","pos","keyCode","modKeys","Ctrl","Shift","Alt","FullScreen","_hasWebkitFullScreen","_hasMozFullScreen","_hasMsFullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","assert","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","documentElement","_Dom2Image","_DocMouseSimulator","InteractiveImage","iId","hasFeature","imageLoad","svgRender","_Dom2Image2","frameLoad","simulator","_DocMouseSimulator2","LoadingAnimation","calcTimeTo","updateInterval","clearRect","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","font","textBaseline","fillText","da","_r","cx","cy","nx","ny","arc","getImage","sign","LoadingController","showProgress","loadingMsg","getLoadingMsg","defaultLoadingMsg","MouseEventConverter","Object3DWatcher","boundBoxClb","testScale","elementSize","vx","vy","box","computeClientBoundBox","movePan","vToCamera","project","xs","zs","setObject","computeCorr","corr","getScale","Kx","Ky","centerView","setScale","tf","_MathUtils$rk","Y","vd","Orbit","minDistance","minZoom","maxZoom","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","autoRotate","autoRotateSpeed","target0","position0","zoom0","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","reset","scope","updateProjectionMatrix","changeEvent","_speed","dollyIn","getZoomScale","dollyOut","newScale","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","radius","panOffset","setFromSpherical","lookAt","zoomChanged","EPS","dot","Spherical","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","deltaX","PerspectiveCamera","targetDistance","tan","clientHeight","OrthographicCamera","clientWidth","bottom","dollyScale","offsetDolly","wheelDolly","_PolyTarget","PdfImage","m00","m01","m02","m10","m11","m12","m20","m21","m22","trim","setHits","rectSize","createPoly","setAnnotations","annos","viewport","targets","subtype","aPos","aSz","_target","_PolyTarget2","annoClb","finder","renderHits","testSz","textDiv","baseOffset","hit","Util","fontName","atan2","vertical","fontHeight","fontAscent","ascent","descent","testSpan","iwidth","relativeOffset","calcViewport","getViewport","offsetX","getAnnotations","canvasContext","Search","prevResults","navigate","doQuery","queryStamp","htmls","StaticImage","crossOrigin","imageError","TextureAnimator","img","tilesHoriz","tilesVert","numTiles","tileDispDuration","tilesHorizontal","tilesVertical","numberOfTiles","tileDisplayDuration","currentDisplayTime","currentTile","milliSec","currentColumn","currentRow","_MouseEventConverter2","_ThreeEventConverter","ThreeMouseEventConverter","_MouseEventConverter","_ThreeEventConverter2","_TouchEventConverter2","ThreeTouchEventConverter","_TouchEventConverter","lastTouches","Thumbnails","thumbnailsClb","heading","thumbnail","dataThumbnail","setImage","getActive","scrollTop","built","TouchConverter","View","classProperty","attributeProperty","attributeName","removeAttr","handleLinkEvent","handleInputEvent","handleFormEvent","getTime","pending","loadFiles","files","tasks","_loop2","_ret2","urlResolver","lastIndexOf","parts","part","objToAttrsStr","_name","checkIframeSize","onResize","s0","s1","fireLinksOnLoadEvent","linkLoaded","_loop3","jLink","jLinks","_ret3","isIOS","MSStream","stop","_loop4","textCss","r1","_ret4","_iterator8","_isArray8","_ref8","_link","linkControls","_iterator9","_isArray9","_ref9","widgetControls","_iterator10","_isArray10","_ref10","_id","inputControls","_iterator11","_isArray11","_ref11","_id2","formControls","_iterator12","_isArray12","_i12","_ref12","_id3","textControls","_iterator13","_isArray13","_i13","_ref13","_id4","stateSetters","setter","setLinkControlState","setWidgetControlState","setInputControlState","setTextControlState","_iterator14","_isArray14","_i14","_ref14","_iterator15","_isArray15","_i15","_ref15","_id5","_iterator16","_isArray16","_i16","_ref16","_id6","setControlState","stateHandlers","st","_name2","linkStateHandlers","widgetStateHandlers","inputStateHandlers","textStateHandlers","_iterator17","_isArray17","_i17","_ref17","_value","_value2","text","_Orbit","_ThreeMouseEventConverter","_ThreeTouchEventConverter","_Drag","VisualWorld","useHelpers","renderCallbacks","clock","Clock","Raycaster","Scene","cssScene","renderer","WebGLRenderer","alpha","antialias","setPixelRatio","cssRenderer","_CSS3DRenderer2","controls","_Orbit2","tmpVector","TextureLoader","AmbientLight","light","DirectionalLight","AxisHelper","onWindowResize","animate","_ThreeMouseEventConverter2","_ThreeTouchEventConverter2","filterData","types","contains","_Drag2","intensity","updateCamera","aspect","updateRenderer","requestAnimationFrame","deltaTime","getDelta","processGeometry","bufGeometry","fromBufferGeometry","mergeVertices","indexedBufferGeom","createIndexedBufferGeometryFromGeometry","mapIndices","numVertices","numFaces","bufferGeom","BufferGeometry","Float32Array","indices","Uint32Array","Uint16Array","i3","setIndex","BufferAttribute","addAttribute","isEqual","x1","z1","x2","z2","attributes","idxVertices","numIdxVertices","mappedVertices","mappedIndices","mappedAssociation","association","j3","oneNodePositionCallback","multyNodePositionCallback","volumePositions","volumeNormals","assocVertex","indexVertex","multyNodePositionPostCallback","pathPositionCallback","positions","pathPositionPostCallback","WidgetController","_Target2","CircleTarget","_Target","PolyTarget","define","amd","dom","u","display","performance","Panel","memory","REVISION","addPanel","showPanel","begin","usedJSHeapSize","jsHeapSizeLimit","setMode","globalAlpha","factory","toFix","toBind","documentMode","nullLowestDeltaTimeout","lowestDelta","fixHooks","mouseHooks","special","mousewheel","version","setup","onmousewheel","getLineHeight","getPageHeight","teardown","removeData","elem","$elem","$parent","settings","adjustOldDeltas","normalizeOffset","extend","unmousewheel","unbind","orgEvent","absDelta","offsetY","fix","detail","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaMode","lineHeight","pageHeight","shouldAdjustOldDeltas","getBoundingClientRect","boundingRect","clientX","clientY","deltaFactor","unshift","clearTimeout","nullLowestDelta","dispatch","handle"],"sources":["webpack:///webpack/bootstrap e9ef0c57d4c98b988185","webpack:///index.js","webpack:///webpack:/webpack/bootstrap 724e58df58c65c4808b4","webpack:///webpack:/common/libs.js","webpack:///webpack:/js/libs.js","webpack:///webpack:/common/classes/BaseMathUtils.js","webpack:///webpack:/common/classes/MathUtils.js","webpack:///webpack:/common/classes/Utils.js","webpack:///webpack:/common/classes/ImageBase.js","webpack:///webpack:/common/classes/EventConverter.js","webpack:///webpack:/common/classes/GraphUtils.js","webpack:///webpack:/common/classes/ImageFactory.js","webpack:///webpack:/js/classes/BookPropsBuilder.js","webpack:///webpack:/js/classes/SheetBlock.js","webpack:///webpack:/js/props/book.js","webpack:///webpack:/common/classes/CSS3DRenderer.js","webpack:///webpack:/common/classes/CSSLayer.js","webpack:///webpack:/common/classes/Cache.js","webpack:///webpack:/common/classes/Controller.js","webpack:///webpack:/common/classes/CustomEventConverter.js","webpack:///webpack:/common/classes/Finder.js","webpack:///webpack:/common/classes/Pdf.js","webpack:///webpack:/common/classes/ThreeEventConverter.js","webpack:///webpack:/common/classes/ThreeUtils.js","webpack:///webpack:/common/classes/targets/Target.js","webpack:///webpack:/index.js","webpack:///webpack:/common/polyfill.js","webpack:///webpack:/js/classes/AutoNavigator.js","webpack:///webpack:/js/classes/Binder.js","webpack:///webpack:/js/classes/Book.js","webpack:///webpack:/js/classes/BookController.js","webpack:///webpack:/js/classes/BookPrinter.js","webpack:///webpack:/js/classes/BookView.js","webpack:///webpack:/js/classes/ClbBookPropsBuilder.js","webpack:///webpack:/js/classes/Cover.js","webpack:///webpack:/js/classes/CssLayersManager.js","webpack:///webpack:/js/classes/PageManager.js","webpack:///webpack:/js/classes/PdfBookPropsBuilder.js","webpack:///webpack:/js/classes/PdfLinksHandler.js","webpack:///webpack:/js/classes/SearchEngine.js","webpack:///webpack:/js/classes/SheetCssLayer.js","webpack:///webpack:/js/classes/SheetPhysics.js","webpack:///webpack:/js/classes/SoundsEnviroment.js","webpack:///webpack:/js/classes/TocController.js","webpack:///webpack:/js/models/sheetBlock.js","webpack:///webpack:/js/props/bookController.js","webpack:///webpack:/common/classes/BlankImage.js","webpack:///webpack:/common/classes/Bookmarks.js","webpack:///webpack:/common/classes/Detector.js","webpack:///webpack:/common/classes/DocMouseSimulator.js","webpack:///webpack:/common/classes/Dom2Image.js","webpack:///webpack:/common/classes/Drag.js","webpack:///webpack:/common/classes/EventsToActions.js","webpack:///webpack:/common/classes/FullScreen.js","webpack:///webpack:/common/classes/InteractiveImage.js","webpack:///webpack:/common/classes/LoadingAnimation.js","webpack:///webpack:/common/classes/LoadingController.js","webpack:///webpack:/common/classes/MouseEventConverter.js","webpack:///webpack:/common/classes/Object3DWatcher.js","webpack:///webpack:/common/classes/Orbit.js","webpack:///webpack:/common/classes/PdfImage.js","webpack:///webpack:/common/classes/Search.js","webpack:///webpack:/common/classes/StaticImage.js","webpack:///webpack:/common/classes/TextureAnimator.js","webpack:///webpack:/common/classes/ThreeMouseEventConverter.js","webpack:///webpack:/common/classes/ThreeTouchEventConverter.js","webpack:///webpack:/common/classes/Thumbnails.js","webpack:///webpack:/common/classes/TouchEventConverter.js","webpack:///webpack:/common/classes/View.js","webpack:///webpack:/common/classes/VisualWorld.js","webpack:///webpack:/common/classes/WidgetController.js","webpack:///webpack:/common/classes/targets/CircleTarget.js","webpack:///webpack:/common/classes/targets/PolyTarget.js","webpack:///webpack:/~/stats.js/build/stats.min.js","webpack:///webpack:/~/jquery-mousewheel/jquery.mousewheel.js","webpack:///src/libs.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9ef0c57d4c98b988185","import {$, html2canvas, THREE, PDFJS} from './src/libs';\r\nrequire('./src/'+(ENVIROMENT.debug? '3dflipbook.js': '3dflipbook.min.js'));\r\n\r\nexport default $;\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 72);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 724e58df58c65c4808b4\n\n\n// WEBPACK FOOTER //\n// webpack:/webpack/bootstrap 724e58df58c65c4808b4","const _$ = GLOBAL_LIBS.jQuery? window.jQuery: require('jquery'),\r\n      _html2canvas = GLOBAL_LIBS.html2canvas? window.html2canvas: require('html2canvas'),\r\n      _THREE = GLOBAL_LIBS.THREE? window.THREE: require('three'),\r\n      _React = GLOBAL_LIBS.React? window.React: require('react'),\r\n      _ReactDOM = GLOBAL_LIBS.React? window.ReactDOM: require('react-dom'),\r\n      _PDFJS = GLOBAL_LIBS.PDFJS? window.PDFJS: require('pdfjs'),\r\n      _tr = (s)=> (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;\r\n\r\nexport {\r\n  _$ as $,\r\n  _html2canvas as html2canvas,\r\n  _THREE as THREE,\r\n  _React as React,\r\n  _ReactDOM as ReactDOM,\r\n  _PDFJS as PDFJS,\r\n  _tr as tr\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/libs.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/libs.js","const _$ = GLOBAL_LIBS.jQuery? window.jQuery: require('jquery'),\r\n      _html2canvas = GLOBAL_LIBS.html2canvas? window.html2canvas: require('html2canvas'),\r\n      _THREE = GLOBAL_LIBS.THREE? window.THREE: require('three'),\r\n      _PDFJS = GLOBAL_LIBS.PDFJS? window.PDFJS: require('pdfjs'),\r\n      _tr = (s)=> (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;\r\n\r\nif(window.FB3D_LOCALE) {\r\n  window.iberezansky = {\r\n    ...window.iberezansky,\r\n    tr: (s)=> (FB3D_LOCALE.dictionary || {})[s] || s\r\n  };\r\n}\r\n\r\nexport {\r\n  _$ as $,\r\n  _html2canvas as html2canvas,\r\n  _THREE as THREE,\r\n  _PDFJS as PDFJS,\r\n  _tr as tr\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/libs.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/libs.js","export default class BaseMathUtils {\r\n  static sum = [BaseMathUtils.sum1, BaseMathUtils.sum2, BaseMathUtils.sum3, BaseMathUtils.sum4];\r\n  static eps = 1e-4;\r\n\r\n  static sum1(ka,a,kb,b) {\r\n    return [\r\n      ka*a[0]+kb*b[0]\r\n    ];\r\n  }\r\n\r\n  static sum2(ka,a,kb,b) {\r\n    return [\r\n      ka*a[0]+kb*b[0],\r\n      ka*a[1]+kb*b[1]\r\n    ];\r\n  }\r\n\r\n  static sum3(ka,a,kb,b) {\r\n    return [\r\n      ka*a[0]+kb*b[0],\r\n      ka*a[1]+kb*b[1],\r\n      ka*a[2]+kb*b[2]\r\n    ];\r\n  }\r\n\r\n  static sum4(ka,a,kb,b) {\r\n    return [\r\n      ka*a[0]+kb*b[0],\r\n      ka*a[1]+kb*b[1],\r\n      ka*a[2]+kb*b[2],\r\n      ka*a[3]+kb*b[3]\r\n    ];\r\n  }\r\n\r\n  static rk4(dy, t, dt, y, sum=BaseMathUtils.sum[y.length-1]) {\r\n    const k1=dy(t,y),\r\n          k2=dy(t+dt/2,sum(1,y,dt/2,k1)),\r\n          k3=dy(t+dt/2,sum(1,y,dt/2,k2)),\r\n          k4=dy(t+dt,sum(1,y,dt,k3));\r\n    return sum(1,y,dt/6,sum(1,sum(1,k1,2,k2),1,sum(2,k3,1,k4)));\r\n  }\r\n\r\n  static extrapolateLinear(x,y,xi) {\r\n    return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0]);\r\n  }\r\n\r\n  static interpolateLinear(x,y,xi) {\r\n    let yi;\r\n    if(x[0]>x[1]) {\r\n      x=x.reverse();\r\n      y=y.reverse();\r\n    }\r\n    if(xi<x[0]) {\r\n      yi=y[0];\r\n    }\r\n    else if(xi>x[1]) {\r\n      yi=y[1];\r\n    }\r\n    else {\r\n      yi=BaseMathUtils.extrapolateLinear(x,y,xi);\r\n    }\r\n    return yi;\r\n  }\r\n\r\n  static calcScale(srcW, srcH, dstW, dstH) {\r\n    return Math.min(dstW/srcW, dstH/srcH);\r\n  }\r\n\r\n  static mulM(a, b) {\r\n    const r=[];\r\n    for(let i=0;i<a.length;++i) {\r\n      r.push([]);\r\n      for(let j=0;j<b[0].length;++j) {\r\n        r[i][j] = 0;\r\n        for(let k=0;k<b.length;++k) {\r\n          r[i][j]+=a[i][k]*b[k][j];\r\n        }\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  static transM(m) {\r\n    const r=[];\r\n    for(let i=0;i<m.length;++i) {\r\n      for(let j=0;j<m[0].length;++j) {\r\n        if(!r[j]) {\r\n          r[j]=[];\r\n        }\r\n        r[j][i]=m[i][j];\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  static mat(data) {\r\n    let s=0;\r\n    for(let x of data) {\r\n      s+=x;\r\n    }\r\n    return s/data.length;\r\n  }\r\n\r\n  static disp(data) {\r\n    const M=BaseMathUtils.mat(data);\r\n    let s=0;\r\n    for(let x of data) {\r\n      s+=(x-M)*(x-M);\r\n    }\r\n    return s/data.length;\r\n  }\r\n\r\n  static predict(data, num) {\r\n    const r=[], l=data.length, D=BaseMathUtils.disp(data);\r\n    if(D<l && l>1) {\r\n      const am=[], bm=[];\r\n      for(let i=0;i<l;++i) {\r\n        am.push([i,1]);\r\n        bm.push([data[i]]);\r\n      }\r\n      const ta=BaseMathUtils.transM(am), a=BaseMathUtils.mulM(ta,am), b=BaseMathUtils.mulM(ta,bm),\r\n      d=(a[0][0]*a[1][1]-a[1][0]*a[0][1]),\r\n      p=[\r\n        -(a[0][1]*b[1][0]-b[0][0]*a[1][1])/d,\r\n        (a[0][0]*b[1][0]-a[1][0]*b[0][0])/d\r\n      ];\r\n      for(let i=0;i<num;++i) {\r\n        const v = Math.round(p[0]*(i+l)+p[1]);\r\n        if(r.indexOf(v)===-1) {\r\n          r.push(v);\r\n        }\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  static getUnique() {\r\n    return Math.ceil(1e9*Math.random());\r\n  }\r\n\r\n  static setSplinePoints(spline, ps) {\r\n    if(spline.points.length!==ps.x.length) {\r\n      console.warn('setSplinePoints: bad points');\r\n    }\r\n    for(let i=0; i<spline.points.length; ++i) {\r\n      spline.points[i].set(ps.x[i], ps.y[i], ps.z? ps.z[i]: 0);\r\n    }\r\n  }\r\n\r\n  static mapl2L(ls, len, n, f) {\r\n    const dL = len/(n-1);\r\n    let L=0;\r\n    for(let i=0, d=ls[0]; i<ls.length-1 && L<len+0.1*dL; ++i, d+=ls[i]) {\r\n      if(Math.abs(L-d)<Math.abs(L-d-ls[i+1])) {\r\n        f(i, L);\r\n        L+=dL;\r\n      }\r\n    }\r\n    if(L<len+0.1*dL) {\r\n      console.warn('mapl2L: ls is not enought');\r\n    }\r\n  }\r\n\r\n  static det2(a,b,c,d) {\r\n    return a*d-b*c;\r\n  }\r\n\r\n  static solve2Lin(a1,b1,a2,b2) {\r\n    let res;\r\n    const d=BaseMathUtils.det2(a1[0],a1[1],a2[0],a2[1]);\r\n    if(Math.abs(d)>BaseMathUtils.eps) {\r\n      const dx=BaseMathUtils.det2(b1,a1[1],b2,a2[1]), dy=BaseMathUtils.det2(a1[0],b1,a2[0],b2);\r\n      res = {\r\n        x: dx/d,\r\n        y: dy/d\r\n      };\r\n    }\r\n    return res;\r\n  }\r\n\r\n  static isInsidePoly(ps, p) {\r\n    let done = false, ct;\r\n    for(let i=0; i<ps.length; ++i) {\r\n      if(BaseMathUtils.v2dist(p, ps[i])<BaseMathUtils.eps) {\r\n        ct=1;\r\n        done = true;\r\n        break;\r\n      }\r\n    }\r\n    while(!done) {\r\n      done = true;\r\n      ct = 0;\r\n      let np = {x: p.x+Math.random()-0.5, y: p.y+Math.random()-0.5}, rn = {x: np.x-p.x, y: np.y-p.y}, a1=[rn.y, -rn.x], b1=p.x*rn.y-p.y*rn.x;\r\n      for(let i=0; i<ps.length; ++i) {\r\n        const p0=ps[i], p1=ps[(i+1)%ps.length], n = {x: p1.x-p0.x, y: p1.y-p0.y}, a2=[n.y, -n.x], b2=p0.x*n.y-p0.y*n.x,\r\n          ip = BaseMathUtils.solve2Lin(a1,b1,a2,b2);\r\n        if(ip) {\r\n          if(BaseMathUtils.v2dist(ip, p0)<BaseMathUtils.eps || BaseMathUtils.v2dist(ip, p1)<BaseMathUtils.eps) {\r\n            done = false;\r\n            break;\r\n          }\r\n          else if(ip.x>Math.min(p0.x,p1.x)-BaseMathUtils.eps&&ip.x<Math.max(p0.x,p1.x)+BaseMathUtils.eps &&\r\n                  ip.y>Math.min(p0.y,p1.y)-BaseMathUtils.eps&&ip.y<Math.max(p0.y,p1.y)+BaseMathUtils.eps) {\r\n            if(BaseMathUtils.v2dist(ip, p)<BaseMathUtils.eps) {\r\n              ct=1;\r\n              break;\r\n            }\r\n            else {\r\n              const tn={x: ip.x-p.x, y: ip.y-p.y};\r\n              ct += tn.x*rn.x+tn.y*rn.y>0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return ct%2;\r\n  }\r\n\r\n  static isInsideConvPoly(ps, p) {\r\n    let sg = [0, 0];\r\n    for(let i=0; i<ps.length; ++i) {\r\n      const p0=ps[i], p1=ps[(i+1)%ps.length], a={x: p0.x-p.x, y: p0.y-p.y}, b={x: p1.x-p.x, y: p1.y-p.y};\r\n      ++sg[(a.x*b.y-a.y*b.x<0)+0];\r\n    }\r\n    return ~sg.indexOf(ps.length);\r\n  }\r\n\r\n  static v2len(v2) {\r\n    return Math.sqrt(v2.x*v2.x+v2.y*v2.y);\r\n  }\r\n\r\n  static v2dist(v21, v22) {\r\n    return BaseMathUtils.v2len({\r\n      x: v22.x-v21.x,\r\n      y: v22.y-v21.y\r\n    });\r\n  }\r\n\r\n  static computeSquare(ps) {\r\n    const a = [];\r\n    let p = 0;\r\n    for(let i=0; i<ps.length; ++i) {\r\n      a.push(BaseMathUtils.v2dist(ps[i], ps[(i+1)%ps.length]));\r\n      p += 0.5*a[i];\r\n    }\r\n    return Math.sqrt(p*(p-a[0])*(p-a[1])*(p-a[2]));\r\n  }\r\n\r\n  static computeInterpCoefs(tri, p) {\r\n    const s = BaseMathUtils.computeSquare(tri), coefs=[], l = tri.length;\r\n    for(let i=0; i<l; ++i) {\r\n      coefs[i] = BaseMathUtils.computeSquare([p, tri[(i+1)%l], tri[(i+2)%l]])/s;\r\n    }\r\n    return coefs;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/BaseMathUtils.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/BaseMathUtils.js","import {THREE} from '../libs';\r\nimport BaseMathUtils from './BaseMathUtils';\r\n\r\nexport default class MathUtils extends BaseMathUtils {\r\n  static v1 = new THREE.Vector3();\r\n\r\n  static splitSpline(spline, N) {\r\n    const o = {len: 0, ls: [0]}, dl=1/N;\r\n    for(let i=0; i<=N; ++i) {\r\n      const p = spline.getPoint(i*dl);\r\n      if(i) {\r\n        const d = MathUtils.v1.distanceTo(p);\r\n        o.len += d;\r\n        o.ls.push(d);\r\n      }\r\n      MathUtils.v1.copy(p);\r\n    }\r\n    return o;\r\n  }\r\n\r\n  static getLinearIndeces(spline, n) {\r\n    const del = 5000, dDel = 1/del;\r\n    const ls=[0];\r\n    let l = 0;\r\n    for(let i=0; i<=del; ++i) {\r\n      const p = spline.getPoint(i*dDel);\r\n      if(i) {\r\n        const d=MathUtils.v1.distanceTo(p);\r\n        l += d;\r\n        ls.push(d);\r\n      }\r\n      MathUtils.v1.copy(p);\r\n    }\r\n    ls.push(1e7);\r\n\r\n    const res = [], dl = l/(n-1);\r\n    for(let i=0, L=0, d=ls[0]; i<ls.length-1; ++i, d+=ls[i]) {\r\n      if(Math.abs(L-d)<Math.abs(L-d-ls[i+1])) {\r\n        res.push(i*dDel);\r\n        L+=dl;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  static refinePoly(poly, maxDl) {\r\n    const res = [];\r\n    for(let i=0; i<poly.length; ++i) {\r\n      const p0 = poly[i], p1 = poly[(i+1)%poly.length], l = BaseMathUtils.v2dist(p0, p1), n = Math.ceil(l/maxDl), dl = l/n;\r\n      res.push(p0);\r\n      for(let j=1; j<n; ++j) {\r\n        res.push(new THREE.Vector2(\r\n          p0.x+j*dl*(p1.x-p0.x)/l,\r\n          p0.y+j*dl*(p1.y-p0.y)/l\r\n        ));\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/MathUtils.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/MathUtils.js","export default class Utils {\r\n\r\n  static normalizeUrl(url) {\r\n    function split(s) {\r\n      return s.replace(/\\\\/g, '/').split('/');\r\n    }\r\n    const base = split(window.location.href);\r\n    url = split(url);\r\n    if(base[2]===url[2]) {\r\n      url[0] = base[0];\r\n    }\r\n    return url.join('/');\r\n  }\r\n\r\n  static extends(der, base) {\r\n    for(let name in base) {\r\n      if(!der.hasOwnProperty(name)) {\r\n        der[name] = base[name];\r\n      }\r\n    }\r\n  }\r\n\r\n  static defaultCmp(a, b) {\r\n    return a-b;\r\n  }\r\n\r\n  static lowerBound(a, x, cmp) {\r\n    cmp = cmp || Utils.defaultCmp;\r\n    let l = 0, h = a.length-1;\r\n    while(h-l>1) {\r\n      let mid = Math.floor((l + h) / 2);\r\n      if(cmp(x, a[mid])<0) {\r\n        h = mid;\r\n      }\r\n      else {\r\n        l = mid;\r\n      }\r\n    }\r\n    return cmp(x, a[h])>=0? h: l;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Utils.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Utils.js","import {$} from '../libs';\r\nimport GraphUtils from './GraphUtils';\r\n\r\nexport default class ImageBase {\r\n\r\n  static renderCanvas =  $('<canvas>')[0];\r\n  static renderCanvasCtx = ImageBase.renderCanvas.getContext('2d');\r\n\r\n  constructor(context, width, height, color) {\r\n    this.context = context;\r\n    this.wnd = context.wnd;\r\n    this.doc = context.doc;\r\n    this.element = context.element || context.doc.body;\r\n    this.c = context.renderCanvas || ImageBase.renderCanvas;\r\n    this.ctx = context.renderCanvasCtx || ImageBase.renderCanvasCtx;\r\n    this.resW = this.width = width;\r\n    this.resH = this.height = height;\r\n    this.color = color;\r\n  }\r\n\r\n  setResolution(res) {\r\n    this.resW = res.width;\r\n    this.resH = res.height;\r\n  }\r\n\r\n  dispose() {\r\n\r\n  }\r\n\r\n  renderBlankPage() {\r\n    this.ctx.beginPath();\r\n    this.ctx.fillStyle = GraphUtils.color2Rgba(this.color, 1);\r\n    this.ctx.rect(0, 0, this.c.width, this.c.height);\r\n    this.ctx.fill();\r\n  }\r\n\r\n  renderImage(image) {\r\n    this.pushCtx();\r\n    this.ctx.drawImage(image, 0, 0);\r\n    this.popCtx();\r\n  }\r\n\r\n  normToConv(p) {\r\n    return {\r\n      x: p.x*this.c.width,\r\n      y: (1-p.y)*this.c.height\r\n    };\r\n  }\r\n\r\n  renderHit(poly) {\r\n    const ctx = this.ctx;\r\n    ctx.fillStyle = 'rgba(255,255,0,0.4)';\r\n    ctx.beginPath();\r\n    let p = this.normToConv(poly[0]);\r\n    ctx.moveTo(p.x, p.y);\r\n    for(let i=1; i<poly.length; ++i) {\r\n      p = this.normToConv(poly[i]);\r\n      ctx.lineTo(p.x, p.y);\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n  }\r\n\r\n  pushCtx() {\r\n    if(this.resW!=this.c.width) {\r\n      this.c.width = this.resW;\r\n    }\r\n    if(this.resH!=this.c.height) {\r\n      this.c.height = this.resH;\r\n    }\r\n    this.ctx.save();\r\n    this.ctx.scale(this.c.width/this.width, this.c.height/this.height);\r\n    return this.ctx;\r\n  }\r\n\r\n  popCtx() {\r\n    this.ctx.restore();\r\n  }\r\n\r\n  renderNotFoundPage() {\r\n    this.renderBlankPage();\r\n  }\r\n\r\n  finishRender() {\r\n    if(this.onChange) {\r\n      this.onChange(this.c);\r\n    }\r\n  }\r\n\r\n  finishLoad() {\r\n    if(this.onLoad) {\r\n      this.onLoad();\r\n    }\r\n    else {\r\n      this.startRender();\r\n    }\r\n  }\r\n\r\n  getSimulatedDoc() {\r\n    return undefined;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ImageBase.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ImageBase.js","import {$} from '../libs';\r\n\r\nexport default class EventConverter {\r\n\r\n  // virtuals\r\n  // getObject(e, data);\r\n  // getCallback(object);\r\n  // test(object1, object1);\r\n\r\n  constructor(wnd, doc) {\r\n    this.wnd = wnd;\r\n    this.doc = doc;\r\n    this.enabled = true;\r\n  }\r\n\r\n  setEnable(vl) {\r\n    if(!vl) {\r\n      if(this.mCapObject) {\r\n        this.notify(this.mCapObject, $.Event('mouseup'), 'mouseup');\r\n        this.mCapObject = undefined;\r\n      }\r\n      if(this.mHovObject) {\r\n        this.notify(this.mHovObject, $.Event('mouseout'), 'mouseout');\r\n        this.mHovObject = undefined;\r\n      }\r\n    }\r\n    this.enabled = vl;\r\n  }\r\n\r\n  getCallback(object) {\r\n    return undefined;\r\n  }\r\n\r\n  notify(object, e, type) {\r\n    const callback = this.getCallback(object);\r\n    if(callback) {\r\n      const props = {\r\n        ...e,\r\n        type,\r\n        view: this.wnd\r\n      };\r\n      const jE = $.Event(type, props);\r\n      callback(jE, object);\r\n    }\r\n  }\r\n\r\n  convert(e, data) {\r\n    if(!this.enabled) return;\r\n\r\n    if(this.filter) {\r\n      e = this.filter(this.element, e);\r\n    }\r\n\r\n    const object = this.getObject(e, data),\r\n      notify = ~e.type.indexOf('touch')? this.convertTouch(e, data, object): this.convertMouse(e, data, object);\r\n    if(notify && object) {\r\n      this.notify(object, e, e.type);\r\n    }\r\n  }\r\n\r\n  convertTouch(e, data, object) {\r\n    let notify = true;\r\n    switch(e.type) {\r\n      case 'touchstart': {\r\n        if(this.tCapObject) {\r\n          this.notify(this.tCapObject, e, 'touchend');\r\n        }\r\n        this.tCapObject = object;\r\n        break;\r\n      }\r\n      case 'touchend': {\r\n        if(this.tCapObject && !this.test(this.tCapObject, object)) {\r\n          this.notify(this.tCapObject, e, 'touchend');\r\n          notify = false;\r\n        }\r\n        else if(object && this.test(this.tCapObject, object)) {\r\n          this.notify(object, e, 'touchtap');\r\n        }\r\n        this.tCapObject = undefined;\r\n        break;\r\n      }\r\n      case 'touchtap': {\r\n        notify = false;\r\n        break;\r\n      }\r\n    }\r\n    return notify;\r\n  }\r\n\r\n  convertMouse(e, data, object) {\r\n    let notify = true;\r\n    switch(e.type) {\r\n      case 'mousedown': {\r\n        if(this.mCapObject) {\r\n          this.notify(this.mCapObject, e, 'mouseup');\r\n        }\r\n        this.mCapObject = object;\r\n        break;\r\n      }\r\n      case 'mouseup': {\r\n        if(this.mCapObject && !this.test(this.mCapObject, object)) {\r\n          this.notify(this.mCapObject, e, 'mouseup');\r\n          notify = false;\r\n        }\r\n        break;\r\n      }\r\n      case 'click': {\r\n        notify = this.test(this.mCapObject, object);\r\n        this.mCapObject = undefined;\r\n        break;\r\n      }\r\n      case 'mouseenter':\r\n      case 'mouseover':\r\n      case 'mousemove': {\r\n        if(!this.test(this.mHovObject, object) && this.mHovObject) {\r\n          this.notify(this.mHovObject, e, 'mouseout');\r\n          this.mHovObject = undefined;\r\n        }\r\n        if(!this.mHovObject && object) {\r\n          this.notify(object, e, 'mouseover');\r\n          this.mHovObject = object;\r\n        }\r\n        notify = e.type === 'mousemove';\r\n        break;\r\n      }\r\n      case 'mouseleave':\r\n      case 'mouseout': {\r\n        if(this.mHovObject) {\r\n          this.notify(this.mHovObject, e, 'mouseout');\r\n          this.mHovObject = undefined;\r\n        }\r\n        notify = false;\r\n        break;\r\n      }\r\n    }\r\n    return notify;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/EventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/EventConverter.js","export default class GraphUtils {\r\n\r\n  static extrapolateLinear(x,y,xi) {\r\n    return y[0]+(y[1]-y[0])/(x[1]-x[0])*(xi-x[0]);\r\n  }\r\n\r\n  static interpolate01(y1,y2,t) {\r\n    return GraphUtils.extrapolateLinear([0,1],[y1,y2],t);\r\n  }\r\n\r\n  static getColorBytes(color) {\r\n    return [(color>>16)&0xFF, (color>>8)&0xFF, color&0xFF];\r\n  }\r\n\r\n  static inverseColor(color, t=1) {\r\n    const bs=GraphUtils.getColorBytes(color),\r\n          ibs=[0xFF-bs[0],0xFF-bs[1],0xFF-bs[2]],\r\n          nbs=[Math.round(GraphUtils.interpolate01(bs[0],ibs[0],t)),Math.round(GraphUtils.interpolate01(bs[1],ibs[1],t)),Math.round(GraphUtils.interpolate01(bs[2],ibs[2],t))];\r\n    return GraphUtils.bytes2Color(nbs);\r\n  }\r\n\r\n  static color2Rgba(color, a) {\r\n    return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color), a);\r\n  }\r\n\r\n  static bytes2Rgba(bs, a) {\r\n    return 'rgba('+bs.join(',')+','+a+')';\r\n  }\r\n\r\n  static bytes2Color(bs) {\r\n    return bs[2]|(bs[1]<<8)|(bs[0]<<16)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/GraphUtils.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/GraphUtils.js","import Cache from './Cache';\r\nimport BlankImage from './BlankImage';\r\nimport StaticImage from './StaticImage';\r\nimport PdfImage from './PdfImage';\r\nimport InteractiveImage from './InteractiveImage';\r\n\r\nexport default class ImageFactory {\r\n\r\n  constructor(context, cache) {\r\n    this.context = context;\r\n    this.cache = cache || new Cache();\r\n  }\r\n\r\n  build(info, n=0, widthTexels=210, heightTexels=297, color=0xFFFFFF, injector=undefined) {\r\n    let image;\r\n    switch(info.type) {\r\n      case 'html': {\r\n        image = new InteractiveImage(this.context, widthTexels, heightTexels, color, info.src, this.cache, injector);\r\n        break;\r\n      }\r\n      case 'image': {\r\n        image = new StaticImage(this.context, widthTexels, heightTexels, color, info.src);\r\n        break;\r\n      }\r\n      case 'pdf': {\r\n        image = new PdfImage(this.context, widthTexels, heightTexels, color, info.src, n);\r\n        break;\r\n      }\r\n      case 'blank':\r\n      default: {\r\n        image = new BlankImage(this.context, widthTexels, heightTexels, color);\r\n        break;\r\n      }\r\n    }\r\n    return image;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ImageFactory.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ImageFactory.js","import {props as  bookProps} from '../props/book';\r\nimport BaseMathUtils from 'BaseMathUtils';\r\n\r\nexport default class BookPropsBuilder {\r\n  constructor(onReady) {\r\n    this.onReady = onReady;\r\n    this.defaults = bookProps();\r\n  }\r\n\r\n  dispose() {\r\n\r\n  }\r\n\r\n  calcSize(width, height) {\r\n    const scale = BaseMathUtils.calcScale(width, height, this.defaults.width, this.defaults.height);\r\n    return {\r\n      width: scale*width,\r\n      height: scale*height\r\n    };\r\n  }\r\n\r\n  calcTexels(width, height) {\r\n    const sheet = this.defaults.sheet, scale = BaseMathUtils.calcScale(width, height, sheet.widthTexels, sheet.heightTexels);\r\n    return {\r\n      widthTexels: scale*width,\r\n      heightTexels: scale*height\r\n    };\r\n  }\r\n\r\n  calcProps(width, height) {\r\n    this.props = {\r\n      ...this.defaults,\r\n      ...this.calcSize(width, height),\r\n      sheet: {\r\n        ...this.defaults.sheet,\r\n        ...this.calcTexels(width, height)\r\n      },\r\n      cover: {\r\n        ...this.defaults.cover,\r\n      },\r\n      page: {\r\n        ...this.defaults.page,\r\n      }\r\n    };\r\n  }\r\n\r\n  calcSheets(pages) {\r\n    return this.sheets = Math.ceil(Math.max(0, pages-4)/2);\r\n  }\r\n\r\n  getSheets() {\r\n    return this.sheets;\r\n  }\r\n\r\n  getProps() {\r\n    return this.props;\r\n  }\r\n\r\n  getPageCallback() {\r\n    return this.binds.pageCallback;\r\n  }\r\n\r\n  ready() {\r\n    if(this.onReady) {\r\n      this.onReady(this.getProps(), this.getSheets(), this.getPageCallback());\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/BookPropsBuilder.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/BookPropsBuilder.js","import {THREE} from '../libs';\r\nimport sheetBlock from '../models/sheetBlock';\r\nimport MathUtils from 'MathUtils';\r\nimport ThreeUtils from 'ThreeUtils';\r\n// import ThreeMarkup from './ThreeMarkup';\r\n\r\nexport default class SheetBlock {\r\n\r\n  constructor(visual, p, first, last, angle=0, state='closed', height=0) {\r\n    this.visual = visual;\r\n    this.p = {\r\n      ...p,\r\n      first,\r\n      last\r\n    };\r\n    const props = this.getProps();\r\n\r\n    const loadedPoints = this.loadPoints();\r\n    Object.keys(loadedPoints).map((k)=> {\r\n      this[k] = loadedPoints[k][props.shape] || loadedPoints[k][0];\r\n    });\r\n\r\n    this.pSpline = new THREE.Spline([]);\r\n    for(let i=0; i<this.interpolationPoints.x[0].length; ++i) {\r\n    \tthis.pSpline.points.push(new THREE.Vector3());\r\n    }\r\n\r\n    this.iSpline = new THREE.Spline([]);\r\n    for(let i=0; i<sheetBlock.resX; ++i) {\r\n    \tthis.iSpline.points.push(new THREE.Vector3());\r\n    }\r\n\r\n    this.aSplines = [];\r\n\r\n    //this.three = new THREE.Object3D();\r\n\r\n    this.geometry = sheetBlock.geometry.clone();\r\n\r\n    this.p.sideFaces = [{\r\n        first: 0,\r\n        last: sheetBlock.faces[0]\r\n      }, {\r\n        first: sheetBlock.faces[0],\r\n        last: sheetBlock.faces[1]\r\n      }\r\n    ];\r\n\r\n    this.sideTexture = new THREE.Texture();\r\n    this.sideTexture.wrapT = THREE.RepeatWrapping;\r\n    this.sideTexture.repeat.set(0, last-first);\r\n    this.sideTexture.image = props.sideTexture;\r\n    this.sideTexture.needsUpdate = true;\r\n\r\n    this.materials = [\r\n                    new THREE.MeshPhongMaterial(),\r\n                    new THREE.MeshPhongMaterial(),\r\n                    new THREE.MeshPhongMaterial({map: this.sideTexture}),\r\n                    new THREE.MeshPhongMaterial({map: this.sideTexture}),\r\n                    new THREE.MeshPhongMaterial({map: this.sideTexture}),\r\n                    new THREE.MeshPhongMaterial({map: this.sideTexture})\r\n                  ];\r\n\r\n    this.p.setTexture(this.materials[0], 2*first);\r\n    this.p.setTexture(this.materials[1], 2*last-1);\r\n\r\n    this.mesh = new THREE.Mesh(this.geometry, new THREE.MeshFaceMaterial(this.materials));\r\n    this.mesh.castShadow = false;\r\n    this.mesh.receiveShadow = false;\r\n    // this.mesh.frustumCulled = true;\r\n\r\n    //this.three.add(this.mesh);\r\n    this.three = this.mesh;\r\n    this.three.userData.self = this;\r\n\r\n    this.markers = [];\r\n    if(this.p.marker.use) {\r\n      const l=this.geometry.vertices.length;\r\n      let is;\r\n      // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];\r\n      is = Array.apply(0, Array(l)).map((_, i)=> i);\r\n\r\n      for(let i of is) {\r\n        const marker = ThreeUtils.createMarker(this.geometry.vertices[i], i<l/2?0xFF0000:0x00FF00, this.p.marker.size);\r\n        this.markers.push({\r\n          marker,\r\n          vertex: i\r\n        });\r\n        this.three.add(marker);\r\n      }\r\n    }\r\n\r\n    this.corner = {\r\n      use: true,\r\n      height: 0,\r\n      maxDistance: 0,\r\n      points: [],\r\n      OZ: new THREE.Vector3(0,0,1),\r\n      axis: new THREE.Vector3()\r\n    };\r\n    this.set(0, 'closed', height, first, last); // calculate corner points\r\n\r\n    this.set(angle, state, height, first, last); // init position\r\n\r\n    // if(!SheetBlock.markup) {\r\n    //   SheetBlock.markup=true;\r\n    //   this.markup = new ThreeMarkup(this, 0, [{\r\n    //     x: 0,\r\n    //     y: 0,\r\n    //   }, {\r\n    //     x: 0.5,\r\n    //     y: 1\r\n    //   }, {\r\n    //     x: 1,\r\n    //     y: 0\r\n    //   }].map((p)=>new THREE.Vector2(p.x, p.y)), {});\r\n    // }\r\n\r\n  }\r\n\r\n  dispose() {\r\n    for(let m of this.materials) {\r\n      if(m.map) {\r\n        m.map = null;\r\n        m.needsUpdate = true;\r\n      }\r\n      m.dispose();\r\n    }\r\n    delete this.materials;\r\n    this.geometry.dispose();\r\n  }\r\n\r\n  getSize() {\r\n    return this.p.last-this.p.first;\r\n  }\r\n\r\n  getProps() {\r\n    return {\r\n      ...this.p.page,\r\n      sheets: this.p.sheets\r\n    };\r\n  }\r\n\r\n  getTopCerners() {\r\n    const off = this.angle>Math.PI/2? this.geometry.vertices.length/2: 0;\r\n    return [\r\n        this.geometry.vertices[off],\r\n        this.geometry.vertices[sheetBlock.resX-1+off],\r\n        this.geometry.vertices[(sheetBlock.resZ-1)*sheetBlock.resX+off],\r\n        this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off]\r\n      ];\r\n  }\r\n\r\n  getTopSize() {\r\n    // const l=this.geometry.vertices.length, off = this.angle>Math.PI/2? l/2: 0,\r\n    //   v0 = this.geometry.vertices[off], v1 = this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off];\r\n    // // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];\r\n    // return {\r\n    //   width: Math.abs(v1.x-v0.x),\r\n    //   height: Math.abs(v1.z-v0.z)\r\n    // };\r\n    const vs = this.getTopCerners();\r\n    return {\r\n      width: vs[0].distanceTo(vs[1]),\r\n      height: vs[0].distanceTo(vs[2])\r\n    };\r\n  }\r\n\r\n  getTopWorldRotation(q) {\r\n    q.x = -Math.PI/2;\r\n    return q;\r\n  }\r\n\r\n  getTopWorldPosition(v) {\r\n    const l=this.geometry.vertices.length, off = this.angle>Math.PI/2? l/2: 0, vs = [\r\n        this.geometry.vertices[off],\r\n        this.geometry.vertices[sheetBlock.resX-1+off],\r\n        this.geometry.vertices[(sheetBlock.resZ-1)*sheetBlock.resX+off],\r\n        this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off]\r\n      ];\r\n    v.set(0, 0, 0);\r\n    for(let vi of vs) {\r\n      v.x += 0.25*vi.x;\r\n      v.y += 0.25*vi.y;\r\n      v.z += 0.25*vi.z;\r\n    }\r\n    this.three.localToWorld(v);\r\n    return v;\r\n  }\r\n\r\n  getInterpolationPoints(inds, mod) {\r\n    const ps = {x: [], y: []}, K = this.getProps().wave;\r\n    for(let i of inds) {\r\n      ps.x.push([...this.interpolationPoints.x[i]]);\r\n      ps.y.push(~mod.indexOf(i)? this.interpolationPoints.y[i].map((n)=> K*n): [...this.interpolationPoints.y[i]]);\r\n    }\r\n    return ps;\r\n  }\r\n\r\n  set(angle, state=this.state, height=this.corner.height, first=this.p.first, last=this.p.last) {\r\n    const PI = Math.PI;\r\n    this.state = state;\r\n    let closedAngle, binderTurn;\r\n    if(typeof angle==='object') {\r\n      this.angle = angle.openedAngle;\r\n      closedAngle = angle.closedAngle;\r\n      binderTurn = angle.binderTurn>PI/2?PI-angle.binderTurn:angle.binderTurn;\r\n    }\r\n    else {\r\n      this.angle = angle;\r\n    }\r\n    this.corner.height = height;\r\n    if(this.p.first!==first || this.p.last!==last) {\r\n      this.sideTexture.repeat.set(0, last-first);\r\n      this.sideTexture.needsUpdate = true;\r\n      if(this.p.first!==first) {\r\n        this.p.setTexture(this.materials[0], 2*first);\r\n      }\r\n      if(this.p.last!==last) {\r\n        this.p.setTexture(this.materials[1], 2*last-1);\r\n      }\r\n    }\r\n    this.p.first = first;\r\n    this.p.last = last;\r\n    let points;\r\n    const props = this.getProps();\r\n    if(this.state === 'closed') {\r\n      points = this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces);\r\n    }\r\n    else if(this.state === 'opened') {\r\n      if(closedAngle!==undefined && Math.abs(closedAngle-PI/2)>1e-2) {\r\n        points = this.getInterpolationPoints(this.flatInterpolationIndeces, []);\r\n        const ps = this.getPointsAtAngle(this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces), closedAngle>PI/2?PI-closedAngle:closedAngle);\r\n        points.x = [ps.x,...points.x];\r\n        points.y = [ps.y,...points.y];\r\n        // console.log(ps);\r\n      }\r\n      else {\r\n        points = this.getInterpolationPoints(this.openedInterpolationIndeces, this.closedInterpolationIndeces);\r\n      }\r\n    }\r\n    let hl, hr, offset = 0.5*props.sheets*props.depth;\r\n    if(this.state==='closed') {\r\n      offset -= 7e-6*this.p.scale;\r\n    }\r\n    if(this.angle<=PI/2) {\r\n      hl = (props.sheets-first)*props.depth;\r\n      hr = (props.sheets-last)*props.depth;\r\n    }\r\n    else {\r\n      hl = first*props.depth;\r\n      hr = last*props.depth;\r\n    }\r\n\r\n    const inAngle = this.angle>PI/2?PI-this.angle:this.angle, hAngle = this.state === 'closed'? inAngle: (binderTurn===undefined? PI/2: binderTurn);\r\n    const [left, right] = this.getPointsAtAngleAndHs(points, inAngle, hAngle, [hl/props.width, hr/props.width]);\r\n    if(this.angle>PI/2) {\r\n      this.inverse(left);\r\n      this.inverse(right);\r\n      offset = -offset;\r\n    }\r\n    this.setPoints(left, right, offset);\r\n  }\r\n\r\n  setPoints(left, right, offset) {\r\n    const p = this.getProps();\r\n    let i = 0;\r\n\r\n    const ys = [right, left];\r\n    for(let y = 0; y<sheetBlock.resY; ++y) {\r\n      for(let z = 0; z<sheetBlock.resZ; ++z) {\r\n        for(let x = 0; x<sheetBlock.resX; ++x) {\r\n          this.geometry.vertices[i++].set(\r\n            ys[y].x[x]*p.width+offset,\r\n            ys[y].y[x]*p.width,\r\n            z*p.height/(sheetBlock.resZ-1)-0.5*p.height\r\n          );\r\n        }\r\n      }\r\n    }\r\n    if(i!==this.geometry.vertices.length) {\r\n      console.warn('setPoints: bad mapping!');\r\n    }\r\n\r\n    if(this.corner.use && !this.corner.points.length) {\r\n      const plane = new THREE.Plane(), normal = plane.normal, planeOffset = (1-this.getProps().flexibleCorner)*Math.min(p.width, p.height), proj = new THREE.Vector3();\r\n      plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(-1,0,-1).normalize(), new THREE.Vector3(planeOffset+offset, 0, 0.5*p.height));\r\n      for(let i=0, l=this.geometry.vertices.length;i<l;++i) {\r\n        plane.projectPoint(this.geometry.vertices[i], proj);\r\n        proj.sub(this.geometry.vertices[i]);\r\n        if(proj.x*normal.x+proj.y*normal.y+proj.z*normal.z>0) {\r\n          const d = proj.length()/planeOffset;\r\n          this.corner.maxDistance = Math.max(this.corner.maxDistance, d);\r\n          this.corner.points.push({vertex: i, distance: d});\r\n        }\r\n      }\r\n    }\r\n\r\n    if(this.corner.use && Math.abs(this.corner.height)>1e-3) {\r\n      const d2Angle = (d)=> p.cornerDeviation*this.corner.height/(1+Math.exp(-p.bending*(d-0.5*this.corner.maxDistance)));\r\n      this.corner.axis.set(-1,0,1).normalize();\r\n      this.corner.axis.applyAxisAngle(this.corner.OZ, this.angle);\r\n      for(let point of this.corner.points) {\r\n        this.geometry.vertices[point.vertex].applyAxisAngle(this.corner.axis, d2Angle(point.distance))\r\n      }\r\n    }\r\n\r\n    for(let m of this.markers) {\r\n      m.marker.position.copy(this.geometry.vertices[m.vertex]);\r\n    }\r\n\r\n    this.geometry.computeVertexNormals();\r\n    //this.geometry.computeFaceNormals();\r\n    this.geometry.computeBoundingSphere();\r\n    //this.geometry.computeBoundingBox();\r\n    this.geometry.verticesNeedUpdate = true;\r\n\r\n    if(this.markup) {\r\n      this.markup.computeVertices();\r\n    }\r\n  }\r\n\r\n  inverse(ps) {\r\n    for(let i = 0;i<ps.x.length; ++i) {\r\n      ps.x[i]=-ps.x[i];\r\n    }\r\n    return ps;\r\n  }\r\n\r\n  getPointsAtHs(ps, angle, hs) {\r\n    const N = 1000;\r\n    MathUtils.setSplinePoints(this.pSpline, ps);\r\n    let bl = MathUtils.splitSpline(this.pSpline, N), r=[];\r\n    {\r\n      const p1 = {...this.pSpline.getPoint((N-1)/N)}, p2 = {...this.pSpline.getPoint(1)},\r\n        dp = {x: p2.x-p1.x, y: p2.y-p1.y}, ln = Math.sqrt(dp.x*dp.x+dp.y*dp.y),\r\n        sp = this.pSpline.points[this.pSpline.points.length-1];\r\n      sp.set(sp.x+0.1*dp.x/ln, sp.y+0.1*dp.y/ln, 0);\r\n      bl = MathUtils.splitSpline(this.pSpline, N);\r\n    }\r\n    bl.ls.push(1e7);\r\n    MathUtils.mapl2L(bl.ls, bl.len, sheetBlock.resX, (i)=> {\r\n      for(let j=0; j<hs.length; ++j) {\r\n        if(!i) {\r\n          r[j] = {x: [-hs[j]*Math.sin(angle)], y: [hs[j]*Math.cos(angle)]};\r\n        }\r\n        else {\r\n          const p0 = {...this.pSpline.getPoint((i-1)/N)},\r\n                p1 = this.pSpline.getPoint(i/N),\r\n                x=-(p1.y-p0.y), y=(p1.x-p0.x), l=Math.sqrt(x*x+y*y);\r\n          r[j].x.push(p1.x+x/l*hs[j]);\r\n          r[j].y.push(p1.y+y/l*hs[j]);\r\n        }\r\n      }\r\n    });\r\n\r\n    const nps=[];\r\n    for(let j=0; j<hs.length; ++j) {\r\n      nps[j]={x:[],y:[]};\r\n      MathUtils.setSplinePoints(this.iSpline, r[j]);\r\n      const l = MathUtils.splitSpline(this.iSpline, N);\r\n      l.ls.push(1e7);\r\n      MathUtils.mapl2L(l.ls, 1, sheetBlock.resX, (i)=> {\r\n        const p = this.iSpline.getPoint(i/N);\r\n        nps[j].x.push(p.x);\r\n        nps[j].y.push(p.y);\r\n      });\r\n    }\r\n    return nps;\r\n  }\r\n\r\n  getPointsAtAngleAndHs(points, angle, hAngle, hs) {\r\n    const ps = this.getPointsAtAngle(points, angle);\r\n    return this.getPointsAtHs(ps, hAngle, hs);\r\n  }\r\n\r\n  getPointsAtAngle(points, angle) {\r\n    const ps={x: [], y:[]}, angles=[];\r\n    angle/=Math.PI/2;\r\n    for(let j = 0; j<points.x.length; ++j) {\r\n      angles.push(j/(points.x.length-1));\r\n    }\r\n    for(let i = 0; i<points.x[0].length; ++i) {\r\n      const xps = [], yps = [];\r\n      for(let j = 0; j<points.x.length; ++j) {\r\n        xps.push(points.x[j][i]);\r\n        yps.push(points.y[j][i]);\r\n      }\r\n      ps.x.push(this.interpolate(angles,xps,angle));\r\n      ps.y.push(this.interpolate(angles,yps,angle));\r\n    }\r\n    return ps;\r\n  }\r\n\r\n  interpolate(x,y,xi) {\r\n    if(!this.aSplines[x.length]) {\r\n      this.aSplines[x.length] = new THREE.Spline([]);\r\n      const ps = this.aSplines[x.length].points;\r\n      for(let i=0;i<x.length;++i) {\r\n        ps.push(new THREE.Vector3());\r\n      }\r\n    }\r\n    const spline = this.aSplines[x.length];\r\n    for(let i=0;i<x.length;++i) {\r\n      spline.points[i].set(x[i], y[i], 0);\r\n    }\r\n    return spline.getPoint(Math.min(1, Math.max(xi, 0))).y;\r\n  }\r\n\r\n  loadPoints() {\r\n    const x=[],y=[];\r\n    for(let r of [0, 0.2877, 0.6347, 0.8174, 1.0000]) {\r\n      x.push(r*Math.cos(0.9*Math.PI/4));\r\n      y.push(r*Math.sin(0.9*Math.PI/4))\r\n    }\r\n\r\n    const openedInterpolationIndeces = [\r\n      [2,3,4],\r\n      [2,3,4,5,6]\r\n    ],\r\n    closedInterpolationIndeces = [\r\n      [0,1,2],\r\n      [0,1,2]\r\n    ],\r\n    flatInterpolationIndeces = [\r\n      [5,4],\r\n      [7,6]\r\n    ],\r\n    interpolationPoints = [\r\n      {\r\n        x: [\r\n          [0,0.2877,0.6347,0.8174,1.0000],\r\n          [0.000,0.286,0.632,0.815,0.997],\r\n          [0.000,0.279,0.623,0.806,0.988],\r\n          [0.000,0.126,0.411,0.593,0.774],\r\n          [0,0,0,0,0],\r\n          x\r\n        ],\r\n        y: [\r\n          [0,0,0,0,0],\r\n          [0.000,0.030,0.010,0.002,0.000],\r\n          [0.000,0.060,0.017,0.004,0.000],\r\n          [0.000,0.259,0.440,0.446,0.429],\r\n          [0, 0.2877, 0.6347, 0.8174, 1.0000],\r\n          y\r\n        ]\r\n      },\r\n      {\r\n        x: [\r\n          [0,0.2877,0.6347,0.8174,1.0000],\r\n          [0.000,0.286,0.632,0.815,0.997],\r\n          [0.000,0.279,0.623,0.806,0.988],\r\n          [0.000,0.233,0.563,0.746,0.927],\r\n          [0.000,0.144,0.433,0.613,0.796],\r\n          [0.000,0.070,0.288,0.455,0.626],\r\n          [0,0,0,0,0],\r\n          x\r\n        ],\r\n        y: [\r\n          [0,0,0,0,0],\r\n          [0.000,0.030,0.010,0.002,0.000],\r\n          [0.000,0.060,0.017,0.004,0.000],\r\n          [0.000,0.168,0.269,0.270,0.255],\r\n          [0.000,0.245,0.435,0.458,0.460],\r\n          [0.000,0.278,0.544,0.614,0.673],\r\n          [0, 0.2877, 0.6347, 0.8174, 1.0000],\r\n          y\r\n        ]\r\n      }\r\n    ];\r\n\r\n    return {\r\n      interpolationPoints,\r\n      openedInterpolationIndeces,\r\n      closedInterpolationIndeces,\r\n      flatInterpolationIndeces\r\n    };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/SheetBlock.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/SheetBlock.js","\r\nexport function props() {\r\n  // const props = {\r\n  //   height,\r\n  //   width,\r\n  //   gravity,\r\n  //   injector,\r\n  //   cachedPages,\r\n  //   renderInactivePages,\r\n  //   renderWhileFlipping,\r\n  //   pagesForPredicting,\r\n  //   preloadPages,\r\n  //   sheet: {\r\n  //     startVelocity,\r\n  //     cornerDeviation,\r\n  //     flexibility,\r\n  //     flexibleCorner,\r\n  //     bending,\r\n  //     wave,\r\n  //     shape,\r\n  //     widthTexels,\r\n  //     heightTexels,\r\n  //     color,\r\n  //     sideTexture\r\n  //   },\r\n  //   cover: {\r\n  //     ...sheet,\r\n  //     padding,\r\n  //     binderTexture,\r\n  //     depth,\r\n  //     mass\r\n  //   },\r\n  //   page: {\r\n  //     ...sheet,\r\n  //     depth,\r\n  //     mass\r\n  //   }\r\n  // };\r\n\r\n  return {\r\n    height: 0.297,\r\n    width: 0.21,\r\n    gravity: 1,\r\n    cachedPages: 50,\r\n    renderInactivePages: true,\r\n    renderInactivePagesOnMobile: false,\r\n    renderWhileFlipping: false,\r\n    pagesForPredicting: 5,\r\n    preloadPages: 5,\r\n    rtl: false,\r\n    sheet: {\r\n      startVelocity: 0.9,\r\n      cornerDeviation: 0.25,\r\n      flexibility: 10,\r\n      flexibleCorner: 0.5,\r\n      bending: 11,\r\n      wave: 0.5,\r\n      shape: 0,\r\n      widthTexels: 5*210,\r\n      heightTexels: 5*297,\r\n      color: 0xFFFFFF\r\n    },\r\n    cover: {\r\n      binderTexture: '',\r\n      depth: 0.0003,\r\n      padding: 0,\r\n      mass: 0.003\r\n    },\r\n    page: {\r\n      depth: 0.0001,\r\n      mass: 0.001\r\n    },\r\n    cssLayerProps: {\r\n      width: 1024\r\n    }\r\n  };\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/props/book.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/props/book.js","import {THREE} from '../libs';\r\n\r\nTHREE.CSS3DObject = class CSS3DObject extends THREE.Object3D {\r\n  constructor(element=undefined) {\r\n    super();\r\n    \r\n    if(element) {\r\n      this.set(element);\r\n    }\r\n  }\r\n\r\n  set(element) {\r\n    this.element = element;\r\n  \tthis.element.style.position = 'absolute';\r\n\r\n  \tthis.addEventListener('removed', function() {\r\n  \t\tif (this.element.parentNode !== null) {\r\n  \t\t\tthis.element.parentNode.removeChild(this.element);\r\n  \t\t}\r\n  \t});\r\n  }\r\n};\r\n\r\nTHREE.CSS3DSprite = class CSS3DSprite extends THREE.CSS3DObject {\r\n  constructor(element) {\r\n    super(element);\r\n  }\r\n};\r\n\r\nTHREE.CSS3DRenderer = class CSS3DRenderer {\r\n  constructor() {\r\n\r\n  \tvar _width, _height;\r\n  \tvar _widthHalf, _heightHalf;\r\n\r\n  \tvar matrix = new THREE.Matrix4();\r\n\r\n  \tvar cache = {\r\n  \t\tcamera: { fov: 0, style: '' },\r\n  \t\tobjects: {}\r\n  \t};\r\n\r\n  \tvar domElement = document.createElement( 'div');\r\n  \tdomElement.style.overflow = 'hidden';\r\n\r\n  \tthis.domElement = domElement;\r\n\r\n  \tvar cameraElement = document.createElement( 'div');\r\n\r\n  \tcameraElement.style.WebkitTransformStyle = 'preserve-3d';\r\n  \tcameraElement.style.MozTransformStyle = 'preserve-3d';\r\n  \tcameraElement.style.transformStyle = 'preserve-3d';\r\n\r\n  \tdomElement.appendChild( cameraElement);\r\n\r\n  \tvar isIE = /Trident/i.test( navigator.userAgent);\r\n\r\n  \tthis.setClearColor = function () {};\r\n\r\n  \tthis.getSize = function () {\r\n\r\n  \t\treturn {\r\n  \t\t\twidth: _width,\r\n  \t\t\theight: _height\r\n  \t\t};\r\n\r\n  \t};\r\n\r\n  \tthis.setSize = function(width, height) {\r\n\r\n  \t\t_width = width;\r\n  \t\t_height = height;\r\n  \t\t_widthHalf = _width / 2;\r\n  \t\t_heightHalf = _height / 2;\r\n\r\n  \t\tdomElement.style.width = width + 'px';\r\n  \t\tdomElement.style.height = height + 'px';\r\n\r\n  \t\tcameraElement.style.width = width + 'px';\r\n  \t\tcameraElement.style.height = height + 'px';\r\n\r\n  \t};\r\n\r\n  \tfunction epsilon( value) {\r\n\r\n  \t\treturn Math.abs( value) < 1e-10 ? 0 : value;\r\n\r\n  \t}\r\n\r\n  \tfunction getCameraCSSMatrix( matrix) {\r\n\r\n  \t\tvar elements = matrix.elements;\r\n\r\n  \t\treturn 'matrix3d(' +\r\n  \t\t\tepsilon( elements[ 0 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 1 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 2 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 3 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 4 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 5 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 6 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 7 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 8 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 9 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 10 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 11 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 12 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 13 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 14 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 15 ]) +\r\n  \t\t')';\r\n\r\n  \t}\r\n\r\n  \tfunction getObjectCSSMatrix( matrix, cameraCSSMatrix) {\r\n\r\n  \t\tvar elements = matrix.elements;\r\n  \t\tvar matrix3d = 'matrix3d(' +\r\n  \t\t\tepsilon( elements[ 0 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 1 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 2 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 3 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 4 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 5 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 6 ]) + ',' +\r\n  \t\t\tepsilon( - elements[ 7 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 8 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 9 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 10 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 11 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 12 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 13 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 14 ]) + ',' +\r\n  \t\t\tepsilon( elements[ 15 ]) +\r\n  \t\t')';\r\n\r\n  \t\tif(isIE) {\r\n\r\n  \t\t\treturn 'translate(-50%,-50%)' +\r\n  \t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' +\r\n  \t\t\t\tcameraCSSMatrix +\r\n  \t\t\t\tmatrix3d;\r\n\r\n  \t\t}\r\n\r\n  \t\treturn 'translate(-50%,-50%)' + matrix3d;\r\n\r\n  \t}\r\n\r\n  \tfunction renderObject( object, camera, cameraCSSMatrix) {\r\n\r\n  \t\tif(object instanceof THREE.CSS3DObject) {\r\n\r\n  \t\t\tvar style;\r\n\r\n  \t\t\tif(object instanceof THREE.CSS3DSprite) {\r\n  \t\t\t\tmatrix.copy( camera.matrixWorldInverse);\r\n  \t\t\t\tmatrix.transpose();\r\n  \t\t\t\tmatrix.copyPosition( object.matrixWorld);\r\n  \t\t\t\tmatrix.scale( object.scale);\r\n\r\n  \t\t\t\tmatrix.elements[ 3 ] = 0;\r\n  \t\t\t\tmatrix.elements[ 7 ] = 0;\r\n  \t\t\t\tmatrix.elements[ 11 ] = 0;\r\n  \t\t\t\tmatrix.elements[ 15 ] = 1;\r\n\r\n  \t\t\t\tstyle = getObjectCSSMatrix( matrix, cameraCSSMatrix);\r\n\r\n  \t\t\t} else {\r\n\r\n  \t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld, cameraCSSMatrix);\r\n\r\n  \t\t\t}\r\n\r\n  \t\t\tvar element = object.element;\r\n  \t\t\tvar cachedStyle = cache.objects[ object.id ] && cache.objects[ object.id ].style;\r\n\r\n  \t\t\tif(cachedStyle === undefined || cachedStyle !== style) {\r\n  \t\t\t\telement.style.WebkitTransform = style;\r\n  \t\t\t\telement.style.MozTransform = style;\r\n  \t\t\t\telement.style.transform = style;\r\n\r\n  \t\t\t\tcache.objects[ object.id ] = { style: style };\r\n  \t\t\t\tif(isIE) {\r\n  \t\t\t\t\tcache.objects[ object.id ].distanceToCameraSquared = getDistanceToSquared( camera, object);\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n\r\n  \t\t\tif(element.parentNode !== cameraElement) {\r\n  \t\t\t\tcameraElement.appendChild( element);\r\n  \t\t\t}\r\n  \t\t}\r\n\r\n  \t\tfor(var i = 0, l = object.children.length; i < l; i ++) {\r\n\r\n  \t\t\trenderObject( object.children[ i ], camera, cameraCSSMatrix);\r\n\r\n  \t\t}\r\n\r\n  \t}\r\n\r\n  \tvar getDistanceToSquared = function () {\r\n\r\n  \t\tvar a = new THREE.Vector3();\r\n  \t\tvar b = new THREE.Vector3();\r\n\r\n  \t\treturn function(object1, object2) {\r\n\r\n  \t\t\ta.setFromMatrixPosition( object1.matrixWorld);\r\n  \t\t\tb.setFromMatrixPosition( object2.matrixWorld);\r\n\r\n  \t\t\treturn a.distanceToSquared( b);\r\n\r\n  \t\t};\r\n\r\n  \t}();\r\n\r\n  \tfunction zOrder( scene) {\r\n\r\n  \t\tvar order = Object.keys( cache.objects).sort( function(a, b) {\r\n\r\n  \t\t\treturn cache.objects[ a ].distanceToCameraSquared - cache.objects[ b ].distanceToCameraSquared;\r\n\r\n  \t\t});\r\n  \t\tvar zMax = order.length;\r\n\r\n  \t\tscene.traverse( function(object) {\r\n\r\n  \t\t\tvar index = order.indexOf( object.id + '');\r\n\r\n  \t\t\tif(index !== - 1) {\r\n\r\n  \t\t\t\tobject.element.style.zIndex = zMax - index;\r\n\r\n  \t\t\t}\r\n\r\n  \t\t});\r\n\r\n  \t}\r\n\r\n  \tthis.render = function(scene, camera) {\r\n\r\n  \t\tvar fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\r\n\r\n  \t\tif(cache.camera.fov !== fov) {\r\n\r\n  \t\t\tdomElement.style.WebkitPerspective = fov + 'px';\r\n  \t\t\tdomElement.style.MozPerspective = fov + 'px';\r\n  \t\t\tdomElement.style.perspective = fov + 'px';\r\n\r\n  \t\t\tcache.camera.fov = fov;\r\n\r\n  \t\t}\r\n\r\n  \t\tscene.updateMatrixWorld();\r\n\r\n  \t\tif(camera.parent === null) camera.updateMatrixWorld();\r\n\r\n  \t\tvar cameraCSSMatrix = 'translateZ(' + fov + 'px)' +\r\n  \t\t\tgetCameraCSSMatrix( camera.matrixWorldInverse);\r\n\r\n  \t\tvar style = cameraCSSMatrix +\r\n  \t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\r\n\r\n  \t\tif(cache.camera.style !== style && ! isIE) {\r\n\r\n  \t\t\tcameraElement.style.WebkitTransform = style;\r\n  \t\t\tcameraElement.style.MozTransform = style;\r\n  \t\t\tcameraElement.style.transform = style;\r\n\r\n  \t\t\tcache.camera.style = style;\r\n\r\n  \t\t}\r\n\r\n  \t\trenderObject( scene, camera, cameraCSSMatrix);\r\n\r\n  \t\tif(isIE) {\r\n\r\n  \t\t\t// IE10 and 11 does not support 'preserve-3d'.\r\n  \t\t\t// Thus, z-order in 3D will not work.\r\n  \t\t\t// We have to calc z-order manually and set CSS z-index for IE.\r\n  \t\t\t// FYI: z-index can't handle object intersection\r\n  \t\t\tzOrder( scene);\r\n\r\n  \t\t}\r\n\r\n  \t};\r\n  }\r\n};\r\n\r\nexport default THREE.CSS3DRenderer;\r\n\r\nconst _CSS3DObject = THREE.CSS3DObject, _CSS3DSprite = THREE.CSS3DSprite;\r\nexport {\r\n  _CSS3DObject as CSS3DObject,\r\n  _CSS3DSprite as CSS3DSprite\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/CSS3DRenderer.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/CSS3DRenderer.js","import {THREE, $} from '../libs';\r\nimport {CSS3DObject} from './CSS3DRenderer';\r\n\r\nexport default class CSSLayer extends CSS3DObject {\r\n\r\n  static delay;\r\n  static style;\r\n  static init(doc, delay=150) {\r\n    CSSLayer.delay = delay;\r\n    CSSLayer.style = $(`<style type=text/css>\r\n      .css-layer {\r\n    \t\topacity: 1;\r\n    \t\ttransition: opacity ${delay}ms ease-out;\r\n        visibility: visible;\r\n        overflow: hidden;\r\n    \t}\r\n    \t.css-layer.hidden {\r\n    \t\ttransition: opacity ${delay}ms ease-in, visibility ${delay}ms step-end;\r\n    \t\topacity: 0;\r\n        visibility: hidden;\r\n      }\r\n    </style>`).appendTo(doc.head);\r\n  }\r\n  static dispose() {\r\n    CSSLayer.style.remove();\r\n  }\r\n\r\n  constructor(width, height, props) {\r\n    super();\r\n    this.props = props;\r\n    this.jContainer = $('<div class=\"hidden css-layer\"></div>');\r\n  \tconst widthPxs = props.width, heightPxs = height/width*widthPxs;\r\n    this.jContainer.width(widthPxs).height(heightPxs);\r\n  \tthis.scale.x /= widthPxs/width;\r\n  \tthis.scale.y /= widthPxs/width;\r\n\r\n    this.setData();\r\n    this.set(this.jContainer[0]);\r\n  }\r\n\r\n  callInternal(name) {\r\n    if(this.object && this.object[name]) {\r\n      try {\r\n        this.object[name]();\r\n      }\r\n      catch(e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    this.clearInternals();\r\n  }\r\n\r\n  clearInternals() {\r\n    this.callInternal('dispose');\r\n    !this.css || this.css.remove();\r\n    !this.html || this.html.remove();\r\n  }\r\n\r\n  setData(css='', html='', js='') {\r\n    this.clearInternals();\r\n\r\n    this.css = $(`<style type=\"text/css\">${css}</style>`).appendTo(this.jContainer);\r\n    this.html = $(html).appendTo(this.jContainer);\r\n    const init = eval(js);\r\n    if(init) {\r\n      this.object = init(this.jContainer, this.props) || {};\r\n    }\r\n  }\r\n\r\n  pendedCall(clb) {\r\n    const timestamp = this.timestamp = Date.now();\r\n    setTimeout(()=> {\r\n      if(timestamp===this.timestamp) {\r\n        clb();\r\n      }\r\n    }, CSSLayer.delay);\r\n  }\r\n\r\n  isHidden() {\r\n    return this.jContainer.hasClass('hidden');\r\n  }\r\n\r\n  hide() {\r\n    let res;\r\n    if(!this.isHidden()) {\r\n      this.jContainer.addClass('hidden');\r\n      this.callInternal('hide');\r\n      res = new Promise((resolve)=> {\r\n        this.pendedCall(()=> {\r\n          this.callInternal('hidden');\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      res = Promise.resolve();\r\n    }\r\n    return res;\r\n  }\r\n\r\n  show() {\r\n    let res;\r\n    if(this.isHidden()) {\r\n      this.jContainer.removeClass('hidden');\r\n      this.callInternal('show');\r\n      res = new Promise((resolve)=> {\r\n        this.pendedCall(()=> {\r\n          this.callInternal('shown');\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      res = Promise.resolve();\r\n    }\r\n    return res;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/CSSLayer.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/CSSLayer.js","export default class Cache {\r\n\r\n  constructor(maxSize=Infinity, sizeof=Cache.countSizeof) {\r\n    this.os = new Map();\r\n    this.sizeof = sizeof;\r\n    this.maxSize = maxSize;\r\n    this.size = 0;\r\n  }\r\n\r\n  forEach(clb) {\r\n    this.os.forEach((v, k)=> clb([k,v]));\r\n  }\r\n\r\n  static countSizeof(value) {\r\n    return 1;\r\n  }\r\n\r\n  remove(k) {\r\n    let res = false;\r\n    const v = this.os.get(k);\r\n    if(!v.locked || !v.locked(k)) {\r\n      this.size -= this.sizeof(v);\r\n      if(v.dispose) {\r\n        v.dispose();\r\n      }\r\n      this.os.delete(k);\r\n      res = true;\r\n    }\r\n    return res;\r\n  }\r\n\r\n  freeSpace() {\r\n    const arr = [];\r\n    for(let p of this.os) {\r\n      arr.push({timestamp: p[1].timestamp, key: p[0]});\r\n    }\r\n    arr.sort((a, b)=> a.timestamp-b.timestamp);\r\n    for(let i=0; i<arr.length && this.size>3*this.maxSize/4; ++i) {\r\n      this.remove(arr[i].key);\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    const arr = [];\r\n    for(let p of this.os) {\r\n      arr.push({v: p[1], k: p[0]});\r\n    }\r\n    for(let o of arr) {\r\n      if(o.v.dispose) {\r\n        o.v.dispose();\r\n      }\r\n      this.os.delete(o.k);\r\n    }\r\n  }\r\n\r\n  static recursionSizeof(value) {\r\n    let size = 0;\r\n    if(value) {\r\n      ++size;\r\n      const len = value.length;\r\n      if(len===undefined) {\r\n        for (let p in value) {\r\n          if(value.hasOwnProperty(p)) {\r\n            size+=Cache.recursionSizeof(value[p]);\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        size+=len\r\n      }\r\n    }\r\n    return size;\r\n  }\r\n\r\n  getTimestamp() {\r\n    return Date.now();\r\n  }\r\n\r\n\r\n  get(key) {\r\n    const value = this.os.get(key);\r\n    if(value) {\r\n      value.timestamp = this.getTimestamp();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  put(key, value) {\r\n    value.timestamp = this.getTimestamp();\r\n    this.os.set(key, value);\r\n    this.size+=this.sizeof(value);\r\n    if(this.size>this.maxSize) {\r\n      this.freeSpace();\r\n    }\r\n    return value;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Cache.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Cache.js","import {THREE} from '../libs';\r\n\r\nexport default class Controller extends THREE.EventDispatcher {\r\n\r\n  handleDefault(id, e, data) {\r\n    //console.log(id+'-'+e.type+'-'+data);\r\n  }\r\n\r\n  dispatchAsync(e) {\r\n    Promise.resolve().then(()=> this.dispatchEvent(e));\r\n  }\r\n\r\n  dispose() {\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Controller.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Controller.js","import EventConverter from './EventConverter';\r\n\r\nexport default class CustomEventConverter extends EventConverter {\r\n\r\n  // custom\r\n  // testIntersection(e, data);\r\n  // custom.object\r\n  // test(object);\r\n\r\n  constructor(wnd, doc, customTest=()=> false, eDoc) {\r\n    super(wnd, doc);\r\n\r\n    this.eDoc = eDoc;\r\n    this.customTest = customTest;\r\n    this.customs = [];\r\n  }\r\n\r\n  test(object1, object2) {\r\n    return object1 && object2? this.customTest(object1, object2): false;\r\n  }\r\n\r\n  getCallback(object) {\r\n    return object.target.callback;\r\n  }\r\n\r\n  addCustom(custom) {\r\n    this.customs.push(custom);\r\n  }\r\n\r\n  getObject(e, data) {\r\n    let object;\r\n    if(data.doc===this.eDoc) {\r\n      for(let custom of this.customs) {\r\n        object = custom.testIntersection(e, data);\r\n        if(object) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return object;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/CustomEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/CustomEventConverter.js","import Utils from './Utils';\r\n\r\nexport default class Finder {\r\n\r\n  static DELIMITER = ' ';\r\n\r\n  static isDelimetr(s) {\r\n    return s===Finder.DELIMITER;\r\n  }\r\n\r\n  merge() {\r\n    const as = [], map = [], strs = this.strs;\r\n    let p = 0;\r\n    for(let i=0; i<strs.length; ++i) {\r\n      if(strs[i].length) {\r\n        map.push({\r\n          base: i,\r\n          offset: p\r\n        });\r\n        as.push(strs[i]);\r\n        p += strs[i].length;\r\n        if(i<strs.length-1 && !Finder.isDelimetr(strs[i].charAt(strs[i].length-1)) && !Finder.isDelimetr(strs[i+1].charAt(0))) {\r\n          as.push(Finder.DELIMITER);\r\n          ++p;\r\n        }\r\n      }\r\n    }\r\n    this.map = map;\r\n    this.str = as.join('');\r\n  }\r\n\r\n  addHits(p) {\r\n    const info = this.map[Utils.lowerBound(this.map, {offset: p}, (a, b)=> a.offset-b.offset)];\r\n    let chars = this.pattern.length, i = info.base;\r\n    p -= info.offset;\r\n    while(chars) {\r\n      if(this.strs[i].length) {\r\n        const delimeter = i<this.strs.length-1 && !Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length-1)) && !Finder.isDelimetr(this.strs[i+1].charAt(0)),\r\n              length = Math.min(this.strs[i].length+(delimeter? 1: 0)-p, chars);\r\n        if(p<this.strs[i].length) {\r\n          this.hits.push({\r\n            index: i,\r\n            offset: p,\r\n            length: Math.min(length, this.strs[i].length-p),\r\n          });\r\n        }\r\n        chars -= length;\r\n        ++i;\r\n        p = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  addContext(p) {\r\n    let f = p, l = p+this.pattern.length-1, dels = this.props.contextLength, prevDels = dels+1;\r\n    while(dels && prevDels-dels) {\r\n      prevDels = dels;\r\n      if(dels%2) {\r\n        for(let i=f-2; i>=0; --i) {\r\n          if(Finder.isDelimetr(this.str[i]) || i===0) {\r\n            f = i===0? 0: i+1;\r\n            --dels;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        for(let i=l+2; i<this.str.length; ++i) {\r\n          if(Finder.isDelimetr(this.str[i]) || i===this.str.length-1) {\r\n            l = i===this.str.length-1? i===this.str.length-1: i-1;\r\n            --dels;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.contexts.push(this.str.substr(f, l-f+1));\r\n  }\r\n\r\n  getHits() {\r\n    return this.hits;\r\n  }\r\n\r\n  getContexts() {\r\n    return this.contexts;\r\n  }\r\n\r\n  static defaults = {\r\n    contextLength: 7,\r\n    hits: true,\r\n    contexts: true\r\n  };\r\n\r\n  constructor(strs, pattern, props) {\r\n    this.props = {\r\n      ...Finder.defaults,\r\n      ...props\r\n    };\r\n    this.strs = strs;\r\n    const data = this.merge(strs);\r\n    this.hits = [];\r\n    this.contexts = [];\r\n    this.pattern = pattern.toLowerCase();\r\n    this.lstr = this.str.toLowerCase();\r\n    let p = 0;\r\n    while(true) {\r\n      p = this.lstr.indexOf(this.pattern, p);\r\n      if(p===-1) {\r\n        break;\r\n      }\r\n      else {\r\n        this.addHits(p);\r\n        this.addContext(p);\r\n        p += this.pattern.length;\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Finder.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Finder.js","import {PDFJS} from '../libs';\r\nimport Utils from './Utils';\r\n\r\nPDFJS.workerSrc = (window.PDFJS_LOCALE? PDFJS_LOCALE: GLOBAL_PATHS).pdfJsWorker;\r\nPDFJS.cMapUrl = (window.PDFJS_LOCALE? PDFJS_LOCALE: GLOBAL_PATHS).pdfJsCMapUrl;\r\nPDFJS.cMapPacked = true;\r\n\r\nexport default class Pdf {\r\n\r\n  constructor(src, loadingProgress) {\r\n    this.src = Utils.normalizeUrl(src);\r\n    this.handlerQueue = [];\r\n    this.progresData = {loaded: -1, total: 1};\r\n    this.loadingProgress = loadingProgress;\r\n\r\n    PDFJS.getDocument({\r\n      url: this.src,\r\n      rangeChunkSize: 512*1024\r\n    }, null, null, (data)=> {\r\n      if(this.loadingProgress) {\r\n        let cur = Math.floor(100*data.loaded/data.total),\r\n              old = Math.floor(100*this.progresData.loaded/this.progresData.total);\r\n        if(cur!==old) {\r\n          cur = isNaN(cur)? 0: cur;\r\n          cur = cur>100? 100: cur;\r\n          this.loadingProgress(cur);\r\n        }\r\n      }\r\n      this.progresData = data;\r\n    }).\r\n    then((handler)=> {\r\n      if(handler.numPages>1) {\r\n        Promise.all([handler.getPage(1), handler.getPage(2)]).\r\n        then((pages)=> {\r\n          this.init(handler, pages);\r\n        });\r\n      }\r\n      else {\r\n        this.init(handler);\r\n      }\r\n    });\r\n  }\r\n\r\n  init(handler, pages) {\r\n    this.handler = handler;\r\n    this.doubledPages = pages? (Math.abs(2*Pdf.getPageSize(pages[0]).width-Pdf.getPageSize(pages[1]).width)/Pdf.getPageSize(pages[0]).width<1e-4): false;\r\n    let done = Promise.resolve(handler);\r\n    for(let clb of this.handlerQueue.reverse()) {\r\n      done = done.then((handler)=> {\r\n        clb(handler);\r\n        return handler;\r\n      });\r\n    }\r\n  }\r\n\r\n  getPageType(n) {\r\n    return !this.doubledPages || n===0 || n===this.getPagesNum()-1? 'full': (n&1? 'left': 'right');\r\n  }\r\n\r\n  getPage(n) {\r\n    return this.handler.getPage(this.doubledPages? Math.ceil(n/2)+1: n+1);\r\n  }\r\n\r\n  dispose() {\r\n    this.handlerQueue.splice(0, this.handlerQueue.length);\r\n    delete this.handler;\r\n  }\r\n\r\n  setLoadingProgressClb(clb) {\r\n    this.loadingProgress = clb;\r\n  }\r\n\r\n  getPagesNum() {\r\n    return this.handler? (this.doubledPages? 2*(this.handler.numPages-1): this.handler.numPages): undefined;\r\n  }\r\n\r\n  static getPageSize(page) {\r\n    return {\r\n      width: page.view[2]-page.view[0],\r\n      height: page.view[3]-page.view[1]\r\n    };\r\n  }\r\n\r\n//   if(pages>1) {\r\n//   handler.getPage(2).\r\n//   then((page)=> {\r\n//     const size1 = Pdf.getPageSize(page);\r\n//     this.props.doubledPages = 2*size0.width===size1.width;\r\n//     this.ready();\r\n//   }).\r\n//   catch(()=> this.ready());\r\n// }\r\n// else {\r\n\r\n  getHandler(clb) {\r\n    if(this.handler) {\r\n      clb(this.handler);\r\n    }\r\n    else {\r\n      this.handlerQueue.push(clb);\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Pdf.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Pdf.js","import {THREE, $} from '../libs';\r\n\r\nexport default class ThreeEventConverterFs {\r\n\r\n  static objectsTest(object1, object2) {\r\n    return object1 && object2? object1.object===object2.object: false;\r\n  }\r\n\r\n  static objectsAndFacesTest(object1, object2) {\r\n    return object1 && object2? object1.object===object2.object && object1.face.materialIndex===object2.face.materialIndex: false;\r\n  }\r\n\r\n  constructor(visualWorld, test=ThreeEventConverterFs.objectsAndFacesTest) {\r\n    this.visual = visualWorld;\r\n    this.coords = new THREE.Vector2();\r\n    this.raycaster = this.visual.raycaster;\r\n    this.camera = this.visual.camera;\r\n    this.threes = [];\r\n    this.test = test;\r\n  }\r\n\r\n  addThree(three) {\r\n    this.threes.push(three);\r\n  }\r\n\r\n  removeThree(three) {\r\n    const i = this.threes.indexOf(three);\r\n    if(~i) {\r\n      this.threes.splice(i, 1);\r\n    }\r\n  }\r\n\r\n  getObject(e) {\r\n    this.setCoordsFromEvent(e);\r\n    this.raycaster.setFromCamera(this.coords, this.camera);\r\n    const intersects = this.raycaster.intersectObjects(this.threes);\r\n    return intersects[0];\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ThreeEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ThreeEventConverter.js","import BaseMathUtils from './BaseMathUtils';\r\n\r\nexport default class ThreeUtils {\r\n\r\n  static vertices2UVs(vertices, indeces, first, last, converClb) {\r\n    const r = [];\r\n    for(let i = first; i<last; ++i) {\r\n      const vis = [indeces[i].a,indeces[i].b,indeces[i].c];\r\n      for(let j = 0; j<vis.length; ++j) {\r\n        if(!r[vis[j]]) {\r\n          r[vis[j]] = converClb(vertices[vis[j]]);\r\n        }\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  static computeFaceVertexUvs(geometry, faces) {\r\n    const uvs = [\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, 0, faces[0], (p)=>new THREE.Vector2(p.x, 1-p.z)),\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[0], faces[1], (p)=>new THREE.Vector2(1-p.x, 1-p.z)),\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[1], faces[2], (p)=>new THREE.Vector2(p.x, p.y)),\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[2], faces[3], (p)=>new THREE.Vector2(1-p.x, p.y)),\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[3], faces[4], (p)=>new THREE.Vector2(p.z, p.y)),\r\n                ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[4], geometry.faces.length, (p)=>new THREE.Vector2(1-p.z, p.y))\r\n    ];\r\n\r\n    let uvsi = 0;\r\n    for(let i = 0; i<geometry.faces.length; ++i) {\r\n      uvsi += faces[uvsi] === i;\r\n      const f = geometry.faces[i];\r\n      f.materialIndex = uvsi;\r\n      geometry.faceVertexUvs[0][i] = [uvs[uvsi][f.a], uvs[uvsi][f.b], uvs[uvsi][f.c]];\r\n    }\r\n  }\r\n\r\n  static createMarker(p, c, size) {\r\n    const marker = new THREE.Mesh(new THREE.SphereGeometry(size), new THREE.MeshPhongMaterial({ color: c }));\r\n    marker.position.set(p.x,p.y,p.z);\r\n    return marker;\r\n  }\r\n\r\n  static findUvTris(geometry, ps, first, last) {\r\n    const res = [];\r\n    for(let p of ps) {\r\n      let found = false;\r\n      for(let i=first; i<last && !found; ++i) {\r\n        const tri = geometry.faceVertexUvs[0][i];\r\n        if(BaseMathUtils.isInsideConvPoly(tri, p)) {\r\n          res.push({\r\n            coefs: BaseMathUtils.computeInterpCoefs(tri, p),\r\n            i\r\n          });\r\n          found = true;\r\n        }\r\n      }\r\n      if(!found) {\r\n        console.error('Bad point');\r\n        res.push(undefined);\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  static findInternalVertices(geometry, ps, first, last) {\r\n    const res = {};\r\n    for(let i=first; i<last; ++i) {\r\n      const tri = geometry.faceVertexUvs[0][i], f = geometry.faces[i], vs = [f.a, f.b, f.c];\r\n      for(let j=0; j<tri.length; ++j) {\r\n        if(res[vs[j]]===undefined && BaseMathUtils.isInsidePoly(ps, tri[j])) {\r\n          res[vs[j]] = {\r\n            p: tri[j],\r\n            i: vs[j],\r\n            n: f.vertexNormals[j]\r\n          };\r\n        }\r\n      }\r\n    }\r\n    return Object.values(res);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ThreeUtils.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ThreeUtils.js","\r\nexport default class Target {\r\n\r\n  static test(object1, object2) {\r\n    return object1.target===object2.target;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/targets/Target.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/targets/Target.js","import {$, tr} from './js/libs';\r\nimport Detector from 'Detector';\r\nimport VisualWorld from 'VisualWorld';\r\nimport PdfLinksHandler from './js/classes/PdfLinksHandler';\r\nimport Book from './js/classes/Book';\r\nimport BookView from './js/classes/BookView';\r\nimport BookController from './js/classes/BookController';\r\nimport PdfBookPropsBuilder from './js/classes/PdfBookPropsBuilder';\r\nimport ClbBookPropsBuilder from './js/classes/ClbBookPropsBuilder';\r\nimport LoadingController from 'LoadingController';\r\nimport Search from 'Search';\r\nimport Bookmarks from 'Bookmarks';\r\nimport Thumbnails from 'Thumbnails';\r\nimport TocController from './js/classes/TocController';\r\nimport BookPrinter from './js/classes/BookPrinter';\r\nimport AutoNavigator from './js/classes/AutoNavigator';\r\nimport SoundsEnviroment from './js/classes/SoundsEnviroment';\r\n\r\n$.fn.FlipBook = function(options) {\r\n  const scene = {\r\n    dispose() {\r\n      if(this.ready) {\r\n        !scene.pdfLinksHandler || scene.pdfLinksHandler.dispose();\r\n        delete scene.pdfLinksHandler;\r\n        scene.sounds.dispose();\r\n        delete scene.sounds;\r\n        scene.tocCtrl.dispose();\r\n        delete scene.tocCtrl;\r\n        scene.thumbnails.dispose();\r\n        delete scene.thumbnails;\r\n        !scene.bookmarks || scene.bookmarks.dispose();\r\n        delete scene.bookmarks;\r\n        scene.ctrl.dispose();\r\n        delete scene.ctrl;\r\n        scene.bookPrinter.dispose();\r\n        delete scene.bookPrinter;\r\n        scene.book.dispose();\r\n        delete scene.book;\r\n        scene.propsBuilder.dispose();\r\n        delete scene.propsBuilder;\r\n        delete scene.bookBuilder;\r\n        scene.visual.dispose();\r\n        delete scene.visual;\r\n        scene.view.dispose();\r\n        delete scene.view;\r\n        delete scene.dispose;\r\n      }\r\n      else {\r\n        this.pendingDispose = true;\r\n      }\r\n    }\r\n  };\r\n  options = {...options};\r\n  scene.view = new BookView(this.length? this[0]: $('<div>').appendTo('body'), ()=> {\r\n    if(!Detector.webgl) {\r\n      Detector.addGetWebGLMessage({parent: scene.view.getView()});\r\n    }\r\n    else {\r\n      scene.loadingCtrl = new LoadingController(scene.view, true, (progress)=> progress===0? tr('Please wait... the Application is Loading'): tr('PDF is Loading:')+' '+progress+'%');\r\n      scene.visual = new VisualWorld(scene.view.getContainer().ownerDocument.defaultView, scene.view.getContainer().ownerDocument, scene.view.getView());\r\n      scene.bookBuilder = (props, sheets, pageCallback)=> {\r\n        props.cssLayerProps = {\r\n          ...props.cssLayerProps,\r\n          scene\r\n        };\r\n        if(options.propertiesCallback) {\r\n          props = options.propertiesCallback(props);\r\n        }\r\n        scene.book = new Book(scene.visual, sheets, pageCallback, props);\r\n        scene.bookPrinter = new BookPrinter(scene.visual, scene.book, (options.template || {}).printStyle);\r\n        scene.loadingCtrl.dispose();\r\n        delete scene.loadingCtrl;\r\n        scene.ctrl = new BookController(scene.book, scene.view, options.controlsProps);\r\n        scene.book.setInjector((w)=> {\r\n          w.jQuery = w.$ = $;\r\n          w.book = scene.book;\r\n          w.bookCtrl = scene.ctrl;\r\n          if(props.injector) {\r\n            props.injector(w);\r\n          }\r\n        });\r\n        scene.view.addHandler(scene.ctrl);\r\n        scene.ctrl.setPrinter(scene.bookPrinter);\r\n        const test = pageCallback(0);\r\n\r\n        scene.search = new Search(scene.view.getSearchView(), scene.book.getPages());\r\n        scene.search.onQuery = scene.book.setQuery.bind(scene.book);\r\n        scene.book.addEventListener('searchResults', (e)=> {\r\n          scene.search.setResults(e.results, e.lastPage);\r\n        });\r\n\r\n        scene.thumbnails = new Thumbnails(scene.visual, scene.view.getThumbnailsView(), pageCallback, 2*(sheets+2), {kWtoH: props.width/props.height});\r\n        scene.tocCtrl = new TocController(scene.view, scene.ctrl);\r\n        scene.tocCtrl.setThumbnails(scene.thumbnails);\r\n        scene.tocCtrl.setSearch(scene.search);\r\n        scene.ctrl.setTocCtrl(scene.tocCtrl);\r\n        scene.view.addHandler(scene.tocCtrl);\r\n\r\n        if(test.type==='pdf') {\r\n          scene.pdfLinksHandler = new PdfLinksHandler(test.src, scene.ctrl, scene.visual.element);\r\n          scene.book.addEventListener('pdfAnnotation', scene.pdfLinksHandler.handleEvent.bind(scene.pdfLinksHandler));\r\n          test.src.getHandler((handler)=> {\r\n            handler.getOutline().\r\n              then((outline)=> {\r\n                scene.bookmarks = new Bookmarks(scene.view.getBookmarksView(), outline);\r\n                scene.tocCtrl.setBookmarks(scene.bookmarks, test.src);\r\n              });\r\n          });\r\n          if(options.pdfLinks && options.pdfLinks.handler) {\r\n            scene.pdfLinksHandler.setHandler(options.pdfLinks.handler);\r\n          }\r\n        }\r\n\r\n        scene.sounds = new SoundsEnviroment(options.template);\r\n        scene.ctrl.setSounds(scene.sounds);\r\n        scene.sounds.subscribeFlips(scene.ctrl);\r\n\r\n        scene.ready = true;\r\n        new AutoNavigator(scene.visual, scene.ctrl, options.autoNavigation).dispose();\r\n        if(options.ready) {\r\n          options.ready(scene);\r\n        }\r\n        if(scene.pendingDispose) {\r\n          scene.dispose();\r\n        }\r\n      };\r\n      if(options.pdf) {\r\n        scene.propsBuilder = new PdfBookPropsBuilder(options.pdf, scene.bookBuilder);\r\n        scene.propsBuilder.pdf.setLoadingProgressClb(scene.loadingCtrl.setProgress.bind(scene.loadingCtrl));\r\n      }\r\n      else if(options.pageCallback) {\r\n        scene.propsBuilder = new ClbBookPropsBuilder(scene.visual, options.pageCallback, options.pages, scene.bookBuilder);\r\n      }\r\n      else {\r\n        scene.propsBuilder = new ClbBookPropsBuilder(scene.visual, Book.pageCallback, 6, scene.bookBuilder);\r\n      }\r\n    }\r\n  }, options.template);\r\n  return scene;\r\n}\r\n\r\n$(()=> {\r\n  let containers = $('.flip-book-container');\r\n  for(let i = 0; i<containers.length; ++i) {\r\n    const jContainer = $(containers[i]), src = jContainer.attr('src');\r\n    if(!!src) {\r\n      jContainer.FlipBook({pdf: src});\r\n    }\r\n  }\r\n});\r\n\r\nwindow.jQuery = window.$ = $;\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js\n\n\n// WEBPACK FOOTER //\n// webpack:///index.js","if (!Array.prototype.fill) {\r\n  Array.prototype.fill = function(value) {\r\n\r\n    // Шаги 1-2.\r\n    if (this == null) {\r\n      throw new TypeError('this is null or not defined');\r\n    }\r\n\r\n    var O = Object(this);\r\n\r\n    // Шаги 3-5.\r\n    var len = O.length >>> 0;\r\n\r\n    // Шаги 6-7.\r\n    var start = arguments[1];\r\n    var relativeStart = start >> 0;\r\n\r\n    // Шаг 8.\r\n    var k = relativeStart < 0 ?\r\n      Math.max(len + relativeStart, 0) :\r\n      Math.min(relativeStart, len);\r\n\r\n    // Шаги 9-10.\r\n    var end = arguments[2];\r\n    var relativeEnd = end === undefined ?\r\n      len : end >> 0;\r\n\r\n    // Шаг 11.\r\n    var final = relativeEnd < 0 ?\r\n      Math.max(len + relativeEnd, 0) :\r\n      Math.min(relativeEnd, len);\r\n\r\n    // Шаг 12.\r\n    while (k < final) {\r\n      O[k] = value;\r\n      k++;\r\n    }\r\n\r\n    // Шаг 13.\r\n    return O;\r\n  };\r\n}\r\n\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n     'use strict';\r\n     if (this == null) {\r\n       throw new TypeError('Array.prototype.find called on null or undefined');\r\n     }\r\n     if (typeof predicate !== 'function') {\r\n       throw new TypeError('predicate must be a function');\r\n     }\r\n     var list = Object(this);\r\n     var length = list.length >>> 0;\r\n     var thisArg = arguments[1];\r\n     var value;\r\n\r\n     for (var i = 0; i < length; i++) {\r\n       value = list[i];\r\n       if (predicate.call(thisArg, value, i, list)) {\r\n         return value;\r\n       }\r\n     }\r\n     return undefined;\r\n    }\r\n  });\r\n}\r\n\r\nif (!Array.prototype.findIndex) {\r\n  Array.prototype.findIndex = function(predicate) {\r\n    if (this == null) {\r\n      throw new TypeError('Array.prototype.findIndex called on null or undefined');\r\n    }\r\n    if (typeof predicate !== 'function') {\r\n      throw new TypeError('predicate must be a function');\r\n    }\r\n    var list = Object(this);\r\n    var length = list.length >>> 0;\r\n    var thisArg = arguments[1];\r\n    var value;\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      value = list[i];\r\n      if (predicate.call(thisArg, value, i, list)) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n}\r\n\r\nif (!Object.values) {\r\n\tObject.values = function values(O) {\r\n\t\treturn Object.keys(O).map((name)=>O[name]) || [];\r\n\t};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/polyfill.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/polyfill.js","\r\nexport default class AutoNavigator {\r\n\r\n  constructor(context, bookCtrl, props={}) {\r\n    props = {\r\n      ...props,\r\n      urlParam: props.urlParam || 'fb3d-page',\r\n      navigates: props.navigates===undefined? 1: props.navigates\r\n    };\r\n    this.props = props;\r\n    this.context = context;\r\n    this.bookCtrl = bookCtrl;\r\n    this.urlParam = props.urlParam;\r\n    this.wnd = context.wnd;\r\n\r\n    this.wnd.fb3d = {\r\n      ...this.wnd.fb3d\r\n    };\r\n    this.wnd.fb3d.navigator = {\r\n      ...this.wnd.fb3d.navigator\r\n    };\r\n    this.navigator = this.wnd.fb3d.navigator[this.urlParam] = {\r\n      ...this.wnd.fb3d.navigator[this.urlParam]\r\n    };\r\n    this.navigator.instances = (this.navigator.instances || 0)+1;\r\n\r\n    if(this.navigator.instances<=this.props.navigates) {\r\n      this.bookCtrl.goToPage(this.getPageNumber());\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n\r\n  }\r\n\r\n  getParameterByName(name, url) {\r\n    if (!url) {\r\n      url = window.location.href;\r\n    }\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    const regex = new RegExp('[?&]' + name + '(=([^]*)|&|#|$)'),\r\n    results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n  }\r\n\r\n  getPageNumber() {\r\n    let number = this.getParameterByName(this.urlParam);\r\n    number = parseInt(number);\r\n    if(isNaN(number)) {\r\n      number = 1;\r\n    }\r\n    return number-1;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/AutoNavigator.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/AutoNavigator.js","import {THREE} from '../libs';\r\nimport MathUtils from 'MathUtils'\r\n\r\nexport default class Binder {\r\n\r\n  constructor(visual, p) {\r\n    this.visual = visual;\r\n    this.p = {\r\n      ...p,\r\n      backSize: 2*p.cover.depth+p.sheets*p.page.depth\r\n    };\r\n    this.OZ = new THREE.Vector3(0,0,1);\r\n\r\n    this.backG = new THREE.BoxGeometry(p.cover.depth, this.p.backSize, p.cover.height);\r\n\r\n    this.materials = [\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color}),\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color}),\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color}),\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color}),\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color}),\r\n                      new THREE.MeshPhongMaterial({color: p.cover.color})\r\n                     ];\r\n\r\n    const backM = new THREE.Mesh(this.backG, new THREE.MeshFaceMaterial(this.materials));\r\n\r\n    if(p.cover.binderTexture!=='') {\r\n      this.visual.textureLoader.load(p.cover.binderTexture, (texture)=> {\r\n        this.materials[1].color.setHex(0xFFFFFF);\r\n        this.materials[1].map = texture;\r\n        texture.minFilter = THREE.LinearFilter;\r\n        texture.needsUpdate = true;\r\n        this.materials[1].needsUpdate = true;\r\n      });\r\n    }\r\n\r\n    this.three = new THREE.Object3D();\r\n    this.back = new THREE.Object3D();\r\n    this.backRT = new THREE.Object3D();\r\n    this.backRR = new THREE.Object3D();\r\n    this.backLT = new THREE.Object3D();\r\n    this.backLR = new THREE.Object3D();\r\n    this.leftPivot = new THREE.Object3D();\r\n    this.rightPivot = new THREE.Object3D();\r\n\r\n    this.back.add(backM);\r\n    this.back.add(this.leftPivot);\r\n    this.back.add(this.rightPivot);\r\n    this.backRT.add(this.back);\r\n    this.backRR.add(this.backRT);\r\n    this.backLT.add(this.backRR);\r\n    this.backLR.add(this.backLT);\r\n    this.three.add(this.backLR);\r\n  }\r\n\r\n  dispose() {\r\n    for(let m of this.materials) {\r\n      if(m.map) {\r\n        m.map = null;\r\n        m.needsUpdate = true;\r\n      }\r\n      m.dispose();\r\n    }\r\n    delete this.materials;\r\n    this.backG.dispose();\r\n  }\r\n\r\n  set(angle) {\r\n    let right, left;\r\n    if(angle>Math.PI/2) {\r\n      right = Math.PI/2;\r\n      left = angle-Math.PI/2;\r\n    }\r\n    else {\r\n      right = angle;\r\n      left = 0;\r\n    }\r\n    const p = this.p,tr1={x:-0.5*p.cover.depth,y:0.5*p.backSize-p.cover.depth};\r\n    this.backRT.position.set(tr1.x,tr1.y,0);\r\n    this.backRR.position.set(-tr1.x,-tr1.y,0);\r\n    this.backRR.quaternion.setFromAxisAngle(this.OZ, right);\r\n\r\n    const tr2={x:p.backSize-2*p.cover.depth-0.5*p.cover.depth,y:0.5*p.backSize-p.cover.depth};\r\n    this.backLT.position.set(tr2.x,tr2.y,0);\r\n    this.backLR.position.set(-tr2.x,-tr2.y,0);\r\n    this.backLR.quaternion.setFromAxisAngle(this.OZ, left);\r\n  }\r\n\r\n  setLeft(angle) {\r\n    const PI = Math.PI;\r\n    this.leftPivot.position.set(MathUtils.interpolateLinear([-PI,-PI/2],[0,this.p.cover.depth],angle),0.5*this.p.backSize-0.5*this.p.cover.depth,0);\r\n    this.leftPivot.quaternion.setFromAxisAngle(this.OZ, angle);\r\n  }\r\n\r\n  setRight(angle) {\r\n    const PI = Math.PI;\r\n      this.rightPivot.position.set(MathUtils.interpolateLinear([-PI/2,0],[this.p.cover.depth,0],angle),-0.5*this.p.backSize+0.5*this.p.cover.depth,0);\r\n      this.rightPivot.quaternion.setFromAxisAngle(this.OZ, angle);\r\n  }\r\n\r\n  joinLeftCover(cover) {\r\n    cover.three.position.set(0,-0.5*this.p.cover.depth,0);\r\n    this.leftPivot.add(cover.three);\r\n  }\r\n\r\n  disconnectLeftCover(cover) {\r\n    this.leftPivot.remove(cover.three);\r\n  }\r\n\r\n  joinRightCover(cover) {\r\n    cover.three.position.set(0,-0.5*this.p.cover.depth,0);\r\n    this.rightPivot.add(cover.three);\r\n  }\r\n\r\n  disconnectRightCover(cover) {\r\n    this.rightPivot.remove(cover.three);\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/Binder.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/Binder.js","import {$, THREE} from '../libs';\r\nimport {props as  bookProps} from '../props/book';\r\nimport GraphUtils from 'GraphUtils';\r\nimport Binder from './Binder';\r\nimport Cover from './Cover';\r\nimport SheetBlock from './SheetBlock';\r\nimport SheetPhysics from './SheetPhysics';\r\nimport PageManager from './PageManager';\r\nimport CSSLayer from 'CSSLayer';\r\nimport CssLayersManager from './CssLayersManager';\r\nimport SearchEngine from './SearchEngine';\r\nimport CustomEventConverter from 'CustomEventConverter';\r\nimport CircleTarget from 'targets/CircleTarget';\r\n\r\nexport default class Book extends THREE.EventDispatcher {\r\n  // pageCallback samples\r\n\r\n  // (n)=> ({\r\n  //   type: 'image',\r\n  //   src: 'sample.png',\r\n  //   interactive: false\r\n  // });\r\n  //\r\n  // (n)=> ({\r\n  //   type: 'html',\r\n  //   src: 'sample.html',\r\n  //   interactive: true\r\n  // });\r\n  //\r\n  // const pdf = new Pdf('sample.pdf');\r\n  // (n)=> ({\r\n  //   type: 'pdf',\r\n  //   src: pdf,\r\n  //   interactive: false\r\n  // });\r\n\r\n  constructor(visual, sheets, pageCallback, props) {\r\n    super();\r\n    sheets = Math.min(3, sheets);\r\n    visual.jContainer.append(`\r\n      <style type=\"text/css\">\r\n        .demo-msg {\r\n          position: absolute;\r\n          top: 10px;\r\n          right: 10px;\r\n          padding: 10px;\r\n          background-color: #ffe4e1;\r\n          border-radius: 3px;\r\n        }\r\n      </style>\r\n      <div class=\"demo-msg\">\r\n        This is the demo version, only 10 pages are available. Use the <a href=\"https://goo.gl/bt3Zhh\" target=\"_blank\">full version</a>.\r\n      </div>\r\n    `);\r\n    this.visual = visual;\r\n    this.mouseController = true;\r\n    this.p = {\r\n      ...Book.prepareProps(props),\r\n      sheets,\r\n      pageCallback,\r\n      zoom: 1,\r\n      singlePage: false,\r\n      autoResolution: {\r\n        enable: false,\r\n        k: 1.5\r\n      }\r\n    };\r\n    this.pageManager = new PageManager(visual, this, this.p);\r\n    CSSLayer.init(visual.doc);\r\n    this.layerManager = new CssLayersManager(this);\r\n    this.searchEngine = new SearchEngine(pageCallback, 2*(sheets+2));\r\n    this.searchEngine.onPageHitsChanged = (page, query)=> {\r\n      this.pageManager.refreshPageQuery(page, query);\r\n      this.dispatchEvent({\r\n        type: 'searchResults',\r\n        results: this.searchEngine.results,\r\n        lastPage: page,\r\n        query\r\n      });\r\n    };\r\n\r\n    this.three = new THREE.Object3D();\r\n\r\n    this.binder = new Binder(visual, this.p);\r\n    this.three.add(this.binder.three);\r\n\r\n    this.leftCover = new Cover(visual, {...this.p, setTexture: this.setLeftCoverTexture.bind(this)}, Math.PI/2, 'opened');\r\n    this.binder.joinLeftCover(this.leftCover);\r\n    this.subscribeSheetBlock(this.leftCover, 0);\r\n    this.rightCover = new Cover(visual, {...this.p, setTexture: this.setRightCoverTexture.bind(this)}, 0, 'closed');\r\n    this.binder.joinRightCover(this.rightCover);\r\n    this.subscribeSheetBlock(this.rightCover, 2*(this.p.sheets+1));\r\n\r\n    this.threeSheetBlocks = new THREE.Object3D();\r\n    this.three.add(this.threeSheetBlocks);\r\n    this.threeSheetBlocks.position.set(0.5*this.p.cover.depth-0.5*sheets*this.p.page.depth,-0.5*sheets*this.p.page.depth,0);\r\n\r\n    this.sheetBlocks = [];\r\n    if(sheets>0) {\r\n      this.addSheetBlock(0, new SheetBlock(visual, {...this.p, setTexture: this.setPageTexture.bind(this)}, 0, sheets, 0, 'closed'));\r\n    }\r\n\r\n    this.angle = this.p.rtl? Math.PI: 0;\r\n    this.closedAngle = 0;\r\n    this.set(this.angle,0);\r\n    this.lastMousePos = {\r\n      t: 0\r\n    };\r\n\r\n    this.three.position.set(-0.5*this.p.cover.depth+0.5*sheets*this.p.page.depth,0,0);\r\n    this.sheetPhysics = new SheetPhysics(this.p.page.width/this.p.scale, this.p.gravity, this.p.page.cornerDeviation);\r\n\r\n    this.binds = {\r\n      update: this.update.bind(this),\r\n      lastMousePos: (e)=> {\r\n        this.lastMousePos = {\r\n          ...this.lastMousePos,\r\n          pageX: e.pageX,\r\n          pageY: e.pageY\r\n        };\r\n      }\r\n    };\r\n    this.visual.addRenderCallback(this.binds.update);\r\n    $(this.visual.element).on('mousemove', this.binds.lastMousePos);\r\n\r\n    this.binds.onPickCallback = this.onPickCallback.bind(this)\r\n    this.visual.drag.onPickCallback = this.binds.onPickCallback;\r\n    this.binds.onDragCallback = this.onDragCallback.bind(this)\r\n    this.visual.drag.onDragCallback = this.binds.onDragCallback;\r\n    this.binds.onReleaseCallback = this.onReleaseCallback.bind(this)\r\n    this.visual.drag.onReleaseCallback = this.binds.onReleaseCallback;\r\n\r\n    this.dragAngle = 0.05;\r\n    this.tmp = {\r\n      boxs: [\r\n        new THREE.Box3(),\r\n        new THREE.Box3()\r\n      ]\r\n    };\r\n\r\n    this.visual.addObject(this.three);\r\n    this.visual.addEventListener('resize', this.pageManager.refreshZoom.bind(this.pageManager));\r\n\r\n    setTimeout(()=> {\r\n      this.notifyBeforeAnimation();\r\n      this.notifyAfterAnimation();\r\n    }, 100);\r\n  }\r\n\r\n  dispose() {\r\n    this.visual.removeObject(this.three);\r\n    this.sheetPhysics.dispose();\r\n    delete this.visual.drag.onPickCallback;\r\n    delete this.visual.drag.onDragCallback;\r\n    delete this.visual.drag.onReleaseCallback;\r\n    $(this.visual.element).off('mousemove', this.binds.lastMousePos);\r\n    this.visual.removeRenderCallback(this.binds.update);\r\n    this.removeSheetBlocks(0, this.sheetBlocks.length);\r\n    this.binder.disconnectLeftCover(this.leftCover);\r\n    this.removeSheetBlock(this.leftCover);\r\n    this.binder.disconnectRightCover(this.rightCover);\r\n    this.removeSheetBlock(this.rightCover);\r\n    this.binder.dispose();\r\n    this.layerManager.dispose();\r\n    CSSLayer.dispose();\r\n    this.pageManager.dispose();\r\n  }\r\n\r\n  // publics {\r\n\r\n  setAutoResolution(enable, k=1.5) {\r\n    this.p.autoResolution = {\r\n      ...this.p.autoResolution,\r\n      enable,\r\n      k\r\n    };\r\n  }\r\n\r\n  setZoom(zoom, singlePage) {\r\n    if(Math.abs(this.p.zoom-zoom)>1e-3 || singlePage!==this.p.singlePage) {\r\n      this.p.zoom = zoom;\r\n      this.p.singlePage = singlePage;\r\n      this.pageManager.refreshZoom();\r\n    }\r\n  }\r\n\r\n  getPageCallback() {\r\n    return this.p.pageCallback;\r\n  }\r\n\r\n  setQuery(query) {\r\n    this.searchEngine.setQuery(query);\r\n  }\r\n\r\n  isProcessing() {\r\n    return this.sheetPhysics.getSize()!==0;\r\n  }\r\n\r\n  getPages() {\r\n    return 4+2*this.p.sheets;\r\n  }\r\n\r\n  setFlipProgressClb(clb) {\r\n    this.p.flipProgressClb = clb;\r\n  }\r\n\r\n  setInjector(injector) {\r\n    this.p.injector = injector;\r\n  }\r\n\r\n  isActivePage(n) {\r\n    let res = true;\r\n    if(n>1 && n<this.getPages()-2) {\r\n      for(let b of this.sheetBlocks) {\r\n        if(n-2>2*b.p.first && n-2<2*b.p.last-1) {\r\n          res = false;\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  getBlockByPage(n) {\r\n    let block;\r\n    if(n<2) {\r\n      block = this.leftCover;\r\n    }\r\n    else if(n<2*(this.p.sheets+1)) {\r\n      for(let b of this.sheetBlocks) {\r\n        if(n-2>=2*b.p.first && n-2<2*b.p.last) {\r\n          block = b;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      block = this.rightCover;\r\n    }\r\n    return block;\r\n  }\r\n\r\n  getBlockPages(block) {\r\n    let range;\r\n    switch (block) {\r\n      case this.leftCover: {\r\n          range = [0, 1];\r\n        break;\r\n      }\r\n      case this.rightCover: {\r\n        range = [2*(this.p.sheets+1), 2*(this.p.sheets+1)+1];\r\n        break;\r\n      }\r\n      default: {\r\n        range = block? [2*(block.p.first+1), 2*(block.p.last+1)-1]: undefined;\r\n      }\r\n    }\r\n    return range;\r\n  }\r\n\r\n  getPage() {\r\n    const PI = Math.PI;\r\n    let p;\r\n    if(this.angle === PI/2 || this.angle === 3*PI/2) {\r\n      for(let block of this.sheetBlocks) {\r\n        if(block.angle<=PI/2) {\r\n          p = this.getBlockPages(block)[0]-1;\r\n          break;\r\n        }\r\n      }\r\n      if(!p) {\r\n        p = this.getPages()-3;\r\n      }\r\n    }\r\n    else if(this.angle<PI/2) {\r\n      p = 0;\r\n    }\r\n    else if(this.angle>3*PI/2) {\r\n      p = 1;\r\n    }\r\n    else if(this.angle<PI) {\r\n      p = this.getPages()-3;\r\n    }\r\n    else if(this.angle>=PI) {\r\n      p = this.getPages()-1;\r\n    }\r\n    return p;\r\n  }\r\n\r\n  getTopPages() {\r\n    const p = this.getPage();\r\n    return p===0 || p===this.getPages()-1? [p]: [p, p+1];\r\n  }\r\n\r\n  getPageState(n) {\r\n    return this.pageManager.getPageState(n);\r\n  }\r\n\r\n  enableLoadingAnimation(enable) {\r\n    this.pageManager.enableLoadingAnimation(enable);\r\n  }\r\n\r\n  getLeftFlipping() {\r\n    let block;\r\n    const left = this.sheetBlocks[0], PI = Math.PI;\r\n    if(this.angle===PI) {\r\n      block = this.rightCover;\r\n    }\r\n    else {\r\n      if(left && left.state==='closed' && left.angle>PI/2) {\r\n        block = left;\r\n      }\r\n      else if(this.angle === PI/2 || this.angle === 3*PI/2) {\r\n        block = this.leftCover;\r\n      }\r\n    }\r\n    return block;\r\n  }\r\n\r\n  getRightFlipping() {\r\n    let block;\r\n    const right = this.sheetBlocks[this.sheetBlocks.length-1], PI = Math.PI;\r\n    if(this.angle===0) {\r\n      block = this.leftCover;\r\n    }\r\n    else {\r\n      if(right && right.state==='closed' && right.angle<=PI/2) {\r\n        block = right;\r\n      }\r\n      else if(this.angle===PI/2 || this.angle === 3*PI/2) {\r\n        block = this.rightCover;\r\n      }\r\n    }\r\n    return block;\r\n  }\r\n\r\n  getClosedBlockAngle(angle) {\r\n    let closedAngle, {PI} = Math;\r\n\r\n    if(this.leftCover.physicId) {\r\n      let test;\r\n      try {\r\n        test = Math.abs(this.sheetPhysics.getParametr(this.leftCover.physicId, 'angle')-angle)\r\n      }\r\n      catch(e) {\r\n        test = 0;\r\n      }\r\n      closedAngle = angle>PI/2 || test>PI/6? PI/2: this.closedAngle;\r\n    }\r\n    else if(this.rightCover.physicId) {\r\n      let test;\r\n      try {\r\n        test = Math.abs(this.sheetPhysics.getParametr(this.rightCover.physicId, 'angle')-angle)\r\n      }\r\n      catch(e) {\r\n        test = 0;\r\n      }\r\n      closedAngle = angle<PI/2 || test>PI/6? PI/2+1e-7: this.closedAngle;\r\n    }\r\n    else {\r\n      closedAngle = PI/2+(angle!==0)*1e-7;\r\n    }\r\n\r\n    return {\r\n      openedAngle: angle,\r\n      closedAngle,\r\n      binderTurn: this.closedAngle\r\n    };\r\n  }\r\n\r\n  flipLeft(size=1, progressClb=this.p.flipProgressClb) {\r\n    let block, res;\r\n    if(this.sheetPhysics.getSize()<25) {\r\n      const left = this.sheetBlocks[0], PI = Math.PI;\r\n      if(this.angle===PI) {\r\n        res = this.connectPhysics(\r\n          block=this.rightCover,\r\n          this.p.cover.mass,\r\n          PI,\r\n          -this.p.cover.startVelocity,\r\n          this.p.cover.flexibility,\r\n          0,\r\n          (angle,height)=>this.set(3*PI/2-angle/2,height),\r\n          (angle,height)=> {\r\n            this.set(3*PI/2-angle/2,0);\r\n            this.setSheetBlocks(angle? PI: PI/2+1e-7,'closed');\r\n          },\r\n          progressClb\r\n        );\r\n      }\r\n      else {\r\n        if(left && left.state==='closed' && left.angle>PI/2) {\r\n          block = size<left.getSize()? this.splitSheetBlock(0, left.getSize()-size)[1]: left;\r\n          res = this.connectPhysics(\r\n            block,\r\n            this.p.page.mass*block.getSize(),\r\n            PI,\r\n            -this.p.page.startVelocity,\r\n            this.p.page.flexibility,\r\n            0,\r\n            (angle,height)=>block.set(this.getClosedBlockAngle(angle),'opened',height),\r\n            Book.finishAnimationClb.bind({book: this, block}),\r\n            progressClb\r\n          );\r\n        }\r\n        else if(this.angle === PI/2 || this.angle === 3*PI/2) {\r\n          res = this.connectPhysics(\r\n            block=this.leftCover,\r\n            this.p.cover.mass,\r\n            PI,\r\n            -this.p.cover.startVelocity,\r\n            this.p.cover.flexibility,\r\n            0,\r\n            (angle,height)=> {\r\n              this.set(2*PI-angle/2,height);\r\n              if(angle>PI/2) {\r\n                this.setSheetBlocks(angle? PI/2: 0,'closed');\r\n              }\r\n            },\r\n            (angle,height)=> this.set(angle===0? 0: 2*PI-angle/2,0),\r\n            progressClb\r\n          );\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  flipRight(size=1, progressClb=this.p.flipProgressClb) {\r\n    let block, res;\r\n    if(this.sheetPhysics.getSize()<25) {\r\n      const right = this.sheetBlocks[this.sheetBlocks.length-1], PI = Math.PI;\r\n      if(this.angle===0) {\r\n        res = this.connectPhysics(\r\n          block=this.leftCover,\r\n          this.p.cover.mass,\r\n          0,\r\n          this.p.cover.startVelocity,\r\n          this.p.cover.flexibility,\r\n          0,\r\n          (angle,height)=>this.set(angle/2,height),\r\n          (angle,height)=> {\r\n            this.set(angle/2,0);\r\n            this.setSheetBlocks(angle? PI/2: 0,'closed');\r\n          },\r\n          progressClb\r\n        );\r\n      }\r\n      else {\r\n        if(right && right.state==='closed' && right.angle<=PI/2) {\r\n          block = size<right.getSize()? this.splitSheetBlock(this.sheetBlocks.length-1, size)[0]: right;\r\n          res = this.connectPhysics(\r\n            block,\r\n            this.p.page.mass*block.getSize(),\r\n            0,\r\n            this.p.page.startVelocity,\r\n            this.p.page.flexibility,\r\n            0,\r\n            (angle,height)=>block.set(this.getClosedBlockAngle(angle),'opened',height),\r\n            Book.finishAnimationClb.bind({book: this, block}),\r\n            progressClb\r\n          );\r\n        }\r\n        else if(this.angle===PI/2 || this.angle === 3*PI/2) {\r\n          res = this.connectPhysics(\r\n            block=this.rightCover,\r\n            this.p.cover.mass,\r\n            0,\r\n            this.p.cover.startVelocity,\r\n            this.p.cover.flexibility,\r\n            0,\r\n            (angle,height)=> {\r\n              this.set(PI/2+angle/2,height);\r\n              if(angle<PI/2) {\r\n                this.setSheetBlocks(PI/2+1e-7,'closed');\r\n              }\r\n            },\r\n            (angle,height)=>this.set(PI/2+angle/2,0),\r\n            progressClb\r\n          );\r\n        }\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  // }\r\n\r\n  clearHoverInfo() {\r\n    this.pageManager.turnOnEvents();\r\n    delete this.hoverInfo.block.force;\r\n    delete this.hoverInfo.block.cornerForce;\r\n    delete this.hoverInfo;\r\n  }\r\n\r\n  xSegment() {\r\n    const boxs = this.tmp.boxs, res = {};\r\n    if(this.leftCover.physicId) {\r\n      boxs[0].setFromObject(this.rightCover.three);\r\n      res.min = -(res.max = boxs[0].max.x);\r\n    }\r\n    else if(this.rightCover.physicId) {\r\n      boxs[0].setFromObject(this.leftCover.three);\r\n      res.max = -(res.min = boxs[0].min.x);\r\n    }\r\n    else {\r\n      boxs[0].setFromObject(this.leftCover.three);\r\n      boxs[1].setFromObject(this.rightCover.three);\r\n      boxs[0].union(boxs[1]);\r\n      res.min = boxs[0].min.x;\r\n      res.max = boxs[0].max.x;\r\n    }\r\n    return res;\r\n  }\r\n\r\n  computeTarget(point) {\r\n    let {x, y} = point, seg = this.xSegment(), angle;\r\n    angle = (seg.max-x)/(seg.max-seg.min)*Math.PI;\r\n    // angle = Math.acos(x/Math.sqrt(x*x+y*y));\r\n    return Math.max(this.dragAngle, Math.min(Math.PI-this.dragAngle, angle));\r\n  }\r\n\r\n  onPickCallback(object) {\r\n    let res = false;\r\n    const block = object.object.userData.self,\r\n          p = {...object.uv}, i = object.face.materialIndex;\r\n    if(i<2) {\r\n      p.x = i===0? p.x: 1-p.x;\r\n      if(block.cornerTarget.testIntersection(null, p) && block.physicId) {\r\n        if(this.hoverInfo) {\r\n          this.clearHoverInfo();\r\n        }\r\n        block.force = SheetPhysics.dragForceClb;\r\n        block.cornerForce = SheetPhysics.getDragCornerForceClb(this.computeTarget(object.point));\r\n        this.dragInfo = {\r\n          object,\r\n          block\r\n        };\r\n        res = true;\r\n        this.pageManager.turnOffEvents();\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  onDragCallback(point) {\r\n    const block = this.dragInfo.block, p = block.getProps();\r\n    block.force = SheetPhysics.dragForceClb;\r\n    block.cornerForce = SheetPhysics.getDragCornerForceClb(this.computeTarget(point));\r\n    return true;\r\n  }\r\n\r\n  onReleaseCallback() {\r\n    delete this.dragInfo.block.force;\r\n    delete this.dragInfo.block.cornerForce;\r\n    delete this.dragInfo;\r\n    this.pageManager.turnOnEvents();\r\n  }\r\n\r\n  getFlipping(i) {\r\n    return i? this.getLeftFlipping(): this.getRightFlipping();\r\n  }\r\n\r\n  flip(i, size=1) {\r\n    return i? this.flipLeft(size): this.flipRight(size);\r\n  }\r\n\r\n  enableMouse(enable) {\r\n    this.mouseController = enable;\r\n  }\r\n\r\n  cornerCallback(e, data) {\r\n    if(this.mouseController) {\r\n      const {i, n} = data.data;\r\n      if(e.type==='mouseover') {\r\n        if(this.hoverInfo && this.hoverInfo.pendings!==undefined) {\r\n          ++this.hoverInfo.pendings;\r\n        }\r\n        else {\r\n          if(this.hoverInfo) {\r\n            console.warn('Wrong state: element is already hover');\r\n            if(this.hoverInfo.n!==n) {\r\n              this.clearHoverInfo();\r\n            }\r\n          }\r\n          if(!this.hoverInfo && !this.dragInfo) {\r\n            let res = Promise.resolve(undefined);\r\n            const hoverAngle = 0.02,\r\n                  hover = this.getBlockByPage(n),\r\n                  possible = this.getFlipping(i);\r\n            if(n>1 && n<2*(this.p.sheets+1) && hover.physicId && (hover.angle<hoverAngle || hover.angle>Math.PI-hoverAngle)) {\r\n              res = Promise.resolve(hover);\r\n            }\r\n            else if(hover===possible) {\r\n              const sheetBlocks = [\r\n                this.leftCover,\r\n                ...this.sheetBlocks,\r\n                this.rightCover\r\n              ];\r\n              const j = sheetBlocks.indexOf(hover), nextBlock = ~j? sheetBlocks[j+2*i-1]: undefined;\r\n              if(!nextBlock || !nextBlock.physicId || nextBlock.angle>hoverAngle && nextBlock.angle<Math.PI-hoverAngle) {\r\n                res = this.flip(i, 1).then((block)=> {\r\n                  if(!block) {\r\n                    delete this.hoverInfo;\r\n                  }\r\n                  else {\r\n                    this.sheetPhysics.setParametr(block.physicId, 'velocity', 0);\r\n                  }\r\n                  return block;\r\n                });\r\n                this.hoverInfo = {\r\n                  pendings: 1\r\n                };\r\n              }\r\n            }\r\n            res.then((block)=> {\r\n              if(this.hoverInfo && this.hoverInfo.pendings<1) {\r\n                block = undefined;\r\n                delete this.hoverInfo;\r\n              }\r\n              if(block) {\r\n                this.pageManager.turnOffEvents();\r\n                const  p = block.getProps();\r\n                block.force = this.sheetPhysics.getTargetForceClb(p.mass*block.getSize(), i? Math.PI-hoverAngle: hoverAngle);\r\n                block.cornerForce = ()=> (i? -1: 1)*SheetPhysics.hoverCornerForceClb();\r\n                this.sheetPhysics.setParametr(block.physicId, 'angle', i? Math.PI-0.5*hoverAngle: 0.5*hoverAngle);\r\n                this.hoverInfo = {\r\n                  n,\r\n                  block\r\n                };\r\n                this.update(1/30);\r\n              }\r\n            });\r\n          }\r\n        }\r\n\r\n      }\r\n      else if(this.hoverInfo && e.type==='mouseout') {\r\n        if(this.hoverInfo.pendings!==undefined) {\r\n          --this.hoverInfo.pendings;\r\n        }\r\n        else if(n===this.hoverInfo.n) {\r\n          this.clearHoverInfo();\r\n        }\r\n      }\r\n      else if(e.type==='mousedown') {\r\n        this.cornerClickData = {\r\n          x: e.pageX,\r\n          y: e.pageY\r\n        };\r\n      }\r\n      else if(e.type==='click') {\r\n        if(Math.sqrt(Math.pow(this.cornerClickData.x-e.pageX,2)+Math.pow(this.cornerClickData.y-e.pageY,2))<5) {\r\n          const hover = this.getBlockByPage(n);\r\n          if(hover.physicId) {\r\n            const id = hover.physicId,\r\n                  props = hover.getProps();\r\n            this.sheetPhysics.setParametr(id, 'velocity', (i? -1: 1)*props.startVelocity);\r\n          }\r\n        }\r\n        delete this.cornerClickData;\r\n      }\r\n    }\r\n  }\r\n\r\n  addSheetBlock(p, block) {\r\n    this.sheetBlocks.splice(p, 0, block);\r\n    this.subscribeSheetBlock(block, 2);\r\n    this.threeSheetBlocks.add(block.three);\r\n  }\r\n\r\n  subscribeSheetBlock(block, offset) {\r\n    const eventConverter = new CustomEventConverter(this.visual.wnd, this.visual.doc, CircleTarget.test),\r\n          r = 0.15,\r\n          target = new CircleTarget(1-0.5*r, 0.5*r, r);\r\n    target.block = block;\r\n    target.callback = this.cornerCallback.bind(this);\r\n    eventConverter.addCustom(target);\r\n    block.cornerTarget = target;\r\n    block.three.userData.mouseCallback = (e, data)=> {\r\n      const i = data.face.materialIndex;\r\n      if(i<2) {\r\n        const n = i===0? offset+2*block.p.first: offset+2*block.p.last-1;\r\n        eventConverter.convert(e, {x: i===0? data.uv.x: 1-data.uv.x, y: data.uv.y, i, n});\r\n        this.pageManager.transferEventToTexture(n, e, data);\r\n      }\r\n    };\r\n    block.three.userData.touchCallback = (e, data)=> {\r\n      const i = data.face.materialIndex;\r\n      if(i<2) {\r\n        const n = i===0? offset+2*block.p.first: offset+2*block.p.last-1;\r\n        this.pageManager.transferEventToTexture(n, e, data);\r\n      }\r\n    };\r\n    this.visual.drag.addThree(block.three);\r\n    this.visual.mouseEvents.addThree(block.three);\r\n    this.visual.touchEvents.addThree(block.three);\r\n  }\r\n\r\n  removeSheetBlock(block) {\r\n    this.visual.mouseEvents.removeThree(block.three);\r\n    this.visual.touchEvents.removeThree(block.three);\r\n    this.visual.drag.removeThree(block.three);\r\n    this.threeSheetBlocks.remove(block.three);\r\n    block.dispose();\r\n  }\r\n\r\n  removeSheetBlocks(first, size) {\r\n    const blocks = this.sheetBlocks.splice(first, size);\r\n    for(let block of blocks) {\r\n      this.removeSheetBlock(block);\r\n    }\r\n  }\r\n\r\n  setTexture(material, n) {\r\n    this.pageManager.setTexture(material, n);\r\n  }\r\n\r\n  setPageTexture(material, n) {\r\n    this.setTexture(material, n+2);\r\n  }\r\n\r\n  setLeftCoverTexture(material, n) {\r\n    this.setTexture(material, n);\r\n  }\r\n\r\n  setRightCoverTexture(material, n) {\r\n    this.setTexture(material, n+2*(this.p.sheets+1));\r\n  }\r\n\r\n  static finishAnimationClb(angle) {\r\n    this.block.set(this.book.getClosedBlockAngle(angle).closedAngle,'closed',0);\r\n    const i = this.book.sheetBlocks.indexOf(this.block);\r\n    if(~i) {\r\n      if(angle===0) {\r\n        this.book.mergeSheetBlocks(i, this.book.sheetBlocks.length-i);\r\n      }\r\n      else {\r\n        this.book.mergeSheetBlocks(0, i+1);\r\n      }\r\n    }\r\n  }\r\n\r\n  calcBlockForce(block, object, angle, velocity, cornerHeight) {\r\n    return block.force? block.force(object, angle, velocity, cornerHeight): 0;\r\n  }\r\n\r\n  calcBlockCornerForce(block, object, angle, velocity, cornerHeight) {\r\n    return block.cornerForce? block.cornerForce(object, angle, velocity, cornerHeight): 0;\r\n  }\r\n\r\n  notifyBeforeAnimation() {\r\n    let res;\r\n    if(this.animationNotification) {\r\n      res = Promise.reject();\r\n    }\r\n    else {\r\n      this.animationNotification = true;\r\n      this.dispatchEvent({\r\n        type: 'beforeAnimation'\r\n      });\r\n      res = this.layerManager.hide();\r\n    }\r\n    return res;\r\n  }\r\n\r\n  notifyAfterAnimation() {\r\n    if(this.animationNotification) {\r\n      delete this.animationNotification;\r\n      this.layerManager.show();\r\n      this.dispatchEvent({\r\n        type: 'afterAnimation'\r\n      });\r\n    }\r\n  }\r\n\r\n  connectPhysics(block, mass, angle, velocity, flexibility, coverHeight, simulateClb, removeClb, progressClb) {\r\n    const type = ()=> this.hoverInfo? 'hover': (this.dragInfo? 'drag': 'free'),\r\n      res = this.sheetPhysics.getSize()? Promise.resolve(): this.notifyBeforeAnimation();\r\n    return res.then(()=> {\r\n      block.physicId = this.sheetPhysics.addObject(\r\n        mass,\r\n        angle,\r\n        velocity,\r\n        flexibility,\r\n        coverHeight,\r\n        (angl, ch)=> {\r\n          simulateClb(angl, ch);\r\n          progressClb(block, Math.abs(angle-angl)/Math.PI, 'process', type());\r\n        },\r\n        (angl, ch)=> {\r\n          removeClb(angl, ch);\r\n          delete block.physicId;\r\n          progressClb(block, Math.abs(angle-angl)/Math.PI, 'finish', type());\r\n          Promise.resolve().then(()=> {\r\n            if(!this.sheetPhysics.getSize()) {\r\n              this.notifyAfterAnimation();\r\n            }\r\n          });\r\n        },\r\n        (object, angle, velocity, cornerHeight)=> this.calcBlockForce(block, object, angle, velocity, cornerHeight),\r\n        (object, angle, velocity, cornerHeight)=> this.calcBlockCornerForce(block, object, angle, velocity, cornerHeight)\r\n      );\r\n      progressClb(block, 0, 'init', type());\r\n      return block;\r\n    }).catch(()=> undefined);\r\n  }\r\n\r\n  update(dt) {\r\n    this.lastMousePos.t+=dt;\r\n    if(this.isProcessing() && this.lastMousePos.pageX!==undefined && this.lastMousePos.t-(this.lastMousePos.lastT || 0)>0.25 && !this.hoverInfo && !this.dragInfo) {\r\n      this.lastMousePos.lastT = this.lastMousePos.t;\r\n      Promise.resolve().then(()=> {\r\n        $(this.visual.element).trigger($.Event('mousemove', this.lastMousePos));\r\n      });\r\n    }\r\n    this.sheetPhysics.simulate(dt);\r\n  }\r\n\r\n  splitSheetBlock(i, leftSize) {\r\n    const block = this.sheetBlocks[i];\r\n    if(block && leftSize<block.getSize()) {\r\n      const newBlock = new SheetBlock(this.visual, {...this.p, setTexture: this.setPageTexture.bind(this)}, block.p.first, block.p.first+leftSize, block.angle, block.state);\r\n      block.set(block.angle, block.state, block.corner.height, block.p.first+leftSize, block.p.last);\r\n      this.addSheetBlock(i, newBlock);\r\n      return [newBlock, block];\r\n    }\r\n  }\r\n\r\n  mergeSheetBlocks(first, size) {\r\n    if(first<this.sheetBlocks.length) {\r\n      size = Math.min(this.sheetBlocks.length-first, size);\r\n      const firstBlock = this.sheetBlocks[first], lastBlock = this.sheetBlocks[first+size-1];\r\n      firstBlock.set(firstBlock.angle, firstBlock.state, firstBlock.corner.height, firstBlock.p.first, lastBlock.p.last);\r\n      this.removeSheetBlocks(first+1, size-1);\r\n    }\r\n  }\r\n\r\n  setSheetBlocks(angle, state) {\r\n    if(state==='closed') {\r\n      this.closedAngle = angle;\r\n    }\r\n    this.sheetBlocks.forEach((s)=> {\r\n      if(!s.physicId) {\r\n        s.set(angle, state);\r\n      }\r\n    });\r\n  }\r\n\r\n  set(angle, height=0) {\r\n    this.angle = angle;\r\n    const PI = Math.PI;\r\n    if(angle<PI/4) {\r\n      this.binder.set(0);\r\n\r\n      this.binder.setLeft(-PI/2+2*angle);\r\n      this.leftCover.set(PI/2,'opened',height);\r\n\r\n      this.setSheetBlocks(0,'closed');\r\n\r\n      this.binder.setRight(0);\r\n      this.rightCover.set(0,'closed',0);\r\n    }\r\n    else if(angle<2*PI/4) {\r\n      const a=2*(angle-PI/4);\r\n      this.binder.set(a);\r\n\r\n      this.binder.setLeft(-a);\r\n      this.leftCover.set(PI/2+a,'opened',height);\r\n\r\n      this.setSheetBlocks(a,'closed');\r\n\r\n      this.binder.setRight(-a);\r\n      this.rightCover.set(a,'closed',0);\r\n    }\r\n    else if(angle<3*PI/4) {\r\n      const a=2*(angle-PI/2);\r\n      this.binder.set(PI/2);\r\n\r\n      this.binder.setLeft(-PI/2);\r\n      this.leftCover.set(PI,'opened',0);\r\n\r\n      this.binder.setRight(-PI/2);\r\n      this.rightCover.set(a,'opened',height);\r\n    }\r\n    else if(angle<4*PI/4) {\r\n      const a=2*(angle-3*PI/4)+PI/2;\r\n      this.binder.set(a);\r\n\r\n      this.binder.setLeft(-a);\r\n      this.leftCover.set(a,'closed',0);\r\n\r\n      this.setSheetBlocks(a,'closed');\r\n\r\n      this.binder.setRight(-PI/2);\r\n      this.rightCover.set(PI/2,'opened',height);\r\n    }\r\n    else if(angle<5*PI/4) {\r\n      this.binder.set(PI);\r\n\r\n      this.binder.setLeft(-PI);\r\n      this.leftCover.set(PI,'closed',0);\r\n\r\n      this.setSheetBlocks(PI,'closed');\r\n\r\n      this.binder.setRight(-PI/2-2*(angle-PI));\r\n      this.rightCover.set(PI/2,'opened',height);\r\n    }\r\n    else if(angle<6*PI/4) {\r\n      const a=2*(angle-5*PI/4);\r\n      this.binder.set(PI-a);\r\n\r\n      this.binder.setLeft(-PI+a);\r\n      this.leftCover.set(PI-a,'closed',0);\r\n\r\n      this.setSheetBlocks(PI-a,'closed');\r\n\r\n      this.binder.setRight(-PI+a);\r\n      this.rightCover.set(PI/2-a,'opened',height);\r\n    }\r\n    else if(angle<7*PI/4) {\r\n      const a=2*(angle-6*PI/4);\r\n      this.binder.set(PI/2);\r\n\r\n      this.binder.setLeft(-PI/2);\r\n      this.leftCover.set(PI-a,'opened',height);\r\n\r\n      this.binder.setRight(-PI/2);\r\n      this.rightCover.set(0,'opened',0);\r\n    }\r\n    else if(angle<8*PI/4) {\r\n      const a=2*(angle-7*PI/4);\r\n      this.binder.set(PI/2-a);\r\n\r\n      this.binder.setLeft(-PI/2);\r\n      this.leftCover.set(PI/2,'opened',height);\r\n\r\n      this.setSheetBlocks(PI/2-a,'closed');\r\n\r\n      this.binder.setRight(-PI/2+a);\r\n      this.rightCover.set(PI/2-a,'closed',0);\r\n    }\r\n  }\r\n\r\n  static createSideTexture(color) {\r\n    const jC = $('<canvas width=\"8\" height=\"8\"></canvas>');\r\n    const ctx = jC[0].getContext('2d');\r\n    ctx.beginPath();\r\n    ctx.fillStyle = GraphUtils.color2Rgba(color, 1);\r\n    ctx.rect(0, 0, 8, 7);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.fillStyle = GraphUtils.color2Rgba(GraphUtils.inverseColor(color,0.5), 1);\r\n    ctx.rect(0, 7, 8, 1);\r\n    ctx.fill();\r\n    return jC[0];\r\n  }\r\n\r\n  static prepareProps(props) {\r\n    return Book.calcProps(Book.mergeProps(bookProps(), props));\r\n  }\r\n\r\n  static mergeProps(first, second) {\r\n    second = second || {};\r\n    return {\r\n      ...first,\r\n      ...second,\r\n      sheet: {\r\n        ...first.sheet,\r\n        ...second.sheet,\r\n      },\r\n      cover: {\r\n        ...first.cover,\r\n        ...second.cover,\r\n      },\r\n      page: {\r\n        ...first.page,\r\n        ...second.page,\r\n      },\r\n      cssLayerProps: {\r\n        ...first.cssLayerProps,\r\n        ...second.cssLayerProps,\r\n      }\r\n    };\r\n  }\r\n\r\n  static calcProps(props) {\r\n    const p = {\r\n      ...props,\r\n      sheet: {\r\n        ...props.sheet\r\n      },\r\n      cover: {\r\n        ...props.sheet,\r\n        ...props.cover\r\n      },\r\n      page: {\r\n        ...props.sheet,\r\n        ...props.page\r\n      },\r\n      cssLayerProps: {\r\n        ...props.cssLayerProps,\r\n        $\r\n      }\r\n    },\r\n    scale = 10,\r\n    height = scale*p.height,\r\n    width = scale*p.width,\r\n    flipProgressClb = ()=> undefined,\r\n    sheet = {\r\n      sideTexture: p.sheet.sideTexture || Book.createSideTexture(p.sheet.color),\r\n    },\r\n    cover = {\r\n      ...sheet,\r\n      ...p.cover,\r\n      depth: scale*p.cover.depth,\r\n      width: width,\r\n      height: height,\r\n      padding: scale*p.cover.padding\r\n    },\r\n    page = {\r\n      ...sheet,\r\n      ...p.page,\r\n      depth: scale*p.page.depth,\r\n      width: cover.width - cover.padding,\r\n      height: cover.height - 2*cover.padding\r\n    },\r\n    marker = {\r\n      use: false,\r\n      color: 0XFF0000,\r\n      size: scale*0.001\r\n    };\r\n    if(cover.color!==sheet.color && !p.cover.sideTexture) {\r\n      cover.sideTexture = Book.createSideTexture(cover.color);\r\n    }\r\n    if(page.color!==sheet.color && !p.page.sideTexture) {\r\n      page.sideTexture = Book.createSideTexture(page.color);\r\n    }\r\n    return {...p, scale, height, width, flipProgressClb, cover, page, marker};\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/Book.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/Book.js","import {$, THREE} from '../libs';\r\nimport Controller from 'Controller';\r\nimport {props as  bookControllerProps} from '../props/bookController';\r\nimport EventsToActions from 'EventsToActions';\r\nimport Stats from 'stats.js';\r\nimport Object3DWatcher from 'Object3DWatcher';\r\nimport FullScreen from 'FullScreen';\r\n\r\nexport default class BookController extends Controller {\r\n\r\n  constructor(book, view, props) {\r\n    super();\r\n    this.navigationControls = true;\r\n    this.book = book;\r\n    this.visual = book.visual;\r\n    this.p = BookController.prepareProps(props);\r\n    this.p.rtl = book.p.rtl;\r\n    this.devicePixelRatio = this.visual.wnd.devicePixelRatio || 1;\r\n\r\n    this.orbit = book.visual.getOrbit();\r\n    book.setFlipProgressClb(this.updateViewIfState.bind(this));\r\n    this.view = view;\r\n    this.bindActions();\r\n\r\n    this.state = {\r\n      smartPan: !this.actions['cmdSmartPan'].active,\r\n      singlePage: this.actions['cmdSinglePage'].active || this.actions['cmdSinglePage'].activeForMobile && this.devicePixelRatio>1,\r\n      stats: this.actions['cmdStats'].active,\r\n      lighting: this.p.lighting.default,\r\n      activeSide: 1\r\n    };\r\n\r\n    this.boxs = [new THREE.Box3(), new THREE.Box3()];\r\n    this.bookWatcher = new Object3DWatcher(this.visual, ()=> {\r\n      if(this.state.singlePage) {\r\n        if(this.state.activeSide) {\r\n          this.boxs[0].setFromObject(book.rightCover.three);\r\n        }\r\n        else {\r\n          this.boxs[0].setFromObject(book.leftCover.three);\r\n        }\r\n      }\r\n      else {\r\n        this.boxs[0].setFromObject(book.leftCover.three);\r\n        this.boxs[1].setFromObject(book.rightCover.three);\r\n        this.boxs[0].union(this.boxs[1]);\r\n      }\r\n      return this.boxs[0];\r\n    });\r\n    this.bookWatcher.scale = this.p.scale.default;\r\n    this.book.setZoom(this.bookWatcher.scale, this.state.singlePage);\r\n\r\n    this.Stats = new Stats();\r\n    this.Stats.domElement.style.position = 'absolute';\r\n    this.Stats.domElement.style.top = '0px';\r\n\r\n    this.visual.setExtraLighting(this.state.lighting);\r\n    this.binds = {\r\n      onScreenModeChanged: this.onScreenModeChanged.bind(this),\r\n      stats: this.Stats.update.bind(this.Stats),\r\n      onUpdateView: this.updateView.bind(this)\r\n    }\r\n    FullScreen.addEventListener(this.view.getParentContainer().ownerDocument, this.binds.onScreenModeChanged);\r\n\r\n    this.cmdSmartPan();\r\n\r\n    if(this.view.templateObject.appLoaded) {\r\n      Promise.resolve().then(this.view.templateObject.appLoaded);\r\n    }\r\n\r\n    this.book.enableLoadingAnimation(this.p.loadingAnimation.book);\r\n    if(this.p.loadingAnimation.skin) {\r\n      this.initLoadingAnimation();\r\n    }\r\n\r\n    this.book.enableLoadingAnimation(this.p.loadingAnimation.book);\r\n    this.book.setAutoResolution(this.p.autoResolution.enabled, this.p.autoResolution.coefficient);\r\n  }\r\n\r\n  dispose() {\r\n    FullScreen.removeEventListener(this.view.getParentContainer().ownerDocument, this.binds.onScreenModeChanged);\r\n    delete this.book;\r\n    delete this.view;\r\n    delete this.visual;\r\n  }\r\n\r\n  initLoadingAnimation() {\r\n    const handler = ()=> {\r\n      const pages = this.book.getTopPages();\r\n      let visible = false;\r\n      for(let n of pages) {\r\n        const state = this.book.getPageState(n);\r\n        visible = state===undefined || state==='loading';\r\n        if(visible) {\r\n          break;\r\n        }\r\n      }\r\n      this.view.setState('widLoading', {\r\n        visible\r\n      });\r\n    };\r\n    this.book.addEventListener('beforeAnimation', handler);\r\n    this.book.addEventListener('afterAnimation', handler);\r\n    this.book.addEventListener('loadPage', handler);\r\n    this.book.addEventListener('loadedPage', handler);\r\n  }\r\n\r\n  enableNavigation(enable) {\r\n    this.navigationControls = enable;\r\n  }\r\n\r\n  setTocCtrl(tocCtrl) {\r\n    this.tocCtrl = tocCtrl;\r\n    this.tocCtrl.onChange = this.updateView.bind(this);\r\n    this.updateView();\r\n  }\r\n\r\n  setPrinter(printer) {\r\n    this.printer = printer;\r\n    this.updateView();\r\n  }\r\n\r\n  setSounds(sounds) {\r\n    this.sounds = sounds;\r\n    sounds.setEnabled(this.actions['cmdSounds'].active);\r\n    this.updateView();\r\n  }\r\n\r\n\r\n  onScreenModeChanged(e) {\r\n    this.updateView();\r\n  }\r\n\r\n  canZoomIn() {\r\n    return !this.state.smartPan || Math.abs(this.bookWatcher.scale-this.p.scale.max)>this.p.eps;\r\n  }\r\n\r\n  canZoomOut() {\r\n    return !this.state.smartPan || Math.abs(this.bookWatcher.scale-this.p.scale.min)>this.p.eps;\r\n  }\r\n\r\n  canDefaultZoom() {\r\n    return this.state.smartPan;\r\n  }\r\n\r\n  setBookZoom(scale) {\r\n    setTimeout(()=> {\r\n      if(this.bookWatcher.scale===scale) {\r\n        this.book.setZoom(scale, this.state.singlePage);\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  cmdZoomIn() {\r\n    if(this.state.smartPan) {\r\n      this.bookWatcher.scale = Math.min(this.p.scale.max, this.bookWatcher.scale+this.p.scale.delta);\r\n      this.setBookZoom(this.bookWatcher.scale);\r\n    }\r\n    else {\r\n      this.orbit.zoomIn(6.6*this.p.scale.delta/0.32);\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  cmdZoomOut() {\r\n    if(this.state.smartPan) {\r\n      this.bookWatcher.scale = Math.max(this.p.scale.min, this.bookWatcher.scale-this.p.scale.delta);\r\n      this.setBookZoom(this.bookWatcher.scale);\r\n    }\r\n    else {\r\n      this.orbit.zoomOut(6.6*this.p.scale.delta/0.32);\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  cmdDefaultZoom() {\r\n    if(this.state.smartPan) {\r\n      this.bookWatcher.scale = this.p.scale.default;\r\n      this.setBookZoom(this.bookWatcher.scale);\r\n      this.updateView();\r\n    }\r\n  }\r\n\r\n  cmdToc() {\r\n    if(this.tocCtrl) {\r\n      this.tocCtrl.togle();\r\n    }\r\n  }\r\n\r\n  cmdFastBackward() {\r\n    this.startFlip(this.book.flipLeft(5));\r\n  }\r\n\r\n  cmdBackward() {\r\n    if(this.state.singlePage) {\r\n      this.state.activeSide = (this.getPage()+1)%2;\r\n      if(this.state.activeSide) {\r\n        this.state.activeSide = 0;\r\n        this.updateView();\r\n      }\r\n      else {\r\n        this.startFlip(this.book.flipLeft(1)).then((block)=> {\r\n          if(block) {\r\n            this.state.activeSide = 1;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      this.startFlip(this.book.flipLeft(1));\r\n    }\r\n  }\r\n\r\n  cmdForward() {\r\n    if(this.state.singlePage) {\r\n      this.state.activeSide = (this.getPage()+1)%2;\r\n      if(!this.state.activeSide) {\r\n        this.state.activeSide = 1;\r\n        this.updateView();\r\n      }\r\n      else {\r\n        this.startFlip(this.book.flipRight(1)).then((block)=> {\r\n          if(block) {\r\n            this.state.activeSide = 0;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      this.startFlip(this.book.flipRight(1));\r\n    }\r\n  }\r\n\r\n  cmdFastForward() {\r\n    this.startFlip(this.book.flipRight(5));\r\n  }\r\n\r\n  cmdSave() {\r\n    window.open(this.p.downloadURL, '_blank');\r\n  }\r\n\r\n  cmdPrint() {\r\n    this.printer.print();\r\n  }\r\n\r\n  cmdFullScreen() {\r\n    if(!FullScreen.activated()) {\r\n      FullScreen.request(this.view.getParentContainer());\r\n    }\r\n    else {\r\n      FullScreen.cancel();\r\n    }\r\n  }\r\n\r\n  cmdSmartPan() {\r\n    this.state.smartPan = !this.state.smartPan;\r\n    if(this.state.smartPan) {\r\n      this.orbit.minAzimuthAngle = 0;\r\n      this.orbit.maxAzimuthAngle = 0;\r\n      this.orbit.minPolarAngle = 0;\r\n    \tthis.orbit.maxPolarAngle = Math.PI/4;\r\n      this.bookWatcher.enabled = true;\r\n    }\r\n    else {\r\n      this.orbit.minAzimuthAngle = -Infinity;\r\n      this.orbit.maxAzimuthAngle = Infinity;\r\n      this.orbit.minPolarAngle = 0;\r\n    \tthis.orbit.maxPolarAngle = Math.PI;\r\n      this.bookWatcher.enabled = false;\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  cmdSinglePage() {\r\n    this.state.singlePage = !this.state.singlePage;\r\n    this.setBookZoom(this.bookWatcher.scale);\r\n    this.updateView();\r\n  }\r\n\r\n  cmdSounds() {\r\n    if(this.sounds) {\r\n      this.sounds.togle();\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  cmdStats() {\r\n    this.state.stats = !this.state.stats;\r\n    if(this.state.stats) {\r\n      $(this.view.getContainer()).append(this.Stats.domElement);\r\n      this.visual.addRenderCallback(this.binds.stats);\r\n    }\r\n    else {\r\n      $(this.view.getContainer()).find(this.Stats.domElement).remove();\r\n      this.visual.removeRenderCallback(this.binds.stats);\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  cmdLightingUp() {\r\n    this.state.lighting = Math.min(this.state.lighting+this.p.lighting.delta, this.p.lighting.max);\r\n    this.visual.setExtraLighting(this.state.lighting);\r\n    this.updateView();\r\n  }\r\n\r\n  cmdLightingDown() {\r\n    this.state.lighting = Math.max(this.state.lighting-this.p.lighting.delta, this.p.lighting.min);\r\n    this.visual.setExtraLighting(this.state.lighting);\r\n    this.updateView();\r\n  }\r\n\r\n  goToPage(page) {\r\n    if(this.p.rtl) {\r\n      page = this.book.getPages()-1-page;\r\n    }\r\n    const pageNum = Math.max(Math.min(page, this.book.getPages()-1),0);\r\n    this.state.activeSide = (pageNum+1)%2;\r\n    let target = Math.max(Math.min(page-1+page%2, this.book.getPages()-1),0), current = this.book.getPage(), flips = [], covs = 0;;\r\n    if(target!=current) {\r\n      if(current===0) {\r\n        flips.push(1);\r\n        current+=1;\r\n        ++covs;\r\n      }\r\n      else if(current===this.book.getPages()-1) {\r\n        flips.push(-1);\r\n        current-=2;\r\n        ++covs;\r\n      }\r\n      let cv = 0;\r\n      if(target===0) {\r\n        cv = -1;\r\n        target+=1;\r\n        ++covs;\r\n      }\r\n      else if(target===this.book.getPages()-1) {\r\n        cv = 1;\r\n        target-=2;\r\n        ++covs;\r\n      }\r\n      if(target-current) {\r\n        flips.push(Math.ceil((target-current)/2));\r\n      }\r\n      if(cv) {\r\n        flips.push(cv);\r\n      }\r\n    }\r\n\r\n    const setClb = (fl, time, clb)=> {\r\n      setTimeout(()=> {\r\n        if(fl<0) {\r\n          this.startFlip(this.book.flipLeft(-fl, clb));\r\n        }\r\n        else {\r\n          this.startFlip(this.book.flipRight(fl, clb));\r\n        }\r\n      }, time);\r\n    };\r\n\r\n    if(covs===2) {\r\n      setClb(flips[0], 0, (block, progress, state)=> {\r\n        if(state=='finish' && progress==1) {\r\n          setClb(flips[flips.length-1], 0);\r\n        }\r\n      });\r\n      setClb(flips[1], 500);\r\n    }\r\n    else {\r\n      let time = 0;\r\n      for(let fl of flips) {\r\n        setClb(fl, time);\r\n        time+=250;\r\n      }\r\n    }\r\n  }\r\n\r\n  startFlip(flipRes) {\r\n    return flipRes? flipRes.then((block)=> {\r\n      if(block) {\r\n        this.dispatchAsync({\r\n          type: 'startFlip'\r\n        });\r\n      }\r\n      return block;\r\n    }): Promise.resolve(undefined);\r\n  }\r\n\r\n  endFlip(block) {\r\n    this.dispatchAsync({\r\n      type: 'endFlip'\r\n    });\r\n    return block;\r\n  }\r\n\r\n  getPage() {\r\n    const page = this.book.getPage();\r\n    return page? Math.min(this.book.getPage()+this.state.activeSide, this.book.getPages()-1): 0;\r\n  }\r\n\r\n  getPageForGUI() {\r\n    let n = (this.state.singlePage? this.getPage(): this.book.getPage())+1;\r\n    if(this.p.rtl) {\r\n      n = this.book.getPages()-n+1;\r\n    }\r\n    return n;\r\n  }\r\n\r\n  inpPage(e, data) {\r\n    this.goToPage(data-1);\r\n  }\r\n\r\n  updateViewIfState(block, progress, state, type) {\r\n    if(state==='init' || state==='finish') {\r\n      setTimeout(this.updateView.bind(this), 100);\r\n    }\r\n    if(state==='finish') {\r\n      this.endFlip(block);\r\n    }\r\n  }\r\n\r\n  updateViewState() {\r\n    this.viewState = {\r\n      'cmdZoomIn': {\r\n        enable: this.canZoomIn(),\r\n        visible: this.actions['cmdZoomIn'].enabled,\r\n        active: false\r\n      },\r\n      'cmdZoomOut': {\r\n        enable: this.canZoomOut(),\r\n        visible: this.actions['cmdZoomOut'].enabled,\r\n        active: false\r\n      },\r\n      'cmdDefaultZoom': {\r\n        enable: this.canDefaultZoom(),\r\n        visible: this.actions['cmdDefaultZoom'].enabled,\r\n        active: this.canDefaultZoom() && Math.abs(this.bookWatcher.scale-this.p.scale.default)<this.p.eps\r\n      },\r\n      'cmdToc': {\r\n        enable: !!this.tocCtrl,\r\n        visible: this.actions['cmdToc'].enabled && this.tocCtrl,\r\n        active: this.tocCtrl && this.tocCtrl.visible\r\n      },\r\n      'inpPages': {\r\n        visible: true,\r\n        value: this.book.getPages()\r\n      },\r\n      'inpPage': {\r\n        visible: true,\r\n        enable: !this.book.isProcessing() && this.navigationControls,\r\n        value: this.getPageForGUI()\r\n      },\r\n      'cmdSave': {\r\n        enable: true,\r\n        visible: this.actions['cmdSave'].enabled && !!this.p.downloadURL,\r\n        active: false\r\n      },\r\n      'cmdPrint': {\r\n        enable: true,\r\n        visible: this.actions['cmdPrint'].enabled && !!this.printer,\r\n        active: false\r\n      },\r\n      'cmdFullScreen': {\r\n        enable: FullScreen.available(),\r\n        visible: this.actions['cmdFullScreen'].enabled,\r\n        active: FullScreen.available() && FullScreen.activated()\r\n      },\r\n      'widSettings': {\r\n        enable: true,\r\n        visible: this.actions['widSettings'].enabled,\r\n        active: false\r\n      },\r\n      'cmdSmartPan': {\r\n        enable: true,\r\n        visible: this.actions['cmdSmartPan'].enabled,\r\n        active: this.state.smartPan\r\n      },\r\n      'cmdSinglePage': {\r\n        enable: true,\r\n        visible: this.actions['cmdSinglePage'].enabled,\r\n        active: this.state.singlePage\r\n      },\r\n      'cmdSounds': {\r\n        enable: true,\r\n        visible:  this.actions['cmdSounds'].enabled && !!this.sounds,\r\n        active: !!this.sounds && this.sounds.enabled\r\n      },\r\n      'cmdStats': {\r\n        enable: true,\r\n        visible: this.actions['cmdStats'].enabled,\r\n        active: this.state.stats\r\n      },\r\n      'cmdLightingUp': {\r\n        enable: Math.abs(this.state.lighting-this.p.lighting.max)>this.p.eps,\r\n        visible: this.actions['cmdLightingUp'].enabled,\r\n        active: false\r\n      },\r\n      'cmdLightingDown': {\r\n        enable: Math.abs(this.state.lighting-this.p.lighting.min)>this.p.eps,\r\n        visible: this.actions['cmdLightingDown'].enabled,\r\n        active: false\r\n      }\r\n    };\r\n\r\n    const left = this.book.getLeftFlipping(),\r\n          right = this.book.getRightFlipping();\r\n    const flippersEnable = {\r\n      cmdFastBackward: !!left && this.navigationControls,\r\n      cmdBackward: !!left && this.navigationControls,\r\n      cmdForward: !!right && this.navigationControls,\r\n      cmdFastForward: !!right && this.navigationControls\r\n    };\r\n    for(let name of Object.keys(flippersEnable)) {\r\n      this.viewState[name] = {\r\n        enable: flippersEnable[name],\r\n        visible: this.actions[name].enabled,\r\n        active: false\r\n      };\r\n    };\r\n  }\r\n\r\n  updateView() {\r\n    if(this.view) {\r\n      this.updateViewState();\r\n      for(let name of Object.keys(this.viewState)) {\r\n        this.view.setState(name, this.viewState[name]);\r\n      }\r\n    }\r\n  }\r\n\r\n  getActions() {\r\n    const isSwipping = (name)=> {\r\n      return this.actions.touchCmdSwipe.enabled && this.actions.touchCmdSwipe.code===this.actions[name].code && this.state.smartPan && this.bookWatcher.scale<=1;\r\n    }, cmds = {};\r\n\r\n    for(let name in this) {\r\n      if(name.indexOf('cmd')===0) {\r\n        cmds[name] = {\r\n          activate: (...args)=> {\r\n            if(this.viewState && this.viewState[name].enable) {\r\n              this[name](...args);\r\n            }\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...cmds,\r\n      cmdPanLeft: {\r\n        activate: (e)=> this.orbit.actions.pan(e, {\r\n          state: 'move',\r\n          dx: -this.p.pan.speed,\r\n          dy: 0\r\n        })\r\n      },\r\n      cmdPanRight: {\r\n        activate: (e)=> this.orbit.actions.pan(e, {\r\n          state: 'move',\r\n          dx: this.p.pan.speed,\r\n          dy: 0\r\n        })\r\n      },\r\n      cmdPanUp: {\r\n        activate: (e)=> this.orbit.actions.pan(e, {\r\n          state: 'move',\r\n          dx: 0,\r\n          dy: -this.p.pan.speed\r\n        })\r\n      },\r\n      cmdPanDown: {\r\n        activate: (e)=> this.orbit.actions.pan(e, {\r\n          state: 'move',\r\n          dx: 0,\r\n          dy: this.p.pan.speed\r\n        })\r\n      },\r\n      mouseCmdRotate: {\r\n        activate: this.orbit.actions.rotate\r\n      },\r\n      mouseCmdDragZoom: {\r\n        activate: (e, data)=> {\r\n          if(data.dy>0) {\r\n            this.cmdZoomOut();\r\n          }\r\n          else if(data.dy<0) {\r\n            this.cmdZoomIn();\r\n          }\r\n        }\r\n      },\r\n      mouseCmdPan: {\r\n        activate: this.orbit.actions.pan\r\n      },\r\n      mouseCmdWheelZoom: {\r\n        activate: (e)=> {\r\n          e.preventDefault();\r\n          if(e.deltaY<0) {\r\n            this.cmdZoomOut();\r\n          }\r\n          else if(e.deltaY>0) {\r\n            this.cmdZoomIn();\r\n          }\r\n        }\r\n      },\r\n      touchCmdRotate: {\r\n        activate: (e, data)=> {\r\n          if(!isSwipping('touchCmdRotate')) {\r\n            e.preventDefault();\r\n            this.orbit.actions.rotate(e, data);\r\n          }\r\n        }\r\n      },\r\n      touchCmdZoom: {\r\n        activate: (e, data)=> {\r\n          if(!isSwipping('touchCmdZoom')) {\r\n            e.preventDefault();\r\n            if(data.dy>0) {\r\n              this.cmdZoomOut();\r\n            }\r\n            else if(data.dy<0) {\r\n              this.cmdZoomIn();\r\n            }\r\n          }\r\n        }\r\n      },\r\n      touchCmdPan: {\r\n        activate: (e, data)=> {\r\n          if(!isSwipping('touchCmdPan')) {\r\n            e.preventDefault();\r\n            this.orbit.actions.pan(e, data);\r\n          }\r\n        }\r\n      },\r\n      touchCmdSwipe: {\r\n        activate: (e, data)=> {\r\n          if(isSwipping('touchCmdSwipe')) {\r\n            e.preventDefault();\r\n            if(data.state==='start') {\r\n              const touch = (e.touches || e.originalEvent.touches)[this.actions.touchCmdSwipe.code-1];\r\n              this.swipeData = {\r\n                handled: false,\r\n                x0: touch.pageX,\r\n                y0: touch.pageY,\r\n                x: touch.pageX,\r\n                y: touch.pageY\r\n              };\r\n            }\r\n            else if(data.state==='move') {\r\n              if(!this.swipeData.handled) {\r\n                this.swipeData = {\r\n                  ...this.swipeData,\r\n                  x: this.swipeData.x+data.dx,\r\n                  y: this.swipeData.y+data.dy\r\n                }\r\n                if(Math.abs(this.swipeData.x0-this.swipeData.x)>100) {\r\n                  this.swipeData.x0>this.swipeData.x? this.cmdForward(): this.cmdBackward();\r\n                  this.swipeData.handled = true;\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              delete this.swipeData;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      widSettings: {\r\n        activate: ()=> undefined\r\n      }\r\n    };\r\n  }\r\n\r\n  bindActions() {\r\n    this.eToA = new EventsToActions($(this.visual.element));\r\n    this.eToA.addAction((e)=> e.preventDefault(), 'contextmenu', EventsToActions.mouseButtons.Right, 0);\r\n\r\n    this.actions = this.getActions();\r\n    for(let name of Object.keys(this.actions)) {\r\n      const action = {\r\n        ...this.actions[name],\r\n        ...this.p.actions[name]\r\n      };\r\n      this.actions[name] = action;\r\n      if(action.enabled) {\r\n        const flags = action.flags || 0;\r\n        if(action.type) {\r\n          this.eToA.addAction(action.activate, action.type, action.code, flags);\r\n        }\r\n        else if(action.code!==undefined) {\r\n          this.eToA.addAction(action.activate, 'keydown', action.code, flags);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static prepareProps(props) {\r\n    return BookController.calcProps(BookController.mergeProps(bookControllerProps(), props));\r\n  }\r\n\r\n  static setActions(props, actions) {\r\n    for(let name of Object.keys(actions || {})) {\r\n      props.actions[name] = {\r\n        ...props.actions[name],\r\n        ...actions[name]\r\n      };\r\n    }\r\n  }\r\n\r\n  static mergeProps(first, second) {\r\n    second = second || {};\r\n    function merge(first, second) {\r\n      second = second || {};\r\n      const props = {\r\n        ...first,\r\n        ...second\r\n      };\r\n      for(let name of Object.keys(first)) {\r\n        if(typeof first[name]==='object') {\r\n          props[name] = merge(first[name], second[name]);\r\n        }\r\n      }\r\n      return props;\r\n    }\r\n    const props = merge(first, second);\r\n    BookController.setActions(props, first.actions);\r\n    BookController.setActions(props, second.actions);\r\n    return props;\r\n  }\r\n\r\n  static calcProps(props) {\r\n    props.scale.delta = (props.scale.max-props.scale.min)/props.scale.levels;\r\n    props.lighting.delta = (props.lighting.max-props.lighting.min)/props.lighting.levels;\r\n    return props;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/BookController.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/BookController.js","import {$} from '../libs';\r\n\r\nexport default class BookPrinter {\r\n\r\n  constructor(context, book, styleSheet) {\r\n    this.book = book;\r\n    this.styleSheet = styleSheet;\r\n    this.wnd = context.wnd;\r\n    this.doc = context.doc;\r\n    this.pageCallback = book.getPageCallback();\r\n    const test = this.pageCallback(0);\r\n    this.type = test.type;\r\n    if(this.type==='pdf') {\r\n      this.pdfSrc = test.src.src;\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.canceled = true;\r\n  }\r\n\r\n  dispose() {\r\n    if(this.frame) {\r\n      this.frame.remove();\r\n      delete this.frame;\r\n    }\r\n  }\r\n\r\n  print() {\r\n    delete this.canceled;\r\n    if(this.type==='pdf') {\r\n      let printWnd, callManually = false;\r\n      if(this.useIFrame()) {\r\n        callManually = !!this.frame;\r\n        if(!this.frame) {\r\n          this.frame = $('<iframe src=\"'+this.pdfSrc+'\" style=\"display: none;\"></iframe>').appendTo(this.doc.body);\r\n        }\r\n        printWnd = this.frame[0].contentWindow;\r\n      }\r\n      else {\r\n        printWnd = this.wnd.open(this.pdfSrc);\r\n      }\r\n      if(callManually) {\r\n        printWnd.print();\r\n      }\r\n      else {\r\n        $(printWnd).on('load', ()=> {\r\n          try {\r\n            printWnd.print();\r\n          }\r\n          catch(e) {\r\n            console.error(e);\r\n          }\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      this.renderContent().\r\n        then((content)=> {\r\n          const printWnd = this.wnd.open(),\r\n          printDoc = printWnd.document,\r\n          html = `\r\n            <!DOCTYPE html>\r\n            <html>\r\n              <head>\r\n                <meta charset=\"utf-8\">\r\n                <title>3D FlipBook - Printing</title>\r\n                ${content.head}\r\n                <script type=\"text/javascript\">\r\n                  function printDocument() {\r\n                    window.print();\r\n                    window.close();\r\n                  }\r\n                  function init() {\r\n                    setTimeout(printDocument, 100);\r\n                  }\r\n                </script>\r\n              </head>\r\n              <body onload=\"init()\">\r\n                ${content.body}\r\n              </body>\r\n            </html>\r\n          `;\r\n          printDoc.open();\r\n          printDoc.write(html);\r\n          printDoc.close();\r\n        }).\r\n        catch((e)=> console.warn('3D FlipBook - Printing was canceled'));\r\n    }\r\n  }\r\n\r\n  progress(v) {\r\n    if(this.canceled) {\r\n      throw 'Cancel Printing';\r\n    }\r\n    if(this.onProgress) {\r\n      this.onProgress(Math.floor(v*100));\r\n    }\r\n  }\r\n\r\n  renderContent() {\r\n    const pages = this.book.getPages(), head = new Set(), body = [];\r\n    let done = Promise.resolve();\r\n    for(let page=0; page<pages; ++page) {\r\n      const info = this.pageCallback(page);\r\n      if(info.type==='image') {\r\n        done = done.then(()=> {\r\n          this.progress(page/pages);\r\n          return this.renderImage(head, body, info.src);\r\n        });\r\n      }\r\n      else if(info.type==='html') {\r\n        done = done.then(()=> {\r\n          this.progress(page/pages);\r\n          return this.renderHtml(head, body, info.src);\r\n        });\r\n      }\r\n    }\r\n    return done.then(()=> {\r\n      this.progress(1);\r\n      return {head: this.renderHead(head), body: body.join('\\n')}\r\n    });\r\n  }\r\n\r\n  static wrap(content) {\r\n    return `<div class=\"fb3d-printer-page\">${content}</div>`;\r\n  }\r\n\r\n  renderImage(head, body, src) {\r\n    body.push(BookPrinter.wrap(`<img src=\"${src}\" />`));\r\n  }\r\n\r\n  renderHtml(head, body, src) {\r\n    return new Promise((resolve, reject)=> {\r\n      $.get(src, (html)=> {\r\n        const links = html.match(/<link.*?>/ig) || [];\r\n        for(let link of links) {\r\n          if(link.match(/stylesheet/i)) {\r\n            const href = link.match(/href\\s*=\\s*['\"](.*)['\"]/i);\r\n            if(href) {\r\n              head.add(href[1]);\r\n            }\r\n          }\r\n        }\r\n        const content = html.match(/<body.*?>([\\S\\s]*)<\\/body>/i);\r\n        if(content) {\r\n          body.push(BookPrinter.wrap(content[1]));\r\n        }\r\n        resolve();\r\n      }).fail((e)=> {\r\n        console.error(e.responseText);\r\n        reject();\r\n      });\r\n    })\r\n  }\r\n\r\n  renderHead(head) {\r\n    const content = [];\r\n    head.forEach((k)=> content.push(`<link rel=\"stylesheet\" href=\"${k}\">`));\r\n    content.push(this.styleSheet? `<link rel=\"stylesheet\" href=\"${this.styleSheet}\">`: BookPrinter.defaultStyleSheet());\r\n    return content.join('\\n');\r\n  }\r\n\r\n  useIFrame() {\r\n    const isChromium = this.wnd.chrome,\r\n      winNav = this.wnd.navigator,\r\n      vendorName = winNav.vendor,\r\n      isIEedge = winNav.userAgent.indexOf(\"Edge\")>-1,\r\n      isIOSChrome = winNav.userAgent.match(\"CriOS\");\r\n    let use;\r\n    if(isIOSChrome){\r\n      use = true;\r\n    } else if(isChromium && vendorName==='Google Inc.' && !isIEedge) {\r\n      use = true;\r\n    } else {\r\n      use = false;\r\n    }\r\n    return use;\r\n  }\r\n\r\n  static defaultStyleSheet() {\r\n    return `\r\n      <style type=\"text/css\">\r\n        body {\r\n          margin: 0;\r\n          padding: 0;\r\n        }\r\n        .fb3d-printer-page {\r\n          page-break-after: always;\r\n        }\r\n      </style>\r\n    `;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/BookPrinter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/BookPrinter.js","import {$} from '../libs';\r\nimport View from 'View';\r\n\r\nexport default class BookView extends View {\r\n\r\n  static PAGE_HANDLER_DELAY = 1000;\r\n\r\n  constructor(container, onLoad, template, handler) {\r\n    super(container, onLoad, template, handler);\r\n  }\r\n\r\n  initView() {\r\n    this.view = this.container.find('.view');\r\n    this.bookmarksView = this.container.find('.widBookmarks');\r\n    this.thumbnailsView = this.container.find('.widThumbnails');\r\n    this.searchView = this.container.find('.widSearch');\r\n  }\r\n\r\n  getHandlers(id) {\r\n    let handlers;\r\n    if(id==='inpPage') {\r\n      handlers = [{\r\n        inpPage: (e, data)=> this.callLater(super.getHandlers(id), id, e, data, BookView.PAGE_HANDLER_DELAY)\r\n      }];\r\n    }\r\n    else {\r\n      handlers = super.getHandlers(id);\r\n    }\r\n    return handlers;\r\n  }\r\n\r\n  onItemStateChanged(id, state) {\r\n    if(id==='cmdFullScreen') {\r\n      if(state.active) {\r\n        this.parentContainer.addClass('fullscreen');\r\n      }\r\n      else {\r\n        this.parentContainer.removeClass('fullscreen');\r\n      }\r\n    }\r\n  }\r\n\r\n  getView() {\r\n    return this.view;\r\n  }\r\n\r\n  getBookmarksView() {\r\n    return this.bookmarksView;\r\n  }\r\n\r\n  getThumbnailsView() {\r\n    return this.thumbnailsView;\r\n  }\r\n\r\n  getSearchView() {\r\n    return this.searchView;\r\n  }\r\n\r\n  getForms() {\r\n    return [\r\n    ];\r\n  }\r\n\r\n  getLinks() {\r\n    return [\r\n      'cmdZoomIn',\r\n      'cmdZoomOut',\r\n      'cmdDefaultZoom',\r\n      'cmdToc',\r\n      'cmdFastBackward',\r\n      'cmdBackward',\r\n      'cmdForward',\r\n      'cmdFastForward',\r\n      'cmdSave',\r\n      'cmdPrint',\r\n      'cmdFullScreen',\r\n      'cmdSmartPan',\r\n      'cmdSinglePage',\r\n      'cmdSounds',\r\n      'cmdStats',\r\n      'cmdLightingUp',\r\n      'cmdLightingDown',\r\n      'cmdCloseToc',\r\n      'cmdBookmarks',\r\n      'cmdSearch',\r\n      'cmdThumbnails'\r\n    ];\r\n  }\r\n\r\n  getWidgets() {\r\n    return [\r\n      'widLoadingProgress',\r\n      'widFloatWnd',\r\n      'widTocMenu',\r\n      'widBookmarks',\r\n      'widThumbnails',\r\n      'widSearch',\r\n      'widSettings',\r\n      'widLoading'\r\n    ];\r\n  }\r\n\r\n  getInputs() {\r\n    return [\r\n      'inpPage',\r\n      'inpPages'\r\n    ];\r\n  }\r\n\r\n  getTexts() {\r\n    return [\r\n      'txtLoadingProgress'\r\n    ];\r\n  }\r\n\r\n  getTemplate() {\r\n    return {\r\n      html: 'templates/default-book-view.html',\r\n      styles: [\r\n        'css/black-book-view.css'\r\n      ],\r\n      links: [\r\n        {\r\n          rel: 'stylesheet',\r\n          href: 'css/font-awesome.min.css'\r\n        }\r\n      ],\r\n      script: 'js/default-book-view.js'\r\n    };\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/BookView.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/BookView.js","import BookPropsBuilder from './BookPropsBuilder';\r\nimport ImageFactory from 'ImageFactory';\r\n\r\nexport default class ClbBookPropsBuilder extends BookPropsBuilder {\r\n  constructor(context, pageCallback, pages, onReady) {\r\n    super(onReady);\r\n    this.calcSheets(pages);\r\n    this.pageCallback = pageCallback;\r\n    this.binds = {\r\n      pageCallback: pageCallback.bind(this)\r\n    };\r\n    this.imageFactory = new ImageFactory(context);\r\n\r\n    if(pages>0) {\r\n      const test = this.imageFactory.build(pageCallback(0), 0, this.defaults.sheet.widthTexels, this.defaults.sheet.heightTexels, this.defaults.sheet.color);\r\n      test.onLoad = ()=> {\r\n        this.calcProps(test.width, test.height);\r\n        test.dispose();\r\n        this.ready();\r\n      };\r\n    }\r\n    else {\r\n      this.props = this.defaults;\r\n      this.ready();\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/ClbBookPropsBuilder.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/ClbBookPropsBuilder.js","import SheetBlock from './SheetBlock';\r\n\r\nexport default class Cover extends SheetBlock {\r\n\r\n  constructor(visual, p, angle, state) {\r\n    super(visual, p, 0, 1, angle, state);\r\n  }\r\n\r\n  getProps() {\r\n    return {\r\n      ...this.p.cover,\r\n      sheets: 1\r\n    };\r\n  }\r\n\r\n  loadPoints() {\r\n    const openedInterpolationIndeces = [\r\n      [2,3,4],\r\n      [2,3,4,5,6]\r\n    ],\r\n    closedInterpolationIndeces = [\r\n      [0,1,2],\r\n      [0,1,2]\r\n    ],\r\n    interpolationPoints = [\r\n      {\r\n        x: [\r\n             [0,0.2877,0.6347,0.8174,1.0000],\r\n             [0,0.2831,0.6256,0.8082,0.9909],\r\n             [0,0.2603,0.5936,0.7763,0.9589],\r\n             [0,0.1370,0.3881,0.5342,0.6758],\r\n             [0,0,0,0,0]\r\n        ],\r\n        y: [\r\n             [0,0,0,0,0],\r\n             [0,0.02,0.005,-0.001,-0.0025],\r\n             [0,0.04,0.01,-0.002,-0.005],\r\n             [0, 0.2466, 0.4795, 0.5708, 0.6758],\r\n             [0, 0.2877, 0.6347, 0.8174, 1.0000]\r\n        ]\r\n      },\r\n      {\r\n        x: [\r\n             [0,0.2877,0.6347,0.8174,1.0000],\r\n             [0,0.2831,0.6256,0.8082,0.9909],\r\n             [0,0.2603,0.5936,0.7763,0.9589],\r\n             [0.000,0.233,0.563,0.746,0.927],\r\n             [0.000,0.144,0.433,0.613,0.796],\r\n             [0.000,0.070,0.288,0.455,0.626],\r\n             [0,0,0,0,0]\r\n        ],\r\n        y: [\r\n             [0,0,0,0,0],\r\n             [0,0.02,0.005,-0.001,-0.0025],\r\n             [0,0.04,0.01,-0.002,-0.005],\r\n             [0.000,0.168,0.269,0.270,0.255],\r\n             [0.000,0.245,0.435,0.458,0.460],\r\n             [0.000,0.278,0.544,0.614,0.673],\r\n             [0, 0.2877, 0.6347, 0.8174, 1.0000]\r\n        ]\r\n      }\r\n    ];\r\n    return {\r\n      interpolationPoints,\r\n      openedInterpolationIndeces,\r\n      closedInterpolationIndeces\r\n    };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/Cover.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/Cover.js","import SheetCssLayer from './SheetCssLayer';\r\n\r\nexport default class CssLayersManager {\r\n  constructor(book) {\r\n    this.book = book;\r\n    this.props = book.p.cssLayerProps;\r\n    this.visual = book.visual;\r\n    this.pageManager = book.pageManager;\r\n    this.wrappers = {};\r\n  }\r\n\r\n  getActives() {\r\n    const page = this.book.getPage(), pages = this.book.getPages();\r\n    return page===0 || page===pages-1? [page]: [page, page+1];\r\n  }\r\n\r\n  dispose() {\r\n    for(let w of Object.values(this.wrappers)) {\r\n      w.layers.forEach((l)=> l.dispose());\r\n    }\r\n    delete this.wrappers;\r\n  }\r\n\r\n  show() {\r\n    this.hidden = false;\r\n    for(let n of this.getActives()) {\r\n      const w = this.wrappers[n];\r\n      if(w) {\r\n        if(w.state==='ready' && w.layers.length) {\r\n          const block = this.book.getBlockByPage(n);\r\n          w.layers.forEach((l)=> {\r\n            if(l.isHidden()) {\r\n              l.update(block);\r\n              l.show();\r\n            }\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        const w = this.wrappers[n] = {\r\n          state: 'loading',\r\n          layers: []\r\n        };\r\n        Promise.resolve().then(()=> {\r\n          this.pageManager.getLayers(n, (layers)=> {\r\n            if(layers.length && this.wrappers) {\r\n              const block = this.book.getBlockByPage(n);\r\n              for(let l of layers) {\r\n                const sl = new SheetCssLayer(this.visual, block, this.props);\r\n                w.layers.push(sl);\r\n                sl.set(l.css, l.html, l.js);\r\n              }\r\n              setTimeout(()=> {\r\n                if(!this.hidden && ~this.getActives().indexOf(n)) {\r\n                  w.layers.forEach((l)=> l.show());\r\n                }\r\n              }, 10);\r\n            }\r\n            w.state = 'ready';\r\n          });\r\n\r\n        });\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  hide() {\r\n    this.hidden = true;\r\n    const wait = [];\r\n    for(let w of Object.values(this.wrappers)) {\r\n      w.layers.forEach((l)=> wait.push(l.hide()));\r\n    }\r\n    return Promise.all(wait);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/CssLayersManager.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/CssLayersManager.js","import {$, THREE} from '../libs'\r\nimport Cache from 'Cache';\r\nimport LoadingAnimation from 'LoadingAnimation';\r\nimport ImageFactory from 'ImageFactory';\r\nimport BaseMathUtils from 'BaseMathUtils';\r\nimport TextureAnimator from 'TextureAnimator';\r\n\r\nexport default class PageManager {\r\n\r\n  constructor(visual, book, p) {\r\n    this.visual = visual;\r\n    this.book = book;\r\n    this.pageQuery = '';\r\n    this.p = p;\r\n    this.pageCache = new Cache(p.cachedPages);\r\n    this.resourcesCache = new Cache();\r\n    this.canvas = $('<canvas>')[0];\r\n    this.imageFactory = new ImageFactory({...visual, dispatchEvent: book.dispatchEvent.bind(book), renderCanvas: this.canvas, renderCanvasCtx: this.canvas.getContext('2d')}, this.resourcesCache);\r\n\r\n    this.loadings = [];\r\n    this.renderQueue = [];\r\n    this.pageRequests = [];\r\n    this.predictedRequests = [];\r\n\r\n    this.tmpMaterial = new THREE.MeshBasicMaterial();\r\n    visual.addObject(new THREE.Mesh(new THREE.PlaneGeometry(0, 0), this.tmpMaterial));\r\n\r\n    this.loadingAnimation = true;\r\n    this.loading = {};\r\n    this.loading[p.cover.color] = this.createLoadingTexture(p.cover);\r\n    if(p.page.color!==p.cover.color) {\r\n      this.loading[p.page.color] = this.createLoadingTexture(p.page);\r\n    }\r\n\r\n    this.turnOnEvents();\r\n\r\n    visual.addRenderCallback(this.update.bind(this));\r\n\r\n    setTimeout(this.updateRenderQueue.bind(this), 250);\r\n  }\r\n\r\n  createLoadingTexture(p) {\r\n    const spriteTiles = 6,\r\n      scale = Math.sqrt(4.5*210*4.5*297/(p.widthTexels*p.heightTexels)),\r\n      animation = new LoadingAnimation(scale*p.widthTexels, scale*p.heightTexels, p.color),\r\n      animator = new TextureAnimator(animation.createSprite(spriteTiles), spriteTiles, 1, spriteTiles, 0.2);\r\n    animation.dispose();\r\n    return animator;\r\n  }\r\n\r\n  dispose() {\r\n    this.turnOffEvents();\r\n    for(let color of Object.keys(this.loading)) {\r\n      this.loading[color].dispose();\r\n    }\r\n    delete this.loading;\r\n    this.resourcesCache.dispose();\r\n    this.pageCache.dispose();\r\n    this.canvas.height = this.canvas.width = 0;\r\n    delete this.canvas;\r\n  }\r\n\r\n  isCover(n) {\r\n    return n<2 || n>=2*(this.p.sheets+1);\r\n  }\r\n\r\n  isMobile() {\r\n    return (this.visual.wnd.devicePixelRatio || 1)>1;\r\n  }\r\n\r\n  getPageState(n) {\r\n    const object = this.pageCache.get(n);\r\n    return object? object.state: undefined;\r\n  }\r\n\r\n  enableLoadingAnimation(enable) {\r\n    this.loadingAnimation = enable;\r\n    for(let o of this.loadings) {\r\n      this.setupMaterial(o);\r\n    }\r\n  }\r\n\r\n  update(dt) {\r\n    if(this.loadingAnimation) {\r\n      const loading = {};\r\n      for(let o of this.loadings) {\r\n        if(o.isActive()) {\r\n          loading[o.color] = true;;\r\n        }\r\n      }\r\n      for(let color of Object.keys(loading)) {\r\n        this.loading[color].update(dt);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeFromLoadings(o) {\r\n    const i = this.loadings.indexOf(o);\r\n    if(~i) {\r\n      this.loadings.splice(i, 1);\r\n    }\r\n  }\r\n\r\n  removeFromRenderQueue(o) {\r\n    const i = this.renderQueue.indexOf(o);\r\n    if(~i) {\r\n      this.renderQueue.splice(i, 1);\r\n    }\r\n  }\r\n\r\n  refreshPageQuery(n, query='') {\r\n    this.pageQuery = query;\r\n    const object = this.pageCache.get(n);\r\n    if(object && object.wrapper && object.wrapper.setQuery) {\r\n      if(!this.pageCache.remove(n)) {\r\n        object.wrapper.setQuery(query);\r\n        this.pushInRenderQueue(object);\r\n      }\r\n    }\r\n  }\r\n\r\n  refreshZoom() {\r\n    if(this.p.autoResolution.enable) {\r\n      const es = [];\r\n      this.pageCache.forEach((e)=> {\r\n        es.push(e);\r\n      });\r\n      es.forEach((e)=> {\r\n        const object = e[1];\r\n        if(object && object.wrapper) {\r\n          if(!this.pageCache.remove(e[0])) {\r\n            this.pushInRenderQueue(object);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  getLayers(n, clb) {\r\n    if(this.p.cssLayersLoader) {\r\n      this.p.cssLayersLoader(n, (...args)=> {\r\n        const object = this.pageCache.get(n);\r\n        if(object) {\r\n          if(object.state!=='active') {\r\n            object.pendings.push({clb, args});\r\n          }\r\n          else {\r\n            clb(...args);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      clb([]);\r\n    }\r\n  }\r\n\r\n  resolvePendings(pendings) {\r\n    for(let p of pendings) {\r\n      try {\r\n        p.clb(...p.args);\r\n      }\r\n      catch(e) {\r\n        console.error(e);\r\n      }\r\n    }\r\n    pendings.splice(0, pendings.length);\r\n  }\r\n\r\n  rtlPageN(n) {\r\n    return this.p.rtl? 2*(this.p.sheets+2)-1-n: n;\r\n  }\r\n\r\n  load(material, n) {\r\n    const pi = this.p.pageCallback(this.rtlPageN(n)), p = this.isCover(n)? this.p.cover: this.p.page;\r\n    const o = {\r\n      n,\r\n      texture: new THREE.Texture(),\r\n      wrapper: null,\r\n      state: 'loading',\r\n      locked: (n)=> o.state === 'loading' || o.state === 'rendering' || this.book.isActivePage(n),\r\n      color: p.color,\r\n      isActive: ()=> this.book.isActivePage(n),\r\n      isTop: ()=> ~this.book.getTopPages().indexOf(n),\r\n      dispose: ()=> {\r\n        this.removeFromLoadings(o);\r\n        this.removeFromRenderQueue(o);\r\n        if(o.wrapper && o.wrapper.dispose) {\r\n          o.wrapper.dispose();\r\n        }\r\n        o.texture.dispose();\r\n        delete o.texture;\r\n        delete o.wrapper;\r\n      },\r\n      pendings: []\r\n    };\r\n    o.texture.minFilter = THREE.LinearFilter;\r\n    this.loadings.push(o);\r\n    this.setMaterial(o, material);\r\n\r\n    Promise.resolve().then(()=> {\r\n      if(o.texture) {\r\n        o.widthTexels = pi.widthTexels || p.widthTexels;\r\n        o.heightTexels = pi.heightTexels || p.heightTexels;\r\n        const res = this.calcResolution(o);\r\n        o.wrapper = this.imageFactory.build(pi, pi.number===undefined? n: pi.number, res.width, res.height, p.color, this.p.injector);\r\n        if(o.wrapper.setQuery) {\r\n          o.wrapper.setQuery(this.pageQuery);\r\n        }\r\n        o.simulate = pi.interactive? (o.wrapper.simulate || (()=> undefined)).bind(o.wrapper): undefined;\r\n        o.wrapper.onLoad = ()=> {\r\n          this.pushInRenderQueue(o);\r\n          this.book.dispatchEvent({\r\n            type: 'loadedPage',\r\n            page: n\r\n          });\r\n        };\r\n        o.wrapper.onChange = (image)=> {\r\n          if(o.texture) {\r\n            this.removeFromLoadings(o);\r\n            if(o.material) {\r\n              o.material.map = o.texture;\r\n              o.material.color = new THREE.Color(0xFFFFFF);\r\n              o.material.needsUpdate = true;\r\n            }\r\n            o.texture.image = image;\r\n            o.texture.needsUpdate = true;\r\n            o.texture.onUpdate = ()=> {\r\n              if(o.state !== 'queuedForRender') {\r\n                o.state = 'active';\r\n                this.resolvePendings(o.pendings);\r\n              }\r\n              delete this.rendering;\r\n              //this.updateRenderQueue();\r\n            };\r\n            this.tmpMaterial.map = o.texture;\r\n            this.tmpMaterial.needsUpdate = true;\r\n          }\r\n        };\r\n      }\r\n    });\r\n    this.book.dispatchEvent({\r\n      type: 'loadPage',\r\n      page: n\r\n    });\r\n    return this.pageCache.put(n, o);\r\n  }\r\n\r\n  isSinglePage(o) {\r\n    return this.p.singlePage || !o.n || o.n===this.book.getPages()-1;\r\n  }\r\n\r\n  calcResolution(o) {\r\n    let res;\r\n    if(this.p.autoResolution.enable) {\r\n      const k = Math.min((this.isSinglePage(o)? 1: 0.5)*this.visual.width()/o.widthTexels, this.visual.height()/o.heightTexels);\r\n      res = {\r\n        width: this.p.autoResolution.k*this.p.zoom*k*o.widthTexels,\r\n        height: this.p.autoResolution.k*this.p.zoom*k*o.heightTexels\r\n      };\r\n    }\r\n    else {\r\n      res = {\r\n        width: o.widthTexels,\r\n        height: o.heightTexels\r\n      };\r\n    }\r\n    return res;\r\n  }\r\n\r\n  pushInRenderQueue(o) {\r\n    if(o.state !== 'queuedForRender') {\r\n      o.state = 'queuedForRender';\r\n      this.renderQueue.push(o);\r\n      // this.updateRenderQueue();\r\n    }\r\n  }\r\n\r\n  updateRenderQueue() {\r\n    if(this.canvas) {\r\n      const p = this.p;\r\n      if(!this.rendering && (p.renderWhileFlipping || !this.book.isProcessing())) {\r\n        let active, top;\r\n        for(let o of this.renderQueue) {\r\n          if(!active && o.isActive()) {\r\n            active = o;\r\n          }\r\n          if(o.isTop()) {\r\n            top = o;\r\n            break;\r\n          }\r\n        }\r\n        this.rendering = top || active;\r\n        if(this.isMobile() && p.renderInactivePagesOnMobile || !this.isMobile() && p.renderInactivePages) {\r\n          this.rendering = this.rendering || this.renderQueue[0];\r\n        }\r\n        if(this.rendering) {\r\n          if(this.rendering.wrapper.startRender) {\r\n            this.removeFromRenderQueue(this.rendering);\r\n            this.rendering.state = 'rendering';\r\n            this.rendering.wrapper.setResolution(this.calcResolution(this.rendering));\r\n            this.rendering.wrapper.startRender();\r\n          }\r\n          else {\r\n            delete this.rendering;\r\n          }\r\n        }\r\n      }\r\n      setTimeout(this.updateRenderQueue.bind(this), 250);\r\n    }\r\n  }\r\n\r\n  turnOnEvents() {\r\n    this.transferEvents = true;\r\n  }\r\n\r\n  turnOffEvents() {\r\n    const mouseup = $.Event('mouseup'), mouseout = $.Event('mouseout');\r\n    this.pageCache.forEach((ent)=> {\r\n      const object = ent[1];\r\n      if(object.simulate) {\r\n        object.simulate(mouseup, undefined, 0, 0);\r\n        object.simulate(mouseout, undefined, 0, 0);\r\n      }\r\n    });\r\n    this.transferEvents = false;\r\n  }\r\n\r\n  transferEventToTexture(n, e, data) {\r\n    if(this.transferEvents) {\r\n      const toObject = this.getOrLoadTextureObject(undefined, n);\r\n      if(toObject.wrapper) {\r\n        const {uv} = data, toDoc = toObject.wrapper.getSimulatedDoc();\r\n        this.pageCache.forEach((ent)=> {\r\n          const object = ent[1];\r\n          if(object.simulate) {\r\n            object.simulate(e, toDoc, uv.x, uv.y);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  loadPredictedPages() {\r\n    this.predictedRequests = BaseMathUtils.predict(this.pageRequests, this.p.preloadPages);\r\n    for(let p of this.predictedRequests) {\r\n      if(p<this.book.getPages() && !this.pageCache.get(p)) {\r\n        this.load(undefined, p);\r\n      }\r\n    }\r\n  }\r\n\r\n  addPageRequest(n) {\r\n    this.pageRequests.push(n);\r\n    if(this.pageRequests.length>this.p.pagesForPredicting) {\r\n      this.pageRequests.shift();\r\n    }\r\n    Promise.resolve().then(this.loadPredictedPages.bind(this));\r\n  }\r\n\r\n  setMaterial(o, material) {\r\n    this.pageCache.forEach((e)=> {\r\n      const ob = e[1];\r\n      if(o!==ob && ob.material===material) {\r\n        delete ob.material;\r\n      }\r\n    });\r\n    if(material && material!==o.material) {\r\n      o.material = material;\r\n      this.setupMaterial(o);\r\n    }\r\n  }\r\n\r\n  setupMaterial(o) {\r\n    o.material.map = o.texture.image? o.texture: (this.loadingAnimation? this.loading[o.color].texture: null);\r\n    if(!o.material.map) {\r\n      o.material.color = new THREE.Color(o.color);\r\n    }\r\n    o.material.needsUpdate = true;\r\n  }\r\n\r\n  getOrLoadTextureObject(material, n) {\r\n    let object = this.pageCache.get(n);\r\n    if(!object) {\r\n      object = this.load(material, n);\r\n      this.addPageRequest(n);\r\n    }\r\n    else {\r\n      this.setMaterial(object, material);\r\n    }\r\n\r\n    return object;\r\n  }\r\n\r\n  setTexture(material, n) {\r\n    if(~this.predictedRequests.indexOf(n)) {\r\n      this.addPageRequest(n);\r\n    }\r\n    this.getOrLoadTextureObject(material, n);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/PageManager.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/PageManager.js","import BookPropsBuilder from './BookPropsBuilder';\r\nimport Pdf from 'Pdf';\r\n\r\nexport default class PdfBookPropsBuilder extends BookPropsBuilder {\r\n\r\n  constructor(src, onReady) {\r\n    super(onReady);\r\n    this.pdf = new Pdf(src);\r\n    this.pageDescription = {\r\n      type: 'pdf',\r\n      src: this.pdf,\r\n      interactive: true\r\n    };\r\n    this.binds = {\r\n      pageCallback: this.pageCallback.bind(this)\r\n    };\r\n    this.pdf.getHandler(this.init.bind(this));\r\n  }\r\n\r\n  dispose() {\r\n    this.pdf.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  init(handler) {\r\n    const pages = this.pdf.getPagesNum();\r\n    this.calcSheets(pages);\r\n    if(pages>0) {\r\n      handler.getPage(1).\r\n      then((page)=> {\r\n        const size = Pdf.getPageSize(page);\r\n        this.calcProps(size.width, size.height);\r\n        this.ready();\r\n      }).\r\n      catch((e)=> {\r\n        console.error(e);\r\n      });\r\n    }\r\n    else {\r\n      this.props = this.defaults;\r\n      this.ready();\r\n    }\r\n  }\r\n\r\n  pageCallback(n) {\r\n    return this.pageDescription;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/PdfBookPropsBuilder.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/PdfBookPropsBuilder.js","import {$} from '../libs'\r\n\r\nexport default class PdfLinksHandler {\r\n\r\n  constructor(pdf, ctrl, element) {\r\n    this.pdf = pdf;\r\n    this.ctrl = ctrl;\r\n    this.element = $(element);\r\n    this.cursors = [];\r\n  }\r\n\r\n  dispose() {\r\n\r\n  }\r\n\r\n  setHandler(handler) {\r\n    this.handler = handler;\r\n  }\r\n\r\n  defaultHandler(type, destination) {\r\n    if(type==='internal') {\r\n      this.ctrl.goToPage(destination);\r\n    }\r\n    else if(type==='external') {\r\n      window.open(destination, '_blank');\r\n    }\r\n  }\r\n\r\n  callHandlers(type, destination) {\r\n    if(!this.handler || !this.handler(type, destination)) {\r\n      this.defaultHandler(type, destination);\r\n    }\r\n  }\r\n\r\n  handleEvent(data) {\r\n    const e = data.event, anno = data.annotation;\r\n    switch(e.type) {\r\n      case 'mouseover': {\r\n        this.cursors.push(this.element.css('cursor'));\r\n        this.element.css('cursor', 'pointer');\r\n        break;\r\n      }\r\n      case 'mouseout': {\r\n        this.element.css('cursor', this.cursors.pop() || '');\r\n        break;\r\n      }\r\n      case 'touchtap':\r\n      case 'click': {\r\n        if(anno.url) {\r\n          this.callHandlers('external', anno.url);\r\n        }\r\n        else if(anno.dest) {\r\n          let destPromise;\r\n          if(typeof anno.dest==='string') {\r\n            destPromise = this.pdf.handler.getDestination(anno.dest);\r\n          }\r\n          else {\r\n            destPromise = Promise.resolve(anno.dest);\r\n          }\r\n          destPromise.\r\n            then((dest)=> typeof dest[0]==='number'? dest[0]: this.pdf.handler.getPageIndex(dest[0])).\r\n            then((number)=> this.callHandlers('internal', number)).\r\n            catch(()=> console.error('Bad link'));\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/PdfLinksHandler.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/PdfLinksHandler.js","import Finder from 'Finder';\r\n\r\nexport default class SearchEngine {\r\n  constructor(pageCallback, pages) {\r\n    this.pageCallback = pageCallback;\r\n    this.pages = pages;\r\n    this.results = [];\r\n  }\r\n\r\n  setQuery(query) {\r\n    this.query = query;\r\n    this.update = true;\r\n    this.process();\r\n  }\r\n\r\n  process() {\r\n    if(this.update) {\r\n      const results = this.results;\r\n      this.results = [];\r\n      if(this.onPageHitsChanged) {\r\n        for(let res of results) {\r\n          this.onPageHitsChanged(undefined, '');\r\n        }\r\n      }\r\n      this.update = false;\r\n      this.page = 0;\r\n      this.stamp = Date.now();\r\n      if(this.query.length>1) {\r\n        this.process();\r\n      }\r\n    }\r\n    else {\r\n      if(this.page<this.pages) {\r\n        const stamp = this.stamp;\r\n        this.find(this.pageCallback(this.page)).\r\n          then((contexts)=> {\r\n            if(stamp === this.stamp) {\r\n              if(contexts.length) {\r\n                this.results.push({\r\n                  page: this.page,\r\n                  contexts\r\n                });\r\n              }\r\n              ++this.page;\r\n              if(this.onPageHitsChanged) {\r\n                this.onPageHitsChanged(this.page, this.query);\r\n              }\r\n              this.process();\r\n            }\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  find(pi) {\r\n    let next;\r\n    if(pi.type==='pdf') {\r\n      next = new Promise((resolve)=> {\r\n        pi.src.getHandler(()=> {\r\n          const n = pi.number===undefined? this.page: pi.number;\r\n          if(pi.src.getPageType(n)==='right') {\r\n            resolve([]);\r\n          }\r\n          else {\r\n            pi.src.getPage(n).\r\n            then((page)=> {\r\n              page.getTextContent().\r\n              then((textContent)=> {\r\n                resolve(new Finder(textContent.items.map((item)=> item.str), this.query, {hits: false}).getContexts());\r\n              });\r\n            }).\r\n            catch(()=> resolve([]));\r\n          }\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      next = Promise.resolve([]);\r\n    }\r\n    return next;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/SearchEngine.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/SearchEngine.js","import CSSLayer from 'CSSLayer';\r\n\r\nexport default class SheetCssLayer {\r\n  constructor(visual, block, props) {\r\n    this.visual = visual;\r\n    const size = block.getTopSize();\r\n    this.layer = new CSSLayer(size.width, size.height, props);\r\n\r\n    this.update(block);\r\n    this.visual.addCssObject(this.layer);\r\n  }\r\n\r\n  dispose() {\r\n    this.layer.dispose();\r\n    this.visual.removeCssObject(this.layer);\r\n  }\r\n\r\n  isHidden() {\r\n    return this.layer.isHidden();\r\n  }\r\n\r\n  hide() {\r\n    return this.layer.hide();\r\n  }\r\n\r\n  show() {\r\n    return this.layer.show();\r\n  }\r\n\r\n  set(css, html, js) {\r\n    this.layer.setData(css, html, js);\r\n  }\r\n\r\n  update(block) {\r\n    this.block = block;\r\n    this.block.getTopWorldRotation(this.layer.rotation);\r\n    this.block.getTopWorldPosition(this.layer.position);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/SheetCssLayer.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/SheetCssLayer.js","import MathUtils from 'MathUtils';\r\n\r\nexport default class SheetPhysics {\r\n\r\n  static targetForceClb(o,a,v,ch) {\r\n    const l = a*this.r;\r\n    return 100*this.m*this.g*(2/(1+Math.exp(10*(l-this.tl)))-1)-this.m*40*v;\r\n  }\r\n\r\n  static hoverCornerForceClb(o,v,l,ch) {\r\n    return 5;\r\n  }\r\n\r\n  getTargetForceClb(mass, targetAngle) {\r\n    return SheetPhysics.targetForceClb.bind({\r\n      g: this.p.gravity,\r\n      m: mass,\r\n      tl: targetAngle*this.p.r,\r\n      r: this.p.r\r\n    });\r\n  }\r\n\r\n  static dragForceClb(o,a,v,ch) {\r\n    return o.flbt*o.m*(10*o.g*ch-50*v/(1+Math.exp(3.5*Math.abs(ch))));\r\n  }\r\n\r\n  static dragCornerForceClb(o,a,v,ch) {\r\n    return 15*(2/(1+Math.exp(10*(a-this.ta)*o.r))-1);\r\n  }\r\n\r\n  static getDragCornerForceClb(targetAngle) {\r\n    return SheetPhysics.dragCornerForceClb.bind({\r\n      ta: targetAngle\r\n    });\r\n  }\r\n\r\n  constructor(r=1, gravity=1, cornerDeviation=0.15, fps=240) {\r\n    this.p = {\r\n      r,\r\n      cornerDeviation,\r\n      l: Math.PI*r,\r\n      startDt: 1/fps,\r\n      gravity,\r\n      margin: 0.002*r,\r\n      infM: 1e4,\r\n      attempts: 16,\r\n      maxIterations: 100\r\n    };\r\n    this.os = [];\r\n  }\r\n\r\n  dispose() {\r\n    this.os = [];\r\n  }\r\n\r\n  getSize() {\r\n    return this.os.length;\r\n  }\r\n\r\n  addObject(mass, angle, velocity, flexibility, cornerHeight, simulateClb, removeClb, forceClb=()=> 0, cornerForceClb=()=> 0) {\r\n    const no = {\r\n      id: MathUtils.getUnique(),\r\n      m: mass,\r\n      v: velocity,\r\n      l: angle*this.p.r,\r\n      f: forceClb,\r\n      cf: cornerForceClb,\r\n      ch: cornerHeight,\r\n      flbt: flexibility,\r\n      simulateClb,\r\n      removeClb\r\n    };\r\n    let i = this.os.findIndex((o)=> no.l<=o.l);\r\n    i = ~i? i: this.os.length;\r\n    this.os.splice(i, 0, no);\r\n    return no.id;\r\n  }\r\n\r\n  getParametrMap(name) {\r\n    const map = {\r\n      mass: 'm',\r\n      velocity: 'v',\r\n      flexibility: 'flbt',\r\n      cornerHeight: 'ch',\r\n      simulateClb: 'simulateClb',\r\n      removeClb: 'removeClb',\r\n      forceClb: 'f',\r\n      cornerForceClb: 'cf'\r\n    };\r\n    return map[name];\r\n  }\r\n\r\n  setParametr(id, name, value) {\r\n    const o = this.os.find((o)=> o.id===id);\r\n    if(name === 'angle') {\r\n      o.l = value*this.p.r;\r\n    }\r\n    else {\r\n      o[this.getParametrMap(name)] = value;\r\n    }\r\n  }\r\n\r\n  getParametr(id, name) {\r\n    const o = this.os.find((o)=> o.id===id);\r\n    let value;\r\n    if(name === 'angle') {\r\n      value = o.l/this.p.r;\r\n    }\r\n    else {\r\n      value = o[this.getParametrMap(name)];\r\n    }\r\n    return value;\r\n  }\r\n\r\n  simulate(T) {\r\n    let t=0,\r\n        dt=this.p.startDt,\r\n        attempt=0,\r\n        it=0;\r\n\r\n    while(t<T && it<this.p.maxIterations) {\r\n      if(dt>T-t) {\r\n        dt = T-t;\r\n      }\r\n      const nos = this.integrate(this.os, dt),\r\n            ci = this.findCollisions(nos);\r\n      if(ci.num>1 && attempt<this.p.attempts) {\r\n        dt/=2;\r\n        ++attempt;\r\n      }\r\n      else {\r\n        if(ci.num===1) {\r\n          const scos = this.solveCollision(nos[ci.last-1], nos[ci.last]);\r\n          nos[ci.last-1] = scos[0];\r\n          nos[ci.last] = scos[1];\r\n        }\r\n        else if(ci.num>1) {\r\n          const gs = [];\r\n          let last = -2;\r\n          for(let i of ci.all) {\r\n            if(i-last>1) {\r\n              gs.push([]);\r\n            }\r\n            gs[gs.length-1].push(i);\r\n            last = i;\r\n          }\r\n          for(let g of gs) {\r\n            let sg, i0;\r\n            if(nos[g[0]].l>Math.PI/2*this.p.r) {\r\n              sg = -1;\r\n              i0 = g[g.length-1];\r\n            }\r\n            else {\r\n              sg = 1;\r\n              i0 = g[0];\r\n            }\r\n            for(let i=i0; i<nos.length && i>-1; i+=sg) {\r\n              const o = nos[i+sg];\r\n              if(o && sg*(o.l-nos[i].l)<=this.p.margin) {\r\n                o.l=nos[i].l+sg*2*this.p.margin;\r\n                if(o.l>this.p.l || o.l<0) {\r\n                  o.l = o.l>this.p.l? this.p.l: 0;\r\n                  o.ch = 0;\r\n                  o.v=0;\r\n                  console.error('Bad collision');\r\n                }\r\n              }\r\n              else {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.os = nos;\r\n        this.findAndSolveCornerCollisions();\r\n        t+=dt;\r\n        dt=this.p.startDt;\r\n        attempt=0;\r\n      }\r\n      ++it;\r\n    }\r\n\r\n    this.removeStatics();\r\n  }\r\n\r\n  removeStatics() {\r\n    const nos = [], notify = [[],[]];\r\n    for(let o of this.os) {\r\n      if(o.simulateClb) {\r\n        o.simulateClb(o.l/this.p.r, o.ch);\r\n      }\r\n      if((o.l===this.p.l || o.l===0) && o.v===0) {\r\n        if(o.removeClb !== undefined) {\r\n          notify[(o.l!==this.p.l)+0].push(o);\r\n        }\r\n      }\r\n      else {\r\n        nos.push(o);\r\n      }\r\n    }\r\n    this.os = nos;\r\n    for(let o of notify[0].reverse()) {\r\n      o.removeClb(Math.PI, o.ch);\r\n    }\r\n    for(let o of notify[1]) {\r\n      o.removeClb(0, o.ch);\r\n    }\r\n  }\r\n\r\n  findAndSolveCornerCollisions() {\r\n    if(this.os.length) {\r\n      const os = [\r\n        {\r\n          ...this.os[0],\r\n          l: 0,\r\n          m: this.p.infM,\r\n          ch: 0\r\n        },\r\n        ...this.os,\r\n        {\r\n          ...this.os[0],\r\n          l: 1.05*this.p.l,\r\n          m: this.p.infM,\r\n          ch: 0\r\n        }\r\n      ];\r\n\r\n      for(let i=1; i<os.length; ++i) {\r\n        const a=os[i-1], b=os[i],\r\n              al=a.l+this.p.cornerDeviation*a.ch*this.p.r,\r\n              bl=b.l+this.p.cornerDeviation*b.ch*this.p.r;\r\n        if(1.05*al>bl && a.ch>b.ch) {\r\n          const dCh = a.ch-b.ch, dv=a.m/a.flbt+b.m/b.flbt, ka=a.m/a.flbt/dv, kb=b.m/b.flbt/dv;\r\n          a.ch=a.ch-kb*dCh;\r\n          b.ch=b.ch+ka*dCh;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  solveCollision(a, b) {\r\n    const mm=(b.m+a.m),\r\n      av = (-a.v*b.m+a.m*a.v+2*b.m*b.v)/mm,\r\n      bv = (b.m*b.v-b.v*a.m+2*a.m*a.v)/mm;\r\n    return [{...a, v: av}, {...b, v: bv}];\r\n  }\r\n\r\n  findCollisions(os) {\r\n    const ci = {\r\n      num: 0,\r\n      last: 0,\r\n      all: []\r\n    };\r\n    for(let i = 1; i<os.length && ci.num<2; ++i) {\r\n      if(os[i-1].l>os[i].l || this.isCollision(os[i-1], os[i])) {\r\n        if(os[i-1].l>os[i].l) {\r\n          ++ci.num;\r\n        }\r\n        ++ci.num;\r\n        ci.last = i;\r\n        if(ci.all.indexOf(i-1)===-1) {\r\n          ci.all.push(i-1);\r\n        }\r\n        if(ci.all.indexOf(i)===-1) {\r\n          ci.all.push(i);\r\n        }\r\n      }\r\n    }\r\n    return ci;\r\n  }\r\n\r\n  isCollision(a, b) {\r\n    return Math.abs(a.l-b.l)<this.p.margin && a.v>b.v;\r\n  }\r\n\r\n  integrate(os, dt) {\r\n    const nos = [];\r\n    for(let o of os) {\r\n      const vl = MathUtils.rk4(\r\n        this.dy.bind({\r\n          g: this.p.gravity,\r\n          r: this.p.r,\r\n          m: o.m,\r\n          f: o.f,\r\n          cf: o.cf,\r\n          ch: o.ch,\r\n          flbt: o.flbt\r\n        }),\r\n        0,\r\n        dt,\r\n        [o.v, o.l, o.ch]\r\n      );\r\n      const no = {\r\n        ...o,\r\n        v: vl[0],\r\n        l: vl[1],\r\n        ch: vl[2]\r\n      };\r\n      if(no.l<=0 || no.l>=this.p.l) {\r\n        no.l=no.l<=0? 0: this.p.l;\r\n        no.v=0;\r\n        no.ch=0;\r\n      }\r\n      nos.push(no);\r\n    }\r\n    return nos;\r\n  }\r\n\r\n  dy(t,y) {\r\n    const v=y[0], l=y[1], ch=y[2], f=this.f(this,l/this.r,v,ch), cf=this.cf(this,l/this.r,v,ch);\r\n    return [\r\n      (-this.g*Math.cos(l/this.r)*this.m+f)/this.m,\r\n      v+0.01*(Math.random()-0.5),\r\n      this.flbt*((2/(1+Math.exp(-0.2*cf))-1)*(1-2/(1+Math.exp(-5*(Math.abs(ch)-2))))-ch)\r\n    ];\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/SheetPhysics.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/SheetPhysics.js","\r\n\r\nexport default class SoundsEnviroment {\r\n\r\n  constructor(template={}) {\r\n    this.sounds = template.sounds || {};\r\n    this.audio = {};\r\n    if(this.sounds.startFlip) {\r\n      this.audio.startFlip = new Audio(this.sounds.startFlip);\r\n    }\r\n    if(this.sounds.endFlip) {\r\n      this.audio.endFlip = new Audio(this.sounds.endFlip);\r\n    }\r\n  }\r\n\r\n  setEnabled(enabled) {\r\n    this.enabled = enabled;\r\n  }\r\n\r\n  togle() {\r\n    this.enabled = !this.enabled;\r\n  }\r\n\r\n  dispose() {\r\n    delete this.audio.startFlip;\r\n    delete this.audio.endFlip;\r\n  }\r\n\r\n  startFlip() {\r\n    if(this.enabled && this.audio.startFlip) {\r\n      this.audio.startFlip.play();\r\n    }\r\n  }\r\n\r\n  endFlip() {\r\n    if(this.enabled && this.audio.startFlip) {\r\n      this.audio.startFlip.pause();\r\n      this.audio.startFlip.currentTime = 0;\r\n    }\r\n    if(this.enabled && this.audio.endFlip) {\r\n      this.audio.endFlip.play();\r\n    }\r\n  }\r\n\r\n  subscribeFlips(emitter) {\r\n    emitter.addEventListener('startFlip', this.startFlip.bind(this));\r\n    emitter.addEventListener('endFlip', this.endFlip.bind(this));\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/SoundsEnviroment.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/SoundsEnviroment.js","import WidgetController from 'WidgetController';\r\n\r\nexport default class TocController extends WidgetController {\r\n\r\n  constructor(view, bookCtrl) {\r\n    super(view);\r\n    this.bookCtrl = bookCtrl;\r\n    this.tab = 'none';\r\n  }\r\n\r\n  setThumbnails(thumbnails) {\r\n    this.thumbnails = thumbnails;\r\n    thumbnails.onNavigate = this.navigateThumbnails.bind(this);\r\n    if(this.tab === 'none') {\r\n      this.tab = 'thumbnails';\r\n    }\r\n    this.fireChange();\r\n  }\r\n\r\n  setSearch(search) {\r\n    this.search = search;\r\n    search.onNavigate = this.navigateSearch.bind(this);\r\n    this.fireChange();\r\n  }\r\n\r\n  setBookmarks(bookmarks, pdf) {\r\n    this.bookmarks = bookmarks;\r\n    this.pdf = pdf;\r\n    bookmarks.onNavigate = this.navigateBookmarks.bind(this);\r\n    if(bookmarks.getSize()) {\r\n      this.tab = 'bookmarks';\r\n      this.isBookmarks = true;\r\n    }\r\n    this.fireChange();\r\n  }\r\n\r\n  cmdBookmarks() {\r\n    this.tab = 'bookmarks';\r\n    this.fireChange();\r\n  }\r\n\r\n  cmdThumbnails() {\r\n    this.tab = 'thumbnails';\r\n    this.fireChange();\r\n  }\r\n\r\n  cmdSearch() {\r\n    this.tab = 'search';\r\n    this.fireChange();\r\n  }\r\n\r\n  cmdCloseToc() {\r\n    this.hide();\r\n  }\r\n\r\n  navigateThumbnails(number) {\r\n    this.bookCtrl.goToPage(number);\r\n  }\r\n\r\n  navigateSearch(number) {\r\n    this.bookCtrl.goToPage(number);\r\n  }\r\n\r\n  navigateBookmarks(item) {\r\n    if(item.url) {\r\n      window.open(item.url, '_blank');\r\n    }\r\n    else if(item.dest) {\r\n      let destPromise;\r\n      if(typeof item.dest==='string') {\r\n        destPromise = this.pdf.handler.getDestination(item.dest);\r\n      }\r\n      else {\r\n        destPromise = Promise.resolve(item.dest);\r\n      }\r\n      destPromise.\r\n        then((dest)=> this.pdf.handler.getPageIndex(dest[0])).\r\n        then((number)=> this.bookCtrl.goToPage(number)).\r\n        catch(()=> console.error('Bad bookmark'));\r\n    }\r\n  }\r\n\r\n  updateView() {\r\n    if(this.view) {\r\n      this.view.setState('widTocMenu', {\r\n        enable: true,\r\n        visible: true,\r\n        active: false\r\n      });\r\n      this.view.setState('widThumbnails', {\r\n        enable: true,\r\n        visible: this.tab==='thumbnails',\r\n        active: false\r\n      });\r\n      this.view.setState('widSearch', {\r\n        enable: true,\r\n        visible: this.tab==='search',\r\n        active: false\r\n      });\r\n      this.view.setState('widBookmarks', {\r\n        enable: true,\r\n        visible: this.tab==='bookmarks',\r\n        active: false\r\n      });\r\n      this.view.setState('cmdBookmarks', {\r\n        enable: true,\r\n        visible: true,\r\n        active: this.tab==='bookmarks'\r\n      });\r\n      this.view.setState('cmdCloseToc', {\r\n        enable: true,\r\n        visible: true,\r\n        active: false\r\n      });\r\n      this.view.setState('cmdThumbnails', {\r\n        enable: true,\r\n        visible: true,\r\n        active: this.tab==='thumbnails'\r\n      });\r\n      this.view.setState('cmdSearch', {\r\n        enable: true,\r\n        visible: true,\r\n        active: this.tab==='search'\r\n      });\r\n      Promise.resolve().then(()=> this.thumbnails.setEnable(this.visible && this.tab==='thumbnails'));\r\n      super.updateView();\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/classes/TocController.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/classes/TocController.js","import {THREE} from '../libs';\r\nimport ThreeUtils from 'ThreeUtils';\r\n\r\nconst resX = 11,\r\n      resY = 2,\r\n      resZ = 15,\r\n      scale = 1,\r\n      faces = [];\r\n\r\nconst frontGeometry = new THREE.PlaneGeometry(scale, scale, resX-1, resY-1);\r\nfrontGeometry.translate(0.5*scale,0.5*scale,scale);\r\nconst backGeometry = new THREE.PlaneGeometry(scale, scale, resX-1, resY-1);\r\nbackGeometry.rotateY(Math.PI);\r\nbackGeometry.translate(0.5*scale,0.5*scale,0);\r\nconst leftGeometry = new THREE.PlaneGeometry(scale, scale, resZ-1, resY-1);\r\nleftGeometry.rotateY(-Math.PI/2);\r\nleftGeometry.translate(0,0.5*scale,0.5*scale);\r\nconst rightGeometry = new THREE.PlaneGeometry(scale, scale, resZ-1, resY-1);\r\nrightGeometry.rotateY(Math.PI/2);\r\nrightGeometry.translate(scale,0.5*scale,0.5*scale);\r\nconst topGeometry = new THREE.PlaneGeometry(scale, scale, resX-1, resZ-1);\r\ntopGeometry.rotateX(-Math.PI/2);\r\ntopGeometry.translate(0.5*scale,scale,0.5*scale);\r\nconst bottomGeometry = topGeometry.clone();\r\nbottomGeometry.translate(0,-scale,0);\r\nfor(let f of bottomGeometry.faces) {\r\n  [f.a, f.b] = [f.b, f.a];\r\n}\r\n\r\nconst geometry = new THREE.Geometry();\r\ngeometry.vertices = [...bottomGeometry.vertices, ...topGeometry.vertices];\r\n\r\nconst addFaces = (fs, map)=> {\r\n  for(let f of fs) {\r\n    geometry.faces.push(new THREE.Face3(map(f.a), map(f.b), map(f.c)));\r\n  }\r\n  faces.push(geometry.faces.length);\r\n};\r\n\r\nconst mapVertices = (src, dst)=> {\r\n  const map = [];\r\n  const eq = (a, b)=> Math.abs(a.x-b.x)+Math.abs(a.y-b.y)+Math.abs(a.z-b.z)<1e-4;\r\n  for(let i=0; i<src.length; ++i) {\r\n    for(let j=0; j<dst.length; ++j) {\r\n      if(eq(src[i], dst[j])) {\r\n        map[i]=j;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return map;\r\n};\r\n\r\nconst frontMap = mapVertices(frontGeometry.vertices, geometry.vertices);\r\nconst backMap = mapVertices(backGeometry.vertices, geometry.vertices);\r\nconst leftMap = mapVertices(leftGeometry.vertices, geometry.vertices);\r\nconst rightMap = mapVertices(rightGeometry.vertices, geometry.vertices);\r\n\r\naddFaces(topGeometry.faces, (i)=> i+bottomGeometry.vertices.length);\r\naddFaces(bottomGeometry.faces, (i)=> i);\r\naddFaces(frontGeometry.faces, (i)=> frontMap[i]);\r\naddFaces(backGeometry.faces, (i)=> backMap[i]);\r\naddFaces(leftGeometry.faces, (i)=> leftMap[i]);\r\naddFaces(rightGeometry.faces, (i)=> rightMap[i]);\r\nfaces.pop();\r\n\r\nThreeUtils.computeFaceVertexUvs(geometry, faces);\r\n\r\ngeometry.computeVertexNormals();\r\n//geometry.computeFaceNormals();\r\ngeometry.computeBoundingSphere();\r\n//geometry.computeBoundingBox();\r\ngeometry.verticesNeedUpdate = true;\r\n\r\nexport default {\r\n\tresX,\r\n\tresY,\r\n\tresZ,\r\n\tfaces,\r\n\tgeometry\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/models/sheetBlock.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/models/sheetBlock.js","const mouseButtons = {\r\n  Left: 0,\r\n  Middle: 1,\r\n  Right: 2\r\n};\r\n\r\nexport function props() {\r\n  return {\r\n    eps: 1e-4,\r\n    skin: {\r\n      default: 'short-white-book-view',\r\n    },\r\n    scale: {\r\n      default: 0.9,\r\n      min: 0.9,\r\n      max: 2.5,\r\n      levels: 7\r\n    },\r\n    lighting: {\r\n      default: 0.7,\r\n      min: 0,\r\n      max: 1,\r\n      levels: 7\r\n    },\r\n    pan: {\r\n      speed: 50\r\n    },\r\n    loadingAnimation: {\r\n      skin: false,\r\n      book: true\r\n    },\r\n    autoResolution: {\r\n      enabled: true,\r\n      coefficient: 1.5\r\n    },\r\n    actions: {\r\n      cmdZoomIn: {\r\n        enabled: true,\r\n      },\r\n      cmdZoomOut: {\r\n        enabled: true\r\n      },\r\n      cmdDefaultZoom: {\r\n        enabled: true,\r\n        type: 'dblclick',\r\n        code: 0\r\n      },\r\n      cmdToc: {\r\n        enabled: true\r\n      },\r\n      cmdFastBackward: {\r\n        enabled: false\r\n      },\r\n      cmdBackward: {\r\n        enabled: true\r\n      },\r\n      cmdForward: {\r\n        enabled: true\r\n      },\r\n      cmdFastForward: {\r\n        enabled: false\r\n      },\r\n      cmdSave: {\r\n        enabled: true\r\n      },\r\n      cmdPrint: {\r\n        enabled: true\r\n      },\r\n      cmdFullScreen: {\r\n        enabled: true\r\n      },\r\n      widSettings: {\r\n        enabled: true\r\n      },\r\n      cmdSmartPan: {\r\n        enabled: true,\r\n        active: true,\r\n      },\r\n      cmdSinglePage: {\r\n        enabled: true,\r\n        active: false,\r\n        activeForMobile: false\r\n      },\r\n      cmdSounds: {\r\n        enabled: true,\r\n        active: true\r\n      },\r\n      cmdStats: {\r\n        enabled: true,\r\n        active: false\r\n      },\r\n      cmdLightingUp: {\r\n        enabled: true\r\n      },\r\n      cmdLightingDown: {\r\n        enabled: true\r\n      },\r\n      cmdPanLeft: {\r\n        enabled: false\r\n      },\r\n      cmdPanRight: {\r\n        enabled: false\r\n      },\r\n      cmdPanUp: {\r\n        enabled: false\r\n      },\r\n      cmdPanDown: {\r\n        enabled: false\r\n      },\r\n      mouseCmdRotate: {\r\n        enabled: true,\r\n        type: 'mousedrag',\r\n        code: mouseButtons.Right\r\n      },\r\n      mouseCmdDragZoom: {\r\n        enabled: true,\r\n        type: 'mousedrag',\r\n        code: mouseButtons.Middle\r\n      },\r\n      mouseCmdPan: {\r\n        enabled: true,\r\n        type: 'mousedrag',\r\n        code: mouseButtons.Left\r\n      },\r\n      mouseCmdWheelZoom: {\r\n        enabled: true,\r\n        type: 'mousewheel',\r\n        code: 0\r\n      },\r\n      touchCmdRotate: {\r\n        enabled: true,\r\n        type: 'touchdrag',\r\n        code: 3\r\n      },\r\n      touchCmdZoom: {\r\n        enabled: true,\r\n        type: 'touchdrag',\r\n        code: 2\r\n      },\r\n      touchCmdPan: {\r\n        enabled: true,\r\n        type: 'touchdrag',\r\n        code: 1\r\n      },\r\n      touchCmdSwipe: {\r\n        enabled: true,\r\n        type: 'touchdrag',\r\n        code: 1\r\n      }\r\n    }\r\n  };\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/props/bookController.js\n\n\n// WEBPACK FOOTER //\n// webpack:///js/props/bookController.js","import {$} from '../libs';\r\nimport ImageBase from './ImageBase';\r\n\r\nexport default class BlankImage extends ImageBase {\r\n\r\n  constructor(context, width, height, color) {\r\n    super(context, width, height, color);\r\n\r\n    Promise.resolve().\r\n      then(()=> {\r\n        this.startRender = ()=> {\r\n          this.renderBlankPage();\r\n          this.finishRender();\r\n        };\r\n        this.finishLoad();\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/BlankImage.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/BlankImage.js","import {$} from '../libs';\r\n\r\nexport default class Bookmarks {\r\n\r\n  constructor(container, items, getTitle=(i)=> i.title, getItems=(i)=>i.items) {\r\n    this.container = container;\r\n    this.map = [];\r\n    this.getTitle = getTitle;\r\n    this.getItems = getItems;\r\n    this.nodes = this.mapNodes(items, this.map);\r\n\r\n    this.binds = {\r\n      togle: (e)=> {\r\n        e.preventDefault();\r\n        let li = $(e.target);\r\n        while(li[0] && li[0]!==container[0] && !li.hasClass('item')) {\r\n          li = $(li[0].parentNode);\r\n        }\r\n        if(li.hasClass('item')) {\r\n          let cmd = $(e.target);\r\n          while(cmd[0] && cmd[0]!==li[0] && !cmd.hasClass('cmd')) {\r\n            cmd = $(cmd[0].parentNode);\r\n          }\r\n          if(cmd.hasClass('cmd')) {\r\n            const node = this.map[li.attr('data-id')];\r\n            if(cmd.hasClass('togle')) {\r\n              node.minimized = !node.minimized;\r\n              if(node.minimized) {\r\n                li.find('ul').remove();\r\n                li.find('.togle').addClass('minimized');\r\n              }\r\n              else {\r\n                li.find('.togle').removeClass('minimized');\r\n                li.append((this.renderNode(node).match(/<ul.*<\\/ul>/) || [''])[0]);\r\n              }\r\n            }\r\n            else {\r\n              if(this.onNavigate) {\r\n                this.onNavigate(node.item);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    container.on('click', this.binds.togle);\r\n    this.update();\r\n  }\r\n\r\n  getSize() {\r\n    return this.map.length;\r\n  }\r\n\r\n  dispose() {\r\n    this.container.off('click', this.binds.togle);\r\n    this.container.html('');\r\n  }\r\n\r\n  update() {\r\n    this.container.html(this.renderNodes(this.nodes));\r\n  }\r\n\r\n  forEach(f, nodes=this.nodes) {\r\n    for(let node of (nodes || [])) {\r\n      f(node);\r\n      this.forEach(f, node.children);\r\n    }\r\n  }\r\n\r\n  expand() {\r\n    this.forEach((n)=> n.minimized = false);\r\n    this.update();\r\n  }\r\n\r\n  minimize() {\r\n    this.forEach((n)=> n.minimized = true);\r\n    this.update();\r\n  }\r\n\r\n  renderNode(node) {\r\n    return ['<div class=\"area\">',\r\n      node.children? '<a href=\"#\" class=\"cmd togle' + (node.minimized? ' minimized': '') + '\"><i class=\"fa fa-angle-right\"></i></a> ': '<i class=\"white-space\"></i> ',\r\n      '<a class=\"cmd\" title=\"', node.title,'\" href=\"#\">', node.title, '</a></div>',\r\n      node.minimized? '': this.renderNodes(node.children)\r\n    ].join('');\r\n  }\r\n\r\n  renderNodes(nodes) {\r\n    let res = ['<div class=\"bookmarks\">'];\r\n    if(nodes && nodes.length) {\r\n      res.push('<ul class=\"level-', nodes[0].level, '\">');\r\n      for(let node of nodes) {\r\n        res.push([\r\n          '<li class=\"item\" data-id=\"', node.id,'\">',\r\n            this.renderNode(node),\r\n          '</li>'].join(''));\r\n      }\r\n      res.push('</ul>');\r\n    }\r\n    res.push('</div>');\r\n    return res.join('');\r\n  }\r\n\r\n  mapNodes(items, map=[], level=0) {\r\n    let nodes = null;\r\n    if(items && items.length) {\r\n      nodes=[];\r\n      for(let item of items) {\r\n        const id = map.length;\r\n        map.push(undefined);\r\n        const node = {\r\n          id,\r\n          title: this.getTitle(item),\r\n          level,\r\n          item,\r\n          minimized: true,\r\n          children: this.mapNodes(this.getItems(item), map, level+1)\r\n        };\r\n        nodes.push(node);\r\n        map[id] = node;\r\n      }\r\n    }\r\n    return nodes;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Bookmarks.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Bookmarks.js","import {$} from '../libs';\r\n\r\nexport default class Detector {\r\n\r\n\tstatic canvas = !! window.CanvasRenderingContext2D;\r\n\r\n\tstatic webgl = (function() {\r\n\t\ttry {\r\n\t\t\tconst canvas = document.createElement('canvas');\r\n\t\t\treturn !! (window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})();\r\n\r\n\tstatic workers = !! window.Worker;\r\n\r\n\tstatic fileapi = window.File && window.FileReader && window.FileList && window.Blob;\r\n\r\n\tstatic getWebGLErrorMessage() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.id = 'webgl-error-message';\r\n\t\telement.style.fontFamily = 'monospace';\r\n\t\telement.style.fontSize = '13px';\r\n\t\telement.style.fontWeight = 'normal';\r\n\t\telement.style.textAlign = 'center';\r\n\t\telement.style.background = '#fff';\r\n\t\telement.style.color = '#000';\r\n\t\telement.style.padding = '1.5em';\r\n\t\telement.style.width = '400px';\r\n\t\telement.style.margin = '5em auto 0';\r\n\r\n\t\tif (!Detector.webgl) {\r\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\r\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join('\\n') : [\r\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join('\\n');\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic addGetWebGLMessage(parameters) {\r\n\t\tlet parent, id, element;\r\n\t\tparameters = parameters || {};\r\n\r\n\t\tparent = parameters.parent || $(document.body);\r\n\t\tid = parameters.id || 'oldie';\r\n\r\n\t\telement = Detector.getWebGLErrorMessage();\r\n\t\t//element.id = id;\r\n\r\n\t\tparent.append(element);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Detector.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Detector.js","import {$} from '../libs'\r\n\r\nexport default class DocMouseSimulator {\r\n\r\n  static HOVER = 'SIMULATED-HOVER';\r\n  static ACTIVE = 'SIMULATED-ACTIVE';\r\n\r\n  constructor(jFrame, element, bElement=document.body) {\r\n    this.jFrame = jFrame;\r\n    this.wnd = jFrame[0].contentWindow;\r\n    this.doc = jFrame[0].contentDocument;\r\n    this.element = element || doc.body;\r\n    this.bElement = bElement;\r\n    this.resendProperties = this.getDefaultResendProperties();\r\n    this.undefinedProperties = this.getDefaultUndefinedProperties();\r\n    this.cursors = [];\r\n    this.onDocChangeClbs = [];\r\n    const terms = [\r\n                    {\r\n                      find: ':hover',\r\n                      replace: '.'+DocMouseSimulator.HOVER\r\n                    },\r\n                    {\r\n                      find: ':active',\r\n                      replace: '.'+DocMouseSimulator.ACTIVE\r\n                    }\r\n                  ];\r\n    let style = ['<style type=\"text/css\">'];\r\n    for (let i = 0; i < this.doc.styleSheets.length; ++i) {\r\n      let ss = this.doc.styleSheets[i];\r\n      for (let j = 0; j < ss.cssRules.length; ++j) {\r\n        let r = ss.cssRules[j], cssText;\r\n        for(let term of terms) {\r\n          if (~r.selectorText.indexOf(term.find)) {\r\n            cssText = (cssText || r.cssText).replace(new RegExp(term.find, 'g'), term.replace);\r\n          }\r\n        }\r\n        if(cssText) {\r\n          style.push(cssText);\r\n        }\r\n      }\r\n    }\r\n    style.push('</style>');\r\n    $(this.doc.head).append($(style.join('')));\r\n  }\r\n\r\n  convertCoords(x, y) {\r\n    const jElement = $(this.element);\r\n    const offset = jElement.offset();\r\n    return {\r\n      x: offset.left+jElement.width()*x,\r\n      y: offset.top+jElement.height()*(1-y)\r\n    };\r\n  }\r\n\r\n  triggerEvent(element, e, p, type, advancedProps) {\r\n    const props = {};\r\n    for(let n of this.resendProperties) {\r\n      props[n] = e[n];\r\n    }\r\n    for(let n of this.undefinedProperties) {\r\n      props[n] = undefined;\r\n    }\r\n    for(let n in advancedProps) {\r\n      if(advancedProps.hasOwnProperty(n)) {\r\n        props[n] = advancedProps[n];\r\n      }\r\n    }\r\n    props.view = this.wnd;\r\n    props.pageX = p.x;\r\n    props.pageY = p.y;\r\n    const jE = $.Event(type, props);\r\n    jE.timeStamp = e.timeStamp;\r\n    $(element).trigger(jE);\r\n  }\r\n\r\n  addClass(element, name) {\r\n    $(element).addClass(name);\r\n    const style = this.wnd.getComputedStyle(element);\r\n    this.cursors.push($(this.bElement).css('cursor'));\r\n    $(this.bElement).css('cursor', style.getPropertyValue('cursor'));\r\n  }\r\n\r\n  removeClass(element, name) {\r\n    $(element).removeClass(name);\r\n    $(this.bElement).css('cursor', this.cursors.pop());\r\n  }\r\n\r\n  enterElement(element) {\r\n    this.addClass(element, DocMouseSimulator.HOVER);\r\n  }\r\n\r\n  leaveElement(element) {\r\n    this.removeClass(element, DocMouseSimulator.HOVER);\r\n  }\r\n\r\n  activateElement(element) {\r\n    this.addClass(element, DocMouseSimulator.ACTIVE);\r\n  }\r\n\r\n  deactivateElement(element) {\r\n    this.removeClass(element, DocMouseSimulator.ACTIVE);\r\n  }\r\n\r\n  addDocChangeClb(clb) {\r\n    this.onDocChangeClbs.push(clb);\r\n  }\r\n\r\n  notify() {\r\n    for(let clb of this.onDocChangeClbs) {\r\n      clb(this.wnd, this.doc);\r\n    }\r\n  }\r\n\r\n  elementFromPoint(p) {\r\n    let node = this.doc.body, next = true;\r\n    while(next) {\r\n      next = false;\r\n      for(let i=0; i<node.childNodes.length; ++i) {\r\n        const child = node.childNodes[i];\r\n        if(child instanceof this.wnd.Element) {\r\n          const jC = $(child), offset = jC.offset(), height = jC.height(), width = jC.width();\r\n          if(p.x>offset.left && p.x<offset.left+width && p.y>offset.top && p.y<offset.top+height) {\r\n            node = child;\r\n            next = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return node;\r\n  }\r\n\r\n  getElement(p) {\r\n    const off0 = this.jFrame.offset();\r\n    this.jFrame.offset({left: 0.5*window.innerWidth-p.x, top: 0.5*window.innerHeight-p.y});\r\n    let element = this.doc.elementFromPoint(p.x, p.y);\r\n    if(!element) { // it isn't a joke it's IE\r\n      element = this.doc.elementFromPoint(p.x, p.y);\r\n    }\r\n    this.jFrame.offset(off0);\r\n    return element? element: this.elementFromPoint(p);\r\n  }\r\n\r\n  simulate(e, doc, x, y) {\r\n    const p = this.convertCoords(x, y),\r\n          element = doc===this.doc? this.getElement(p): undefined;\r\n    let trigger = element !== undefined, notify = false;\r\n\r\n    switch(e.type) {\r\n      case 'mousedown': {\r\n        if(this.capElement) {\r\n          this.deactivateElement(this.capElement);\r\n          notify = true;\r\n        }\r\n        this.capElement = element;\r\n        if(this.capElement) {\r\n          this.activateElement(this.capElement);\r\n          notify = true;\r\n        }\r\n        break;\r\n      }\r\n      case 'mouseup': {\r\n        if(this.capElement) {\r\n          this.deactivateElement(this.capElement);\r\n          notify = true;\r\n        }\r\n        this.timeStamp = e.timeStamp;\r\n        break;\r\n      }\r\n      case 'click': {\r\n        trigger = element && this.capElement === element && e.timeStamp === this.timeStamp;\r\n        this.capElement = undefined;\r\n        break;\r\n      }\r\n      case 'mouseenter':\r\n      case 'mouseover':\r\n      case 'mousemove': {\r\n        let leaved = null;\r\n        if(this.hovElement !== element && this.hovElement) {\r\n          this.triggerEvent(this.hovElement, e, p, 'mouseout', {relatedTarget: element? element: null});\r\n          this.leaveElement(this.hovElement);\r\n          leaved = this.hovElement;\r\n          this.hovElement = undefined;\r\n          notify = true;\r\n        }\r\n        if(!this.hovElement && element) {\r\n          this.triggerEvent(element, e, p, 'mouseover', {relatedTarget: leaved});\r\n          this.enterElement(element);\r\n          this.hovElement = element;\r\n          notify = true;\r\n        }\r\n        trigger = element && e.type === 'mousemove';\r\n        break;\r\n      }\r\n      case 'mouseleave':\r\n      case 'mouseout': {\r\n        if(this.hovElement) {\r\n          this.triggerEvent(this.hovElement, e, p, 'mouseout', {relatedTarget: e.relatedTarget});\r\n          this.leaveElement(this.hovElement);\r\n          this.hovElement = undefined;\r\n          notify = true;\r\n        }\r\n        trigger = false;\r\n        break;\r\n      }\r\n    }\r\n    if(trigger) {\r\n      this.triggerEvent(element, e, p, e.type);\r\n    }\r\n    if(notify) {\r\n      this.notify();\r\n    }\r\n  }\r\n\r\n  getDefaultUndefinedProperties() {\r\n    return [\r\n      'clientX',\r\n      'clientY',\r\n      'offsetX',\r\n      'offsetY',\r\n      'screenX',\r\n      'screenY'\r\n    ];\r\n  }\r\n\r\n  getDefaultResendProperties() {\r\n    return [\r\n      'altKey',\r\n      'bubbles',\r\n      'button',\r\n      'buttons',\r\n      'cancelable',\r\n      'changedTouches',\r\n      'char',\r\n      'charCode',\r\n      'ctrlKey',\r\n      'data',\r\n      'detail',\r\n      'eventPhase',\r\n      'isDefaultPrevented',\r\n      'key',\r\n      'keyCode',\r\n      'metaKey',\r\n      'pointerId',\r\n      'pointerType',\r\n      'shiftKey',\r\n      'targetTouches',\r\n      'touches',\r\n      'which'\r\n    ];\r\n  }\r\n\r\n}\r\n\r\n/*\r\naltKey,\r\nbubbles,\r\nbutton,\r\nbuttons,\r\ncancelable,\r\nchangedTouches,\r\nchar,\r\ncharCode,\r\nclientX,\r\nclientY,\r\nctrlKey,\r\ncurrentTarget,\r\ndata,\r\ndelegateTarget,\r\ndetail,\r\neventPhase,\r\nhandleObj,\r\nisDefaultPrevented,\r\nkey,\r\nkeyCode,\r\nmetaKey,\r\noffsetX,\r\noffsetY,\r\noriginalEvent,\r\npageX,\r\npageY,\r\npointerId,\r\npointerType,\r\nrelatedTarget,\r\nscreenX,\r\nscreenY,\r\nshiftKey,\r\ntarget,\r\ntargetTouches,\r\ntimeStamp,\r\ntoElement,\r\ntouches,\r\ntype,\r\nview,\r\nwhich\r\n*/\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/DocMouseSimulator.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/DocMouseSimulator.js","export default class Dom2Image {\n\n  constructor(wnd, doc, cache) {\n    const self = this;\n    this.window = wnd;\n    this.document = doc;\n    this.cache = cache;\n\n    const util = newUtil();\n    const inliner = newInliner();\n    const fontFaces = newFontFaces();\n    const images = newImages();\n\n    this.toSvg = toSvg;\n    this.toPng = toPng;\n    this.toJpeg = toJpeg;\n    this.toBlob = toBlob;\n    this.toPixelData = toPixelData;\n    this.impl = {\n                  fontFaces: fontFaces,\n                  images: images,\n                  util: util,\n                  inliner: inliner\n    };\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n\n    function toSvg(node, options) {\n        options = options || {};\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                self.window.Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                const canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            const canvas = self.document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                const ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (util.isCanvas(node)) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            const children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                let done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!util.isElement(clone)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(self.window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    const style = self.window.getComputedStyle(original, element);\n                    const content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    const className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    const styleElement = self.document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        const selector = '.' + className + ':' + element;\n                        const cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return self.document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            const content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (util.isTextArea(original)) clone.innerHTML = original.value;\n                if (util.isInput(original)) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!util.isSVG(clone)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!util.isSVGRect(clone)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    const value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                const styleNode = self.document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(self.document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new self.window.XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return ['data:image/svg+xml;charset=utf-8,',\n                '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"', width, '\" height=\"', height, '\">',\n                  '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">', xhtml, '</foreignObject>',\n                '</svg>'].join('');\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height,\n\n            isElement,\n            isCanvas,\n            isTextArea,\n            isInput,\n            isSVG,\n            isSVGRect,\n            isImage\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            const WOFF = 'application/font-woff';\n            const JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            const match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            const extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                const binaryString = self.window.atob(canvas.toDataURL().split(',')[1]);\n                const length = binaryString.length;\n                const binaryArray = new self.window.Uint8Array(length);\n\n                for (let i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new self.window.Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            const doc = self.document.implementation.createHTMLDocument();\n            const base = doc.createElement('base');\n            doc.head.appendChild(base);\n            const a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            let index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (self.window.Math.random() * self.window.Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                const image = new self.window.Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n          let data = self.cache.get(url);\n          if(data) {\n            if(data.content) {\n              return data.content;\n            }\n            else {\n              return new Promise((resolve)=> {\n                if(data.content) {\n                  resolve(data.content);\n                }\n                else {\n                  data.pendings.push(resolve);\n                }\n              });\n            }\n          }\n          else {\n            data = self.cache.put(url, {pendings: []});\n\n            const TIMEOUT = 30000;\n\n            return new Promise(function (resolve) {\n                const request = new self.window.XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        return;\n                    }\n\n                    const encoder = new self.window.FileReader();\n                    encoder.onloadend = function () {\n                        data.content = encoder.result.split(/,/)[1];\n                        for(let resolve of data.pendings) {\n                          resolve(data.content);\n                        }\n                        data.pendings = [];\n                        resolve(data.content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n          }\n        }\n\n        function dataAsUrl(content, type) {\n            return ['data:',type,';base64,',content].join('');\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            const array = [];\n            const length = arrayLike.length;\n            for (let i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/(#|\\n)/g, (c)=> c==='#'? '%23': '%0A');\n        }\n\n        function width(node) {\n            const leftBorder = px(node, 'border-left-width');\n            const rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            const topBorder = px(node, 'border-top-width');\n            const bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            const value = self.window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n\n        function isElement(node) {\n          return node instanceof self.window.Element;\n        }\n\n        function isCanvas(node) {\n          return node instanceof self.window.HTMLCanvasElement;\n        }\n\n        function isTextArea(node) {\n          return node instanceof self.window.HTMLTextAreaElement;\n        }\n\n        function isInput(node) {\n          return node instanceof self.window.HTMLInputElement;\n        }\n\n        function isSVG(node) {\n          return node instanceof self.window.SVGElement;\n        }\n\n        function isSVGRect(node) {\n          return node instanceof self.window.SVGRectElement;\n        }\n\n        function isImage(node) {\n          return node instanceof self.window.HTMLImageElement;\n        }\n    }\n\n    function newInliner() {\n        const URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            const result = [];\n            let match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), ['$1', dataUrl, '$3'].join(''));\n                });\n\n            function urlAsRegex(url) {\n                return new self.window.RegExp(['(url\\\\([\\'\"]?)(', util.escape(url), ')([\\'\"]?\\\\))'].join(''), 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    let done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(self.document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(self.document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                const cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        const baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!util.isElement(node)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (util.isImage(node))\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                const background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Dom2Image.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Dom2Image.js","import {$, THREE} from '../libs';\r\n\r\nexport default class Drag {\r\n\r\n  constructor(wnd, doc, visualWorld) {\r\n    this.wnd = wnd;\r\n    this.doc = doc;\r\n    this.visual = visualWorld;\r\n    this.coords = new THREE.Vector2();\r\n    this.intersection = new THREE.Vector3();\r\n    this.raycaster = this.visual.raycaster;\r\n    this.camera = this.visual.camera;\r\n    this.plane = new THREE.Plane();\r\n    this.threes = [];\r\n    this.selected = null;\r\n    this.enabled = true;\r\n    this.controlsState = this.visual.getControlsState();\r\n\r\n    this.element = this.visual.element;\r\n    this.binds = {\r\n      onMouseMove: this.onMouseMove.bind(this),\r\n      onMouseDown: this.onMouseDown.bind(this),\r\n      onMouseUp: this.onMouseUp.bind(this)\r\n    };\r\n    $(this.element).on('mousemove', this.binds.onMouseMove);\r\n    $(this.element).on('mousedown', this.binds.onMouseDown);\r\n    $(this.doc).on('mouseup', this.binds.onMouseUp);\r\n  }\r\n\r\n  addThree(three) {\r\n    this.threes.push(three);\r\n  }\r\n\r\n  removeThree(three) {\r\n    const i = this.threes.indexOf(three);\r\n    if(~i) {\r\n      this.threes.splice(i, 1);\r\n    }\r\n  }\r\n\r\n  onPickCallback() {\r\n    return true;\r\n  }\r\n\r\n  onDragCallback() {\r\n    return true;\r\n  }\r\n\r\n  onReleaseCallback() {\r\n\r\n  }\r\n\r\n  dispose() {\r\n    $(this.element).off('mousemove', this.binds.onMouseMove);\r\n    $(this.element).off('mousedown', this.binds.onMouseDown);\r\n    $(this.doc).off('mouseup', this.binds.onMouseUp);\r\n  }\r\n\r\n  setCoordsFromEvent(e) {\r\n    const jElement = $(this.element);\r\n    const offset = jElement.offset();\r\n    this.coords.x = ((e.pageX-offset.left)/jElement.width())*2-1;\r\n    this.coords.y = -((e.pageY-offset.top)/jElement.height())*2+1;\r\n    return this.coords;\r\n  }\r\n\r\n  onMouseDown(e) {\r\n    if(!this.enabled) return;\r\n\r\n    if(this.selected) this.onMouseUp(e);\r\n\r\n    this.setCoordsFromEvent(e);\r\n  \tthis.raycaster.setFromCamera(this.coords, this.camera);\r\n\r\n  \tconst intersects = this.raycaster.intersectObjects(this.threes);\r\n  \tif(intersects.length > 0) {\r\n      const selected = intersects[0].object;\r\n      if(!this.onPickCallback(intersects[0])) return;\r\n      const v = intersects[0].point.clone();\r\n      this.distance = v.sub(this.raycaster.ray.origin).length();;\r\n      this.controlsState = this.visual.getControlsState();\r\n      this.visual.setControlsState(false);\r\n      this.plane.setFromNormalAndCoplanarPoint(this.visual.camera.getWorldDirection(this.plane.normal), intersects[0].point);\r\n      //this.plane.setFromNormalAndCoplanarPoint(this.plane.normal.set(0,0,1), new THREE.Vector3(0,0,0));\r\n      this.selected = selected;\r\n  \t}\r\n\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    if(!this.enabled) return;\r\n  \te.preventDefault();\r\n\r\n  \tif(this.selected) {\r\n      this.setCoordsFromEvent(e);\r\n    \tthis.raycaster.setFromCamera(this.coords, this.camera);\r\n\t    if(this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {\r\n        if(!this.onDragCallback(this.intersection)) this.onMouseUp(e);\r\n      }/**/\r\n      //this.intersection.copy(this.raycaster.ray.direction).normalize().multiplyScalar(this.distance).add(this.raycaster.ray.origin);/**/\r\n      //if(!this.onDragCallback(this.selected, this.intersection)) this.onMouseUp(e);\r\n  \t}\r\n  }\r\n\r\n  onMouseUp(e) {\r\n    if(this.selected) {\r\n      this.onReleaseCallback();\r\n  \t\tthis.selected = null;\r\n      this.visual.setControlsState(this.controlsState);\r\n  \t}\r\n    if(!this.enabled) return;\r\n  \te.preventDefault();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Drag.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Drag.js","import {$} from '../libs';\r\nrequire('imports-loader?define=>false!jquery-mousewheel')($);\r\n\r\nexport default class EventsToActions {\r\n\r\n  static modKeys = {\r\n    Ctrl: 1,\r\n    Shift: 2,\r\n    Alt: 4\r\n  };\r\n\r\n  static mouseButtons = {\r\n    Left: 0,\r\n    Middle: 1,\r\n    Right: 2\r\n  };\r\n\r\n  static getEventFlags(e) {\r\n    return e.ctrlKey<<0 | e.shiftKey<<1 | e.altKey<<2;\r\n  }\r\n\r\n  static getPosition(touches) {\r\n    let x, y;\r\n    if(touches.length===2) {\r\n      x = touches[1].pageX-touches[0].pageX;\r\n      y = touches[1].pageY-touches[0].pageY;\r\n      y = -Math.sqrt(x*x+y*y);\r\n      x = 0;\r\n    }\r\n    else {\r\n      x = touches[0].pageX;\r\n      y = touches[0].pageY;\r\n    }\r\n    return {\r\n      x,\r\n      y\r\n    };\r\n  }\r\n\r\n  constructor(element, actions) {\r\n    this.actions = actions || {};\r\n    this.element = element;\r\n    this.doc = element[0].ownerDocument;\r\n    this.wnd = this.doc.defaultView;\r\n    this.enabled = true;\r\n\r\n    this.binds = {\r\n      contextMenu: this.contextMenu.bind(this),\r\n\r\n      mouseDown: this.mouseDown.bind(this),\r\n      mouseMove: this.mouseMove.bind(this),\r\n      mouseUp: this.mouseUp.bind(this),\r\n      mouseWheel: this.mouseWheel.bind(this),\r\n\r\n      mouseMoveDoc: this.mouseMoveDoc.bind(this),\r\n      mouseUpDoc: this.mouseUpDoc.bind(this),\r\n\r\n      click: this.click.bind(this),\r\n      dblclick: this.dblclick.bind(this),\r\n\r\n      touchStart: this.touchStart.bind(this),\r\n      touchMove: this.touchMove.bind(this),\r\n      touchEnd: this.touchEnd.bind(this),\r\n\r\n      keyDown: this.keyDown.bind(this),\r\n      keyPress: this.keyPress.bind(this),\r\n      keyUp: this.keyUp.bind(this)\r\n    };\r\n\r\n    this.element.on('contextmenu', this.binds.contextMenu);\r\n\r\n    this.element.on('mousedown', this.binds.mouseDown);\r\n    this.element.on('mousemove', this.binds.mouseMove);\r\n    this.element.on('mouseup', this.binds.mouseUp);\r\n    this.element.on('mousewheel', this.binds.mouseWheel);\r\n\r\n    $(this.doc).on('mousemove', this.binds.mouseMoveDoc);\r\n    $(this.doc).on('mouseup', this.binds.mouseUpDoc);\r\n\r\n    this.element.on('click', this.binds.click);\r\n    this.element.on('dblclick', this.binds.dblclick);\r\n\r\n    this.element.on('touchstart', this.binds.touchStart);\r\n    this.element.on('touchmove', this.binds.touchMove);\r\n    this.element.on('touchend', this.binds.touchEnd);\r\n\r\n    $(this.wnd).on('keydown', this.binds.keyDown);\r\n    $(this.wnd).on('keypress', this.binds.keyPress);\r\n    $(this.wnd).on('keyup', this.binds.keyUp);\r\n  }\r\n\r\n  addAction(action, type, code, flags) {\r\n    type = type.toLowerCase();\r\n    if(!this.actions[type]) {\r\n      this.actions[type] = {};\r\n    }\r\n    if(!this.actions[type][code]) {\r\n      this.actions[type][code] = {}\r\n    }\r\n    if(!this.actions[type][code][flags]) {\r\n      this.actions[type][code][flags] = [];\r\n    }\r\n    this.actions[type][code][flags].push(action);\r\n  }\r\n\r\n  getActions(type, code, flags) {\r\n    return ((this.actions[type] || {})[code] || {})[flags] || [];\r\n  }\r\n\r\n  fireActions(actions, e, data) {\r\n    for(let action of actions) {\r\n      action(e, data);\r\n    }\r\n  }\r\n\r\n  contextMenu(e) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions('contextmenu', e.button, flags), e);\r\n    }\r\n  }\r\n\r\n  mouseDown(e) {\r\n    if(this.picked) {\r\n      this.mouseUpDoc();\r\n    }\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions('mousedown', e.button, flags), e);\r\n      this.picked = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n        actions: this.getActions('mousedrag', e.button, flags)\r\n      };\r\n      this.fireActions(this.picked.actions, e, {\r\n        state: 'start'\r\n      });\r\n    }\r\n  }\r\n\r\n  mouseMove(e) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions('mousemove', e.button, flags), e);\r\n    }\r\n  }\r\n\r\n  mouseMoveDoc(e) {\r\n    if(this.enabled && this.picked) {\r\n      this.fireActions(this.picked.actions, e, {\r\n        state: 'move',\r\n        dx: e.pageX-this.picked.x,\r\n        dy: e.pageY-this.picked.y\r\n      });\r\n      this.picked = {\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n        actions: this.picked.actions\r\n      };\r\n    }\r\n  }\r\n\r\n  mouseUp(e) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions('mouseup', e.button, flags), e);\r\n    }\r\n  }\r\n\r\n  mouseUpDoc(e) {\r\n    if(this.picked) {\r\n      this.fireActions(this.picked.actions, e, {\r\n        state: 'end'\r\n      });\r\n      delete this.picked;\r\n    }\r\n  }\r\n\r\n  mouseWheel(e) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions('mousewheel', 0, flags), e);\r\n    }\r\n  }\r\n\r\n  clicks(e, type) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions(type, e.button, flags), e);\r\n    }\r\n  }\r\n\r\n  click(e) {\r\n    this.clicks(e, 'click');\r\n  }\r\n\r\n  dblclick(e) {\r\n    this.clicks(e, 'dblclick');\r\n  }\r\n\r\n  touchPick(e, flags, touches) {\r\n    this.touchPicked = {\r\n      ...EventsToActions.getPosition(touches),\r\n      actions: this.getActions('touchdrag', touches.length, flags),\r\n      code: touches.length,\r\n      flags\r\n    };\r\n    this.fireActions(this.touchPicked.actions, e, {\r\n      state: 'start'\r\n    });\r\n  }\r\n\r\n  touchStart(e) {\r\n    if(this.touchPicked) {\r\n      this.touchEnd(e);\r\n    }\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e), touches = e.touches || e.originalEvent.touches;\r\n      this.fireActions(this.getActions('touchstart', touches.length, flags), e);\r\n      this.touchPick(e, flags, touches);\r\n    }\r\n  }\r\n\r\n  touchMove(e) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e), touches = e.touches || e.originalEvent.touches;\r\n      this.fireActions(this.getActions('touchmove', touches.length, flags), e);\r\n      if(this.touchPicked) {\r\n        if(this.touchPicked.code===touches.length && this.touchPicked.flags===flags) {\r\n          const pos = EventsToActions.getPosition(touches);\r\n          this.fireActions(this.touchPicked.actions, e, {\r\n            state: 'move',\r\n            dx: pos.x-this.touchPicked.x,\r\n            dy: pos.y-this.touchPicked.y\r\n          });\r\n          this.touchPicked = {\r\n            ...this.touchPicked,\r\n            ...pos\r\n          };\r\n        }\r\n        else {\r\n          this.touchEnd(e);\r\n          this.touchPick(e, flags, touches);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  touchEnd(e) {\r\n    if(this.touchPicked) {\r\n      this.fireActions(this.touchPicked.actions, e, {\r\n        state: 'end'\r\n      });\r\n      delete this.touchPicked;\r\n    }\r\n  }\r\n\r\n  key(e, type) {\r\n    if(this.enabled) {\r\n      const flags = EventsToActions.getEventFlags(e);\r\n      this.fireActions(this.getActions(type, e.keyCode, flags), e);\r\n    }\r\n  }\r\n\r\n  keyDown(e) {\r\n    this.key(e, 'keydown');\r\n  }\r\n\r\n  keyPress(e) {\r\n    this.key(e, 'keypress');\r\n  }\r\n\r\n  keyUp(e) {\r\n    this.key(e, 'keyup');\r\n  }\r\n\r\n  dispose() {\r\n    this.element.off('contextmenu', this.binds.contextMenu);\r\n\r\n    this.element.off('mousedown', this.binds.mouseDown);\r\n    this.element.off('mousemove', this.binds.mouseMove);\r\n    this.element.off('mouseup', this.binds.mouseUp);\r\n    this.element.off('mousewheel', this.binds.mouseWheel);\r\n\r\n    $(this.doc).off('mousemove', this.binds.mouseMoveDoc);\r\n    $(this.doc).off('mouseup', this.binds.mouseUpDoc);\r\n\r\n    this.element.off('click', this.binds.click);\r\n    this.element.off('dblclick', this.binds.dblclick);\r\n\r\n    this.element.off('touchstart', this.binds.touchStart);\r\n    this.element.off('touchmove', this.binds.touchMove);\r\n    this.element.off('touchend', this.binds.touchEnd);\r\n\r\n    $(this.wnd).off('keydown', this.binds.keyDown);\r\n    $(this.wnd).off('keypress', this.binds.keyPress);\r\n    $(this.wnd).off('keyup', this.binds.keyUp);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/EventsToActions.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/EventsToActions.js","\r\nexport default class FullScreen {\r\n\r\n\tstatic _hasWebkitFullScreen\t= !!document.webkitCancelFullScreen;\r\n\tstatic _hasMozFullScreen\t= !!document.mozCancelFullScreen;\r\n\tstatic _hasMsFullscreen = !!document.documentElement.msRequestFullscreen;\r\n\r\n\tstatic available() {\r\n\t\treturn FullScreen._hasWebkitFullScreen || FullScreen._hasMozFullScreen || FullScreen._hasMsFullscreen;\r\n\t}\r\n\r\n\tstatic activated() {\r\n\t\tif(FullScreen._hasWebkitFullScreen) {\r\n\t\t\treturn document.webkitIsFullScreen;\r\n\t\t}\r\n\t\telse if(FullScreen._hasMozFullScreen) {\r\n\t\t\treturn document.mozFullScreen;\r\n\t\t}\r\n\t\telse if(FullScreen._hasMsFullscreen) {\r\n\t\t\treturn !!document.msFullscreenElement;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.assert(false);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic addEventListener(element, handler) {\r\n\t\tif (element.addEventListener) {\r\n\t\t    element.addEventListener('webkitfullscreenchange', handler, false);\r\n\t\t    element.addEventListener('mozfullscreenchange', handler, false);\r\n\t\t    element.addEventListener('fullscreenchange', handler, false);\r\n\t\t    element.addEventListener('MSFullscreenChange', handler, false);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic removeEventListener(element, handler) {\r\n\t\tif (element.removeEventListener) {\r\n\t\t    element.removeEventListener('webkitfullscreenchange', handler, false);\r\n\t\t    element.removeEventListener('mozfullscreenchange', handler, false);\r\n\t\t    element.removeEventListener('fullscreenchange', handler, false);\r\n\t\t    element.removeEventListener('MSFullscreenChange', handler, false);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic request(element) {\r\n\t\telement\t= element\t|| document.body;\r\n\t\tif(FullScreen._hasWebkitFullScreen) {\r\n\t\t\telement.webkitRequestFullScreen();\r\n\t\t}\r\n\t\telse if(FullScreen._hasMozFullScreen) {\r\n\t\t\telement.mozRequestFullScreen();\r\n\t\t}\r\n\t\telse if(FullScreen._hasMsFullscreen) {\r\n\t\t\telement.msRequestFullscreen();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.assert(false);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic cancel() {\r\n\t\tif(FullScreen._hasWebkitFullScreen) {\r\n\t\t\tdocument.webkitCancelFullScreen();\r\n\t\t}else if(FullScreen._hasMozFullScreen) {\r\n\t\t\tdocument.mozCancelFullScreen();\r\n\t\t}\r\n\t\telse if(FullScreen._hasMsFullscreen) {\r\n\t\t\tdocument.msExitFullscreen();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.assert(false);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/FullScreen.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/FullScreen.js","import {$, html2canvas} from '../libs';\r\nimport ImageBase from './ImageBase';\r\nimport BaseMathUtils from './BaseMathUtils';\r\nimport Dom2Image from './Dom2Image';\r\nimport DocMouseSimulator from './DocMouseSimulator';\r\n\r\nexport default class InteractiveImage extends ImageBase {\r\n\r\n  constructor(context, width, height, color, src, cache, injector) {\r\n    super(context, width, height, color);\r\n\r\n    this.iId = 'i'+BaseMathUtils.getUnique();\r\n    const jFrame = $('<iframe id=\"'+this.iId+'\" src=\"' + src + '\" style=\"position: fixed; left: -1000px;\"></iframe>');\r\n    $(this.doc.body).append(jFrame);\r\n    this.frame = jFrame[0];\r\n\r\n    this.binds = {};\r\n\r\n    if(injector) {\r\n      injector(this.frame.contentWindow);\r\n    }\r\n\r\n    if(this.doc.implementation.hasFeature('www.http://w3.org/TR/SVG11/feature#Extensibility', '1.1')) { // svg foreignObject renderer\r\n      this.image = new Image();\r\n      this.binds.imageLoad = ()=> {\r\n        this.renderImage(this.image);\r\n        this.finishRender();\r\n      };\r\n      $(this.image).on('load', this.binds.imageLoad);\r\n      this.svgRender = new Dom2Image(this.frame.contentWindow, this.frame.contentDocument, cache);\r\n    } // otherwise - html2canvas\r\n\r\n    this.binds.frameLoad = ()=> {\r\n      if(~this.frame.contentDocument.title.indexOf('404')) {\r\n        this.startRender = ()=> {\r\n          this.renderNotFoundPage();\r\n          this.finishRender();\r\n        };\r\n        this.finishLoad();\r\n      }\r\n      else {\r\n        setTimeout(()=> {\r\n          if(this.frame) {\r\n            this.width = $(this.frame.contentDocument.body).width();\r\n            this.height = $(this.frame.contentDocument.body).height();\r\n            jFrame.css('width', this.width+'px').css('height', this.height+'px');\r\n            jFrame.offset({left: -this.width-100, top: 0});\r\n            if(this.svgRender) {\r\n              this.simulator = new DocMouseSimulator(jFrame, this.frame.contentDocument.body, this.element);\r\n              this.simulator.addDocChangeClb(this.finishLoad.bind(this));\r\n            }\r\n            this.startRender = ()=> {\r\n              this.render();\r\n            };\r\n            this.finishLoad();\r\n          }\r\n        }, 500);\r\n      }\r\n    };\r\n    $(this.frame.contentWindow).on('load', this.binds.frameLoad);\r\n  }\r\n\r\n  getSimulatedDoc() {\r\n    return this.frame.contentDocument;\r\n  }\r\n\r\n  render() {\r\n    if(this.svgRender) {\r\n      this.svgRender.toSvg(this.simulator.element, {height: this.height+'px', width: this.width+'px'})\r\n        .then((dataUrl)=> {\r\n          this.image.src = dataUrl;\r\n        })\r\n        .catch((error)=> {\r\n          console.error('Dom2Image: ', error);\r\n          this.renderBlankPage();\r\n          this.finishRender();\r\n        });\r\n    }\r\n    else {\r\n      html2canvas(this.frame.contentDocument.body, {timeout: 30000}).\r\n        then((canvas)=> {\r\n          this.renderImage(canvas);\r\n          this.finishRender();\r\n        });\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    $(this.image).off('load', this.binds.imageLoad);\r\n    $(this.frame.contentWindow).off('load', this.binds.frameLoad);\r\n    $(this.doc.body).find('#'+this.iId).remove();\r\n    if(this.image) {\r\n      this.image.src = '';\r\n      delete this.image;\r\n    }\r\n    this.frame.src = '';\r\n    delete this.frame;\r\n    super.dispose();\r\n  }\r\n\r\n  simulate(e, doc, x, y) {\r\n    if(this.simulator) {\r\n      this.simulator.simulate(e, doc, x, y);\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/InteractiveImage.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/InteractiveImage.js","import {$, tr} from '../libs';\r\nimport GraphUtils from './GraphUtils';\r\nimport MathUtils from './MathUtils';\r\n\r\nexport default class LoadingAnimation {\r\n\r\n  dy(t,y) {\r\n    const w=y[0], a=y[1];\r\n    return [\r\n      -this.g*Math.cos(a),\r\n      w\r\n    ];\r\n  }\r\n\r\n  integrate(T) {\r\n    let t=0, dt=this.p.dt, os = this.os;\r\n    while(t<T) {\r\n      if(t+dt>T) {\r\n        dt=T-t;\r\n      }\r\n      os=MathUtils.rk4(this.dy.bind({g: this.p.g}), 0, dt, os);\r\n      t+=dt;\r\n    }\r\n    return os;\r\n  }\r\n\r\n  calcTimeTo(target) {\r\n    let t=0, dt=this.p.dt, os = this.os;\r\n    while(Math.abs(os[1]-target)>1e-4) {\r\n      const nos=MathUtils.rk4(this.dy.bind({g: this.p.g}), 0, dt, os);\r\n      if(nos[0]<0 && nos[1]<target || nos[0]>0 && nos[1]>target) {\r\n        dt/=2;\r\n      }\r\n      else {\r\n        os = nos;\r\n        t+=dt;\r\n      }\r\n    }\r\n    return t;\r\n  }\r\n\r\n  update(T) {\r\n    this.os = this.integrate(T);\r\n\r\n    this.t+=T\r\n    if(this.t>=this.p.updateInterval) {\r\n      this.t = 0;\r\n      const r = 0.06*Math.min(this.c.width, this.c.height),\r\n            a = this.os[1],\r\n            x0 = 0.5*this.c.width,\r\n            y0 = 0.5*this.c.height,\r\n            ctx = this.ctx;\r\n\r\n      ctx.clearRect(0, 0, this.c.width, this.c.height);\r\n      ctx.beginPath();\r\n      ctx.fillStyle = GraphUtils.color2Rgba(this.p.color,1);\r\n      ctx.rect(0, 0, this.c.width, this.c.height);\r\n      ctx.fill();\r\n\r\n      ctx.beginPath();\r\n      ctx.shadowBlur = 50;\r\n      ctx.fillStyle = GraphUtils.color2Rgba(GraphUtils.inverseColor(this.p.color,0.9),Math.abs(this.os[0]/6.36));\r\n      ctx.shadowColor = GraphUtils.color2Rgba(GraphUtils.inverseColor(this.p.color,1),0.9);\r\n      ctx.shadowOffsetX = 0;\r\n      ctx.shadowOffsetY = 0;\r\n      ctx.font='bold '+Math.round(0.25*r)+'px Arial';\r\n      ctx.textAlign = 'center';\r\n      ctx.textBaseline = 'middle';\r\n      ctx.fillText(tr('Loading...'),x0,y0);\r\n\r\n      const ps = 10, da=2*Math.PI/ps;//2.5*_r/r\r\n      ctx.shadowColor = GraphUtils.color2Rgba(GraphUtils.inverseColor(this.p.color,1),0.7);\r\n      for(let i=0, _a=a, _r=0.2*r; i<ps; ++i, _r*=0.9, _a+=da) {\r\n        ctx.beginPath();\r\n        ctx.fillStyle = GraphUtils.color2Rgba(GraphUtils.inverseColor(this.p.color,(ps-i)/ps),0.7*(ps-i)/ps);\r\n        const cx=x0+r*Math.cos(_a), cy=y0-r*Math.sin(_a), nx=x0+r*Math.cos(_a+da), ny=y0-r*Math.sin(_a+da);\r\n        ctx.shadowOffsetX = 0.2*(nx-cx);\r\n        ctx.shadowOffsetY = 0.2*(ny-cy);\r\n        ctx.arc(cx, cy, _r, 0, Math.PI*2, 1);\r\n        ctx.fill();\r\n      }\r\n      if(this.onChange) {\r\n        this.onChange(this.c, this.p.color);\r\n      }\r\n    }\r\n  }\r\n\r\n  getImage() {\r\n    return this.c;\r\n  }\r\n\r\n  dispose() {\r\n    this.c.width = 0;\r\n    this.c.height = 0;\r\n    delete this.ctx;\r\n    delete this.c;\r\n  }\r\n\r\n  createSprite(n) {\r\n    const c = $('<canvas width=\"'+this.c.width*n+'\" height=\"'+this.c.height+'\"></canvas>')[0], ctx = c.getContext('2d'),\r\n    t = this.calcTimeTo(this.os[1]+Math.sign(this.os[0])*2*Math.PI), dt=t/(n+1);\r\n    const {updateInterval} = this.p;\r\n    this.p.updateInterval = 0;\r\n    for(let i=0; i<n; ++i) {\r\n      this.update(dt);\r\n      ctx.drawImage(this.c, i*this.c.width, 0);\r\n    }\r\n    this.p.updateInterval = updateInterval;\r\n    return c;\r\n  }\r\n\r\n  constructor(width, height, color) {\r\n    const jC = $('<canvas width=\"'+width+'\" height=\"'+height+'\"></canvas>');\r\n    this.c = jC[0];\r\n    this.p = {\r\n      g: 9.8,\r\n      dt: 1/60,\r\n      color,\r\n      updateInterval: 0.25\r\n    };\r\n    this.ctx = this.c.getContext('2d');\r\n    this.os = [-2, Math.PI/2];\r\n    this.t = this.p.updateInterval;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/LoadingAnimation.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/LoadingAnimation.js","import {$} from '../libs';\r\n\r\nexport default class LoadingController {\r\n\r\n  constructor(view, showProgress=true, loadingMsg=undefined) {\r\n    this.view = view;\r\n    this.progress = 0;\r\n    this.showProgress = showProgress;\r\n    this.getLoadingMsg = loadingMsg || LoadingController.defaultLoadingMsg;\r\n    this.updateView();\r\n  }\r\n\r\n  static defaultLoadingMsg(progress) {\r\n    return ['Please wait... the Application is Loading: ', progress, '%'].join('');\r\n  }\r\n\r\n  dispose() {\r\n    this.showProgress = false;\r\n    this.updateView();\r\n    delete this.view;\r\n  }\r\n\r\n  setProgress(v) {\r\n    this.progress = v;\r\n    this.updateView();\r\n  }\r\n\r\n  updateView() {\r\n    if(this.view) {\r\n\r\n      this.view.setState('widLoadingProgress', {\r\n        enable: true,\r\n        visible: this.showProgress,\r\n        active: false\r\n      });\r\n\r\n      this.view.setState('txtLoadingProgress', {\r\n        value: this.getLoadingMsg(this.progress),\r\n        visible: true\r\n      });\r\n\r\n      for(let name of this.view.getLinks()) {\r\n        this.view.setState(name, {\r\n          enable: false,\r\n          visible: true,\r\n          active: false\r\n        });\r\n      }\r\n\r\n      this.view.setState('inpPages', {\r\n        visible: true,\r\n        value: ''\r\n      });\r\n\r\n      this.view.setState('inpPage', {\r\n        visible: true,\r\n        enable: false,\r\n        value: ''\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/LoadingController.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/LoadingController.js","import {$} from '../libs';\r\nimport EventConverter from './EventConverter';\r\n\r\nexport default class MouseEventConverter extends EventConverter {\r\n\r\n  constructor(wnd, doc, element) {\r\n    super(wnd, doc);\r\n\r\n    this.element = element;\r\n    this.binds = {\r\n      convert: this.convert.bind(this)\r\n    };\r\n    $(this.element).on('mousemove mousedown mouseover mouseout click', this.binds.convert);\r\n    $(this.doc).on('mouseup', this.binds.convert);\r\n  }\r\n\r\n  dispose() {\r\n    $(this.element).off('mousemove mousedown mouseover mouseout click', this.binds.convert);\r\n    $(this.doc).off('mouseup', this.binds.convert);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/MouseEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/MouseEventConverter.js","import {THREE} from '../libs';\r\nimport MathUtils from './MathUtils';\r\n\r\nexport default class Object3DWatcher {\r\n\r\n  constructor(visual, boundBoxClb, testScale=this.testScale) {\r\n    this.visual = visual;\r\n    this.boundBoxClb = boundBoxClb;\r\n    this.testScale = testScale;\r\n    this.camera = visual.camera;\r\n    this.element = this.visual.element;\r\n    this.elementSize = {w: 1, h: 1};\r\n    this.devicePixelRatio = this.visual.wnd.devicePixelRatio || 1;\r\n    this.orbit = visual.getOrbit();\r\n    this.scale = 1;\r\n\r\n    this.eps = 1e-4;\r\n    this.v = new THREE.Vector3();\r\n    this.dv = new THREE.Vector2();\r\n\r\n    this.enabled = false;\r\n\r\n    visual.addRenderCallback(this.update.bind(this));\r\n\r\n    this.os = {\r\n      vx: 0,\r\n      vy: 0,\r\n      x: 0,\r\n      y: 0\r\n    };\r\n    this.orbit.update();\r\n    this.camera.updateMatrixWorld();\r\n    let box = this.computeClientBoundBox(), k=1.11;\r\n    this.movePan({x: -k*box.mid.x, y: -k*box.mid.y});\r\n  }\r\n\r\n  movePan(dv) {\r\n    this.orbit.pan(dv.x*this.visual.width(), -dv.y*this.visual.height());\r\n  }\r\n\r\n  vToCamera(v) {\r\n    v.project(this.camera);\r\n    return {\r\n      x: 0.5*v.x,\r\n      y: 0.5*v.y\r\n    };\r\n  }\r\n\r\n  computeClientBoundBox() {\r\n    const box = this.boundBoxClb(),\r\n      xs = [box.min.x, box.max.x],\r\n      ys = [0, 0],\r\n      zs = [box.min.z, box.max.z];\r\n\r\n    const ps = [], res = {max: {}, min: {}};\r\n    for(let x of xs) {\r\n      for(let y of ys) {\r\n        for(let z of zs) {\r\n          ps.push(this.vToCamera(this.v.set(x,y,z)));\r\n        }\r\n      }\r\n    }\r\n\r\n    ps.sort((p1, p2)=> p1.x-p2.x);\r\n    res.min.x = ps[0].x;\r\n    res.max.x = ps[ps.length-1].x;\r\n    ps.sort((p1, p2)=> p1.y-p2.y);\r\n    res.min.y = ps[0].y;\r\n    res.max.y = ps[ps.length-1].y;\r\n\r\n    res.width = res.max.x-res.min.x;\r\n    res.height = res.max.y-res.min.y;\r\n\r\n    res.mid = {\r\n      x: 0.5*(res.max.x+res.min.x),\r\n      y: 0.5*(res.max.y+res.min.y)\r\n    };\r\n\r\n    return res;\r\n  }\r\n\r\n  setObject(boundBoxClb) {\r\n    this.boundBoxClb = boundBoxClb;\r\n  }\r\n\r\n  testScale() {\r\n    return true;\r\n  }\r\n\r\n  computeCorr(K, min, max) {\r\n    let corr = 0;\r\n    if(K<1) {\r\n      if(min>-0.5) {\r\n        corr = -0.5-min;\r\n      }\r\n      else if(max<0.5) {\r\n        corr = 0.5-max;\r\n      }\r\n    }\r\n    else {\r\n      if(min<-0.5) {\r\n        corr = -0.5-min;\r\n      }\r\n      else if(max>0.5) {\r\n        corr = 0.5-max;\r\n      }\r\n    }\r\n    return corr;\r\n  }\r\n\r\n  getScale() {\r\n    const box = this.computeClientBoundBox(),\r\n      Kx = this.elementSize.w/box.width,\r\n      Ky = this.elementSize.h/box.height;\r\n    return 1/Math.min(Kx, Ky);\r\n  }\r\n\r\n  centerView(T) {\r\n    let box = this.computeClientBoundBox(),\r\n      Kx = this.elementSize.w/box.width,\r\n      Ky = this.elementSize.h/box.height,\r\n      K = Math.min(Kx, Ky);\r\n\r\n    if(this.testScale() && Math.abs(1/K-this.scale)>this.eps) {\r\n      const scale = 1/K+0.2*(this.scale-1/K);\r\n      this.orbit.setScale(this.orbit.getScale()/(K*scale));\r\n      this.orbit.update();\r\n      this.camera.updateMatrixWorld();\r\n      box = this.computeClientBoundBox();\r\n        Kx = this.elementSize.w/box.width;\r\n        Ky = this.elementSize.h/box.height;\r\n        K = Math.min(Kx, Ky);\r\n    }\r\n\r\n    const dv = this.dv;\r\n    if(K>1-this.eps) {\r\n      dv.set(-box.mid.x, -box.mid.y);\r\n    }\r\n    else {\r\n      dv.set(this.computeCorr(Kx, box.min.x, box.max.x),\r\n             this.computeCorr(Ky, box.min.y, box.max.y));\r\n    }\r\n\r\n    if(Math.sqrt(this.os.vx*this.os.vx+this.os.vy*this.os.vy)>0.003 || dv.length()>0.003) {\r\n      let dt = 1/60, t=0, os = {\r\n        ...this.os,\r\n        x: 0,\r\n        y: 0\r\n      };\r\n      os.tf = (vx, vy, x, y)=> ({\r\n        x: 75*(dv.x-x)/Math.pow(this.devicePixelRatio, 1.0),\r\n        y: 75*(dv.y-y)/Math.pow(this.devicePixelRatio, 1.0)\r\n      });\r\n      while(t<T) {\r\n        if(t+dt>T) {\r\n          dt = T-t;\r\n        }\r\n        os = this.integrate(os, dt);\r\n        t += dt;\r\n      }\r\n      this.movePan(os);\r\n      this.os = os;\r\n    }\r\n  }\r\n\r\n  integrate(os, dt) {\r\n    const [vx, vy, x, y] = MathUtils.rk4(\r\n      this.dy.bind(os),\r\n      0,\r\n      dt,\r\n      [os.vx, os.vy, os.x, os.y]\r\n    );\r\n    return {\r\n      ...os,\r\n      vx, vy, x, y\r\n    };\r\n  }\r\n\r\n  dy(t,Y) {\r\n    const [vx, vy, x, y] = Y, vd = 15, tf = this.tf(vx, vy, x, y);\r\n    return [\r\n      tf.x-vd*vx,\r\n      tf.y-vd*vy,\r\n      vx,\r\n      vy\r\n    ];\r\n  }\r\n\r\n  update(dt) {\r\n    if(this.enabled && this.boundBoxClb) {\r\n      this.centerView(dt);\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Object3DWatcher.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Object3DWatcher.js","import {THREE} from '../libs';\r\n\r\nexport default class Orbit extends THREE.EventDispatcher {\r\n\r\n  constructor(object, domElement) {\r\n    super();\r\n  \tthis.object = object;\r\n  \tthis.domElement = domElement || document.body;\r\n\r\n  \t// Set to false to disable this control\r\n  \tthis.enabled = true;\r\n\r\n  \t// \"target\" sets the location of focus, where the object orbits around\r\n  \tthis.target = new THREE.Vector3();\r\n\r\n  \t// How far you can dolly in and out(PerspectiveCamera only)\r\n  \tthis.minDistance = 0;\r\n  \tthis.maxDistance = Infinity;\r\n\r\n  \t// How far you can zoom in and out(OrthographicCamera only)\r\n  \tthis.minZoom = 0;\r\n  \tthis.maxZoom = Infinity;\r\n\r\n  \t// How far you can orbit vertically, upper and lower limits.\r\n  \t// Range is 0 to Math.PI radians.\r\n  \tthis.minPolarAngle = 0; // radians\r\n  \tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n  \t// How far you can orbit horizontally, upper and lower limits.\r\n  \t// If set, must be a sub-interval of the interval [-Math.PI, Math.PI ].\r\n  \tthis.minAzimuthAngle = -Infinity; // radians\r\n  \tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n  \t// Set to true to enable damping (inertia)\r\n  \t// If damping is enabled, you must call controls.update() in your animation loop\r\n  \tthis.enableDamping = false;\r\n  \tthis.dampingFactor = 0.25;\r\n\r\n  \t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  \t// Set to false to disable zooming\r\n  \tthis.enableZoom = true;\r\n  \tthis.zoomSpeed = 1.0;\r\n\r\n  \t// Set to false to disable rotating\r\n  \tthis.enableRotate = true;\r\n  \tthis.rotateSpeed = 1.0;\r\n\r\n  \t// Set to false to disable panning\r\n  \tthis.enablePan = true;\r\n\r\n  \t// Set to true to automatically rotate around the target\r\n  \t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n  \tthis.autoRotate = false;\r\n  \tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n  \t// for reset\r\n  \tthis.target0 = this.target.clone();\r\n  \tthis.position0 = this.object.position.clone();\r\n  \tthis.zoom0 = this.object.zoom;\r\n\r\n  \t//\r\n  \t// public methods\r\n  \t//\r\n  \tthis.getPolarAngle = function () {\r\n  \t\treturn spherical.phi;\r\n  \t};\r\n\r\n  \tthis.getAzimuthalAngle = function () {\r\n  \t\treturn spherical.theta;\r\n  \t};\r\n\r\n  \tthis.reset = function () {\r\n  \t\tscope.target.copy(scope.target0);\r\n  \t\tscope.object.position.copy(scope.position0);\r\n  \t\tscope.object.zoom = scope.zoom0;\r\n\r\n  \t\tscope.object.updateProjectionMatrix();\r\n  \t\tscope.dispatchEvent(changeEvent);\r\n\r\n  \t\tscope.update();\r\n  \t};\r\n\r\n    this.zoomOut = function(speed=this.zoomSpeed) {\r\n      const _speed = this.zoomSpeed;\r\n      this.zoomSpeed = speed;\r\n      dollyIn(getZoomScale());\r\n      this.zoomSpeed = _speed;\r\n    };\r\n\r\n    this.zoomIn = function(speed=this.zoomSpeed) {\r\n      const _speed = this.zoomSpeed;\r\n      this.zoomSpeed = speed;\r\n      dollyOut(getZoomScale());\r\n      this.zoomSpeed = _speed;\r\n    };\r\n\r\n    this.getScale = function() {\r\n      return scale;\r\n    }\r\n\r\n    this.setScale = function(newScale) {\r\n      scale = newScale;\r\n    }\r\n\r\n  \t// this method is exposed, but perhaps it would be better if we can make it private...\r\n  \tthis.update = function() {\r\n  \t\tvar offset = new THREE.Vector3();\r\n  \t\t// so camera.up is the orbit axis\r\n  \t\tvar quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n  \t\tvar quatInverse = quat.clone().inverse();\r\n  \t\tvar lastPosition = new THREE.Vector3();\r\n  \t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n  \t\treturn function update () {\r\n  \t\t\tvar position = scope.object.position;\r\n  \t\t\toffset.copy(position).sub(scope.target);\r\n  \t\t\t// rotate offset to \"y-axis-is-up\" space\r\n  \t\t\toffset.applyQuaternion(quat);\r\n  \t\t\t// angle from z-axis around y-axis\r\n  \t\t\tspherical.setFromVector3(offset);\r\n  \t\t\tif(scope.autoRotate) {\r\n  \t\t\t\trotateLeft(getAutoRotationAngle());\r\n  \t\t\t}\r\n  \t\t\tspherical.theta += sphericalDelta.theta;\r\n  \t\t\tspherical.phi += sphericalDelta.phi;\r\n  \t\t\t// restrict theta to be between desired limits\r\n  \t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\r\n  \t\t\t// restrict phi to be between desired limits\r\n  \t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n  \t\t\tspherical.makeSafe();\r\n  \t\t\tspherical.radius *= scale;\r\n  \t\t\t// restrict radius to be between desired limits\r\n  \t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\r\n  \t\t\t// move target to panned location\r\n  \t\t\tscope.target.add(panOffset);\r\n  \t\t\toffset.setFromSpherical(spherical);\r\n  \t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n  \t\t\toffset.applyQuaternion(quatInverse);\r\n  \t\t\tposition.copy(scope.target).add(offset);\r\n  \t\t\tscope.object.lookAt(scope.target);\r\n\r\n  \t\t\tif(scope.enableDamping===true) {\r\n  \t\t\t\tsphericalDelta.theta *=(1-scope.dampingFactor);\r\n  \t\t\t\tsphericalDelta.phi *=(1-scope.dampingFactor);\r\n  \t\t\t} else {\r\n  \t\t\t\tsphericalDelta.set(0, 0, 0);\r\n  \t\t\t}\r\n\r\n  \t\t\tscale = 1;\r\n  \t\t\tpanOffset.set(0, 0, 0);\r\n\r\n  \t\t\t// update condition is:\r\n  \t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n  \t\t\t// using small-angle approximation cos(x/2) = 1-x^2 / 8\r\n\r\n  \t\t\tif(zoomChanged ||\r\n  \t\t\t\tlastPosition.distanceToSquared(scope.object.position) > EPS ||\r\n  \t\t\t\t8 *(1-lastQuaternion.dot(scope.object.quaternion)) > EPS) {\r\n\r\n  \t\t\t\tscope.dispatchEvent(changeEvent);\r\n\r\n  \t\t\t\tlastPosition.copy(scope.object.position);\r\n  \t\t\t\tlastQuaternion.copy(scope.object.quaternion);\r\n  \t\t\t\tzoomChanged = false;\r\n\r\n  \t\t\t\treturn true;\r\n  \t\t\t}\r\n  \t\t\treturn false;\r\n  \t\t};\r\n  \t}();\r\n\r\n    this.dispose = function() {\r\n\r\n    };\r\n\r\n  \t//\r\n  \t// internals\r\n  \t//\r\n  \tvar scope = this;\r\n  \tvar changeEvent = { type: 'change' };\r\n  \tvar EPS = 1e-6;\r\n  \t// current position in spherical coordinates\r\n  \tvar spherical = new THREE.Spherical();\r\n  \tvar sphericalDelta = new THREE.Spherical();\r\n\r\n  \tvar scale = 1;\r\n  \tvar panOffset = new THREE.Vector3();\r\n  \tvar zoomChanged = false;\r\n\r\n  \tfunction getAutoRotationAngle() {\r\n  \t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n  \t}\r\n\r\n  \tfunction getZoomScale() {\r\n  \t\treturn Math.pow(0.95, scope.zoomSpeed);\r\n  \t}\r\n\r\n  \tfunction rotateLeft(angle) {\r\n  \t\tsphericalDelta.theta -= angle;\r\n  \t}\r\n\r\n  \tfunction rotateUp(angle) {\r\n  \t\tsphericalDelta.phi -= angle;\r\n  \t}\r\n\r\n  \tvar panLeft = function() {\r\n  \t\tvar v = new THREE.Vector3();\r\n  \t\treturn function panLeft(distance, objectMatrix) {\r\n  \t\t\tv.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n  \t\t\tv.multiplyScalar(- distance);\r\n  \t\t\tpanOffset.add(v);\r\n  \t\t};\r\n  \t}();\r\n\r\n  \tvar panUp = function() {\r\n  \t\tvar v = new THREE.Vector3();\r\n  \t\treturn function panUp(distance, objectMatrix) {\r\n  \t\t\tv.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\r\n  \t\t\tv.multiplyScalar(distance);\r\n  \t\t\tpanOffset.add(v);\r\n  \t\t};\r\n  \t}();\r\n\r\n  \t// deltaX and deltaY are in pixels; right and down are positive\r\n  \tscope.pan = function() {\r\n  \t\tvar offset = new THREE.Vector3();\r\n  \t\treturn function pan(deltaX, deltaY) {\r\n  \t\t\tvar element = scope.domElement;\r\n  \t\t\tif(scope.object instanceof THREE.PerspectiveCamera) {\r\n  \t\t\t\t// perspective\r\n  \t\t\t\tvar position = scope.object.position;\r\n  \t\t\t\toffset.copy(position).sub(scope.target);\r\n  \t\t\t\tvar targetDistance = offset.length();\r\n  \t\t\t\t// half of the fov is center to top of screen\r\n  \t\t\t\ttargetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\r\n  \t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n  \t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n  \t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n  \t\t\t} else if(scope.object instanceof THREE.OrthographicCamera) {\r\n  \t\t\t\t// orthographic\r\n  \t\t\t\tpanLeft(deltaX *(scope.object.right-scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n  \t\t\t\tpanUp(deltaY *(scope.object.top-scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n  \t\t\t} else {\r\n  \t\t\t\t// camera neither orthographic nor perspective\r\n  \t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type-pan disabled.');\r\n  \t\t\t\tscope.enablePan = false;\r\n  \t\t\t}\r\n  \t\t};\r\n  \t}();\r\n\r\n  \tfunction dollyIn(dollyScale) {\r\n      if(scope.object instanceof THREE.PerspectiveCamera) {\r\n  \t\t\tscale /= dollyScale;\r\n  \t\t} else if(scope.object instanceof THREE.OrthographicCamera) {\r\n  \t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n  \t\t\tscope.object.updateProjectionMatrix();\r\n  \t\t\tzoomChanged = true;\r\n  \t\t} else {\r\n  \t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');\r\n  \t\t\tscope.enableZoom = false;\r\n  \t\t}\r\n  \t}\r\n\r\n  \tfunction dollyOut(dollyScale) {\r\n      if(scope.object instanceof THREE.PerspectiveCamera) {\r\n  \t\t\tscale *= dollyScale;\r\n  \t\t} else if(scope.object instanceof THREE.OrthographicCamera) {\r\n  \t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n  \t\t\tscope.object.updateProjectionMatrix();\r\n  \t\t\tzoomChanged = true;\r\n  \t\t} else {\r\n  \t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');\r\n  \t\t\tscope.enableZoom = false;\r\n  \t\t}\r\n  \t}\r\n\r\n    /* Actions */\r\n\r\n    function rotate(event, data) {\r\n      if(scope.enabled && scope.enableRotate && data.state==='move') {\r\n        var element = scope.domElement;\r\n        // rotating across whole screen goes 360 degrees around\r\n        rotateLeft(2 * Math.PI * data.dx / element.clientWidth * scope.rotateSpeed);\r\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n        rotateUp(2 * Math.PI * data.dy / element.clientHeight * scope.rotateSpeed);\r\n        scope.update();\r\n      }\r\n    }\r\n\r\n    function pan(event, data) {\r\n      if(scope.enabled && scope.enablePan && data.state==='move') {\r\n        scope.pan(data.dx, data.dy);\r\n        scope.update();\r\n      }\r\n    }\r\n\r\n    function offsetDolly(event, data) {\r\n      if(scope.enabled && scope.enableZoom && data.state==='move') {\r\n        if(data.dy>0) {\r\n          dollyIn(getZoomScale());\r\n        } else if(data.dy<0) {\r\n          dollyOut(getZoomScale());\r\n        }\r\n        scope.update();\r\n      }\r\n    }\r\n\r\n    function wheelDolly(event) {\r\n      if(scope.enabled && scope.enableZoom) {\r\n        if(event.deltaY>0) {\r\n          dollyOut(getZoomScale());\r\n        } else if(event.deltaY<0) {\r\n          dollyIn(getZoomScale());\r\n        }\r\n        scope.update();\r\n      }\r\n    }\r\n\r\n    this.actions = {\r\n      rotate,\r\n      pan,\r\n      offsetDolly,\r\n      wheelDolly\r\n    }\r\n\r\n  \t// force an update at start\r\n  \tthis.update();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Orbit.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Orbit.js","import {$} from '../libs';\r\nimport ImageBase from './ImageBase';\r\nimport Pdf from './Pdf';\r\nimport BaseMathUtils from './BaseMathUtils';\r\nimport CustomEventConverter from './CustomEventConverter';\r\nimport PolyTarget from './targets/PolyTarget';\r\n\r\nimport Finder from './Finder';\r\n\r\nexport default class PdfImage extends ImageBase {\r\n\r\n  constructor(context, width, height, color, pdf, n) {\r\n    super(context, width, height, color);\r\n\r\n    this.query = '';\r\n    this.n = n;\r\n    this.pdf = pdf;\r\n    this.v = {x: 0, y: 0, z: 0, set: function(x,y,z) {\r\n      this.x=x; this.y=y; this.z=z;\r\n      return this;\r\n    }, transform: function(m) {\r\n      const x=m.m[0][0]*this.x+m.m[1][0]*this.y+m.m[2][0]*this.z,\r\n            y=m.m[0][1]*this.x+m.m[1][1]*this.y+m.m[2][1]*this.z,\r\n            z=m.m[0][2]*this.x+m.m[0][2]*this.y+m.m[2][0]*this.z;\r\n      this.x=x;\r\n      this.y=y;\r\n      this.z=z;\r\n      return this;\r\n    }};\r\n    this.m = {m: [[1,0,0],[0,1,0],[0,0,1]], set: function(m00,m01,m02,m10,m11,m12,m20,m21,m22) {\r\n      this.m=[[m00,m01,m02],[m10,m11,m12],[m20,m21,m22]];\r\n      return this;\r\n    }};\r\n\r\n    this.startRender = ()=> {\r\n      this.pdf.getHandler(this.render.bind(this));\r\n    };\r\n    Promise.resolve().\r\n      then(()=> this.pdf.getHandler(this.init.bind(this)));\r\n  }\r\n\r\n  setQuery(query) {\r\n    this.query = query.trim();\r\n    if(this.textContent) {\r\n      this.setHits(this.textContent);\r\n      // this.finishLoad();\r\n    }\r\n  }\r\n\r\n  rectSize(r) {\r\n    return {\r\n      width: r[2]-r[0],\r\n      height: r[3]-r[1]\r\n    };\r\n  }\r\n\r\n  createPoly(m, p, s) {\r\n    const poly = [], v = this.v;\r\n    v.set(p.x, p.y, 1).transform(m);\r\n    poly.push({x: v.x, y: v.y});\r\n    v.set(p.x, p.y+s.height, 1).transform(m);\r\n    poly.push({x: v.x, y: v.y});\r\n    v.set(p.x+s.width, p.y+s.height, 1).transform(m);\r\n    poly.push({x: v.x, y: v.y});\r\n    v.set(p.x+s.width, p.y, 1).transform(m);\r\n    poly.push({x: v.x, y: v.y});\r\n    return poly;\r\n  }\r\n\r\n  getSimulatedDoc() {\r\n    return this.page;\r\n  }\r\n\r\n  simulate(e, doc, x, y) {\r\n    if(this.eventConverter) {\r\n      this.eventConverter.convert(e, {doc, x, y});\r\n    }\r\n  }\r\n\r\n  setAnnotations(annos) {\r\n    const t = this.viewport.transform,\r\n      targets = [];\r\n    this.m.set(\r\n      t[0],t[1],0,\r\n      t[2],t[3],0,\r\n      t[4],t[5],1);\r\n\r\n    for(let anno of annos) {\r\n      if (anno.subtype==='Link') {\r\n        const rect = anno.rect,\r\n          aPos = {\r\n            x: rect[0],\r\n            y: rect[1]\r\n          },\r\n          aSz = this.rectSize(rect);\r\n        const target = new PolyTarget(this.createPoly(this.m, aPos, aSz).map((p)=> ({x: p.x/this.viewport.width, y: 1-p.y/this.viewport.height})));\r\n        target.anno = anno;\r\n        target.callback = this.annoClb.bind(this);\r\n        targets.push(target);\r\n      }\r\n    }\r\n    if(targets.length) {\r\n      this.eventConverter = new CustomEventConverter(this.wnd, this.doc, PolyTarget.test, this.page);\r\n      for(let target of targets) {\r\n        this.eventConverter.addCustom(target);\r\n      }\r\n    }\r\n  }\r\n\r\n  setHits(textContent) {\r\n    this.textContent = textContent;\r\n    if(this.query!=='') {\r\n      this.finder = new Finder(textContent.items.map((item)=> item.str), this.query, {contexts: false});\r\n    }\r\n  }\r\n\r\n  renderHits() {\r\n    if(this.finder) {\r\n      const view = this.page.view,\r\n        testSz = $('<div style=\"position: absolute; visibility: hidden;\"></div>').appendTo('body'), textDiv = testSz[0],\r\n        baseOffset = testSz.offset().left;\r\n      for(let hit of this.finder.getHits()) {\r\n          const item = this.textContent.items[hit.index],\r\n                t = PDFJS.Util.transform(this.viewport.transform, item.transform),\r\n                style = this.textContent.styles[item.fontName],\r\n                angle = Math.atan2(t[1], t[0])+(style.vertical? Math.PI / 2: 0),\r\n                fontHeight = Math.sqrt((t[2] * t[2]) + (t[3] * t[3])),\r\n                fontAscent = style.ascent?\r\n                              style.ascent * fontHeight:\r\n                              (style.descent? (1 + style.descent) * fontHeight: fontHeight);\r\n          testSz.html(item.str.substr(0, hit.offset)+'<span>'+item.str.substr(hit.offset, hit.length)+'</span>'+item.str.substr(hit.offset+hit.length));\r\n\r\n          textDiv.style.fontSize = fontHeight+'px';\r\n          textDiv.style.fontFamily = style.fontFamily;\r\n\r\n          const testSpan = testSz.find('span'),\r\n              iwidth = style.vertical? item.height*this.viewport.scale: item.width*this.viewport.scale,\r\n              width = testSz.width(),\r\n              relativeOffset = (testSpan.offset().left-baseOffset)/width;\r\n          this.m.set(\r\n            1,0,0,\r\n            0,1,0,\r\n            t[4]+fontAscent*Math.sin(angle),t[5]-fontAscent*Math.cos(angle),1);\r\n          let poly = this.createPoly(this.m, {x: relativeOffset*iwidth, y: 0}, {width: iwidth*testSpan.width()/width, height: testSpan.height()});\r\n          poly = poly.map((p)=> ({x: p.x/this.viewport.width, y: 1-p.y/this.viewport.height}));\r\n          this.renderHit(poly);\r\n      }\r\n      testSz.remove();\r\n    }\r\n  }\r\n\r\n  annoClb(e, data) {\r\n    if(this.context.dispatchEvent) {\r\n      this.context.dispatchEvent({\r\n        type: 'pdfAnnotation',\r\n        event: e,\r\n        annotation: data.target.anno\r\n      });\r\n    }\r\n  }\r\n\r\n  calcViewport() {\r\n    const scale = BaseMathUtils.calcScale(this.size.width, this.size.height, this.resW, this.resH);\r\n    if(!this.viewport || Math.abs(this.viewport.scale-scale)>1e-4) {\r\n      this.viewport = this.page.getViewport(scale);\r\n      if(this.type!=='full') {\r\n        if(this.type==='right') {\r\n          this.viewport.offsetX += 0.5*this.viewport.width;\r\n          this.viewport.transform[4] -= 0.5*this.viewport.width;\r\n        }\r\n        this.viewport.width /= 2;\r\n      }\r\n      this.resW = this.width = this.viewport.width;\r\n      this.resH = this.height = this.viewport.height;\r\n    }\r\n  }\r\n\r\n  init() {\r\n    this.type = this.pdf.getPageType(this.n);\r\n    this.pdf.getPage(this.n).\r\n      then((page)=> {\r\n        this.page = page;\r\n        this.size = Pdf.getPageSize(page);\r\n        if(this.type!=='full') {\r\n          this.size.width /= 2;\r\n        }\r\n        page.getAnnotations().\r\n          then(this.setAnnotations.bind(this));\r\n        page.getTextContent().\r\n          then(this.setHits.bind(this));\r\n        this.calcViewport();\r\n        this.finishLoad();\r\n      }).\r\n      catch((e)=> {\r\n        console.error('Cannot load PDF page: '+(this.n+1));\r\n        this.finishLoad();\r\n      });\r\n  }\r\n\r\n  setResolution(res) {\r\n    super.setResolution(res);\r\n    if(this.page) {\r\n      this.calcViewport();\r\n    }\r\n  }\r\n\r\n  render(handler) {\r\n    if(this.page) {\r\n      this.page.render({\r\n        canvasContext: this.pushCtx(),\r\n        viewport: this.viewport\r\n      }).\r\n      then(()=> {\r\n        this.renderHits();\r\n        this.popCtx();\r\n        this.finishRender();\r\n      });\r\n    }\r\n    else {\r\n      this.renderBlankPage();\r\n      this.finishRender();\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/PdfImage.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/PdfImage.js","import {$} from '../libs';\r\n\r\nexport default class Search {\r\n\r\n  constructor(container, pages) {\r\n    this.container = container;\r\n    this.pages = pages;\r\n    this.prevResults = [];\r\n    container.html(`\r\n      <div class=\"search\">\r\n        <div class=\"query\">\r\n          <input class=\"inpQuery\" type=\"text\" maxlength=\"30\" value=\"\" />\r\n        </div>\r\n        <div class=\"results\">\r\n        </div>\r\n        <div class=\"status\">\r\n\r\n        </div>\r\n      </div>\r\n    `);\r\n    this.query = container.find('.query input');\r\n    this.results = container.find('.results');\r\n    this.status = container.find('.status');\r\n\r\n    this.binds = {\r\n      navigate: this.navigate.bind(this),\r\n      doQuery: this.doQuery.bind(this)\r\n    };\r\n\r\n    this.query.on('keydown', this.binds.doQuery);\r\n    this.results.on('click', this.binds.navigate);\r\n  }\r\n\r\n  dispose() {\r\n    this.results.off('click', this.binds.navigate);\r\n    this.query.off('keydown', this.binds.doQuery);\r\n  }\r\n\r\n  navigate(e) {\r\n    e.preventDefault();\r\n    if(this.onNavigate!==undefined) {\r\n      let target = $(e.target);\r\n      if(!target.hasClass('result')) {\r\n        const t = target.find('.result');\r\n        if(t.length) {\r\n          target = t;\r\n        }\r\n        else {\r\n          while(target.length && !target.hasClass('result')) {\r\n            target = $(target[0].parentNode);\r\n          }\r\n        }\r\n      }\r\n      const page = target.attr('data');\r\n      if(page!==undefined) {\r\n        this.onNavigate(parseInt(page));\r\n      }\r\n    }\r\n  }\r\n\r\n  doQuery() {\r\n    if(this.onQuery) {\r\n      const queryStamp = this.queryStamp = Date.now();\r\n      setTimeout(()=> {\r\n        if(queryStamp === this.queryStamp) {\r\n          this.onQuery(this.query[0].value.trim());\r\n        }\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  setResults(results, lastPage) {\r\n    if(this.prevResults.length && results[0]!==this.prevResults[0]) {\r\n      this.prevResults = [];\r\n      this.results.html('');\r\n    }\r\n    const htmls = [];\r\n    for(let i=this.prevResults.length; i<results.length; ++i) {\r\n      const result = results[i];\r\n      htmls.push('<div class=\"result\" data=\"'+result.page+'\">');\r\n        htmls.push('<a href=\"#\">');\r\n          htmls.push('<div>'+result.contexts.join('</div><div>')+'</div>');\r\n        htmls.push('</a>');\r\n      htmls.push('</div>');\r\n    }\r\n    $(htmls.join('')).appendTo(this.results);\r\n    this.prevResults = [...results];\r\n    if(lastPage===undefined) {\r\n      this.status.html('');\r\n    }\r\n    else {\r\n      this.status.html(lastPage+' of '+this.pages);\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Search.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Search.js","import {$} from '../libs';\r\nimport ImageBase from './ImageBase';\r\nimport Utils from './Utils';\r\n\r\nexport default class StaticImage extends ImageBase {\r\n\r\n  constructor(context, width, height, color, src) {\r\n    super(context, width, height, color);\r\n\r\n    this.binds = {}\r\n    this.image = new Image();\r\n    this.image.crossOrigin = 'Anonymous';\r\n    this.binds.imageLoad = ()=> {\r\n      this.width = this.image.width;\r\n      this.height = this.image.height;\r\n      this.startRender = ()=> {\r\n        this.renderImage(this.image);\r\n        this.finishRender();\r\n      };\r\n      this.finishLoad();\r\n    };\r\n    this.binds.imageError = ()=> {\r\n      this.startRender = ()=> {\r\n        this.renderNotFoundPage();\r\n        this.finishRender();\r\n      };\r\n      this.finishLoad();\r\n    };\r\n    $(this.image).on('load', this.binds.imageLoad).on('error', this.binds.imageError);\r\n    this.image.src = Utils.normalizeUrl(src);\r\n  }\r\n\r\n  dispose() {\r\n    $(this.image).off('load', this.binds.imageLoad).off('error', this.binds.imageError);\r\n    this.image.src = '';\r\n    delete this.image;\r\n    super.dispose();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/StaticImage.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/StaticImage.js","import {THREE} from '../libs'\r\n\r\nexport default class TextureAnimator {\r\n  constructor(img, tilesHoriz, tilesVert, numTiles, tileDispDuration) {\r\n\r\n    const texture = new THREE.Texture();\r\n    texture.minFilter = THREE.LinearFilter;\r\n    texture.image = img;\r\n    texture.needsUpdate = true;\r\n\r\n  \t// note: texture passed by reference, will be updated by the update function.\r\n    this.texture = texture;\r\n  \tthis.tilesHorizontal = tilesHoriz;\r\n  \tthis.tilesVertical = tilesVert;\r\n  \t// how many images does this spritesheet contain?\r\n  \t//  usually equals tilesHoriz * tilesVert, but not necessarily,\r\n  \t//  if there at blank tiles at the bottom of the spritesheet.\r\n  \tthis.numberOfTiles = numTiles;\r\n  \ttexture.repeat.set(1/this.tilesHorizontal, 1/this.tilesVertical);\r\n\r\n  \t// how long should each image be displayed?\r\n  \tthis.tileDisplayDuration = tileDispDuration;\r\n\r\n  \t// how long has the current image been displayed?\r\n  \tthis.currentDisplayTime = 0;\r\n\r\n  \t// which image is currently being displayed?\r\n  \tthis.currentTile = 0;\r\n  }\r\n\r\n  update(milliSec) {\r\n    this.currentDisplayTime += milliSec;\r\n    while(this.currentDisplayTime > this.tileDisplayDuration) {\r\n      this.currentDisplayTime -= this.tileDisplayDuration;\r\n      ++this.currentTile;\r\n      if(this.currentTile == this.numberOfTiles)\r\n        this.currentTile = 0;\r\n      var currentColumn = this.currentTile%this.tilesHorizontal;\r\n      this.texture.offset.x = currentColumn/this.tilesHorizontal;\r\n      var currentRow = Math.floor(this.currentTile/this.tilesHorizontal);\r\n      this.texture.offset.y = currentRow/this.tilesVertical;\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    const img = this.texture.image;\r\n    img.height = img.width = 0;\r\n    this.texture.dispose();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/TextureAnimator.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/TextureAnimator.js","import {THREE, $} from '../libs';\r\nimport Utils from './Utils';\r\nimport MouseEventConverter from './MouseEventConverter';\r\nimport ThreeEventConverter from './ThreeEventConverter';\r\n\r\n\r\nexport default class ThreeMouseEventConverter extends MouseEventConverter {\r\n\r\n  constructor(wnd, doc, visualWorld, test) {\r\n    super(wnd, doc, visualWorld.element);\r\n    Utils.extends(this, new ThreeEventConverter(visualWorld, test));\r\n  }\r\n\r\n  getCallback(object) {\r\n    return object.object.userData.mouseCallback;\r\n  }\r\n\r\n  setCoordsFromEvent(e) {\r\n    const jElement = $(this.element);\r\n    const offset = jElement.offset();\r\n    this.coords.x = ((e.pageX-offset.left)/jElement.width())*2-1;\r\n    this.coords.y = -((e.pageY-offset.top)/jElement.height())*2+1;\r\n    return this.coords;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ThreeMouseEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ThreeMouseEventConverter.js","import {THREE, $} from '../libs';\r\nimport Utils from './Utils';\r\nimport TouchEventConverter from './TouchEventConverter';\r\nimport ThreeEventConverter from './ThreeEventConverter';\r\n\r\n\r\nexport default class ThreeTouchEventConverter extends TouchEventConverter {\r\n\r\n  constructor(wnd, doc, visualWorld, test) {\r\n    super(wnd, doc, visualWorld.element);\r\n    Utils.extends(this, new ThreeEventConverter(visualWorld, test));\r\n  }\r\n\r\n  getCallback(object) {\r\n    return object.object.userData.touchCallback;\r\n  }\r\n\r\n  setCoordsFromEvent(e) {\r\n    const jElement = $(this.element), offset = jElement.offset(),\r\n      touches = e.touches || e.originalEvent.touches, touch = touches.length? touches[0]: (this.lastTouches || [{pageX: 0, pageY: 0}])[0],\r\n      pageX = touch.pageX, pageY = touch.pageY;\r\n    this.lastTouches = touches.length? touches: this.lastTouches;\r\n    this.coords.x = ((pageX-offset.left)/jElement.width())*2-1;\r\n    this.coords.y = -((pageY-offset.top)/jElement.height())*2+1;\r\n    return this.coords;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/ThreeTouchEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/ThreeTouchEventConverter.js","import {$} from '../libs';\r\nimport ImageFactory from './ImageFactory';\r\n\r\nexport default class Thumbnails {\r\n\r\n  constructor(context, container, thumbnailsClb, size, props={kWtoH: 210/297}) {\r\n    this.container = container;\r\n    this.p = props;\r\n    this.thumbnailsClb = thumbnailsClb;\r\n    this.size = size;\r\n    this.canvas = $('<canvas>')[0];\r\n    this.imageFactory = new ImageFactory({\r\n      ...context,\r\n      renderCanvas: this.canvas,\r\n      renderCanvasCtx: this.canvas.getContext('2d')\r\n    });\r\n    this.thumbnails = [];\r\n    for(let i=0; i<size; ++i) {\r\n      const info = this.thumbnailsClb(i);\r\n      this.thumbnails.push({\r\n        ...info,\r\n        index: i,\r\n        loaded: info.type==='thumbnail-image',\r\n        heading: null,\r\n        thumbnail: null,\r\n        title: info.title || i\r\n      });\r\n    }\r\n\r\n    this.binds = {\r\n      update: this.update.bind(this),\r\n      navigate: (e)=> {\r\n        e.preventDefault();\r\n        if(this.onNavigate) {\r\n          let node = e.target;\r\n          while(node && !node.dataThumbnail) {\r\n            node = node.parentNode;\r\n          }\r\n          this.onNavigate(node.dataThumbnail.index);\r\n        }\r\n      }\r\n    };\r\n    this.container.on('scroll', this.binds.update);\r\n  }\r\n\r\n  getSize() {\r\n    return this.size;\r\n  }\r\n\r\n  setEnable(enable) {\r\n    this.enable = enable;\r\n    this.update();\r\n  }\r\n\r\n  dispose() {\r\n    this.container.find('a').off('click', this.binds.navigate);\r\n    this.container.off('scroll', this.binds.update);\r\n    this.container.html('');\r\n    this.canvas.height = this.canvas.width = 0;\r\n    delete this.canvas;\r\n  }\r\n\r\n  load(thumbnail) {\r\n    this.loading = true;\r\n    const wrapper = this.imageFactory.build(thumbnail, thumbnail.number===undefined? thumbnail.index: thumbnail.number, this.p.kWtoH*300, 300);\r\n    wrapper.onChange = (canvas)=> {\r\n      this.setImage(thumbnail, canvas.toDataURL('image/png'));\r\n      thumbnail.loaded = true;\r\n      wrapper.dispose();\r\n      this.loading = false;\r\n      Promise.resolve().then(()=> this.update());\r\n    };\r\n  }\r\n\r\n  getActive() {\r\n    const first = this.container.scrollTop(), last = first + this.container.height(), res = [];\r\n    for(let thumbnail of this.thumbnails) {\r\n      if(Math.max(thumbnail.first, first)<Math.min(thumbnail.last, last)) {\r\n        res.push(thumbnail);\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  update() {\r\n    if(!this.loading && this.canvas && this.enable) {\r\n      if(!this.built) {\r\n        this.render();\r\n      }\r\n      const active = this.getActive();\r\n      for(let thumbnail of active) {\r\n        if(!thumbnail.loaded) {\r\n          this.load(thumbnail);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setImage(thumbnail, img) {\r\n    thumbnail.img = img;\r\n    thumbnail.thumbnail.css('background-image', ['url(\\'', img,'\\')'].join(''));\r\n    thumbnail.thumbnail.removeClass('loading');\r\n  }\r\n\r\n  render() {\r\n    const elements = ['<div class=\"thumbnails\">']\r\n    for(let i=0; i<this.size; ++i) {\r\n      elements.push(['<div class=\"item\"><a href=\"#\"><div class=\"thumbnail loading\"></div></a><div class=\"heading\"><a href=\"#\" title=\"', i+1,'\">', i+1, '</a></div></div>'].join(''));\r\n    }\r\n    elements.push('</div>');\r\n    this.container.append(elements.join(''));\r\n    const items = this.container.find('.item'), base = this.container.find('.thumbnails').offset().top;\r\n    for(let i=0; i<items.length; ++i) {\r\n      const item = $(items[i]);\r\n      this.thumbnails[i].heading = item.find('.heading');\r\n      this.thumbnails[i].thumbnail = item.find('.thumbnail');\r\n      this.thumbnails[i].first = item.offset().top-base;\r\n      this.thumbnails[i].last = this.thumbnails[i].first+item.height();\r\n      if(this.thumbnails[i].loaded) {\r\n        this.setImage(this.thumbnails[i], this.thumbnails[i].src);\r\n      }\r\n      const as = item.find('a');\r\n      for(let j=0; j<as.length; ++j) {\r\n        const a = as[j];\r\n        a.dataThumbnail = this.thumbnails[i];\r\n      }\r\n    }\r\n    this.container.find('a').on('click', this.binds.navigate);\r\n    this.built = true;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/Thumbnails.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/Thumbnails.js","import {$} from '../libs';\r\nimport EventConverter from './EventConverter';\r\n\r\nexport default class TouchConverter extends EventConverter {\r\n\r\n  constructor(wnd, doc, element) {\r\n    super(wnd, doc);\r\n\r\n    this.element = element;\r\n    this.binds = {\r\n      convert: this.convert.bind(this)\r\n    };\r\n    $(this.element).on('touchstart touchmove', this.binds.convert);\r\n    $(this.doc).on('touchend', this.binds.convert);\r\n  }\r\n\r\n  dispose() {\r\n    $(this.element).off('touchstart touchmove', this.binds.convert);\r\n    $(this.doc).off('touchend', this.binds.convert);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/TouchEventConverter.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/TouchEventConverter.js","import {$, tr} from '../libs';\r\n\r\nexport default class View {\r\n\r\n  static linkStateHandlers = {\r\n    visible: (ctrl, value)=> View.classProperty(ctrl, 'hidden', !value),\r\n    active: (ctrl, value)=> View.classProperty(ctrl, 'active', value),\r\n    enable: (ctrl, value)=> View.classProperty(ctrl, 'disabled', !value)\r\n  };\r\n\r\n  static widgetStateHandlers = {\r\n    visible: (ctrl, value)=> View.classProperty(ctrl, 'hidden', !value),\r\n    active: (ctrl, value)=> View.classProperty(ctrl, 'active', value),\r\n    enable: (ctrl, value)=> View.classProperty(ctrl, 'disabled', !value)\r\n  };\r\n\r\n  static inputStateHandlers = {\r\n    visible: (ctrl, value)=> View.classProperty(ctrl, 'hidden', !value),\r\n    value: (ctrl, value)=> ctrl[0].value = value,\r\n    enable: (ctrl, value)=> View.attributeProperty(ctrl, 'disabled', !value)\r\n  };\r\n\r\n  static textStateHandlers = {\r\n    visible: (ctrl, value)=> View.classProperty(ctrl, 'hidden', !value),\r\n    value: (ctrl, value)=> ctrl.text(value)\r\n  };\r\n\r\n  static classProperty(ctrl, className, value) {\r\n    if(value) {\r\n      ctrl.addClass(className);\r\n    }\r\n    else {\r\n      ctrl.removeClass(className);\r\n    }\r\n  }\r\n\r\n  static attributeProperty(ctrl, attributeName, value) {\r\n    if(value) {\r\n      ctrl.attr(attributeName, value);\r\n    }\r\n    else {\r\n      ctrl.removeAttr(attributeName);\r\n    }\r\n  }\r\n\r\n  static callHandlers(handlers, id, e, data) {\r\n    for(let handler of handlers) {\r\n      if(handler[id]) {\r\n        handler[id](e, data);\r\n      }\r\n      else if(handler.handleDefault) {\r\n        handler.handleDefault(id, e, data);\r\n      }\r\n    }\r\n  }\r\n\r\n  static handleEvent(id, getHandlers, e, data) {\r\n    View.callHandlers(getHandlers(id), id, e, data);\r\n  }\r\n\r\n  static handleLinkEvent(e) {\r\n    e.preventDefault();\r\n    if(!this.ctrl.hasClass('disabled')) {\r\n      View.handleEvent(this.id, this.getHandlers, e);\r\n    }\r\n  }\r\n\r\n  static handleInputEvent(e) {\r\n    View.handleEvent(this.id, this.getHandlers, e, e.target.value);\r\n  }\r\n\r\n  static handleFormEvent(e) {\r\n    e.preventDefault();\r\n    View.handleEvent(this.id, this.getHandlers, e);\r\n  }\r\n\r\n  // virtual functions {\r\n  getLinks() {\r\n    return null;\r\n  }\r\n\r\n  getWidgets() {\r\n    return null;\r\n  }\r\n\r\n  getInputs() {\r\n    return null;\r\n  }\r\n\r\n  getTexts() {\r\n    return null;\r\n  }\r\n\r\n  getTemplate() {\r\n    return {};\r\n  }\r\n\r\n  getHandlers(id) {\r\n    return this.handlers;\r\n  }\r\n  // }\r\n\r\n  callLater(handlers, id, e, data, ms) {\r\n    this.pendings[id] = {\r\n      timestamp: new Date().getTime()\r\n    };\r\n    setTimeout(()=> {\r\n      const timestamp = new Date().getTime(), pending = this.pendings[id];\r\n      if(pending && timestamp-pending.timestamp>=ms) {\r\n        View.callHandlers(handlers, id, e, data);\r\n        delete this.pendings[id];\r\n      }\r\n    }, ms);\r\n  }\r\n\r\n  // loadFiles(urls, ready, failure) {\r\n  //   let done = Promise.resolve();\r\n  //   for(let url of urls) {\r\n  //     done = done.then(()=> {\r\n  //       return new Promise((resolve, reject)=> {\r\n  //         $.get(url, (res)=> {\r\n  //           ready(res, url);\r\n  //           resolve();\r\n  //         }).fail((res)=> {\r\n  //           if(failure && failure(res, url)) {\r\n  //             resolve();\r\n  //           }\r\n  //           else {\r\n  //             reject(res);\r\n  //           }\r\n  //         });\r\n  //       });\r\n  //     });\r\n  //   }\r\n  //   return done;\r\n  // }\r\n\r\n  loadFiles(urls, files) {\r\n    const tasks = [];\r\n    for(let name of Object.keys(urls)) {\r\n      files[name] = [];\r\n      for(let url of urls[name]) {\r\n        tasks.push(\r\n          new Promise((resolve, reject)=> {\r\n            $.get(url, (data)=> {\r\n              files[name].push({url, data});\r\n              resolve();\r\n            }).fail((res)=> {\r\n              reject(res);\r\n            });\r\n          })\r\n        );\r\n      }\r\n    }\r\n    return Promise.all(tasks);\r\n  }\r\n\r\n  urlResolver(baseUrl, url) {\r\n    url = url.replace(/\\\\/g, '/');\r\n    if(url.charAt(0)!=='/') {\r\n      baseUrl = baseUrl.replace(/\\\\/g, '/');\r\n      const p = baseUrl.lastIndexOf('/');\r\n      url = (~p? baseUrl.substr(0, p+1): '')+url;\r\n\r\n      const parts = url.split('/');\r\n      url = [];\r\n      for(let part of parts) {\r\n        if(part==='.') {\r\n        }\r\n        else if(part==='..') {\r\n          if(url.length && !(url.length===1 && url[0]==='')) {\r\n            url.pop();\r\n          }\r\n        }\r\n        else {\r\n          url.push(part);\r\n        }\r\n      }\r\n      url = url.join('/');\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  objToAttrsStr(o) {\r\n    const res = [];\r\n    for(let name of Object.keys(o)) {\r\n      res.push([name, '=\"', o[name], '\"'].join(''));\r\n    }\r\n    return res.join(' ');\r\n  }\r\n\r\n  checkIframeSize() {\r\n    if(this.frame) {\r\n      if(Math.abs(this.frame.width-this.parentContainer.width())>1 || Math.abs(this.frame.height-this.parentContainer.height())>1) {\r\n        this.onResize();\r\n      }\r\n      setTimeout(this.checkIframeSize.bind(this), 250);\r\n    }\r\n  }\r\n\r\n  onResize() {\r\n    this.frame.width = this.parentContainer.width();\r\n    this.frame.height = this.parentContainer.height();\r\n  }\r\n\r\n  translate(html) {\r\n    return html.replace(/<\\$tr>(.*)<\\/\\$tr>/gi, (s0,s1)=> tr(s1));\r\n  }\r\n\r\n  fireLinksOnLoadEvent() {\r\n    if(this.templateObject && this.templateObject.linkLoaded) {\r\n      let loaded = true;\r\n      for(let jLink of this.jLinks) {\r\n        const link = jLink[0];\r\n        const img = new Image();\r\n        img.onerror = ()=> this.templateObject.linkLoaded(link);\r\n        img.src = link.href;\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor(parentContainer, onLoad, template={}) {\r\n    this.pendings = {};\r\n    this.binds = {\r\n      onResize: this.onResize.bind(this)\r\n    };\r\n    this.parentContainer = $(parentContainer);\r\n    this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    this.parentContainer.html('<iframe style=\"border: 0;'+(this.isIOS? '': ' width: 100%; height: 100%')+'\" scrolling=\"no\"></iframe>');\r\n\r\n    this.frame = this.parentContainer.find('iframe')[0];\r\n    if(this.frame.contentWindow.stop) {\r\n      this.frame.contentWindow.stop();\r\n    }\r\n    if(this.isIOS) {\r\n      $(this.parentContainer[0].ownerDocument.defaultView).on('resize', this.binds.onResize);\r\n      this.onResize();\r\n      setTimeout(this.checkIframeSize.bind(this), 250);\r\n    }\r\n\r\n    this.container = $(this.frame.contentDocument.body);\r\n    this.container.css('margin', '0');\r\n    this.head = $(this.frame.contentDocument.head);\r\n    this.onLoad = onLoad;\r\n    this.handlers = [];\r\n\r\n    const script = template.html? template.script: this.getTemplate().script;\r\n    const urls = {\r\n      styles: template.styles || this.getTemplate().styles,\r\n      html: [template.html || this.getTemplate().html],\r\n      script: script? [script]: []\r\n    }, files = {}, links = template.links || this.getTemplate().links;\r\n\r\n    this.loadFiles(urls, files).then(()=> {\r\n      for(let style of files.styles) {\r\n        let textCss = style.data, url = style.url;\r\n        textCss = textCss.replace(/url\\(['\"](.*?)[\"']\\)/g, (r, r1)=> {\r\n          return ['url(', this.urlResolver(url, r1), ')'].join('');\r\n        });\r\n        $(`<style type=\"text/css\">${textCss}</style>`).appendTo(this.head);\r\n      }\r\n\r\n      this.container.html(this.translate(files.html[0].data));\r\n\r\n      this.jLinks = [];\r\n      for(let link of links) {\r\n        this.jLinks.push($(['<link ', this.objToAttrsStr(link), '>'].join('')).appendTo(this.head));\r\n      }\r\n\r\n      if(files.script[0]) {\r\n        const init = eval(files.script[0].data);\r\n        this.templateObject = init(this.container);\r\n      }\r\n      else {\r\n        this.templateObject = {};\r\n      }\r\n\r\n      this.linkControls = {};\r\n      for(let id of this.getLinks()) {\r\n        this.linkControls[id] = this.container.find('.'+id);\r\n        this.binds[id] = View.handleLinkEvent.bind({getHandlers: this.getHandlers.bind(this), id, ctrl: this.linkControls[id]});\r\n        this.linkControls[id].on('click', this.binds[id]);\r\n      }\r\n\r\n      this.widgetControls = {};\r\n      for(let id of this.getWidgets()) {\r\n        this.widgetControls[id] = this.container.find('.'+id);\r\n      }\r\n\r\n      this.inputControls = {};\r\n      for(let id of this.getInputs()) {\r\n        this.inputControls[id] = this.container.find('.'+id);\r\n        this.binds[id] = View.handleInputEvent.bind({getHandlers: this.getHandlers.bind(this), id, ctrl: this.inputControls[id]});\r\n        this.inputControls[id].on('keyup', this.binds[id]);\r\n      }\r\n\r\n      this.formControls = {};\r\n      for(let id of this.getForms()) {\r\n        this.formControls[id] = this.container.find('.'+id);\r\n        this.binds[id] = View.handleFormEvent.bind({getHandlers: this.getHandlers.bind(this), id, ctrl: this.formControls[id]});\r\n        this.formControls[id].on('submit', this.binds[id]);\r\n      }\r\n\r\n      this.textControls = {};\r\n      for(let id of this.getTexts()) {\r\n        this.textControls[id] = this.container.find('.'+id);\r\n      }\r\n\r\n      this.stateSetters = [\r\n        {\r\n          map: this.linkControls,\r\n          setter: this.setLinkControlState.bind(this)\r\n        },\r\n        {\r\n          map: this.widgetControls,\r\n          setter: this.setWidgetControlState.bind(this)\r\n        },\r\n        {\r\n          map: this.inputControls,\r\n          setter: this.setInputControlState.bind(this)\r\n        },\r\n        {\r\n          map: this.textControls,\r\n          setter: this.setTextControlState.bind(this)\r\n        }\r\n      ];\r\n\r\n      this.initView();\r\n\r\n      if(this.onLoad) {\r\n        this.onLoad();\r\n      }\r\n\r\n      this.fireLinksOnLoadEvent();\r\n    }).\r\n    catch((res)=> console.error(res));\r\n  }\r\n\r\n  dispose() {\r\n    delete this.textControls;\r\n    for(let id of this.getLinks()) {\r\n      this.linkControls[id].off('click', this.binds[id]);\r\n    }\r\n    delete this.linkControls;\r\n    delete this.widgetControls;\r\n    for(let id of this.getInputs()) {\r\n      this.inputControls[id].off('keyup', this.binds[id]);\r\n    }\r\n    delete this.inputControls;\r\n    for(let id of this.getForms()) {\r\n      this.formControls[id].off('submit', this.binds[id]);\r\n    }\r\n    delete this.formControls;\r\n\r\n    !this.templateObject.dispose || this.templateObject.dispose();\r\n    delete this.templateObject;\r\n\r\n    if(this.isIOS) {\r\n      $(this.parentContainer[0].ownerDocument.defaultView).off('resize', this.binds.onResize);\r\n    }\r\n    this.parentContainer.html('');\r\n    delete this.frame;\r\n  }\r\n\r\n  getContainer() {\r\n    return this.container[0];\r\n  }\r\n\r\n  getParentContainer() {\r\n    return this.parentContainer[0];\r\n  }\r\n\r\n  addHandler(handler) {\r\n    this.handlers.push(handler);\r\n  }\r\n\r\n  initView() {\r\n\r\n  }\r\n\r\n  static setControlState(ctrl, defaults, state, stateHandlers) {\r\n    if(ctrl) {\r\n      const st = {\r\n        ...defaults,\r\n        ...state\r\n      };\r\n      for(let name in st) {\r\n        if(st.hasOwnProperty(name) && stateHandlers[name]) {\r\n          stateHandlers[name](ctrl, st[name]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setLinkControlState(id, state) {\r\n    View.setControlState(\r\n      this.linkControls[id],\r\n      {\r\n        visible: true,\r\n        active: false,\r\n        enable: true\r\n      },\r\n      state,\r\n      View.linkStateHandlers\r\n    );\r\n  }\r\n\r\n  setWidgetControlState(id, state) {\r\n    View.setControlState(\r\n      this.widgetControls[id],\r\n      {\r\n        visible: true,\r\n        active: false,\r\n        enable: true\r\n      },\r\n      state,\r\n      View.widgetStateHandlers\r\n    );\r\n  }\r\n\r\n  setInputControlState(id, state) {\r\n    View.setControlState(\r\n      this.inputControls[id],\r\n      {\r\n        visible: true,\r\n        enable: true,\r\n        value: ''\r\n      },\r\n      state,\r\n      View.inputStateHandlers\r\n    );\r\n  }\r\n\r\n  setTextControlState(id, state) {\r\n    View.setControlState(\r\n      this.textControls[id],\r\n      {\r\n        visible: true,\r\n        value: ''\r\n      },\r\n      state,\r\n      View.textStateHandlers\r\n    );\r\n  }\r\n\r\n  onItemStateChanged() {\r\n\r\n  }\r\n\r\n  setState(id, state) {\r\n    for(let item of this.stateSetters) {\r\n      if(item.map[id]) {\r\n        item.setter(id, state);\r\n        this.onItemStateChanged(id, state);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/View.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/View.js","import {$, THREE} from '../libs';\r\nimport Orbit from './Orbit';\r\nimport ThreeMouseEventConverter from './ThreeMouseEventConverter';\r\nimport ThreeTouchEventConverter from './ThreeTouchEventConverter';\r\nimport Drag from './Drag';\r\nimport CSS3DRenderer from './CSS3DRenderer';\r\n\r\nexport default class VisualWorld extends THREE.EventDispatcher {\r\n\r\n  constructor(wnd, doc, container, useHelpers=false) {\r\n    super();\r\n    this.wnd = wnd;\r\n    this.doc = doc;\r\n    this.jContainer = container;\r\n    this.renderCallbacks = [];\r\n\r\n    this.clock = new THREE.Clock();\r\n\r\n    this.raycaster = new THREE.Raycaster();\r\n\r\n    this.scene = new THREE.Scene();\r\n    this.cssScene = new THREE.Scene();\r\n\r\n    this.camera = new THREE.PerspectiveCamera(30, this.width()/this.height(), 0.2, 2000);\r\n    const scale = 1;\r\n\r\n    this.camera.position.x = 0;\r\n    this.camera.position.y = 5.5*scale;\r\n    this.camera.position.z = 0;\r\n\r\n    this.renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});\r\n    this.renderer.setClearColor(0x000000, 0);\r\n    this.renderer.setPixelRatio(this.wnd.devicePixelRatio);\r\n    this.renderer.setSize(this.width(), this.height());\r\n\r\n    this.jContainer.append(this.renderer.domElement);\r\n\r\n    this.cssRenderer\t= new CSS3DRenderer();\r\n    this.cssRenderer.setSize(this.width(), this.height());\r\n    $(this.cssRenderer.domElement).css({\r\n  \t\tposition: 'absolute',\r\n  \t\ttop: 0,\r\n  \t\tmargin: 0,\r\n  \t\tpadding: 0\r\n\t  });\r\n    this.jContainer.append(this.cssRenderer.domElement);\r\n\r\n    this.element = this.cssRenderer.domElement;\r\n\r\n\r\n\r\n    this.controls = new Orbit(this.camera, this.element);\r\n    this.controls.target.y = 0.5;\r\n\r\n    const cssScene = $(this.cssRenderer.domElement).find('div'), tmpVector = new THREE.Vector3();\r\n    this.controls.addEventListener('change', ()=> {\r\n      this.camera.getWorldDirection(tmpVector);\r\n      cssScene.css('display', tmpVector.y-this.camera.position.y>0? 'none': 'block');\r\n    });\r\n\r\n    this.textureLoader = new THREE.TextureLoader();\r\n\r\n    this.scene.add(new THREE.AmbientLight(0xD0D0D0));//0xC0C0C0\r\n\r\n    this.light = new THREE.DirectionalLight(0x404040, 1);\r\n    this.light.position.set(0, 6*scale, 0);\r\n    this.light.castShadow = false;\r\n    // const d = 20*scale;\r\n    // this.light.shadow.camera.left = -d;\r\n    // this.light.shadow.camera.right = d;\r\n    // this.light.shadow.camera.top = d;\r\n    // this.light.shadow.camera.bottom = -d;\r\n    // this.light.shadow.camera.near = 1*scale;\r\n    // this.light.shadow.camera.far = 25*scale;\r\n    // this.light.shadow.mapSize.x = 1024;\r\n    // this.light.shadow.mapSize.y = 1024;\r\n    this.scene.add(this.light);\r\n\r\n    if(useHelpers) {\r\n      this.scene.add(new THREE.AxisHelper(5));\r\n    }\r\n\r\n    this.binds = {\r\n      onWindowResize: this.onWindowResize.bind(this),\r\n      animate: this.animate.bind(this)\r\n    };\r\n\r\n    $(this.wnd).on('resize', this.binds.onWindowResize);\r\n\r\n    this.mouseEvents = new ThreeMouseEventConverter(this.wnd, this.doc, this);\r\n    this.touchEvents = new ThreeTouchEventConverter(this.wnd, this.doc, this);\r\n    const filterData = {type: 'mousemove'};\r\n    this.mouseEvents.filter = (element, e)=> {\r\n      const types = ['mouseenter', 'mouseover', 'mouseleave', 'mouseout'], contains = (p, c)=> p===c || $.contains(p, c);\r\n      if(e.type==='mousemove') {\r\n        filterData.pageX = e.pageX;\r\n        filterData.pageY = e.pageY;\r\n      }\r\n      return e.relatedTarget && ~types.indexOf(e.type) && contains(element, e.target) && contains(element, e.relatedTarget)? {...e, ...filterData}: e;\r\n    };\r\n    this.drag = new Drag(this.wnd, this.doc, this);\r\n\r\n    this.animate();\r\n  }\r\n\r\n  dispose() {\r\n    delete this.binds.animate;\r\n    $(this.wnd).off('resize', this.binds.onWindowResize);\r\n    this.mouseEvents.dispose();\r\n    this.touchEvents.dispose();\r\n    this.drag.dispose();\r\n    this.controls.dispose();\r\n  }\r\n\r\n  width() {\r\n    return this.jContainer.width();\r\n  }\r\n\r\n  height() {\r\n    return this.jContainer.height();\r\n  }\r\n\r\n  setExtraLighting(v) {\r\n    this.light.intensity = v;\r\n  }\r\n\r\n  getOrbit() {\r\n    return this.controls;\r\n  }\r\n\r\n  setControlsState(state) {\r\n    this.controls.enabled = state;\r\n  }\r\n\r\n  getControlsState() {\r\n    return this.controls.enabled;\r\n  }\r\n\r\n  onWindowResize() {\r\n    const updateCamera = (camera)=> {\r\n      camera.aspect = this.width()/this.height();\r\n      camera.updateProjectionMatrix();\r\n    },\r\n    updateRenderer = (renderer)=> {\r\n      renderer.setSize(this.width(), this.height());\r\n    };\r\n\r\n    updateCamera(this.camera);\r\n    updateRenderer(this.renderer);\r\n    updateRenderer(this.cssRenderer);\r\n\r\n    this.dispatchEvent({type: 'resize'});\r\n  }\r\n\r\n  addObject(object) {\r\n    this.scene.add(object);\r\n  }\r\n\r\n  addCssObject(object) {\r\n    this.cssScene.add(object);\r\n  }\r\n\r\n  removeCssObject(object) {\r\n    this.cssScene.remove(object);\r\n  }\r\n\r\n  removeObject(object) {\r\n    this.scene.remove(object);\r\n  }\r\n\r\n  animate() {\r\n    if(this.binds.animate) {\r\n      requestAnimationFrame(this.binds.animate);\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  addRenderCallback(clb) {\r\n    this.renderCallbacks.push(clb);\r\n  }\r\n\r\n  removeRenderCallback(clb) {\r\n    const i = this.renderCallbacks.indexOf(clb);\r\n    if(~i) {\r\n      this.renderCallbacks.splice(i, 1);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const deltaTime = this.clock.getDelta();\r\n    this.controls.update(deltaTime);\r\n    for(let clb of this.renderCallbacks) {\r\n      clb(deltaTime);\r\n    }\r\n    this.cssRenderer.render(this.cssScene, this.camera);\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n\r\n  processGeometry(bufGeometry, mesh) {\r\n    mesh.geometry = bufGeometry;\r\n    // Obtain a Geometry\r\n    const geometry = new THREE.Geometry().fromBufferGeometry(bufGeometry);\r\n    // Merge the vertices so the triangle soup is converted to indexed triangles\r\n    geometry.mergeVertices();\r\n    // Convert again to BufferGeometry, indexed\r\n    const indexedBufferGeom = this.createIndexedBufferGeometryFromGeometry(geometry);\r\n    // Create index arrays mapping the indexed vertices to bufGeometry vertices\r\n    return this.mapIndices(bufGeometry, indexedBufferGeom);\r\n  }\r\n\r\n  createIndexedBufferGeometryFromGeometry(geometry) {\r\n    const numVertices = geometry.vertices.length;\r\n    const numFaces = geometry.faces.length;\r\n\r\n    const bufferGeom = new THREE.BufferGeometry();\r\n    const vertices = new Float32Array(numVertices * 3);\r\n    const indices = new (numFaces * 3 > 65535 ? Uint32Array : Uint16Array)(numFaces * 3);\r\n\r\n    for(let i = 0; i < numVertices; i++) {\r\n      const p = geometry.vertices[i];\r\n      const i3 = i * 3;\r\n      vertices[i3] = p.x;\r\n      vertices[i3 + 1] = p.y;\r\n      vertices[i3 + 2] = p.z;\r\n    }\r\n\r\n    for(let i = 0; i < numFaces; i++) {\r\n      const f = geometry.faces[i];\r\n      const i3 = i * 3;\r\n      indices[i3] = f.a;\r\n      indices[i3 + 1] = f.b;\r\n      indices[i3 + 2] = f.c;\r\n    }\r\n\r\n    bufferGeom.setIndex(new THREE.BufferAttribute(indices, 1));\r\n    bufferGeom.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n\r\n    return bufferGeom;\r\n  }\r\n\r\n  isEqual(x1, y1, z1, x2, y2, z2) {\r\n    const delta = 0.000001;\r\n    return Math.abs(x2 - x1) < delta &&\r\n    Math.abs(y2 - y1) < delta &&\r\n    Math.abs(z2 - z1) < delta;\r\n  }\r\n\r\n  mapIndices(bufGeometry, indexedBufferGeom) {\r\n    // Creates mappedVertices, mappedIndices and mappedAssociation in bufGeometry\r\n    const vertices = bufGeometry.attributes.position.array;\r\n    const idxVertices = indexedBufferGeom.attributes.position.array;\r\n    const indices = indexedBufferGeom.index.array;\r\n\r\n    const numIdxVertices = idxVertices.length / 3;\r\n    const numVertices = vertices.length / 3;\r\n\r\n    bufGeometry.mappedVertices = idxVertices;\r\n    bufGeometry.mappedIndices = indices;\r\n    bufGeometry.mappedAssociation = [];\r\n\r\n    for(let i = 0; i < numIdxVertices; i++) {\r\n      const association = [];\r\n      bufGeometry.mappedAssociation.push(association);\r\n      const i3 = i * 3;\r\n      for(let j = 0; j < numVertices; j++) {\r\n        const j3 = j * 3;\r\n        if (this.isEqual(idxVertices[i3], idxVertices[i3 + 1], idxVertices[i3 + 2],\r\n        vertices[j3], vertices[j3 + 1], vertices[j3 + 2])) {\r\n          association.push(j3);\r\n        }\r\n      }\r\n    }\r\n    return {vertices: bufGeometry.mappedVertices, indices: bufGeometry.mappedIndices};\r\n  }\r\n\r\n  oneNodePositionCallback(p, q) {\r\n    this.position.set(p.x, p.y, p.z);\r\n    this.quaternion.set(q.x, q.y, q.z, q.w);\r\n  }\r\n\r\n  multyNodePositionCallback(node, p, n) {\r\n    const geometry = this.geometry;\r\n    const volumePositions = geometry.attributes.position.array;\r\n    const volumeNormals = geometry.attributes.normal.array;\r\n    const assocVertex = geometry.mappedAssociation[node];\r\n\r\n    for(let k = 0; k < assocVertex.length; k++) {\r\n        let indexVertex = assocVertex[k];\r\n        volumePositions[indexVertex] = p.x;\r\n        volumeNormals[indexVertex] = n.x;\r\n        ++indexVertex;\r\n        volumePositions[indexVertex] = p.y;\r\n        volumeNormals[indexVertex] = n.y;\r\n        ++indexVertex;\r\n        volumePositions[indexVertex] = p.z;\r\n        volumeNormals[indexVertex] = n.z;\r\n    }\r\n  }\r\n\r\n  multyNodePositionPostCallback() {\r\n    const geometry = this.geometry;\r\n    geometry.attributes.position.needsUpdate = true;\r\n    geometry.attributes.normal.needsUpdate = true;\r\n  }\r\n\r\n  pathPositionCallback(node, p) {\r\n    const positions = this.geometry.attributes.position.array;\r\n\t\tlet i = 3 * node;\r\n\t\tpositions[i++] = p.x;\r\n\t\tpositions[i++] = p.y;\r\n\t\tpositions[i] = p.z;\r\n  }\r\n\r\n  pathPositionPostCallback() {\r\n    const geometry = this.geometry;\r\n    geometry.computeVertexNormals();\r\n    geometry.attributes.position.needsUpdate = true;\r\n    geometry.attributes.normal.needsUpdate = true;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/VisualWorld.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/VisualWorld.js","import Controller from './Controller';\r\n\r\nexport default class WidgetController extends Controller {\r\n\r\n  constructor(view) {\r\n    super();\r\n    this.view = view;\r\n    this.visible = false;\r\n  }\r\n\r\n  togle() {\r\n    this.visible = !this.visible;\r\n    this.fireChange();\r\n  }\r\n\r\n  hide() {\r\n    this.visible = false;\r\n    this.fireChange();\r\n  }\r\n\r\n  fireChange() {\r\n    if(this.onChange) {\r\n      this.onChange();\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  updateView() {\r\n    if(this.view) {\r\n      this.view.setState('widFloatWnd', {\r\n        enable: true,\r\n        visible: this.visible,\r\n        active: false\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/WidgetController.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/WidgetController.js","import Target from './Target';\r\n\r\nexport default class CircleTarget extends Target {\r\n\r\n  constructor(x, y, r) {\r\n    super();\r\n    this.p = {\r\n      x,\r\n      y,\r\n      r\r\n    };\r\n  }\r\n\r\n  testIntersection(e, data) {\r\n    let res;\r\n    const {x, y} = data, p = this.p;\r\n    if((x-p.x)*(x-p.x)+(y-p.y)*(y-p.y)<=p.r*p.r) {\r\n      res = {\r\n        target: this,\r\n        data\r\n      };\r\n    }\r\n    return res;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/targets/CircleTarget.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/targets/CircleTarget.js","import Target from './Target';\r\nimport BaseMathUtils from '../BaseMathUtils';\r\n\r\nexport default class PolyTarget extends Target {\r\n\r\n  constructor(poly) {\r\n    super();\r\n    this.poly = poly;\r\n  }\r\n\r\n  testIntersection(e, p) {\r\n    return BaseMathUtils.isInsidePoly(this.poly, p)? {\r\n      target: this,\r\n      data: p\r\n    }: undefined;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./../common/classes/targets/PolyTarget.js\n\n\n// WEBPACK FOOTER //\n// webpack:///common/classes/targets/PolyTarget.js","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/stats.js/build/stats.min.js\n// module id = 70\n// module chunks = 0\n\n\n// WEBPACK FOOTER //\n// webpack:///~/stats.js/build/stats.min.js","/*** IMPORTS FROM imports-loader ***/\nvar define = false;\n\n/*!\n * jQuery Mousewheel 3.1.13\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n */\n\n(function (factory) {\n    if ( typeof define === 'function' && define.amd ) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n\n    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?\n                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n        slice  = Array.prototype.slice,\n        nullLowestDeltaTimeout, lowestDelta;\n\n    if ( $.event.fixHooks ) {\n        for ( var i = toFix.length; i; ) {\n            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;\n        }\n    }\n\n    var special = $.event.special.mousewheel = {\n        version: '3.1.12',\n\n        setup: function() {\n            if ( this.addEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.addEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = handler;\n            }\n            // Store the line height and page height for this particular element\n            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n        },\n\n        teardown: function() {\n            if ( this.removeEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.removeEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = null;\n            }\n            // Clean up the data we added to the element\n            $.removeData(this, 'mousewheel-line-height');\n            $.removeData(this, 'mousewheel-page-height');\n        },\n\n        getLineHeight: function(elem) {\n            var $elem = $(elem),\n                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n            if (!$parent.length) {\n                $parent = $('body');\n            }\n            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n        },\n\n        getPageHeight: function(elem) {\n            return $(elem).height();\n        },\n\n        settings: {\n            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below\n            normalizeOffset: true  // calls getBoundingClientRect for each event\n        }\n    };\n\n    $.fn.extend({\n        mousewheel: function(fn) {\n            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n        },\n\n        unmousewheel: function(fn) {\n            return this.unbind('mousewheel', fn);\n        }\n    });\n\n\n    function handler(event) {\n        var orgEvent   = event || window.event,\n            args       = slice.call(arguments, 1),\n            delta      = 0,\n            deltaX     = 0,\n            deltaY     = 0,\n            absDelta   = 0,\n            offsetX    = 0,\n            offsetY    = 0;\n        event = $.event.fix(orgEvent);\n        event.type = 'mousewheel';\n\n        // Old school scrollwheel delta\n        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }\n        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }\n        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }\n        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }\n\n        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n            deltaX = deltaY * -1;\n            deltaY = 0;\n        }\n\n        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        // New school wheel delta (wheel event)\n        if ( 'deltaY' in orgEvent ) {\n            deltaY = orgEvent.deltaY * -1;\n            delta  = deltaY;\n        }\n        if ( 'deltaX' in orgEvent ) {\n            deltaX = orgEvent.deltaX;\n            if ( deltaY === 0 ) { delta  = deltaX * -1; }\n        }\n\n        // No change actually happened, no reason to go any further\n        if ( deltaY === 0 && deltaX === 0 ) { return; }\n\n        // Need to convert lines and pages to pixels if we aren't already in pixels\n        // There are three delta modes:\n        //   * deltaMode 0 is by pixels, nothing to do\n        //   * deltaMode 1 is by lines\n        //   * deltaMode 2 is by pages\n        if ( orgEvent.deltaMode === 1 ) {\n            var lineHeight = $.data(this, 'mousewheel-line-height');\n            delta  *= lineHeight;\n            deltaY *= lineHeight;\n            deltaX *= lineHeight;\n        } else if ( orgEvent.deltaMode === 2 ) {\n            var pageHeight = $.data(this, 'mousewheel-page-height');\n            delta  *= pageHeight;\n            deltaY *= pageHeight;\n            deltaX *= pageHeight;\n        }\n\n        // Store lowest absolute delta to normalize the delta values\n        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n        if ( !lowestDelta || absDelta < lowestDelta ) {\n            lowestDelta = absDelta;\n\n            // Adjust older deltas if necessary\n            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                lowestDelta /= 40;\n            }\n        }\n\n        // Adjust older deltas if necessary\n        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n            // Divide all the things by 40!\n            delta  /= 40;\n            deltaX /= 40;\n            deltaY /= 40;\n        }\n\n        // Get a whole, normalized value for the deltas\n        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);\n        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);\n        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);\n\n        // Normalise offsetX and offsetY properties\n        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {\n            var boundingRect = this.getBoundingClientRect();\n            offsetX = event.clientX - boundingRect.left;\n            offsetY = event.clientY - boundingRect.top;\n        }\n\n        // Add information to the event object\n        event.deltaX = deltaX;\n        event.deltaY = deltaY;\n        event.deltaFactor = lowestDelta;\n        event.offsetX = offsetX;\n        event.offsetY = offsetY;\n        // Go ahead and set deltaMode to 0 since we converted to pixels\n        // Although this is a little odd since we overwrite the deltaX/Y\n        // properties with normalized deltas.\n        event.deltaMode = 0;\n\n        // Add event and delta to the front of the arguments\n        args.unshift(event, delta, deltaX, deltaY);\n\n        // Clearout lowestDelta after sometime to better\n        // handle multiple device types that give different\n        // a different lowestDelta\n        // Ex: trackpad = 3 and mouse wheel = 120\n        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }\n        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n\n        return ($.event.dispatch || $.event.handle).apply(this, args);\n    }\n\n    function nullLowestDelta() {\n        lowestDelta = null;\n    }\n\n    function shouldAdjustOldDeltas(orgEvent, absDelta) {\n        // If this is an older event and the delta is divisable by 120,\n        // then we are assuming that the browser is treating this as an\n        // older mouse wheel event and that we should divide the deltas\n        // by 40 to try and get a more usable deltaFactor.\n        // Side note, this actually impacts the reported scroll distance\n        // in older browsers and can cause scrolling to be slower than native.\n        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n    }\n\n}));\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../common/~/imports-loader?define=>false!./~/jquery-mousewheel/jquery.mousewheel.js\n// module id = 71\n// module chunks = 0\n\n\n// WEBPACK FOOTER //\n// webpack:///~/jquery-mousewheel/jquery.mousewheel.js","const _$ = GLOBAL_LIBS.jQuery? window.jQuery: require('jquery'),\r\n      _html2canvas = GLOBAL_LIBS.html2canvas? window.html2canvas: require('html2canvas'),\r\n      _THREE = GLOBAL_LIBS.THREE? window.THREE: require('three'),\r\n      _PDFJS = GLOBAL_LIBS.PDFJS? window.PDFJS: require('pdfjs');\r\n\r\nexport {\r\n  _$ as $,\r\n  _html2canvas as html2canvas,\r\n  _THREE as THREE,\r\n  _PDFJS as PDFJS\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs.js"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}